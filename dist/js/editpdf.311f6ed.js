!function(n){var i={};function o(t){var e;return(i[t]||(e=i[t]={i:t,l:!1,exports:{}},n[t].call(e.exports,e,e.exports,o),e.l=!0,e)).exports}o.m=n,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=466)}([function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return r}),n.d(e,"d",function(){return a}),n.d(e,"f",function(){return s}),n.d(e,"c",function(){return l}),n.d(e,"e",function(){return c});var i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var r=function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function a(t,e){var n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&i>=t.length?void 0:t)&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}},function(e,t,n){!function(t){e.exports=t.jQuery=n(83)}.call(this,n(31))},function(t,e,n){"use strict";function i(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return v(t,Error)}}function o(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function r(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function a(t){return"[object DOMException]"===Object.prototype.toString.call(t)}function s(t){return"[object String]"===Object.prototype.toString.call(t)}function l(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function c(t){return"[object Object]"===Object.prototype.toString.call(t)}function u(t){return"undefined"!=typeof Event&&v(t,Event)}function d(t){return"undefined"!=typeof Element&&v(t,Element)}function p(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function h(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function f(t){return c(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function v(t,e){try{return t instanceof e}catch(t){return!1}}n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"k",function(){return s}),n.d(e,"i",function(){return l}),n.d(e,"h",function(){return c}),n.d(e,"f",function(){return u}),n.d(e,"c",function(){return d}),n.d(e,"j",function(){return p}),n.d(e,"m",function(){return h}),n.d(e,"l",function(){return f}),n.d(e,"g",function(){return v})},function(t,h,f){"use strict";!function(t){f.d(h,"e",function(){return r}),f.d(h,"i",function(){return i}),f.d(h,"h",function(){return o}),f.d(h,"d",function(){return a}),f.d(h,"c",function(){return s}),f.d(h,"b",function(){return l}),f.d(h,"a",function(){return c}),f.d(h,"f",function(){return u}),f.d(h,"g",function(){return p});var e=f(39),n=(f(23),{});function r(){return Object(e.b)()?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:n}function i(){var t,e=r(),e=e.crypto||e.msCrypto;return void 0!==e&&e.getRandomValues?(t=new Uint16Array(8),e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768,(e=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e})(t[0])+e(t[1])+e(t[2])+e(t[3])+e(t[4])+e(t[5])+e(t[6])+e(t[7])):"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function o(t){var e,n;return(t=t&&t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/))?(e=t[6]||"",n=t[8]||"",{host:t[4],path:t[5],protocol:t[2],relative:t[5]+e+n}):{}}function a(t){var e;return t.message||(t.exception&&t.exception.values&&t.exception.values[0]?(e=t.exception.values[0]).type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>":t.event_id||"<unknown>")}function s(t){var e,n,i,o=r();return"console"in o?(e=o.console,n={},["debug","info","warn","error","log","assert"].forEach(function(t){t in o.console&&e[t].__sentry_original__&&(n[t]=e[t],e[t]=e[t].__sentry_original__)}),i=t(),Object.keys(n).forEach(function(t){e[t]=n[t]}),i):t()}function l(t,e,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||n||"Error"}function c(e,n){void 0===n&&(n={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(n).forEach(function(t){e.exception.values[0].mechanism[t]=n[t]})}catch(t){}}function u(){try{return document.location.href}catch(t){return""}}var d=6e4;function p(t,e){var n;return e?(n=parseInt(""+e,10),isNaN(n)?(e=Date.parse(""+e),isNaN(e)?d:e-t):1e3*n):d}}.call(this,f(31))},,function(t,m,y){"use strict";!function(n){y.d(m,"c",function(){return t}),y.d(m,"f",function(){return e}),y.d(m,"e",function(){return s}),y.d(m,"d",function(){return f}),y.d(m,"b",function(){return v}),y.d(m,"a",function(){return g});var l=y(0),a=y(40),c=y(2),u=y(72),i=y(19),r=y(23);function t(t,e,n){if(e in t){var i=t[e],n=n(i);if("function"==typeof n)try{n.prototype=n.prototype||{},Object.defineProperties(n,{__sentry_original__:{enumerable:!1,value:i}})}catch(t){}t[e]=n}}function e(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function d(t){if(Object(c.d)(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}if(Object(c.f)(t)){var i,o=t,r={};r.type=o.type;try{r.target=Object(c.c)(o.target)?Object(a.a)(o.target):Object.prototype.toString.call(o.target)}catch(t){r.target="<unknown>"}try{r.currentTarget=Object(c.c)(o.currentTarget)?Object(a.a)(o.currentTarget):Object.prototype.toString.call(o.currentTarget)}catch(t){r.currentTarget="<unknown>"}for(i in"undefined"!=typeof CustomEvent&&Object(c.g)(t,CustomEvent)&&(r.detail=o.detail),o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o);return r}return t}function o(t){return t=JSON.stringify(t),~-encodeURI(t).split(/%..|./).length}function s(t,e,n){void 0===n&&(n=102400);var i=f(t,e=void 0===e?3:e);return o(i)>n?s(t,e-1,n):i}function p(t,e){return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":void 0!==n&&t===n?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":Object(c.l)(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+Object(i.a)(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t}function h(t,e,n,i){if(void 0===n&&(n=1/0),void 0===i&&(i=new u.a),0===n)return r=e,o=Object.prototype.toString.call(r),"string"==typeof r?r:"[object Object]"===o?"[Object]":"[object Array]"===o?"[Array]":(r=p(r),Object(c.i)(r)?r:o);var o;if(null!=e&&"function"==typeof e.toJSON)return e.toJSON();var r=p(e,t);if(Object(c.i)(r))return r;var a,s=d(e),l=Array.isArray(e)?[]:{};if(i.memoize(e))return"[Circular ~]";for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(l[a]=h(a,s[a],n-1,i));return i.unmemoize(e),l}function f(t,n){try{return JSON.parse(JSON.stringify(t,function(t,e){return h(t,e,n)}))}catch(t){return"**non-serializable**"}}function v(t,e){void 0===e&&(e=40);var n=Object.keys(d(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return Object(r.d)(n[0],e);for(var i=n.length;0<i;i--){var o=n.slice(0,i).join(", ");if(!(o.length>e))return i===n.length?o:Object(r.d)(o,e)}return""}function g(t){var e,n;if(Object(c.h)(t)){var i=t,o={};try{for(var r=Object(l.f)(Object.keys(i)),a=r.next();!a.done;a=r.next()){var s=a.value;void 0!==i[s]&&(o[s]=g(i[s]))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return o}return Array.isArray(t)?t.map(g):t}}.call(this,y(31))},function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"d",function(){return m}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return w});var s=n(0),l=n(3),c=n(104),o=n(12),i=n(39),r=n(36),a=n(76),u=n(5),d=(p.prototype.update=function(t){(t=void 0===t?{}:t).user&&(t.user.ip_address&&(this.ipAddress=t.user.ip_address),t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||Date.now(),t.sid&&(this.sid=32===t.sid.length?t.sid:Object(l.i)()),t.did&&(this.did=""+t.did),"number"==typeof t.started&&(this.started=t.started),"number"==typeof t.duration?this.duration=t.duration:this.duration=this.timestamp-this.started,t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),t.ipAddress&&(this.ipAddress=t.ipAddress),t.userAgent&&(this.userAgent=t.userAgent),"number"==typeof t.errors&&(this.errors=t.errors),t.status&&(this.status=t.status)},p.prototype.close=function(t){t?this.update({status:t}):this.status===a.a.Ok?this.update({status:a.a.Exited}):this.update()},p.prototype.toJSON=function(){return Object(u.a)({sid:""+this.sid,init:!0,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:Object(u.a)({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},p);function p(t){this.errors=0,this.sid=Object(l.i)(),this.timestamp=Date.now(),this.started=Date.now(),this.duration=0,this.status=a.a.Ok,t&&this.update(t)}var h=3,f=(v.prototype.isOlderThan=function(t){return this._version<t},v.prototype.bindClient=function(t){(this.getStackTop().client=t)&&t.setupIntegrations&&t.setupIntegrations()},v.prototype.pushScope=function(){var t=r.a.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},v.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},v.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},v.prototype.getClient=function(){return this.getStackTop().client},v.prototype.getScope=function(){return this.getStackTop().scope},v.prototype.getStack=function(){return this._stack},v.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},v.prototype.captureException=function(t,e){var n=this._lastEventId=Object(l.i)(),i=e;if(!e){e=void 0;try{throw new Error("Sentry syntheticException")}catch(t){e=t}i={originalException:t,syntheticException:e}}return this._invokeClient("captureException",t,Object(s.a)(Object(s.a)({},i),{event_id:n})),n},v.prototype.captureMessage=function(t,e,n){var i=this._lastEventId=Object(l.i)(),o=n;if(!n){n=void 0;try{throw new Error(t)}catch(t){n=t}o={originalException:t,syntheticException:n}}return this._invokeClient("captureMessage",t,e,Object(s.a)(Object(s.a)({},o),{event_id:i})),i},v.prototype.captureEvent=function(t,e){var n=this._lastEventId=Object(l.i)();return this._invokeClient("captureEvent",t,Object(s.a)(Object(s.a)({},e),{event_id:n})),n},v.prototype.lastEventId=function(){return this._lastEventId},v.prototype.addBreadcrumb=function(t,e){var n,i,o,r=this.getStackTop(),a=r.scope,r=r.client;a&&r&&(o=(r=r.getOptions&&r.getOptions()||{}).beforeBreadcrumb,n=void 0===o?null:o,(r=void 0===(o=r.maxBreadcrumbs)?100:o)<=0||(o=Object(c.a)(),i=Object(s.a)({timestamp:o},t),null!==(o=n?Object(l.c)(function(){return n(i,e)}):i)&&a.addBreadcrumb(o,Math.min(r,100))))},v.prototype.setUser=function(t){var e=this.getScope();e&&e.setUser(t)},v.prototype.setTags=function(t){var e=this.getScope();e&&e.setTags(t)},v.prototype.setExtras=function(t){var e=this.getScope();e&&e.setExtras(t)},v.prototype.setTag=function(t,e){var n=this.getScope();n&&n.setTag(t,e)},v.prototype.setExtra=function(t,e){var n=this.getScope();n&&n.setExtra(t,e)},v.prototype.setContext=function(t,e){var n=this.getScope();n&&n.setContext(t,e)},v.prototype.configureScope=function(t){var e=this.getStackTop(),n=e.scope,e=e.client;n&&e&&t(n)},v.prototype.run=function(t){var e=m(this);try{t(this)}finally{m(e)}},v.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return o.a.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},v.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},v.prototype.startTransaction=function(t,e){return this._callExtensionMethod("startTransaction",t,e)},v.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},v.prototype.startSession=function(t){this.endSession();var e=this.getStackTop(),n=e.scope,e=e.client,e=e&&e.getOptions()||{},i=e.release,e=e.environment,i=new d(Object(s.a)(Object(s.a)({release:i,environment:e},n&&{user:n.getUser()}),t));return n&&n.setSession(i),i},v.prototype.endSession=function(){var t,e=this.getStackTop(),n=e.scope,e=e.client;n&&(t=n.getSession&&n.getSession())&&(t.close(),e&&e.captureSession&&e.captureSession(t),n.setSession())},v.prototype._invokeClient=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.getStackTop(),o=i.scope,i=i.client;i&&i[t]&&i[t].apply(i,Object(s.e)(e,[o]))},v.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=g().__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[t])return i.extensions[t].apply(this,e);o.a.warn("Extension method "+t+" couldn't be found, doing nothing.")},v);function v(t,e,n){void 0===e&&(e=new r.a),this._version=n=void 0===n?h:n,this._stack=[{}],this.getStackTop().scope=e,this.bindClient(t)}function g(){var t=Object(l.e)();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function m(t){var e=g(),n=w(e);return _(e,t),n}function y(){var e=g();if(b(e)&&!w(e).isOlderThan(h)||_(e,new f),!Object(i.b)())return w(e);try{var t,n=function(){var t=g().__SENTRY__;return t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active}();return n?(b(n)&&!w(n).isOlderThan(h)||(t=w(e).getStackTop(),_(n,new f(t.client,r.a.clone(t.scope)))),w(n)):w(e)}catch(t){return w(e)}}function b(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub}function w(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new f),t.__SENTRY__.hub}function _(t,e){t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e)}},function(t,a,s){"use strict";!function(n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},e=(Object.defineProperty(a,"__esModule",{value:!0}),a.Lang=void 0,t(s(87)));function r(){}r.t=function(t,e){var n="iloveLang";return e&&e.source&&(n=e.source),window[n]&&window[n][t]&&(t=window[n][t]),t=this.tr(t,e)},r.tr=function(n,i){return null!=i&&Object.keys(i).forEach(function(t){var e=i[t];n=(n=n.replace("${"+t+"}",e)).replace("{"+t+"}",e)}),n},r.w=function(t,e){n("."+(t=void 0===t?"translate":t)).each(function(){var t=n(this).html();n(this).html(r.t(t,e))}),n("#"+t).each(function(){var t=n(this).html();n(this).html(r.t(t,e))})},r.fontsForWritingSystem=function(t){switch(t){case"latin":return["arial","verdana","courier","comic","times-new-roman","impact","arial-unicode-ms"];case"indic":return["lohit-marathi","lohit-devanagari","arial-unicode-ms"];default:return["arial-unicode-ms"]}},r.getFontsInfo=function(){var t=window.fonts;if(t)return t;throw"[Lang Service] You have to load the fonts information from the backend to use this method"},r.loadAllFonts=function(){for(var t in window.fonts)window.fonts.hasOwnProperty(t)&&"arial"!=t&&this.loadFont(t)},r.loadFont=function(t){t in this.loadedFonts||(e.lazyloadCss("/font/"+t+".css"),this.loadedFonts[t]=!0)},r.hasHindiCharacters=function(t){return 0<t.split("").filter(function(t){t=t.charCodeAt();return 2309<=t&&t<=2361}).length},r.hasJapanCharacters=function(t){return/[\u3000-\u303f]|[\u3040-\u309f]|[\u30a0-\u30ff]|[\uff00-\uff9f]|[\u4e00-\u9faf]|[\u3400-\u4dbf]/.test(t)},r.hasChineseCharacters=function(t){return/[\u4e00-\u9fff]|[\u3400-\u4dbf]|[\uf900-\ufaff]|[\u3300-\u33ff]|[\ufe30-\ufe4f]|[\uf900-\ufaff]/.test(t)},r.hasKoreanCharacters=function(t){return/[\uac00-\uafff]|[\ub000-\ubfff]/.test(t)},r.hasArabicCharacters=function(t){return/[\u0600-\u06FF]|[\u0750-\u077F]/.test(t)},r.hasGreekCharacters=function(t){return/[\u0370-\u03FF]|[\u1F00-\u1FFF]/.test(t)},r.hasCyrillicCharacters=function(t){return/[\u0400-\u04FF]|[\u0500-\u052F]/.test(t)},r.hasCommonLatinCharacters=function(t){return!1},r.keyCodeToWritingSystem=function(t){for(var e in this.writingSystemCharacterRanges)for(var n=this.writingSystemCharacterRanges[e],i=0;i<n.length;i++){var o=n[i],r=o[0],o=o[1];if(r<=t&&t<=o)return e}return"unknown"},r.detectWritingSystems=function(t){if(0===t.length)return[];for(var e={},n=0;n<t.length;n++)e[this.keyCodeToWritingSystem(t.charCodeAt(n))]=!0;return Object.keys(e)},r.loadedFonts={},r.FALLBACK_FONT_FAMILY="arial-unicode-ms",r.writingSystemCharacterRanges={latin:[[0,127],[128,255],[256,383],[384,591],[7680,7935],[9312,9471],[11360,11391],[42784,43007],[64256,64335],[65104,65135]],indic:[[2304,2431],[43232,43263]]},a.Lang=r}.call(this,s(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IloveEvent=void 0,e.IloveEvent=function(t,e){void 0===e&&(e=null),this.name=t,this.detail=e}},function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"d",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"e",function(){return c}),n.d(e,"a",function(){return u}),n.d(e,"f",function(){return d}),n.d(e,"h",function(){return p}),n.d(e,"j",function(){return h}),n.d(e,"g",function(){return f}),n.d(e,"i",function(){return v}),n.d(e,"k",function(){return g}),n.d(e,"m",function(){return m}),n.d(e,"l",function(){return y});var o=n(0),r=n(6);function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=Object(r.b)();if(i&&i[t])return i[t].apply(i,Object(o.e)(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function i(t,e){var n;try{throw new Error("Sentry syntheticException")}catch(t){n=t}return a("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}function s(t,e){var n;try{throw new Error(t)}catch(t){n=t}var i="string"!=typeof e?{captureContext:e}:void 0;return a("captureMessage",t,"string"==typeof e?e:void 0,Object(o.a)({originalException:t,syntheticException:n},i))}function l(t){return a("captureEvent",t)}function c(t){a("configureScope",t)}function u(t){a("addBreadcrumb",t)}function d(t,e){a("setContext",t,e)}function p(t){a("setExtras",t)}function h(t){a("setTags",t)}function f(t,e){a("setExtra",t,e)}function v(t,e){a("setTag",t,e)}function g(t){a("setUser",t)}function m(t){a("withScope",t)}function y(t,e){return a("startTransaction",Object(o.a)({},t),e)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i,o={},r=(n.r(o),n.d(o,"FunctionToString",function(){return r}),n.d(o,"InboundFilters",function(){return f}),a.prototype.setupOnce=function(){i=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.__sentry_original__||this;return i.apply(n,t)}},a.id="FunctionToString",a);function a(){this.name=a.id}var s=n(0),l=n(36),c=n(6),u=n(12),d=n(3),p=n(23),h=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],f=(v.prototype.setupOnce=function(){Object(l.b)(function(t){var e=Object(c.b)();if(e){var n=e.getIntegration(v);if(n){e=e.getClient(),e=e?e.getOptions():{},e=n._mergeOptions(e);if(n._shouldDropEvent(t,e))return null}}return t})},v.prototype._shouldDropEvent=function(t,e){return this._isSentryError(t,e)?(u.a.warn("Event dropped due to being internal Sentry Error.\nEvent: "+Object(d.d)(t)),!0):this._isIgnoredError(t,e)?(u.a.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Object(d.d)(t)),!0):this._isDeniedUrl(t,e)?(u.a.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Object(d.d)(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0):!this._isAllowedUrl(t,e)&&(u.a.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Object(d.d)(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0)},v.prototype._isSentryError=function(t,e){if(!e.ignoreInternal)return!1;try{return t&&t.exception&&t.exception.values&&t.exception.values[0]&&"SentryError"===t.exception.values[0].type||!1}catch(t){return!1}},v.prototype._isIgnoredError=function(t,n){return!(!n.ignoreErrors||!n.ignoreErrors.length)&&this._getPossibleEventMessages(t).some(function(e){return n.ignoreErrors.some(function(t){return Object(p.a)(e,t)})})},v.prototype._isDeniedUrl=function(t,e){var n;return!(!e.denyUrls||!e.denyUrls.length||!(n=this._getEventFilterUrl(t)))&&e.denyUrls.some(function(t){return Object(p.a)(n,t)})},v.prototype._isAllowedUrl=function(t,e){var n;return!e.allowUrls||!e.allowUrls.length||!(n=this._getEventFilterUrl(t))||e.allowUrls.some(function(t){return Object(p.a)(n,t)})},v.prototype._mergeOptions=function(t){return void 0===t&&(t={}),{allowUrls:Object(s.e)(this._options.whitelistUrls||[],this._options.allowUrls||[],t.whitelistUrls||[],t.allowUrls||[]),denyUrls:Object(s.e)(this._options.blacklistUrls||[],this._options.denyUrls||[],t.blacklistUrls||[],t.denyUrls||[]),ignoreErrors:Object(s.e)(this._options.ignoreErrors||[],t.ignoreErrors||[],h),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},v.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,i=void 0===n?"":n,o=t.value,r=void 0===o?"":o;return[""+r,i+": "+r]}catch(t){u.a.error("Cannot extract message for event "+Object(d.d)(e))}return[]},v.prototype._getEventFilterUrl=function(e){try{var t,n;return e.stacktrace?(t=e.stacktrace.frames)&&t[t.length-1].filename||null:e.exception&&(n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames)&&n[n.length-1].filename||null}catch(t){return u.a.error("Cannot extract url for event "+Object(d.d)(e)),null}},v.id="InboundFilters",v);function v(t){this._options=t=void 0===t?{}:t,this.name=v.id}},function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"c",function(){return u}),n.d(e,"a",function(){return d});var r=n(0),a=n(9),i=n(50),s=n(3),o=n(12),l=0;function c(){return 0<l}function u(e,i,o){if(void 0===i&&(i={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}function t(){var n=Array.prototype.slice.call(arguments);try{o&&"function"==typeof o&&o.apply(this,arguments);var t=n.map(function(t){return u(t,i)});return e.handleEvent?e.handleEvent.apply(this,t):e.apply(this,t)}catch(e){throw l+=1,setTimeout(function(){--l}),Object(a.m)(function(t){t.addEventProcessor(function(t){t=Object(r.a)({},t);return i.mechanism&&(Object(s.b)(t,void 0,void 0),Object(s.a)(t,i.mechanism)),t.extra=Object(r.a)(Object(r.a)({},t.extra),{arguments:n}),t}),Object(a.c)(e)}),e}}try{for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}catch(t){}e.prototype=e.prototype||{},t.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:t}),Object.defineProperties(t,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(t,"name").configurable&&Object.defineProperty(t,"name",{get:function(){return e.name}})}catch(t){}return t}function d(t){var e;(t=void 0===t?{}:t).eventId?t.dsn?((e=document.createElement("script")).async=!0,e.src=new i.a(t.dsn).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad),(document.head||document.body).appendChild(e)):o.a.error("Missing dsn option in showReportDialog call"):o.a.error("Missing eventId option in showReportDialog call")}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(3),o=Object(i.e)(),r="Sentry Logger ",e=(a.prototype.disable=function(){this._enabled=!1},a.prototype.enable=function(){this._enabled=!0},a.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Object(i.c)(function(){o.console.log(r+"[Log]: "+t.join(" "))})},a.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Object(i.c)(function(){o.console.warn(r+"[Warn]: "+t.join(" "))})},a.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Object(i.c)(function(){o.console.error(r+"[Error]: "+t.join(" "))})},a);function a(){this._enabled=!1}o.__SENTRY__=o.__SENTRY__||{};var s=o.__SENTRY__.logger||(o.__SENTRY__.logger=new e)},function(t,e,n){"use strict";n.r(e),n.d(e,"LogLevel",function(){return i}),n.d(e,"SessionStatus",function(){return r.a}),n.d(e,"Severity",function(){return a.a}),n.d(e,"Status",function(){return s.a}),n.d(e,"TransactionSamplingMethod",function(){return o}),(e=i=i||{})[e.None=0]="None",e[e.Error=1]="Error",e[e.Debug=2]="Debug",e[e.Verbose=3]="Verbose";var i,o,r=n(76),a=n(33),s=n(58);(e=o=o||{}).Explicit="explicitly_set",e.Sampler="client_sampler",e.Rate="client_rate",e.Inheritance="inheritance"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i,o=n(2),r=((e=i=i||{}).PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED",a.resolve=function(e){return new a(function(t){t(e)})},a.reject=function(n){return new a(function(t,e){e(n)})},a.all=function(t){return new a(function(n,i){var o,r;Array.isArray(t)?0===t.length?n([]):(o=t.length,r=[],t.forEach(function(t,e){a.resolve(t).then(function(t){r[e]=t,0==--o&&n(r)}).then(null,i)})):i(new TypeError("Promise.all requires an array as input."))})},a.prototype.then=function(i,o){var t=this;return new a(function(e,n){t._attachHandler({done:!1,onfulfilled:function(t){if(i)try{e(i(t))}catch(t){n(t)}else e(t)},onrejected:function(t){if(o)try{e(o(t))}catch(t){n(t)}else n(t)}})})},a.prototype.catch=function(t){return this.then(function(t){return t},t)},a.prototype.finally=function(o){var r=this;return new a(function(t,e){var n,i;r.then(function(t){i=!1,n=t,o&&o()},function(t){i=!0,n=t,o&&o()}).then(function(){(i?e:t)(n)})})},a.prototype.toString=function(){return"[object SyncPromise]"},a);function a(t){var n=this;this._state=i.PENDING,this._handlers=[],this._resolve=function(t){n._setResult(i.RESOLVED,t)},this._reject=function(t){n._setResult(i.REJECTED,t)},this._setResult=function(t,e){n._state===i.PENDING&&(Object(o.m)(e)?e.then(n._resolve,n._reject):(n._state=t,n._value=e,n._executeHandlers()))},this._attachHandler=function(t){n._handlers=n._handlers.concat(t),n._executeHandlers()},this._executeHandlers=function(){var t;n._state!==i.PENDING&&(t=n._handlers.slice(),n._handlers=[],t.forEach(function(t){t.done||(n._state===i.RESOLVED&&t.onfulfilled&&t.onfulfilled(n._value),n._state===i.REJECTED&&t.onrejected&&t.onrejected(n._value),t.done=!0)}))};try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}},function(t,e,n){"use strict";n.r(e),n.d(e,"Severity",function(){return i.a}),n.d(e,"Status",function(){return o.a}),n.d(e,"addGlobalEventProcessor",function(){return r.b}),n.d(e,"addBreadcrumb",function(){return a.a}),n.d(e,"captureException",function(){return a.c}),n.d(e,"captureEvent",function(){return a.b}),n.d(e,"captureMessage",function(){return a.d}),n.d(e,"configureScope",function(){return a.e}),n.d(e,"getHubFromCarrier",function(){return s.c}),n.d(e,"getCurrentHub",function(){return s.b}),n.d(e,"Hub",function(){return s.a}),n.d(e,"makeMain",function(){return s.d}),n.d(e,"Scope",function(){return r.a}),n.d(e,"startTransaction",function(){return a.l}),n.d(e,"setContext",function(){return a.f}),n.d(e,"setExtra",function(){return a.g}),n.d(e,"setExtras",function(){return a.h}),n.d(e,"setTag",function(){return a.i}),n.d(e,"setTags",function(){return a.j}),n.d(e,"setUser",function(){return a.k}),n.d(e,"withScope",function(){return a.m}),n.d(e,"BrowserClient",function(){return l.a}),n.d(e,"injectReportDialog",function(){return c.a}),n.d(e,"eventFromException",function(){return u.a}),n.d(e,"eventFromMessage",function(){return u.b}),n.d(e,"defaultIntegrations",function(){return d.b}),n.d(e,"forceLoad",function(){return d.d}),n.d(e,"init",function(){return d.e}),n.d(e,"lastEventId",function(){return d.f}),n.d(e,"onLoad",function(){return d.g}),n.d(e,"showReportDialog",function(){return d.h}),n.d(e,"flush",function(){return d.c}),n.d(e,"close",function(){return d.a}),n.d(e,"wrap",function(){return d.i}),n.d(e,"SDK_NAME",function(){return p.a}),n.d(e,"SDK_VERSION",function(){return p.b}),n.d(e,"Integrations",function(){return m}),n.d(e,"Transports",function(){return g});var e=n(0),i=n(33),o=n(58),r=n(36),a=n(9),s=n(6),l=n(44),c=n(11),u=n(22),d=n(18),p=n(26),h=n(10),f=n(3),v=n(43),g=n(49),n={},f=Object(f.e)(),m=(f.Sentry&&f.Sentry.Integrations&&(n=f.Sentry.Integrations),Object(e.a)(Object(e.a)(Object(e.a)({},n),h.a),v))},function(t,n,e){"use strict";!function(o){var t=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},r=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},e=(Object.defineProperty(n,"__esModule",{value:!0}),n.UserModel=void 0,Object.defineProperty(a,"userType",{get:function(){return a.isPremium()?"premium":a.isUser()?"user":"guest"},enumerable:!1,configurable:!0}),a.isTeamManaged=function(){var t=window.userModel;return t&&null!=t.team_role&&"owner"!=t.team_role},a.hasSubscription=function(){var t=window.userModel;return"object"==typeof t&&null!=t&&null!=t.current_subscription},a.prototype.login=function(n){var i="//"+this.domain+"/"+this.loginUrl;return new Promise(function(e,t){o.post(i,n,function(t){window.ilovepdfConfig&&(window.ilovepdfConfig.fileLimits=t.user.limits,window.ilovepdfConfig.userToken=t.token),e(t)}).fail(t)})},a.prototype.register=function(n){var i="//"+this.domain+"/"+this.registerUrl;return new Promise(function(e,t){o.post(i,n,function(t){e(t)}).fail(t)})},a.prototype.sendResetPasswordEmail=function(n){var i="//"+this.domain+"/"+this.sendResetPasswordEmailUrl;return new Promise(function(e,t){o.post(i,n,function(t){e(t)}).fail(t)})},a.isLoggedIn=function(){return!!window.userModel},a.get=function(){return window.userModel},a.set=function(t){window.userModel=t},a.logout=function(){document.location.href=o(".logout").attr("href")},a.isUser=function(){var t=a.get();return"object"==typeof t&&null!=t},a.isPremium=function(){return a.isRealPremium()},a.isPremiumTemp=function(){return window.ilovepdfConfig&&"premium"==window.ilovepdfConfig.levelTemp},a.isTempPremium=function(){return a.isPremiumTemp()},a.isRealPremium=function(){var t=window.userModel;return"object"==typeof t&&null!=t&&t.premium},a.canDoTrial=function(){var t=window.userModel;return"object"==typeof t&&null!=t?t.can_trial:!!window.uct},a.refresh=function(o){return void 0===o&&(o=null),t(this,void 0,void 0,function(){var e,n,i;return r(this,function(t){switch(t.label){case 0:return[4,fetch(o?"/user/info/"+o:"/user/info")];case 1:return e=t.sent(),i=(n=JSON).parse,[4,e.json()];case 2:return e=i.apply(n,[t.sent()]),a.set(e.user),[2]}})})},a.removeAds=function(){var t=document.getElementsByClassName("add");t&&Array.from(t).forEach(function(t){t.remove()})},a.updateUser=function(t){window.userModel=t,window.ilovepdfConfig&&(window.ilovepdfConfig.user=t),1==a.isRealPremium()&&a.removeAds()},a.serviceToken=function(){var t=window.userModel;return t?t.token:null},a);function a(t){void 0===t&&(t={}),this.loginUrl="auth",this.registerUrl="signup",this.sendResetPasswordEmailUrl="login/forgetpassword",Object.assign(this,t);t="en-US"==window.lang?"":"/"+window.lang;this.domain=window.location.hostname+t}n.UserModel=e}.call(this,e(1))},function(t,o,r){"use strict";!function(i){Object.defineProperty(o,"__esModule",{value:!0}),o.Tools=void 0;var e=r(7);function n(){}n.isRtlPage=function(){var t=null!=document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir");return"rtl"==t},n.sleep=function(n){return new Promise(function(t,e){setTimeout(t,n)})},n.bytesToSize=function(t){var e;return 0==t?"0 Byte":(e=Math.floor(Math.log(t)/Math.log(1024)),(t/Math.pow(1024,e)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][e])},n.mbytesToSize=function(t){return n.bytesToSize(1e6*t)},n.convertPointsToPixels=function(t){return t*(1+1/3)},n.strCapitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},n.isRTL=function(){return i("body").hasClass("rtl")},n.isTextRTL=function(t){return new RegExp("^[^A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿]*[֑-߿יִ-﷽ﹰ-ﻼ]").test(t)},Object.defineProperty(n,"textDirection",{get:function(){return n.isRTL()?"right":"left"},enumerable:!1,configurable:!0}),n.getClosestNumber=function(t,e){for(var n=Math.abs(e[0]-t),i=0,o=1;o<e.length;o++){var r=Math.abs(e[o]-t);r<n&&(i=o,n=r)}return e[i]},n.modalView=function(t){var e='<div class="modal fade" id="'+t.id+'" aria-labelledby="'+t.id+'Modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog '+(t.size?"modal-"+t.size:"")+'" role="document"><div class="modal-content">',n='<div class="dialog__close" data-dismiss="modal" aria-label="Close"></div>';return"title"in t&&(e=e+('<div class="dialog__header"><h4 class="dialog__title">'+t.title)+"</h4>"+n+"</div>"),"content"in t?e=e+('<div class="dialog__body">'+(t.title?"":n)+t.content)+"</div>":e+='<div class="dialog__body"></div>',"btn"in t&&(e=e+('<div class="dialog__footer"><button type="button" class="btn" data-dismiss="modal">'+t.btn)+"</button></div>"),e+="</div></div></div>"},n.modalViewOk=function(t){return t.btn=e.Lang.t("Ok"),n.modalView(t)},n.dialogViewOk=function(t){return t.btn=e.Lang.t("Ok"),n.dialogView(t)},n.dialogView=function(t){var e=t.title,n=t.content,i=t.btn,o="<div>",r='<div class="dialog__close"></div>';return"title"in t&&(o=o+'<div class="dialog__header"><h4 class="dialog__title">'+e+"</h4>"+r+"</div>"),"content"in t?o=o+'<div class="dialog__body">'+(e?"":r)+n+"</div>":o+='<div class="dialog__body"></div>',"btn"in t&&(o=o+'<div class="dialog__footer"><button data-action=\'close\' type="button" class="btn">'+i+"</button></div>"),o+="</div>"},n.setInputCursorAtTheEnd=function(t){var e=t.val().length;t.focus(),t[0].setSelectionRange(e,e)},n.svgClose=function(){return n.svgRemove(12,12)},n.svgRotate=function(t,e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(t=void 0===t?14:t)+'" height="'+(e=void 0===e?16:e)+'" viewBox="0 0 14 16"><path d="M11.328 6.364l1.24-1.2c.79.98 1.283 2.113 1.433 3.288h-1.775c-.123-.735-.43-1.454-.896-2.088zm.896 3.778H14c-.15 1.175-.633 2.308-1.424 3.288l-1.24-1.2c.457-.634.765-1.344.888-2.088zm-.888 4.497C10.318 15.4 9.13 15.856 7.9 16v-1.716a5.31 5.31 0 0 0 2.162-.871l1.266 1.226zM6.152 2.595V0l4 3.846-4 3.76V4.302c-2.496.406-4.394 2.485-4.394 4.995s1.898 4.59 4.394 4.995V16C2.68 15.586 0 12.746 0 9.297s2.68-6.29 6.152-6.703z" fill="#47474F" fill-rule="evenodd"/></svg>'},n.svgRemove=function(t,e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(t=void 0===t?12:t)+'" height="'+(e=void 0===e?12:e)+'" viewBox="0 0 12 12"><polygon fill="#47474F" fill-rule="evenodd" points="12 1.208 10.79 0 6 4.792 1.21 0 0 1.208 4.79 6 0 10.792 1.21 12 6 7.208 10.79 12 12 10.792 7.21 6"/></svg>'},n.svgArrowRight=function(t,e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(t=void 0===t?12:t)+'" height="'+(e=void 0===e?12:e)+'" viewBox="0 0 448 512"><path d="M313.94 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.94v46.06c0 21.382 25.85 32.1 40.97 16.97l86.06-86.06c9.373-9.373 9.373-24.57 0-33.94l-86.06-86.06c-15.12-15.12-40.97-4.41-40.97 16.97V216z"/></svg>'},n.svgHome=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="26" height="21"><path d="M22.028 12.67v6.468a1.08 1.08 0 0 1-1.083 1.083h-5.236c-.298 0-.542-.244-.542-.542v-5.056c0-.298-.244-.542-.542-.542h-3.25c-.298 0-.542.244-.542.542v5.056c0 .298-.244.542-.542.542H5.056a1.08 1.08 0 0 1-1.083-1.083V12.67a.54.54 0 0 1 .199-.42l8.486-6.987a.55.55 0 0 1 .691 0l8.486 6.987c.122.104.194.257.194.42zm3.774-2.75l-3.774-3.1V.56c0-.298-.244-.542-.542-.542h-2.528c-.298 0-.542.244-.542.542v3.277L14.377.5c-.8-.66-1.955-.66-2.753 0L.2 9.922c-.23.2-.262.533-.072.763l1.15 1.4c.2.23.533.262.763.072l10.617-8.743a.55.55 0 0 1 .691 0l10.617 8.743c.23.2.573.158.763-.072l1.15-1.4c.2-.235.153-.573-.077-.763z"/></svg>'},n.randomId=function(){for(var t="";t.length<8;)t+=Math.random().toString(36).replace(/[^a-z]+/g,"");return t.slice(0,8)},n.uuid=function(){return Date.now()+"-"+Math.floor(Math.random()*Date.now()/100)},n.actionId=function(){return window.aid=window.aid||n.uuid(),window.aid},n.colorpicker=function(e){var t=null,t=1==i(e).data("limit")?{preferredFormat:"hex",showPaletteOnly:!0,color:"blanchedalmond",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]}:{allowEmpty:!0,showInitial:!0,preferredFormat:"hex"};1==i(e).data("input")&&(t.showInput=!0),1==i(e).data("empty")&&(t.allowEmpty=!0,1==i(e).data("limit")&&t.palette.push(["transparent"]),t.change=function(t){t=0===t._a?"transparent":t.toHexString(),i(e).val(t)}),1==i(e).data("inline")&&(t.flat=!0),1==i(e).data("aplha")&&(t.showAlpha=!0),t.clickoutFiresChange=!0;try{i(e).spectrum(t)}catch(e){}},n.isElementInView=function(t,e){return void 0===e&&(e=!1),0!=t.length&&(0==e?t.offset().top<i(window).height()&&60<t.offset().top+t.height():t.offset().top+t.height()<i(window).height()&&60<t.offset().top)},n.keepInNumericBounds=function(t,e,n){return null!==t&&n<t&&(n=t),n=null!==e&&e<n?e:n},n.scrollControl=function(e,n,i){var o=0;e.scroll(function(){var t=e.scrollTop();o<t&&"function"==typeof i&&i(),t<o&&"function"==typeof n&&n(),o=t})},n.loadingFromPreviousStart=function(){var t=i(".fromPrevious");0<=t.length||(t=i('<div class="wait fromPrevious">'+e.Lang.t("previousTaskLoading")+"</div>"),i(".main").append(t)),t.css("display","flex")},n.loadingFromPreviousFail=function(){var t="<div><p>"+e.Lang.t("previousFail")+'</p><p></p><p><button class="btn" onclick="window.history.go(-1); return false;">'+e.Lang.t("previousFailBack")+'</button> <button class="btn btn--red" id="closePrevious">'+e.Lang.t("previousFailContinue")+"</button></p></div>";i(".fromPrevious").html(t).css("background-image","none")},n.loadingFromPreviousEnd=function(){i(".fromPrevious").remove()},n.serializeFormData=function(t){var e={};try{for(var n=0,i=t.entries();n<i.length;n++){var o=i[n],r=o[0],a=o[1];e[r]=a}}catch(t){}return e={info:"form data serialize failed"}},n.parseTemplate=function(n,t,e){return void 0===e&&(e="simple"),null!=(t=void 0===t?null:t)&&("simple"==e&&i.each(t,function(t,e){n=n.replace("{"+t+"}",e)}),"dollar"==e)&&i.each(t,function(t,e){n=n.replace("${"+t+"}",e)}),n},n.isEmail=function(t){return!!/^\w+([\+\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w+)+$/.test(t)},n.getBrowserTimezone=function(){var t,e="UTC";return e=window.Intl&&window.Intl.DateTimeFormat()&&(t=window.Intl.DateTimeFormat().resolvedOptions().timeZone)?t:e},o.Tools=n}.call(this,r(1))},function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"e",function(){return c}),n.d(e,"h",function(){return v}),n.d(e,"f",function(){return g}),n.d(e,"d",function(){return m}),n.d(e,"g",function(){return y}),n.d(e,"c",function(){return b}),n.d(e,"a",function(){return w}),n.d(e,"i",function(){return _});var e=n(10),u=n(56),d=n(6),p=n(3),i=n(14),h=n(44),o=n(11),r=n(52),a=n(51),s=n(53),l=n(54),n=n(55),f=[new e.a.InboundFilters,new e.a.FunctionToString,new r.a,new a.a,new s.a,new l.a,new n.a];function c(t){var e;if(void 0===(t=void 0===t?{}:t).defaultIntegrations&&(t.defaultIntegrations=f),void 0===t.release&&(e=Object(p.e)()).SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id),void 0===t.autoSessionTracking&&(t.autoSessionTracking=!1),Object(u.a)(h.a,t),t.autoSessionTracking){function n(){s&&a&&r.endSession()}function i(){a=!0,n(),o.removeEventListener("load",i)}var o=Object(p.e)(),r=Object(d.b)(),a="complete"===document.readyState,s=!1;r.startSession(),a||o.addEventListener("load",i);try{var l=new PerformanceObserver(function(t,e){t.getEntries().forEach(function(t){"first-contentful-paint"===t.name&&t.startTime<c&&(e.disconnect(),s=!0,n())})}),c="hidden"===document.visibilityState?0:1/0;document.addEventListener("visibilitychange",function(t){c=Math.min(c,t.timeStamp)},{once:!0}),l.observe({type:"paint",buffered:!0})}catch(t){s=!0,n()}}}function v(t){(t=void 0===t?{}:t).eventId||(t.eventId=Object(d.b)().lastEventId());var e=Object(d.b)().getClient();e&&e.showReportDialog(t)}function g(){return Object(d.b)().lastEventId()}function m(){}function y(t){t()}function b(t){var e=Object(d.b)().getClient();return e?e.flush(t):i.a.reject(!1)}function w(t){var e=Object(d.b)().getClient();return e?e.close(t):i.a.reject(!1)}function _(t){return Object(o.c)(t)()}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i="<anonymous>";function o(t){try{return t&&"function"==typeof t?t.name||i:i}catch(t){return i}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var e=n(0),i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t});o=Error,Object(e.b)(a,o);var o,r=a;function a(t){var e=this.constructor,n=o.call(this,t)||this;return n.message=t,n.name=e.prototype.constructor.name,i(n,e.prototype),n}},function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},a=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},s=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},l=(Object.defineProperty(e,"__esModule",{value:!0}),e.StateBase=void 0,n(7)),c=n(25),u=n(8),d=n(34),p=r(n(15));function h(){var o=this;this.wasDomReadyExecutedBefore=!1,this.loadingElem=null,this.backdropElem=null,this.runTooltip=!0,this.showBackdrop=function(t,e,n){var i=o.appendBackdropElement(),t=(i.innerHTML="",t.classList.add("ilove-backdrop__content"),i.appendChild(t),i.querySelector(".ilove-backdrop__title")),e=(t.querySelector(".ilove-backdrop__title__text").innerHTML=null!=e?e:"",i.querySelector(".ilove-backdrop__subtitle"));e.querySelector(".ilove-backdrop__subtitle__text").innerHTML=null!=n?n:"",i.classList.add("ilove-backdrop--visible"),o.domRoot.style.overflow="hidden",t.addEventListener("click",function(){o._backdrop_click_callback1&&o._backdrop_click_callback1()}),e.addEventListener("click",function(){o._backdrop_click_callback2&&o._backdrop_click_callback2()})},this.setBackdropCallback=function(t,e){o._backdrop_click_callback1=t,o._backdrop_click_callback2=e},this.clearBackdrop=function(){var t;null!=(t=o.backdropElem)&&t.classList.remove("ilove-backdrop--visible"),o.domRoot.style.overflow="",o.setBackdropCallback(null,null)},this._onLayoutTemplateLoaded=function(){o.ctx._onDomReady(o.domRoot),o.dispatchEvent(new u.IloveEvent("unsetContentAbandonment")),!0===o.runTooltip&&d.Tooltip.init(),o.onDomReady(),o.wasDomReadyExecutedBefore=!0},this.showLoadingScreen=function(){o.appendLoadingElement().classList.add("wait--visible"),o.domRoot.style.overflow="hidden"},this.clearLoadingScreen=function(){var t;null!=(t=o.loadingElem)&&t.classList.remove("wait--visible"),o.domRoot.style.overflow=""},this.deleteLoadingElements=function(){o.domRoot.parentNode.querySelectorAll("state-wait").forEach(function(t){return t.parentElement.removeChild(t)})},this.cleanup=function(){var t=o.loadingElem;t&&t.parentElement&&t.parentElement.removeChild(t)},this.goToPreviousStateButtonIsVisible=function(){var t=o.domStateRoot.querySelector(".dialog__back");return!!t&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},this.t=function(t,e){if(o._t){if(t in o._t)return l.Lang.tr(o._t[t],e);throw"Key '"+t+"' not found"}var n=o.domRoot.querySelector("[data-state='"+o.name+"'] .text-translations");if(!n)throw"Text translations for state '"+o.name+"' not found";if("html"===n.dataset.format){var i=n.querySelector("[data-key="+t+"]");if(i)return i=i.innerHTML,l.Lang.tr(i,e);throw"Key '"+t+"' not found"}if(o._t=JSON.parse(n.textContent),"object"!=typeof o._t)throw"Translation object not found";return o.t(t,e)},this.eventEmitter=new c.ILoveEventEmitter}h.prototype.render=function(t,e){var n=this;void 0===e&&(e={}),this.domRoot=t,this.ctx.isInline?(this.showCurrentStateScreens(),this._onLayoutTemplateLoaded()):this.getTemplateParameters(this.LAYOUT_TEMPLATE_NAME).then(function(t){t=Object.assign({},t,e);n.loadTemplateOn(n.LAYOUT_TEMPLATE_NAME,n.domRoot,t).then(function(){n.showLoadingScreen(),n.showCurrentStateScreens().then(n._onLayoutTemplateLoaded).catch(function(t){throw t})}).catch(function(t){t="Problem loading template "+n.LAYOUT_TEMPLATE_NAME+": "+t;throw p.captureMessage(t),t})}).catch(function(t){t="Problem getting template params. Reason: "+t;throw p.captureMessage(t),t})},h.prototype.reset=function(){},h.prototype.getTemplateParameters=function(t){return a(this,void 0,void 0,function(){return s(this,function(t){return[2,{cache:!0,queryParams:null}]})})},h.prototype.appendLoadingElement=function(){var t=this.domRoot;return this.loadingElem||(this.loadingElem=document.createElement("div"),this.loadingElem.classList.add("state-wait","wait","wait--animated","wait--sm"),t.parentNode.appendChild(this.loadingElem)),this.loadingElem},h.prototype.appendBackdropElement=function(){var t=this.domRoot;return this.backdropElem||(this.backdropElem=document.createElement("div"),this.backdropElem.classList.add("ilove-backdrop","ilove-backdrop--animated","ilove-backdrop--sm"),t.parentNode.appendChild(this.backdropElem)),this.backdropElem},h.prototype.isTemplateAppended=function(t){return this.ctx.appendedTemplates.includes(t)},h.prototype.loadTemplateOn=function(i,o,t){var r=this,e=this.isTemplateAppended(i),n=t&&!0===t.cache,a=t&&!0===(null==t?void 0:t.clearDom);return n&&e?(a&&(o.innerHTML=this.ctx.getCachedTemplateHtml(i)),Promise.resolve()):new Promise(function(e,n){r.ctx.getTemplateViaAjax(i,t.queryParams,{useCache:t.cache}).then(function(t){r.ctx.appendedTemplates.includes(i)||r.ctx.appendedTemplates.push(i),o.innerHTML=t,e()},function(t){n()})})},h.prototype.showCurrentStateScreens=function(){return a(this,void 0,void 0,function(){var e,n,i;return s(this,function(t){switch(t.label){case 0:if(this.domRoot.querySelectorAll("[data-state]").forEach(function(t){return t.style.display="none"}),e=this.domRoot.querySelector("[data-state='"+this.name+"']"))return e.style.display="",(n=e.getAttribute("data-template-name"))?[4,this.getTemplateParameters(n)]:[3,2];throw"Template container for '"+this.name+"' state not found";case 1:return i=t.sent(),[2,this.loadTemplateOn(n,e,i)];case 2:return[2,Promise.resolve()]}})})},h.prototype.changeScreen=function(t){this.domRoot.querySelectorAll("[data-state='"+this.name+"'] [data-screen]").forEach(function(t){t.style.display="none"});var e=this.domRoot.querySelector("[data-state="+this.name+"] [data-screen='"+t+"']");if(!e)throw"Screen '"+t+"' for state '"+this.name+"' not found";e.style.display="",this.currentScreen=e},h.prototype.setContext=function(t){this.ctx=t},Object.defineProperty(h.prototype,"domStateRoot",{get:function(){var t=this.domRoot.querySelector("[data-state="+this.name+"]");if(t)return t;throw"Dom State root for "+this.name+" not found"},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"dialogCloseBtn",{get:function(){return this.domStateRoot.querySelector(".dialog__close")},enumerable:!1,configurable:!0}),h.prototype.dispatchEvent=function(t){return this.eventEmitter.dispatchEvent(t)},h.prototype.addEventListener=function(t,e){return this.eventEmitter.addEventListener(t,e)},e.StateBase=h},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return d}),n.d(e,"c",function(){return p});var a=n(0),o=n(33),s=n(3),r=n(14),l=n(2),c=n(28),u=n(24);function i(t,e,n){e=p(e,n&&n.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return Object(s.a)(e,{handled:!0,type:"generic"}),e.level=o.a.Error,n&&n.event_id&&(e.event_id=n.event_id),r.a.resolve(e)}function d(t,e,n,i){void 0===n&&(n=o.a.Info);e=h(e,i&&i.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return e.level=n,i&&i.event_id&&(e.event_id=i.event_id),r.a.resolve(e)}function p(t,e,n){var i,o,r;if(void 0===n&&(n={}),Object(l.e)(t)&&t.error)return t=t.error,o=Object(c.b)(Object(u.a)(t));if(Object(l.a)(t)||Object(l.b)(t))r=(i=t).name||(Object(l.a)(i)?"DOMError":"DOMException"),o=h(r=i.message?r+": "+i.message:r,e,n),Object(s.b)(o,r),"code"in i&&(o.tags=Object(a.a)(Object(a.a)({},o.tags),{"DOMException.code":""+i.code}));else{if(Object(l.d)(t))return o=Object(c.b)(Object(u.a)(t));Object(l.h)(t)||Object(l.f)(t)?(r=t,o=Object(c.a)(r,e,n.rejection)):(o=h(t,e,n),Object(s.b)(o,""+t,void 0)),Object(s.a)(o,{synthetic:!0})}return o}function h(t,e,n){t={message:t};return(n=void 0===n?{}:n).attachStacktrace&&e&&(n=Object(u.a)(e),e=Object(c.d)(n.stack),t.stacktrace={frames:e}),t}},function(t,e,n){"use strict";n.d(e,"d",function(){return o}),n.d(e,"c",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var i=n(2);function o(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function r(t,e){var n,i=t.length;return i<=150||(i<e&&(e=i),(e=Math.max(e-60,0))<5&&(e=0),(n=i-5<(n=Math.min(e+140,i))?i:n)===i&&(e=Math.max(n-140,0)),t=t.slice(e,n),0<e&&(t="'{snip} "+t),n<i&&(t+=" {snip}")),t}function a(t,e){if(!Array.isArray(t))return"";for(var n=[],i=0;i<t.length;i++){var o=t[i];try{n.push(String(o))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function s(t,e){return!!Object(i.k)(t)&&(Object(i.j)(e)?e.test(t):"string"==typeof e&&-1!==t.indexOf(e))}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(0),c="?",s=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,l=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,d=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,p=/\((\S*)(?::(\d+))(?::(\d+))\)/,o=/Minified React error #\d+;/i;function r(t){var e=null,n=0;t&&("number"==typeof t.framesToPop?n=t.framesToPop:o.test(t.message)&&(n=1));try{if(e=function(t){if(!t||!t.stacktrace)return null;for(var e,n=t.stacktrace,i=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,r=n.split("\n"),a=[],s=0;s<r.length;s+=2){var l=null;(e=i.exec(r[s]))?l={url:e[2],func:e[3],args:[],line:+e[1],column:null}:(e=o.exec(r[s]))&&(l={url:e[6],func:e[3]||e[4],args:e[5]?e[5].split(","):[],line:+e[1],column:+e[2]}),l&&(!l.func&&l.line&&(l.func=c),a.push(l))}return a.length?{message:h(t),name:t.name,stack:a}:null}(t))return a(e,n)}catch(t){}try{if(e=function(t){if(!t||!t.stack)return null;for(var e,n,i=[],o=t.stack.split("\n"),r=0;r<o.length;++r){if(n=s.exec(o[r])){var a=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=p.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),a={url:n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],func:n[1]||c,args:a?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=u.exec(o[r]))a={url:n[2],func:n[1]||c,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=l.exec(o[r])))continue;n[3]&&-1<n[3].indexOf(" > eval")&&(e=d.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=e[1],n[4]=e[2],n[5]=""):0!==r||n[5]||void 0===t.columnNumber||(i[0].column=t.columnNumber+1),a={url:n[3],func:n[1]||c,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!a.func&&a.line&&(a.func=c),i.push(a)}return i.length?{message:h(t),name:t.name,stack:i}:null}(t))return a(e,n)}catch(t){}return{message:h(t),name:t&&t.name,stack:[],failed:!0}}function a(e,t){try{return Object(i.a)(Object(i.a)({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function h(t){t=t&&t.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}},function(t,e,n){"use strict";function i(){this._eventEmitterCallbacks={}}Object.defineProperty(e,"__esModule",{value:!0}),e.ILoveEventEmitter=void 0,i.prototype.addEventListener=function(t,e){t in this._eventEmitterCallbacks||(this._eventEmitterCallbacks[t]=[]),this._eventEmitterCallbacks[t].push(e)},i.prototype.dispatchEvent=function(e){e.name in this._eventEmitterCallbacks&&this._eventEmitterCallbacks[e.name].forEach(function(t){return t(e)});var t=new Event(e.name);document.dispatchEvent(t)},e.ILoveEventEmitter=i},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var i="sentry.javascript.browser",o="5.30.0"},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n(0);function i(t,e){return{body:JSON.stringify({sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:"session"})+"\n"+JSON.stringify(t),type:"session",url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function o(t,e){var n=t.tags||{},i=n.__sentry_samplingMethod,o=n.__sentry_sampleRate,n=Object(r.d)(n,["__sentry_samplingMethod","__sentry_sampleRate"]),n=(t.tags=n,"transaction"===t.type),e={body:JSON.stringify(t),type:t.type||"event",url:n?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};return n&&(n=JSON.stringify({event_id:t.event_id,sent_at:(new Date).toISOString()}),t=JSON.stringify({type:t.type,sample_rates:[{id:i,rate:o}]}),e.body=n+"\n"+t+"\n"+e.body),e}},function(t,e,n){"use strict";n.d(e,"c",function(){return s}),n.d(e,"a",function(){return l}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return u});var i=n(2),o=n(5),r=n(24),a=50;function s(t){var e=u(t.stack),t={type:t.name,value:t.message};return e&&e.length&&(t.stacktrace={frames:e}),void 0===t.type&&""===t.value&&(t.value="Unrecoverable error caught"),t}function l(t,e,n){n={exception:{values:[{type:Object(i.f)(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+Object(o.b)(t)}]},extra:{__serialized__:Object(o.e)(t)}};return e&&(t=u(Object(r.a)(e).stack),n.stacktrace={frames:t}),n}function c(t){return{exception:{values:[s(t)]}}}function u(t){var e,n;return t&&t.length?(t=(e=t)[0].func||"",n=e[e.length-1].func||"",-1===t.indexOf("captureMessage")&&-1===t.indexOf("captureException")||(e=e.slice(1)),(e=-1!==n.indexOf("sentryWrapped")?e.slice(0,-1):e).slice(0,a).map(function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}}).reverse()):[]}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,l=n(0),c=n(2),u=n(12),e=n(3),d=n(5),s=n(19),o=n(45),p=Object(e.e)(),h={},f={};function i(t){var i,a,s,e;if(!f[t])switch(f[t]=!0,t){case"console":"console"in p&&["debug","info","warn","error","log","assert"].forEach(function(i){i in p.console&&Object(d.c)(p.console,i,function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];v("console",{args:t,level:i}),n&&Function.prototype.apply.call(n,p.console,t)}})});break;case"dom":"document"in p&&(p.document.addEventListener("click",w("click",v.bind(null,"dom")),!1),p.document.addEventListener("keypress",_(v.bind(null,"dom")),!1),["EventTarget","Node"].forEach(function(t){t=p[t]&&p[t].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(Object(d.c)(t,"addEventListener",function(i){return function(t,e,n){return e&&e.handleEvent?("click"===t&&Object(d.c)(e,"handleEvent",function(e){return function(t){return w("click",v.bind(null,"dom"))(t),e.call(this,t)}}),"keypress"===t&&Object(d.c)(e,"handleEvent",function(e){return function(t){return _(v.bind(null,"dom"))(t),e.call(this,t)}})):("click"===t&&w("click",v.bind(null,"dom"),!0)(this),"keypress"===t&&_(v.bind(null,"dom"))(this)),i.call(this,t,e,n)}}),Object(d.c)(t,"removeEventListener",function(i){return function(t,e,n){try{i.call(this,t,e.__sentry_wrapped__,n)}catch(t){}return i.call(this,t,e,n)}}))}));break;case"xhr":"XMLHttpRequest"in p&&(a=[],s=[],e=XMLHttpRequest.prototype,Object(d.c)(e,"open",function(r){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];function i(){if(4===o.readyState){try{o.__sentry_xhr__&&(o.__sentry_xhr__.status_code=o.status)}catch(t){}try{var t,e=a.indexOf(o);-1!==e&&(a.splice(e),t=s.splice(e)[0],o.__sentry_xhr__)&&void 0!==t[0]&&(o.__sentry_xhr__.body=t[0])}catch(t){}v("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}}var o=this,e=n[1];o.__sentry_xhr__={method:Object(c.k)(n[0])?n[0].toUpperCase():n[0],url:n[1]},Object(c.k)(e)&&"POST"===o.__sentry_xhr__.method&&e.match(/sentry_key/)&&(o.__sentry_own_request__=!0);return"onreadystatechange"in o&&"function"==typeof o.onreadystatechange?Object(d.c)(o,"onreadystatechange",function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(),n.apply(o,t)}}):o.addEventListener("readystatechange",i),r.apply(o,n)}}),Object(d.c)(e,"send",function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.push(this),s.push(t),v("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),n.apply(this,t)}}));break;case"fetch":Object(o.c)()&&Object(d.c)(p,"fetch",function(i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={args:t,fetchData:{method:function(t){void 0===t&&(t=[]);if("Request"in p&&Object(c.g)(t[0],Request)&&t[0].method)return String(t[0].method).toUpperCase();if(t[1]&&t[1].method)return String(t[1].method).toUpperCase();return"GET"}(t),url:function(t){void 0===t&&(t=[]);if("string"==typeof t[0])return t[0];if("Request"in p&&Object(c.g)(t[0],Request))return t[0].url;return String(t[0])}(t)},startTimestamp:Date.now()};return v("fetch",Object(l.a)({},n)),i.apply(p,t).then(function(t){return v("fetch",Object(l.a)(Object(l.a)({},n),{endTimestamp:Date.now(),response:t})),t},function(t){throw v("fetch",Object(l.a)(Object(l.a)({},n),{endTimestamp:Date.now(),error:t})),t})}});break;case"history":Object(o.b)()&&(i=p.onpopstate,p.onpopstate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=p.location.href;if(v("history",{from:r,to:r=n}),i)return i.apply(this,t)},Object(d.c)(p.history,"pushState",n),Object(d.c)(p.history,"replaceState",n));break;case"error":x=p.onerror,p.onerror=function(t,e,n,i,o){return v("error",{column:i,error:o,line:n,msg:t,url:e}),!!x&&x.apply(this,arguments)};break;case"unhandledrejection":E=p.onunhandledrejection,p.onunhandledrejection=function(t){return v("unhandledrejection",t),!E||E.apply(this,arguments)};break;default:u.a.warn("unknown instrumentation type:",t)}function n(o){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,i=2<t.length?t[2]:void 0;return i&&(n=r,i=String(i),v("history",{from:n,to:r=i})),o.apply(this,t)}}}function a(t){t&&"string"==typeof t.type&&"function"==typeof t.callback&&(h[t.type]=h[t.type]||[],h[t.type].push(t.callback),i(t.type))}function v(e,t){var n,i;if(e&&h[e])try{for(var o=Object(l.f)(h[e]||[]),r=o.next();!r.done;r=o.next()){var a=r.value;try{a(t)}catch(t){u.a.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+Object(s.a)(a)+"\nError: "+t)}}}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}var g,m,y=1e3,b=0;function w(e,n,i){return void 0===i&&(i=!1),function(t){g=void 0,t&&m!==t&&(m=t,b&&clearTimeout(b),i?b=setTimeout(function(){n({event:t,name:e})}):n({event:t,name:e}))}}function _(i){return function(t){var e;try{e=t.target}catch(t){return}var n=e&&e.tagName;n&&("INPUT"===n||"TEXTAREA"===n||e.isContentEditable)&&(g||w("input",i)(t),clearTimeout(g),g=setTimeout(function(){g=void 0},y))}}var x=null;var E=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lazyload=void 0,e.lazyload=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n="async");for(var i=document.getElementsByTagName("script"),o=i.length;o--;)if(i[o].src.match(t))return!0;var r,a,s=document.createElement("script");for(r in s.type="text/javascript",0 in document.createElement("script"),"defer"in document.createElement("script")&&(s.defer=!0),s.src=t,e)e.hasOwnProperty(r)&&(a=e[r],s.setAttribute(r,a));return(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(s,n),!0}},function(t,e){var n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,n,i){var s;!function(o){"use strict";function a(e,n,i){var o,r=document.createElement("img");return r.onerror=function(t){return a.onerror(r,t,e,n,i)},r.onload=function(t){return a.onload(r,t,e,n,i)},"string"==typeof e?(a.fetchBlob(e,function(t){t&&a.isInstanceOf("Blob",t)?(e=t,o=a.createObjectURL(e)):(o=e,i&&i.crossOrigin&&(r.crossOrigin=i.crossOrigin)),r.src=o},i),r):a.isInstanceOf("Blob",e)||a.isInstanceOf("File",e)?(o=r._objectURL=a.createObjectURL(e))?(r.src=o,r):a.readFile(e,function(t){var e=t.target;e&&e.result?r.src=e.result:n&&n(t)}):void 0}var e=o.createObjectURL&&o||o.URL&&URL.revokeObjectURL&&URL||o.webkitURL&&webkitURL;function r(t,e){!t._objectURL||e&&e.noRevoke||(a.revokeObjectURL(t._objectURL),delete t._objectURL)}a.fetchBlob=function(t,e){e()},a.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},a.transform=function(t,e,n,i,o){n(t,o)},a.onerror=function(t,e,n,i,o){r(t,o),i&&i.call(t,e)},a.onload=function(t,e,n,i,o){r(t,o),i&&a.transform(t,o,i,n,{originalWidth:t.naturalWidth||t.width,originalHeight:t.naturalHeight||t.height})},a.createObjectURL=function(t){return!!e&&e.createObjectURL(t)},a.revokeObjectURL=function(t){return!!e&&e.revokeObjectURL(t)},a.readFile=function(t,e,n){if(o.FileReader){var i=new FileReader;if(i.onload=i.onerror=e,i[n=n||"readAsDataURL"])return i[n](t),i}return!1},void 0!==(s=function(){return a}.call(n,i,n,t))&&(t.exports=s)}("undefined"!=typeof window&&window||this)},function(t,e,n){"use strict";var i,o;n.d(e,"a",function(){return i}),(n=i=i||{}).Fatal="fatal",n.Error="error",n.Warning="warning",n.Log="log",n.Info="info",n.Debug="debug",n.Critical="critical",(o=i=i||{}).fromString=function(t){switch(t){case"debug":return o.Debug;case"info":return o.Info;case"warn":case"warning":return o.Warning;case"error":return o.Error;case"fatal":return o.Fatal;case"critical":return o.Critical;default:return o.Log}}},function(t,s,l){"use strict";!function(i){var o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},e=(Object.defineProperty(s,"__esModule",{value:!0}),s.Tooltip=void 0,t(l(30))),n=l(73),t=(a.compat=function(){(-1!==navigator.appVersion.indexOf("MSIE 10")||0<=navigator.userAgent.indexOf(" UCBrowser/")||0<=navigator.userAgent.indexOf("Opera Mini")||0<=navigator.userAgent.indexOf("Android")&&4.4<parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8)))&&e.lazyload("//cdn.jsdelivr.net/npm/mutationobserver-shim/dist/mutationobserver.min.js")},a.init=function(t){void 0===t&&(t=null),window.tippy&&(i(t=null==t?".tooltip":t).each(function(t,e){i(e)[0]._tippy||(window._tippyInstances=window._tippyInstances||[],e=window.tippy(i(e)[0],a.getOptions(e)),window._tippyInstances.push(e))}),n.LinkTitle.disable(t),i(t).hover(function(){if(i(this).hasClass("rotate")||i(this).hasClass("remove"))try{var t=i(this).parent().parent()[0]._tippy;t&&(t.hide(),t.disable())}catch(t){}},function(){if(i(this).hasClass("rotate")||i(this).hasClass("remove"))try{var t=i(this).parent().parent()[0]._tippy;t&&t.enable()}catch(t){}}),i(".tooltip").on("mouseenter",function(t){t.preventDefault()}))},a.getOptions=function(t){var e={animation:"fade",delay:[0,0],offset:[0,20],allowHTML:!0,content:i(t).is("[data-title]")?i(t).attr("data-title"):i(t).attr("title"),arrow:!0,placement:a.getPlacement(t),showOnCreate:i(t).hasClass("tooltip--show"),hideOnClick:!i(t).hasClass("tooltip--fixed"),theme:i(t).is("[data-theme]")?i(t).attr("data-theme"):""};return i(t).is("[data-z]")&&(e.zIndex=i(t).attr("data-z")),e},a.getPlacement=function(t){t=i(t);return t.hasClass("tooltip--top")?"top":t.hasClass("tooltip--top-start")?"top-start":t.hasClass("tooltip--top-end")?"top-end":t.hasClass("tooltip--bottom")?"bottom":t.hasClass("tooltip--left")?"left":t.hasClass("tooltip--right")?"right":"top"},a.setContent=function(t,n){if(1==i(t).length)return i(t).attr("title",n),i(t).attr("data-title",n),i(t)[0]._tippy?(i(t)[0]._tippy.hide(),void i(t)[0]._tippy.setContent(n)):void a.init(t);i(t).each(function(t,e){a.setContent(e,n)})},a.show=function(t,e){void 0===e&&(e=null);var n;i(t)[0];0!=i(t).length&&("_tippy"in i(t)[0]||a.init(i(t)),n=i(t)[0]._tippy,i(t).is(":disabled")?(i(t).attr("disabled",!1),n.show(),setTimeout(function(){i(t).attr("disabled",!0)},100)):n.show(),null!=e)&&setTimeout(function(){i(t)[0]._tippy.hide()},e)},a.shake=function(t){var e=i(t)[0]._tippy;window.setTimeout(function(){i(e.popper).children().addClass("shake")},500)},a.hide=function(t){try{i(t)[0]._tippy.hide()}catch(t){}},a.enable=function(t){if(1==i(t).length)try{i(t)[0]._tippy.enable()}catch(t){}else i(t).each(function(t,e){a.enable(e)})},a.disable=function(t){if(1==i(t).length)try{i(t)[0]._tippy.hide(),i(t)[0]._tippy.disable()}catch(t){}else i(t).each(function(t,e){a.disable(e)})},a.destroy=function(t){if(1==i(t).length)try{i(t)}catch(t){}else i(t).each(function(t,e){a.destroy(e)})},a.wrapDisabled=function(t){i(t).wrap("<div class='tootlip-wrap'></div>")},a);function a(){}s.Tooltip=t,window.tootip=t}.call(this,l(1))},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var v=n(0),i=n(50),a=n(58),o=n(20),r=n(14),s=(l.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},l.prototype.add=function(t){var e=this;return this.isReady()?(-1===this._buffer.indexOf(t)&&this._buffer.push(t),t.then(function(){return e.remove(t)}).then(null,function(){return e.remove(t).then(null,function(){})}),t):r.a.reject(new o.a("Not adding Promise due to buffer limit reached."))},l.prototype.remove=function(t){return this._buffer.splice(this._buffer.indexOf(t),1)[0]},l.prototype.length=function(){return this._buffer.length},l.prototype.drain=function(n){var i=this;return new r.a(function(t){var e=setTimeout(function(){n&&0<n&&t(!1)},n);r.a.all(i._buffer).then(function(){clearTimeout(e),t(!0)}).then(null,function(){t(!0)})})},l);function l(t){this._limit=t,this._buffer=[]}var c=n(12),g=n(3),u=(d.prototype.sendEvent=function(t){throw new o.a("Transport Class has to implement `sendEvent` method")},d.prototype.close=function(t){return this._buffer.drain(t)},d.prototype._handleResponse=function(t){var e=t.requestType,n=t.response,i=t.headers,o=t.resolve,t=t.reject,r=a.a.fromHttpCode(n.status);this._handleRateLimit(i)&&c.a.warn("Too many requests, backing off until: "+this._disabledUntil(e)),r===a.a.Success?o({status:r}):t(n)},d.prototype._disabledUntil=function(t){return this._rateLimits[t]||this._rateLimits.all},d.prototype._isRateLimited=function(t){return this._disabledUntil(t)>new Date(Date.now())},d.prototype._handleRateLimit=function(t){var e,n,i,o,r=Date.now(),a=t["x-sentry-rate-limits"],t=t["retry-after"];if(a){try{for(var s=Object(v.f)(a.trim().split(",")),l=s.next();!l.done;l=s.next()){var c=l.value.split(":",2),u=parseInt(c[0],10),d=1e3*(isNaN(u)?60:u);try{i=void 0;for(var p=Object(v.f)(c[1].split(";")),h=p.next();!h.done;h=p.next()){var f=h.value;this._rateLimits[f||"all"]=new Date(r+d)}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return!0}return!!t&&(this._rateLimits.all=new Date(r+Object(g.g)(r,t)),!0)},d);function d(t){this.options=t,this._buffer=new s(30),this._rateLimits={},this._api=new i.a(this.options.dsn),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return d});var l=n(0),c=n(2),i=n(104),u=n(14),o=n(3),r=(a.clone=function(t){var e=new a;return t&&(e._breadcrumbs=Object(l.e)(t._breadcrumbs),e._tags=Object(l.a)({},t._tags),e._extra=Object(l.a)({},t._extra),e._contexts=Object(l.a)({},t._contexts),e._user=t._user,e._level=t._level,e._span=t._span,e._session=t._session,e._transactionName=t._transactionName,e._fingerprint=t._fingerprint,e._eventProcessors=Object(l.e)(t._eventProcessors)),e},a.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},a.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},a.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},a.prototype.getUser=function(){return this._user},a.prototype.setTags=function(t){return this._tags=Object(l.a)(Object(l.a)({},this._tags),t),this._notifyScopeListeners(),this},a.prototype.setTag=function(t,e){var n;return this._tags=Object(l.a)(Object(l.a)({},this._tags),((n={})[t]=e,n)),this._notifyScopeListeners(),this},a.prototype.setExtras=function(t){return this._extra=Object(l.a)(Object(l.a)({},this._extra),t),this._notifyScopeListeners(),this},a.prototype.setExtra=function(t,e){var n;return this._extra=Object(l.a)(Object(l.a)({},this._extra),((n={})[t]=e,n)),this._notifyScopeListeners(),this},a.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},a.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},a.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},a.prototype.setTransaction=function(t){return this.setTransactionName(t)},a.prototype.setContext=function(t,e){var n;return null===e?delete this._contexts[t]:this._contexts=Object(l.a)(Object(l.a)({},this._contexts),((n={})[t]=e,n)),this._notifyScopeListeners(),this},a.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},a.prototype.getSpan=function(){return this._span},a.prototype.getTransaction=function(){var t,e=this.getSpan();return null!=(t=e)&&t.transaction?null==(t=e)?void 0:t.transaction:null!=(t=null==(t=e)?void 0:t.spanRecorder)&&t.spans[0]?e.spanRecorder.spans[0]:void 0},a.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},a.prototype.getSession=function(){return this._session},a.prototype.update=function(t){if(t){var e;if("function"==typeof t)return(e=t(this))instanceof a?e:this;t instanceof a?(this._tags=Object(l.a)(Object(l.a)({},this._tags),t._tags),this._extra=Object(l.a)(Object(l.a)({},this._extra),t._extra),this._contexts=Object(l.a)(Object(l.a)({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint)):Object(c.h)(t)&&(this._tags=Object(l.a)(Object(l.a)({},this._tags),t.tags),this._extra=Object(l.a)(Object(l.a)({},this._extra),t.extra),this._contexts=Object(l.a)(Object(l.a)({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint)&&(this._fingerprint=t.fingerprint)}return this},a.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},a.prototype.addBreadcrumb=function(t,e){t=Object(l.a)({timestamp:Object(i.a)()},t);return this._breadcrumbs=void 0!==e&&0<=e?Object(l.e)(this._breadcrumbs,[t]).slice(-e):Object(l.e)(this._breadcrumbs,[t]),this._notifyScopeListeners(),this},a.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},a.prototype.applyToEvent=function(t,e){var n;return this._extra&&Object.keys(this._extra).length&&(t.extra=Object(l.a)(Object(l.a)({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=Object(l.a)(Object(l.a)({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=Object(l.a)(Object(l.a)({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=Object(l.a)(Object(l.a)({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span&&(t.contexts=Object(l.a)({trace:this._span.getTraceContext()},t.contexts),n=null==(n=this._span.transaction)?void 0:n.name)&&(t.tags=Object(l.a)({transaction:n},t.tags)),this._applyFingerprint(t),t.breadcrumbs=Object(l.e)(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=0<t.breadcrumbs.length?t.breadcrumbs:void 0,this._notifyEventProcessors(Object(l.e)(s(),this._eventProcessors),t,e)},a.prototype._notifyEventProcessors=function(i,o,r,a){var s=this;return void 0===a&&(a=0),new u.a(function(e,t){var n=i[a];null===o||"function"!=typeof n?e(o):(n=n(Object(l.a)({},o),r),(Object(c.m)(n)?n.then(function(t){return s._notifyEventProcessors(i,t,r,a+1).then(e)}):s._notifyEventProcessors(i,n,r,a+1).then(e)).then(null,t))})},a.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(t){t(e)}),this._notifyingListeners=!1)},a.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},a);function a(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}function s(){var t=Object(o.e)();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function d(t){s().push(t)}},function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e,n,i=Array.prototype.slice.call(arguments,1);i.length;){var o=i.shift();if(o){if("object"!=typeof o)throw new TypeError(o+"must be non-object");for(var r in o)e=o,n=r,Object.prototype.hasOwnProperty.call(e,n)&&(t[r]=o[r])}}return t},e.shrinkBuf=function(t,e){if(t.length!==e){if(t.subarray)return t.subarray(0,e);t.length=e}return t};var o={arraySet:function(t,e,n,i,o){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),o);else for(var r=0;r<i;r++)t[o+r]=e[n+r]},flattenChunks:function(t){for(var e,n,i,o=0,r=0,a=t.length;r<a;r++)o+=t[r].length;for(i=new Uint8Array(o),r=e=0,a=t.length;r<a;r++)n=t[r],i.set(n,e),e+=n.length;return i}},r={arraySet:function(t,e,n,i,o){for(var r=0;r<i;r++)t[o+r]=e[n+r]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,r))},e.setTyped(i)},,function(t,o,r){"use strict";!function(t,e){r.d(o,"b",function(){return n}),r.d(o,"a",function(){return i});r(2),r(5);function n(){return"[object process]"===Object.prototype.toString.call(void 0!==t?t:0)}function i(t,e){return t.require(e)}}.call(this,r(102),r(67)(t))},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var l=n(2);function i(t){try{for(var e,n=t,i=[],o=0,r=0,a=" > ".length;n&&o++<5&&!("html"===(e=function(t){var e,n,i,o,r=t,a=[];if(!r||!r.tagName)return"";a.push(r.tagName.toLowerCase()),r.id&&a.push("#"+r.id);if((t=r.className)&&Object(l.k)(t))for(e=t.split(/\s+/),o=0;o<e.length;o++)a.push("."+e[o]);var s=["type","name","title","alt"];for(o=0;o<s.length;o++)n=s[o],(i=r.getAttribute(n))&&a.push("["+n+'="'+i+'"]');return a.join("")}(n))||1<o&&80<=r+i.length*a+e.length);)i.push(e),r+=e.length,n=n.parentNode;return i.reverse().join(" > ")}catch(t){return"<unknown>"}}},function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.Settings=void 0,r(n(107)));function s(){}s.get=function(t){var e="production";return a[e][t]},s.mode=function(){var t="production";return t},s.env=function(){return"production"},e.Settings=s},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(58),o=n(14),r=(a.prototype.sendEvent=function(t){return o.a.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:i.a.Skipped})},a.prototype.close=function(t){return o.a.resolve(!0)},a);function a(){}},function(t,e,n){"use strict";n.r(e);var i=n(53),o=(n.d(e,"GlobalHandlers",function(){return i.a}),n(52)),r=(n.d(e,"TryCatch",function(){return o.a}),n(51)),a=(n.d(e,"Breadcrumbs",function(){return r.a}),n(54)),s=(n.d(e,"LinkedErrors",function(){return a.a}),n(55));n.d(e,"UserAgent",function(){return s.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var i,o=n(0),e=n(71),r=n(3),a=n(12),s=n(70),l=n(33),c=n(45),u=n(22),d=n(68),p=n(69),h=(i=s.a,Object(o.b)(f,i),f.prototype.eventFromException=function(t,e){return Object(u.a)(this._options,t,e)},f.prototype.eventFromMessage=function(t,e,n){return void 0===e&&(e=l.a.Info),Object(u.b)(this._options,t,e,n)},f.prototype._setupTransport=function(){var t;return this._options.dsn?(t=Object(o.a)(Object(o.a)({},this._options.transportOptions),{dsn:this._options.dsn}),new(this._options.transport||(Object(c.a)()?d:p).a)(t)):i.prototype._setupTransport.call(this)},f);function f(){return null!==i&&i.apply(this,arguments)||this}var v,g=n(11),m=n(51),y=n(26),b=(v=e.a,Object(o.b)(w,v),w.prototype.showReportDialog=function(t){void 0===t&&(t={}),Object(r.e)().document&&(this._isEnabled()?Object(g.a)(Object(o.a)(Object(o.a)({},t),{dsn:t.dsn||this.getDsn()})):a.a.error("Trying to call showReportDialog with Sentry Client disabled"))},w.prototype._prepareEvent=function(t,e,n){return t.platform=t.platform||"javascript",t.sdk=Object(o.a)(Object(o.a)({},t.sdk),{name:y.a,packages:Object(o.e)(t.sdk&&t.sdk.packages||[],[{name:"npm:@sentry/browser",version:y.b}]),version:y.b}),v.prototype._prepareEvent.call(this,t,e,n)},w.prototype._sendEvent=function(t){var e=this.getIntegration(m.a);e&&e.addSentryBreadcrumb(t),v.prototype._sendEvent.call(this,t)},w);function w(t){return v.call(this,h,t=void 0===t?{}:t)||this}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return l}),n.d(e,"b",function(){return c});var i=n(12),o=n(3);function r(){if(!("fetch"in Object(o.e)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function a(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function s(){if(!r())return!1;var t=Object(o.e)();if(a(t.fetch))return!0;var e=!1,t=t.document;if(t&&"function"==typeof t.createElement)try{var n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=a(n.contentWindow.fetch)),t.head.removeChild(n)}catch(t){i.a.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return e}function l(){if(!r())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}function c(){var t=Object(o.e)(),e=t.chrome,e=e&&e.app&&e.app.runtime,t="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!e&&t}},function(t,e,n){var i,o;!function(){"use strict";o=[n(32)],void 0!==(o="function"==typeof(i=function(f){"use strict";var t=typeof Blob!=="undefined"&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),r=(f.blobSlice=t&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},f.metaDataParsers={jpeg:{65505:[],65517:[]}},f.parseMetaData=function(t,u,d,p){d=d||{};p=p||{};var h=this;var e=d.maxMetaDataSize||262144;var n=!(typeof DataView!=="undefined"&&t&&t.size>=12&&t.type==="image/jpeg"&&f.blobSlice);if(n||!f.readFile(f.blobSlice.call(t,0,e),function(t){if(t.target.error){console.log(t.target.error);u(p);return}var e=t.target.result;var n=new DataView(e);var i=2;var o=n.byteLength-4;var r=i;var a;var s;var l;var c;if(n.getUint16(0)===65496){while(i<o){a=n.getUint16(i);if(a>=65504&&a<=65519||a===65534){s=n.getUint16(i+2)+2;if(i+s>n.byteLength){console.log("Invalid meta data: Invalid segment size.");break}l=f.metaDataParsers.jpeg[a];if(l&&!d.disableMetaDataParsers)for(c=0;c<l.length;c+=1)l[c].call(h,n,i,s,p,d);i+=s;r=i}else break}if(!d.disableImageHead&&r>6)if(e.slice)p.imageHead=e.slice(0,r);else p.imageHead=new Uint8Array(e).subarray(0,r)}else console.log("Invalid JPEG file: Missing JPEG marker.");u(p)},"readAsArrayBuffer"))u(p)},f.replaceHead=function(e,n,i){f.parseMetaData(e,function(t){i(new Blob([n,f.blobSlice.call(e,t.imageHead.byteLength)],{type:"image/jpeg"}))},{maxMetaDataSize:256,disableMetaDataParsers:true})},f.hasMetaOption=function(t){return t&&t.meta},f.transform);f.transform=function(e,n,i,o,t){if(f.hasMetaOption(n))f.parseMetaData(o,function(t){r.call(f,e,n,i,o,t)},n,t);else r.apply(f,arguments)}})?i.apply(e,o):i)&&(t.exports=o)}()},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},s=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ContextBase=void 0,n(16)),o=n(109),l=n(60),r=n(25),c=n(8),n=(u.prototype.setContextPlacement=function(t){this._ctxPlacement=t},u.prototype.getContextPlacement=function(){return this._ctxPlacement},u.prototype.render=function(t,e){void 0===e&&(e={}),this.state||(this.state=this.getInitialState(),this.changeState(this.state)),this.state.render(t,e)},Object.defineProperty(u.prototype,"isInline",{get:function(){return this._isInline},enumerable:!1,configurable:!0}),u.prototype.getState=function(){return this.state},u.prototype.changeState=function(t){if(!t)throw"State cannot be empty";if(this._inEndState)throw"Context is in end state; Cannot transition to state '"+t.name+"'";this.state&&this.state.cleanup(),this.state=t,this.state.setContext(this),this.stateHistory.push(this.state),this.listenToEvents(this.state)},u.prototype.canGoToAPreviousState=function(){return!(this.stateHistory.length<2)},u.prototype.goToPreviousState=function(){var t;if(this.canGoToAPreviousState())return this.stateHistory.pop(),t=this.stateHistory.pop(),this.changeState(t),t;throw"Cannot transition to previous state"},u.prototype.getTemplateViaAjax=function(i,o,r){return void 0===o&&(o={}),a(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:return n=r.useCache,e="template_"+i,n&&u.cache.existsEntry(e)?[2,u.cache.getEntry(e)]:[4,l.AjaxTemplate.load(i,o)];case 1:return n=t.sent(),u.cache.setEntry(e,n),[2,n]}})})},u.prototype.getCachedTemplateHtml=function(t){return u.cache.getEntry("template_"+t)},u.prototype.getStateHistory=function(){return this.stateHistory.map(function(t){return t.name})},u.prototype.wasUserLoggedOnInitialization=function(){return this._wasUserLoggedOnInitialization},u.prototype.reset=function(){this.state&&this.state.reset()},Object.defineProperty(u.prototype,"userType",{get:function(){var t=i.UserModel.userType;return 1!=i.UserModel.isTeamManaged()&&"premium"==t&&0==i.UserModel.hasSubscription()?"user":t},enumerable:!1,configurable:!0}),u.prototype.canUserDoTrial=function(){switch(this.userType){case"guest":case"user":return i.UserModel.canDoTrial();case"premium":return!1;default:throw"Unknown userType "+this.userType+" to determine if can do trial"}},u.prototype.isTeamManaged=function(){return i.UserModel.isPremium()&&i.UserModel.isTeamManaged()},u.prototype.isTrialEnabledForThisTool=function(){return!(window.ilovepdfConfig&&"dtr"in window.ilovepdfConfig&&window.ilovepdfConfig.dtr)},u.prototype.isLoggedIn=function(){return"guest"!==this.userType},Object.defineProperty(u.prototype,"user",{get:function(){return i.UserModel.get()},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"userCurrentPaymentMethod",{get:function(){var t=this.user.last_payment;return t&&t.provider?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"userCurrentSubscription",{get:function(){return this.user&&this.user.current_subscription||null},enumerable:!1,configurable:!0}),u.prototype.dispatchEvent=function(t){return this.eventEmitter.dispatchEvent(t)},u.prototype.addEventListener=function(t,e){return this.eventEmitter.addEventListener(t,e)},u.prototype.getInstanceID=function(){return this._instanceID},u.cache=new o.Cache,u._static_instanceID=0,u);function u(t){var e=this;void 0===t&&(t={}),this.state=null,this.stateHistory=[],this.objsListeningTo=new WeakMap,this.appendedTemplates=[],this._isInline=!1,this._ctxPlacement="dom",this._inEndState=!1,this.setEndState=function(){e._inEndState=!0},this.isInEndState=function(){return e._inEndState},this.listenToEvents=function(t){e.objsListeningTo.has(t)&&!0===e.objsListeningTo.get(t)||(t.addEventListener("end",function(t){e.setEndState(),e.dispatchEvent(new c.IloveEvent("end",t.detail))}),t.addEventListener("disableContentAbandonment",function(t){return e.dispatchEvent(new c.IloveEvent("disableContentAbandonment"))}),t.addEventListener("unsetContentAbandonment",function(t){return e.dispatchEvent(new c.IloveEvent("unsetContentAbandonment"))}),e.objsListeningTo.set(t,!0))},this.notifyOfContainerClosing=function(){e.dispatchEvent(new c.IloveEvent("contextContainerClosed")),e.isInEndState()&&e.dispatchEvent(new c.IloveEvent("end"))},this._onDomReady=function(t){e.dispatchEvent(new c.IloveEvent("domReady",{domRoot:t}))},this.eventEmitter=new r.ILoveEventEmitter,this._instanceID=++u._static_instanceID,this._wasUserLoggedOnInitialization=this.isLoggedIn(),this._isInline=t.isInline||!1}e.ContextBase=n},function(t,s,c){"use strict";!function(o){var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},t=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},l=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},a=(Object.defineProperty(s,"__esModule",{value:!0}),s.Api=s.APP_VERSION=s.API_VERSION=void 0,c(62)),e=c(41),n=(s.API_VERSION="v1",s.APP_VERSION="web.0",Object.defineProperty(i.prototype,"userToken",{get:function(){return"function"==typeof this._userToken?this._userToken():this._userToken},set:function(t){this._userToken=t},enumerable:!1,configurable:!0}),i.ping=function(r,a){return void 0===a&&(a=!1),new Promise(function(t,e){var n=new XMLHttpRequest,i=0,o=0;n.open("GET",r,!0),n.onreadystatechange=function(){4==n.readyState&&(200==n.status||0==i&&0==o&&0!=n.status&&1==a?t({}):e())},n.ontimeout=function(){i=1},n.onerror=function(t){o=1},n.send()})},i.prototype.pingService=function(){return i.ping(this.serviceServer+"/ping")},i.prototype.sendRequest=function(t,e,n,i,o){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=!1);var r=new XMLHttpRequest;return r.open(t,this.workerServer+"/"+this.apiVersion+"/"+e,!0),r.setRequestHeader("Authorization","Bearer "+this.token),r.setRequestHeader("Accept","application/json"),1==o&&r.setRequestHeader("Content-Type","application/json"),i&&(r.responseType="blob"),1==o?r.send(JSON.stringify(n)):r.send(n),r},i.prototype.sendServiceRequest=function(t,e,n,i,o){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=!1);var r=new XMLHttpRequest;return r.open(t,this.serviceServer+"/"+e,!0),r.setRequestHeader("Authorization","Bearer "+this.userToken),r.setRequestHeader("Accept","application/json"),1==o&&r.setRequestHeader("Content-Type","application/json"),i&&(r.responseType="blob"),1==o?r.send(JSON.stringify(n)):r.send(n),r},i.prototype.query=function(t,o,r,a,s,l){void 0===r&&(r=null),void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===l&&(l="api");var c=this;return new Promise(function(e,n){var i=null;if("api"==l)i=c.sendRequest(t,o,r,a,s);else{if("service"!=l)throw new Error("invalid target api");i=c.sendServiceRequest(t,o,r,a,s)}i.onerror=function(t){n({status:-1})},i.onload=function(){if(4==i.readyState)if(200==i.status)try{e(JSON.parse(i.responseText))}catch(t){n({error:"invalidJSONResponse",status:500,response:i.responseText})}else if(400==i.status||500==i.status)try{(t=JSON.parse(i.responseText)).status=i.status,n(t)}catch(t){n({error:"invalidJSONResponse",status:500,response:i.responseText})}else{var t={};try{t=JSON.parse(i.responseText)}catch(t){}t.status=i.status,n(t)}}})},i.prototype.process=function(t){return this.query("POST","process",t)},i.prototype.getSigner=function(t){return this.query("GET","signature/signer/"+t)},i.prototype.request=function(t,e,n){n=a.FormDataHelper.jsonToFormData(n);return this.query(t,e,n)},i.prototype.getTask=function(){var i=this;return new Promise(function(t,e){var n=i.sendRequest("GET","task/"+i.taskId);n.onreadystatechange=function(){4==n.readyState&&(200==n.status?t(JSON.parse(n.responseText)):(400!=n.status&&n.status,window.ev("event","send","download_deleted",i.workerServer),e(n.responseText)))}})},i.prototype.getLink=function(t){return this.workerServer+"/"+this.apiVersion+"/"+t},i.prototype.deleteTask=function(){return this.request("delete","task/"+this.taskId,{})},i.prototype.resetTask=function(o){return t(this,void 0,void 0,function(){var e,n,i;return l(this,function(t){switch(t.label){case 0:for(n in(e=new FormData).append("task",this.taskId),o)i=o[n],e.append(n,i);return[4,fetch(this.getLink("task/reset"),{method:"POST",body:e,headers:{Authorization:"Bearer "+this.token}})];case 1:return[2,t.sent()]}})})},i.prototype.oneStepTask=function(s){return t(this,void 0,void 0,function(){var e,n,i,o,r,a;return l(this,function(t){switch(t.label){case 0:return e=s.tool,n=s.file,i=s.filename,o=s.download,r=this.workerServer+"/run",(a=new FormData).append("tool",e),a.append("file",n),a.append("name",i),!1===o&&a.append("download","0"),[4,fetch(r,{method:"POST",body:a,headers:{Authorization:"Bearer "+this.token}})];case 1:return[2,t.sent()]}})})},i.prototype.oneStep_copyTask=function(o){return t(this,void 0,void 0,function(){var e,n,i;return l(this,function(t){return e=o.file,n=o.filename,i=o.download,[2,this.oneStepTask({file:e,filename:n,tool:"copy",download:i})]})})},i.prototype.copyTask=function(s){return t(this,void 0,void 0,function(){var e,n,i,o,r,a;return l(this,function(t){switch(t.label){case 0:for(e=s.taskId,n=s.files,i=s.keepInputFile,this.getLink("process/"),(o=new FormData).append("tool","copy"),o.append("task",e),i&&o.append("keep","1"),r=0;r<n.length;r++)a=n[r],o.append("files["+r+"][server_filename]",a.server_filename),o.append("files["+r+"][filename]",a.name),o.append("files["+r+"][pages]",a.pages);return[4,this.query("POST","process",o)];case 1:return[2,t.sent()]}})})},i.prototype.getSubdomain=function(t){return t.split("/")[2].split(".")[0]},i.prototype.getDomain=function(t){return t.split("/")[2]},i.prototype.uploadFromUrl=function(t){var e=new FormData;return e.append("cloud_file",t),e.append("cloud_source","public"),e.append("task",this.taskId),this.query("post","upload",e)},i.prototype.getPreview=function(t,e){var n,i=new FormData;for(n in i.append("server_filename",t),i.append("task",this.taskId),delete e.output_filename,delete e.packaged_filename,e)e.hasOwnProperty(n)&&i.append(n,e[n]);return this.query("post","preview",i)},i.prototype.upscale=function(n,i){return t(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:return(e=new FormData).append("task",this.taskId),e.append("server_filename",n),e.append("scale",""+i),[4,fetch(this.getLink("upscale"),{method:"POST",body:e,headers:{Authorization:"Bearer "+this.token}})];case 1:return[4,t.sent().blob()];case 2:return[2,t.sent()]}})})},i.prototype.removeBackground=function(n){return t(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:return(e=new FormData).append("task",this.taskId),e.append("server_filename",n),[4,fetch(this.getLink("removebackground"),{method:"POST",body:e,headers:{Authorization:"Bearer "+this.token}})];case 1:return[4,t.sent().blob()];case 2:return[2,t.sent()]}})})},i.prototype.detectFaces=function(n,i,o){return t(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:return e=a.FormDataHelper.jsonToFormData(r({task:this.taskId,level:n,fileArray:i},void 0!==o?{face:o}:{})),[4,this.query("post","detectfaces",e)];case 1:return[2,t.sent().data.coordArray]}})})},i.prototype.removeFile=function(i){var o=this,r=new FormData;return new Promise(function(t,e){var n=o.sendRequest("delete","upload/"+o.taskId+"/"+i,r);n.onreadystatechange=function(){4==n.readyState&&(404!=n.status&&(400==n.status||500==n.status)?e():t({}))}})},i.prototype.next=function(t,e,n){var i=new FormData;return i.append("task",t),i.append("tool",e),i.append("worker",n),i.append("thumbnails","1"),this.query("post","task/next",i)},i.prototype.nextFile=function(t,e){return this.workerServer+"/thumbnails/"+t+"/"+e},i.prototype.info=function(){return this.query("get","info")},i.prototype.getStatus=function(n,i){return void 0===i&&(i=0),n=(n=void 0===n?null:n)||this.workerServer,new Promise(function(e,t){o.ajax({url:n+"/status.json",dataType:"json",success:function(t){e(t)},timeout:i,error:function(){t()}})})},i.prototype.getFilePreviewInfo=function(t,e,n,i){void 0===i&&(i=null),n=(n=void 0===n?150:n)||150;i="pdfrender/"+t+"/"+e.replace(".pdf","");return this.query("get",i)},i.prototype.saveToolConfig=function(t,e,n){t=a.FormDataHelper.jsonToFormData({tool:t,options:e});return this.userToken=n,this.query("post","tool/save",t,!1,!1,"service")},i.prototype.touchTask=function(t){return this.query("get","task/touch/"+t)},i.prototype.sendJsonRequest=function(e,n){return void 0===n&&(n=null),t(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,fetch(this.workerServer+"/"+this.apiVersion+"/"+e,{method:"post",headers:{Authorization:"Bearer "+this.token,Accept:"application/json"},body:JSON.stringify(n)})];case 1:return[2,t.sent().json()]}})})},i);function i(t){this.taskId=null,this.tool=null,this.preWorker=null,this.serviceServer=e.Settings.get("service"),this.workerServer=null,this.downloadUrl="",this.apiVersion=s.API_VERSION,this.appVersion=s.APP_VERSION,this.token=null,this.encrypted=!1,this.encryptKey=null,Object.assign(this,t)}s.Api=n}.call(this,c(1))},function(t,e,n){"use strict";n.r(e);var i=n(35),o=(n.d(e,"BaseTransport",function(){return i.a}),n(68)),r=(n.d(e,"FetchTransport",function(){return o.a}),n(69));n.d(e,"XHRTransport",function(){return r.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(105),o=n(5),r=(a.prototype.getDsn=function(){return this._dsnObject},a.prototype.getBaseApiEndpoint=function(){var t=this._dsnObject,e=t.protocol?t.protocol+":":"",n=t.port?":"+t.port:"";return e+"//"+t.host+n+(t.path?"/"+t.path:"")+"/api/"},a.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},a.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},a.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},a.prototype.getStoreEndpointPath=function(){var t=this._dsnObject;return(t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},a.prototype.getRequestHeaders=function(t,e){var n=this._dsnObject,i=["Sentry sentry_version=7"];return i.push("sentry_client="+t+"/"+e),i.push("sentry_key="+n.user),n.pass&&i.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":i.join(", ")}},a.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var e,n=this._dsnObject,i=this.getBaseApiEndpoint()+"embed/error-page/",o=[];for(e in o.push("dsn="+n.toString()),t)"dsn"!==e&&("user"===e?t.user&&(t.user.name&&o.push("name="+encodeURIComponent(t.user.name)),t.user.email)&&o.push("email="+encodeURIComponent(t.user.email)):o.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e])));return o.length?i+"?"+o.join("&"):i},a.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},a.prototype._getIngestEndpoint=function(t){return""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+t+"/"},a.prototype._encodedAuth=function(){var t={sentry_key:this._dsnObject.user,sentry_version:"7"};return Object(o.f)(t)},a);function a(t){this.dsn=t,this._dsnObject=new i.a(t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),r=n(6),o=n(33),a=n(3),s=n(29),l=n(23),c=n(40),u=(d.prototype.addSentryBreadcrumb=function(t){this._options.sentry&&Object(r.b)().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Object(a.d)(t)},{event:t})},d.prototype.setupOnce=function(){var n=this;this._options.console&&Object(s.a)({callback:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n._consoleBreadcrumb.apply(n,Object(i.e)(t))},type:"console"}),this._options.dom&&Object(s.a)({callback:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n._domBreadcrumb.apply(n,Object(i.e)(t))},type:"dom"}),this._options.xhr&&Object(s.a)({callback:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n._xhrBreadcrumb.apply(n,Object(i.e)(t))},type:"xhr"}),this._options.fetch&&Object(s.a)({callback:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n._fetchBreadcrumb.apply(n,Object(i.e)(t))},type:"fetch"}),this._options.history&&Object(s.a)({callback:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n._historyBreadcrumb.apply(n,Object(i.e)(t))},type:"history"})},d.prototype._consoleBreadcrumb=function(t){var e={category:"console",data:{arguments:t.args,logger:"console"},level:o.a.fromString(t.level),message:Object(l.b)(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;e.message="Assertion failed: "+(Object(l.b)(t.args.slice(1)," ")||"console.assert"),e.data.arguments=t.args.slice(1)}Object(r.b)().addBreadcrumb(e,{input:t.args,level:t.level})},d.prototype._domBreadcrumb=function(t){var e;try{e=t.event.target?Object(c.a)(t.event.target):Object(c.a)(t.event)}catch(t){e="<unknown>"}0!==e.length&&Object(r.b)().addBreadcrumb({category:"ui."+t.name,message:e},{event:t.event,name:t.name})},d.prototype._xhrBreadcrumb=function(t){var e,n,i,o;t.endTimestamp&&!t.xhr.__sentry_own_request__&&(e=(o=t.xhr.__sentry_xhr__||{}).method,n=o.url,i=o.status_code,o=o.body,Object(r.b)().addBreadcrumb({category:"xhr",data:{method:e,url:n,status_code:i},type:"http"},{xhr:t.xhr,input:o}))},d.prototype._fetchBreadcrumb=function(t){!t.endTimestamp||t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method||(t.error?Object(r.b)().addBreadcrumb({category:"fetch",data:t.fetchData,level:o.a.Error,type:"http"},{data:t.error,input:t.args}):Object(r.b)().addBreadcrumb({category:"fetch",data:Object(i.a)(Object(i.a)({},t.fetchData),{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response}))},d.prototype._historyBreadcrumb=function(t){var e=Object(a.e)(),n=t.from,t=t.to,e=Object(a.h)(e.location.href),i=Object(a.h)(n),o=Object(a.h)(t);i.path||(i=e),e.protocol===o.protocol&&e.host===o.host&&(t=o.relative),e.protocol===i.protocol&&e.host===i.host&&(n=i.relative),Object(r.b)().addBreadcrumb({category:"navigation",data:{from:n,to:t}})},d.id="Breadcrumbs",d);function d(t){this.name=d.id,this._options=Object(i.a)({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),r=n(3),a=n(5),s=n(19),l=n(11),o=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],c=(u.prototype.setupOnce=function(){var t=Object(r.e)();this._options.setTimeout&&Object(a.c)(t,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&Object(a.c)(t,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&Object(a.c)(t,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in t&&Object(a.c)(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:o).forEach(this._wrapEventTarget.bind(this))},u.prototype._wrapTimeFunction=function(i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0];return t[0]=Object(l.c)(n,{mechanism:{data:{function:Object(s.a)(i)},handled:!0,type:"instrument"}}),i.apply(this,t)}},u.prototype._wrapRAF=function(e){return function(t){return e.call(this,Object(l.c)(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Object(s.a)(e)},handled:!0,type:"instrument"}}))}},u.prototype._wrapEventTarget=function(o){var t=Object(r.e)(),t=t[o]&&t[o].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(Object(a.c)(t,"addEventListener",function(i){return function(t,e,n){try{"function"==typeof e.handleEvent&&(e.handleEvent=Object(l.c)(e.handleEvent.bind(e),{mechanism:{data:{function:"handleEvent",handler:Object(s.a)(e),target:o},handled:!0,type:"instrument"}}))}catch(t){}return i.call(this,t,Object(l.c)(e,{mechanism:{data:{function:"addEventListener",handler:Object(s.a)(e),target:o},handled:!0,type:"instrument"}}),n)}}),Object(a.c)(t,"removeEventListener",function(r){return function(t,e,n){var i;try{var o=null==(i=e)?void 0:i.__sentry_wrapped__;o&&r.call(this,t,o,n)}catch(t){}return r.call(this,t,e,n)}}))},u.prototype._wrapXHR=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(function(n){n in i&&"function"==typeof i[n]&&Object(a.c)(i,n,function(t){var e={mechanism:{data:{function:n,handler:Object(s.a)(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(e.mechanism.data.handler=Object(s.a)(t.__sentry_original__)),Object(l.c)(t,e)})}),n.apply(this,t)}},u.id="TryCatch",u);function u(t){this.name=u.id,this._options=Object(i.a)({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var i=n(0),a=n(6),r=n(33),o=n(12),s=n(29),l=n(2),c=n(3),u=n(22),d=n(11),p=(h.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(o.a.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(o.a.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},h.prototype._installGlobalOnErrorHandler=function(){var r=this;this._onErrorHandlerInstalled||(Object(s.a)({callback:function(t){var e=t.error,n=Object(a.b)(),i=n.getIntegration(h),o=e&&!0===e.__sentry_own_request__;!i||Object(d.b)()||o||(i=n.getClient(),o=Object(l.i)(e)?r._eventFromIncompleteOnError(t.msg,t.url,t.line,t.column):r._enhanceEventWithInitialFrame(Object(u.c)(e,void 0,{attachStacktrace:i&&i.getOptions().attachStacktrace,rejection:!1}),t.url,t.line,t.column),Object(c.a)(o,{handled:!1,type:"onerror"}),n.captureEvent(o,{originalException:e}))},type:"error"}),this._onErrorHandlerInstalled=!0)},h.prototype._installGlobalOnUnhandledRejectionHandler=function(){var o=this;this._onUnhandledRejectionHandlerInstalled||(Object(s.a)({callback:function(t){var e=t;try{"reason"in t?e=t.reason:"detail"in t&&"reason"in t.detail&&(e=t.detail.reason)}catch(t){}var t=Object(a.b)(),n=t.getIntegration(h),i=e&&!0===e.__sentry_own_request__;if(!n||Object(d.b)()||i)return!0;n=t.getClient(),i=Object(l.i)(e)?o._eventFromRejectionWithPrimitive(e):Object(u.c)(e,void 0,{attachStacktrace:n&&n.getOptions().attachStacktrace,rejection:!0});i.level=r.a.Error,Object(c.a)(i,{handled:!1,type:"onunhandledrejection"}),t.captureEvent(i,{originalException:e})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},h.prototype._eventFromIncompleteOnError=function(t,e,n,i){var o,t=Object(l.e)(t)?t.message:t,r=(Object(l.k)(t)&&(r=t.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i))&&(o=r[1],t=r[2]),{exception:{values:[{type:o||"Error",value:t}]}});return this._enhanceEventWithInitialFrame(r,e,n,i)},h.prototype._eventFromRejectionWithPrimitive=function(t){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t)}]}}},h.prototype._enhanceEventWithInitialFrame=function(t,e,n,i){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].stacktrace=t.exception.values[0].stacktrace||{},t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames||[];i=isNaN(parseInt(i,10))?void 0:i,n=isNaN(parseInt(n,10))?void 0:n,e=Object(l.k)(e)&&0<e.length?e:Object(c.f)();return 0===t.exception.values[0].stacktrace.frames.length&&t.exception.values[0].stacktrace.frames.push({colno:i,filename:e,function:"?",in_app:!0,lineno:n}),t},h.id="GlobalHandlers",h);function h(t){this.name=h.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=Object(i.a)({onerror:!0,onunhandledrejection:!0},t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var o=n(0),i=n(36),r=n(6),a=n(2),s=n(28),l=n(24),c=(u.prototype.setupOnce=function(){Object(i.b)(function(t,e){var n=Object(r.b)().getIntegration(u);return n?n._handler(t,e):t})},u.prototype._handler=function(t,e){return t.exception&&t.exception.values&&e&&Object(a.g)(e.originalException,Error)&&(e=this._walkErrorTree(e.originalException,this._key),t.exception.values=Object(o.e)(e,t.exception.values)),t},u.prototype._walkErrorTree=function(t,e,n){var i;return void 0===n&&(n=[]),!Object(a.g)(t[e],Error)||n.length+1>=this._limit?n:(i=Object(l.a)(t[e]),i=Object(s.c)(i),this._walkErrorTree(t[e],e,Object(o.e)([i],n)))},u.id="LinkedErrors",u);function u(t){void 0===t&&(t={}),this.name=u.id,this._key=t.key||"cause",this._limit=t.limit||5}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(36),a=n(6),e=n(3),s=Object(e.e)(),o=(l.prototype.setupOnce=function(){Object(i.b)(function(t){var e,n,i,o;return Object(a.b)().getIntegration(l)&&(s.navigator||s.location||s.document)?(e=(null==(e=t.request)?void 0:e.url)||(null==(e=s.location)?void 0:e.href),o=(s.document||{}).referrer,n=(s.navigator||{}).userAgent,i=Object(r.a)(Object(r.a)(Object(r.a)({},null==(i=t.request)?void 0:i.headers),o&&{Referer:o}),n&&{"User-Agent":n}),o=Object(r.a)(Object(r.a)({},e&&{url:e}),{headers:i}),Object(r.a)(Object(r.a)({},t),{request:o})):t})},l.id="UserAgent",l);function l(){this.name=l.id}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(6),o=n(12);function r(t,e){!0===e.debug&&o.a.enable();var n=Object(i.b)(),t=new t(e);n.bindClient(t)}},function(t,e,r){"use strict";!function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.UserAuth=void 0;var i=r(16);function o(t){var e=this;this.onLoginSucess=null,this.onLoginError=null,this.onRegisterSuccess=null,this.onRegisterError=null,this.loginSuccess=function(t){t.token&&(t.user.token=t.token),window.userModel=t.user,window.ilovepdfConfig&&(o.updateUserMenu(t.content),o.updateUser(t.user)),null===e.onLoginSucess||"function"!=typeof e.onLoginSucess&&"object"!=typeof e.onLoginSucess||e.onLoginSucess(t.user)},this.registerSuccess=function(t){o.updateUserMenu(t.content),o.updateUser(t.user),t.token&&(t.user.token=t.token),n(".user-menu__item--premium").remove(),o.sendGA_registered(e.runningFrom),"function"==typeof e.onRegisterSuccess&&e.onRegisterSuccess(t)},this.registerError=function(t){"function"==typeof e.onRegisterError&&e.onRegisterError(t)},Object.assign(this,t),this.userModel=new i.UserModel}o.initActions=function(){n(".logout").click(function(t){t.preventDefault(),i.UserModel.logout()})},o.sendGA_registered=function(t){window.ev("send","event","user","registered",t),window.ev("event","sign_up",{mode:t})},o.prototype.login=function(e){var n=this;(e=void 0===e?null:e)||this.extraLoginParams&&this.extraLoginParams.forEach(function(t){e.push(t)}),this.userModel.login(e).then(this.loginSuccess,function(t){return n.loginError(t.responseJSON)})},o.prototype.sendResetPasswordEmail=function(t){return this.userModel.sendResetPasswordEmail(t)},o.prototype.loginError=function(t){"function"==typeof this.onLoginError&&this.onLoginError(t)},o.updateUser=function(t){window.userModel=t,window.ilovepdfConfig&&(window.ilovepdfConfig.user=t),i.UserModel.updateUser(t),o.initActions()},o.updateUserMenu=function(t){var e,n=document.querySelector(".header .actions");n&&(e=n.querySelectorAll(":scope > a"),n.querySelector(".avatar")||(e.forEach(function(t){t.remove()}),n.innerHTML=t+n.innerHTML))},o.prototype.register=function(t){t=this.userModel.register(t);return t.then(this.registerSuccess,this.registerError),t},o.sendEventUserAuth=function(){var t=new CustomEvent("userAuth");window.dispatchEvent(t)},e.UserAuth=o}.call(this,r(1))},function(t,e,n){"use strict";var i,o;n.d(e,"a",function(){return i}),(n=i=i||{}).Unknown="unknown",n.Skipped="skipped",n.Success="success",n.RateLimit="rate_limit",n.Invalid="invalid",n.Failed="failed",(o=i=i||{}).fromHttpCode=function(t){return 200<=t&&t<300?o.Success:429===t?o.RateLimit:400<=t&&t<500?o.Invalid:500<=t?o.Failed:o.Unknown}},function(t,n,r){"use strict";!function(i){Object.defineProperty(n,"__esModule",{value:!0}),n.Limits=n.REASON=void 0;var s,c=r(16),l=r(7),o=r(17),t=((t=s=n.REASON||(n.REASON={})).ERROR_FEATURE="this feature is for premium only",t.ERROR_SIZE="file size too big",t.ERROR_FILES="too much files",t.ERROR_EXTENSION="invalid filetype",t.ERROR_PAGES="too much pages",t.ERROR_PXSIZE="file pixels too big",e.prototype.getTool=function(){return this.concreteTool||(this.tool==this.subtool?this.tool:-1!==this.tool.indexOf("image")&&-1===this.subtool.indexOf("image")?this.tool.replace("image",this.subtool):this.subtool)},e.prototype.addIgnoredFile=function(t){this.ignored.push(t)},e.prototype.getIgnoredFiles=function(){return this.ignored},e.prototype.getLimitedFiles=function(){return this.files.limited},e.prototype.getLimitedFilenames=function(){var e=this,t=this.getLimitedFiles(),n=[];return t.forEach(function(t){var t=e.files.getFile(t);t&&(t=t.name.substring(0,20)+(20<t.name.length?"...":""),n.push(t))}),n},e.prototype.isIgnored=function(t){return-1!=this.ignored.indexOf(t)},e.prototype.isLimited=function(t){return-1!==this.files.limited.indexOf(t)},e.prototype.setFileLimits=function(){var n,i,o,r,a=this,t=(this.fileLimits=window.ilovepdfConfig.fileLimits,c.UserModel.get());t&&1==t.premium&&(this.fileLimits=t.limits),this.files.resetLimitedFiles(),this.checkHasLimits()&&(o=i=n=0,r=!1,this.files.files.forEach(function(t){var e;!1===r?(n++,t.size&&(i+=parseInt(t.size)),t.file&&t.file.numPages&&(o+=t.file.numPages),e=t.width*t.height,null!==a.checkFileLimits(i,n,o,e)&&(r=!0,a.files.limitFile(t.id))):a.files.limitFile(t.id)}))},e.prototype.checkFileLimits=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),t=(t=void 0===t?null:t)||this.files.getFileSizeNotIgnored(),e=e||this.files.countNotIgnored(),n=n||this.files.getFilePagesNotIgnored(),i=i||this.files.getFilePxsizeNotIgnored(),this.fileLimits=window.ilovepdfConfig.fileLimits;var o,r,a,s,l=c.UserModel.get();if(l&&1==l.premium&&(this.fileLimits=l.limits),this.checkHasLimits()){if(null!==(o=this.checkSizeLimit(t))&&this.hasSurpasedLimits(o))return o;if(null!==(r=this.checkPagesLimit(n))&&this.hasSurpasedLimits(r))return r;if(null!==(a=this.checkFilesLimit(e))&&this.hasSurpasedLimits(a))return a;if(null!==(s=this.checkPxsizeLimit(i))&&this.hasSurpasedLimits(s))return s}return o||r||a||s||null},e.prototype.resetEventSent=function(){this.eventSent=!1},e.prototype.checkHasLimits=function(t){return void 0===t&&(t=null),this.fileLimits[this.concreteTool]?null==t||this.fileLimits[this.concreteTool].hasOwnProperty(t):null},e.prototype.checkSizeLimit=function(t){return(t=(t=void 0===t?null:t)||this.files.getFileSizeNotIgnored())>1024*parseInt(this.fileLimits[this.concreteTool].mb)*1024?(t=Math.floor(t/1024/1024),!0!==this.eventSent&&0==i(".download").length&&(this.eventSent=!0,window.ev("sendOnce","event","limits","filesize-exceeded",this.concreteTool,t),window.ev("eventOnce","limit",{reason:"filesize",tool:this.concreteTool,quantity:t})),s.ERROR_SIZE):null},e.prototype.checkFilesLimit=function(t){return(t=(t=void 0===t?null:t)||this.files.countNotIgnored())>this.fileLimits[this.concreteTool].files?(!0!==this.eventSent&&0==i(".download").length&&(this.eventSent=!0,window.ev)&&(window.ev("sendOnce","event","limits","filenumber-exceeded",this.concreteTool,t),window.ev("eventOnce","limit",{reason:"filenumber",tool:this.concreteTool,quantity:t})),s.ERROR_FILES):null},e.prototype.checkPagesLimit=function(t){return t=(t=void 0===t?null:t)||this.files.getFilePagesNotIgnored(),this.fileLimits[this.concreteTool].pages&&t>this.fileLimits[this.concreteTool].pages?(!0!==this.eventSent&&0==i(".download").length&&(this.eventSent=!0,window.ev("sendOnce","event","limits","pages-exceeded",this.concreteTool,t),window.ev("eventOnce","limit",{reason:"pages",tool:this.concreteTool,quantity:t})),s.ERROR_PAGES):null},e.prototype.checkPxsizeLimit=function(t){return t=t||this.files.getFilePxsizeNotIgnored(),this.fileLimits[this.concreteTool].pxsize&&t>this.fileLimits[this.concreteTool].pxsize?(!0!==this.eventSent&&0==i(".download").length&&(this.eventSent=!0,window.ev("sendOnce","event","limits","pxsize-exceeded",this.concreteTool,t),window.ev("eventOnce","limit",{reason:"pxsize",tool:this.concreteTool,quantity:t})),s.ERROR_PXSIZE):null},e.prototype.findNextLevelLimit=function(t,e,n){for(var i in this.allFileLimits)if(this.allFileLimits.hasOwnProperty(i)){var o=this.allFileLimits[i];if(o.hasOwnProperty(t)){o=o[t];if(o.hasOwnProperty(e)&&o[e]>=n)return i}}return!1},e.prototype.getPremiumLimitByTool=function(t,e){return this.allFileLimits.premium_limits[t][e]},e.prototype.getLevelLimit=function(t,e,n){return 0==n&&(n=this.LEVEL_PREMIUM),this.allFileLimits[n][t][e]},e.prototype.makeErrorData=function(t,e,n,i,o){var r=this;function a(t,e){return 1==t?"files"==e?l.Lang.t("1 file"):l.Lang.t("1 mb"):("mb"==e&&1e3<=t&&(t/=1e3,e="Gb"),l.Lang.t("${limit} "+e.toLowerCase(),{limit:t}))}function s(t){return t==r.LEVEL_REGISTERED?l.Lang.t("registeredLevel"):t==r.LEVEL_PREMIUM?l.Lang.t("premiumLevel"):l.Lang.t("publicLevel")}return{currentLimit:a(e,t),currentLevel:s(n).ucFirst(),nextLimit:a(i,t),nextLevel:s(o).ucFirst()}},e.prototype.getLimitData=function(t,e){return 1==t?"files"==e?l.Lang.t("1 file"):"pages"==e?l.Lang.t("1 page"):l.Lang.t("1 mb"):("mb"==e&&1e3<=t&&(t/=1e3,e="Gb"),l.Lang.t("${limit} "+e.toLowerCase(),{limit:t}))},e.prototype.limitErrorText=function(t){return l.Lang.t("limitTaskMsg",t)},e.prototype.setLimit=function(t){this.err=t;var e,n=this.getNextLimit(t);return 0==n.nextLevel?(e=this.getPremiumLimitByTool(this.concreteTool,n.name),0==i("#superlimit").length&&(t=o.Tools.modalView({id:"superlimit",title:"",content:""}),(t=i(t)).find(".modal-dialog").addClass("modal-dialog-centered"),t.appendTo(i("body"))),setTimeout(function(){"files"==n.name?(i("#superlimit .modal-title").html(l.Lang.t("File number exceeded")),i("#superlimit .modal-body").html(l.Lang.t("Sorry, we are not ready for that.")+"<br>\n                         \x3c!--"+l.Lang.t("limitFiles",{files:e})+"<br>--\x3e\n                         "+l.Lang.t("superlimitWhoa")+"<br>\n                         "+l.Lang.t("superlimitDownload"))):(i("#superlimit .modal-title").html(l.Lang.t("File size exceeded")),i("#superlimit .modal-body").html(l.Lang.t("Sorry, we are not ready for that.")+"<br>\n                         \x3c!--"+l.Lang.t("limitMb",{mb:e})+"<br>--\x3e\n                         "+l.Lang.t("superlimitWhoa")+"<br>\n                         "+l.Lang.t("superlimitDownload"))),i("#superlimit").modal("toggle")},500),null):n.nextLevel==this.LEVEL_PUBLIC?null:{limitName:n.name,limitValue:n.currentValue,nextLevelLimit:n.nextLevel,nextLimit:n.nextValue}},e.prototype.getCurrentLimitsLevel=function(){var t=this.LEVEL_PUBLIC;return t=c.UserModel.isUser()&&(t=this.LEVEL_REGISTERED,c.UserModel.isPremium())?this.LEVEL_PREMIUM:t},e.prototype.getLimitTexts=function(){var t,e,n=this.checkFileLimits(),i=[this.fileLimits[this.getTool()],this.allFileLimits.premium_limits[this.getTool()]],o=i[0],r=i[1],a=null;switch(n){case s.ERROR_FILES:t=l.Lang.t("limitFree")+" "+l.Lang.t("limitFiles",{n:o.files}),e=l.Lang.t("limitPremium")+" "+l.Lang.t("limitFiles",{n:r.files}),a="files";break;case s.ERROR_SIZE:t=l.Lang.t("limitFree")+" "+l.Lang.t("limitSize",{n:o.mb}),e=l.Lang.t("limitPremium")+" "+l.Lang.t("limitSize",{n:r.mb}),a="size";break;case s.ERROR_PAGES:t=l.Lang.t("limitFree")+" "+l.Lang.t("limitPages",{n:o.pages}),e=l.Lang.t("limitPremium")+" "+l.Lang.t("limitPages",{n:r.pages}),a="pages";break;case s.ERROR_PXSIZE:t=l.Lang.t("limitFree")+" "+l.Lang.t("limitPxsize",{n:o.pxsize}),e=l.Lang.t("limitPremium")+" "+l.Lang.t("limitPxsize",{n:r.pxsize}),a="pxsize"}return{current:t,premium:e,limit:a}},e.prototype.getNextLimit=function(t,e){var n,i;switch(null==(e=void 0===e?null:e)&&(e=this.getTool()),t){case s.ERROR_SIZE:n="mb",i=this.files.getFileSizeNotIgnored()/1024/1024;break;case s.ERROR_FILES:n="files",i=this.files.countNotIgnored();break;case s.ERROR_PAGES:n="pages",i=this.files.getFilePagesNotIgnored();break;case s.ERROR_PXSIZE:n="pxsize",i=this.files.getFilePxsizeNotIgnored()}return{name:n,currentValue:i,nextValue:0!=(t=this.findNextLevelLimit(e,n,i))&&this.getLevelLimit(e,n,t),nextLevel:t}},e.prototype.getNextLevelLimit=function(t){return this.getNextLimit(t).nextLevel},e.prototype.hasSurpasedLimits=function(t){return!1===this.getNextLevelLimit(t)},e.prototype.sendEventLimitsChanged=function(){var t=new CustomEvent("limitsChanged");window.dispatchEvent(t)},e.prototype.canContinueWithoutPremium=function(){for(var t=!0,e=0;e<this.minFiles;e++)1==this.files.files[e].limited&&(t=!1);return t},e);function e(t){this.minFiles=1,this.LEVEL_PREMIUM="premium_limits",this.LEVEL_REGISTERED="registered_limits",this.LEVEL_PUBLIC="limits",this.err=null,this.files=null,this.fileLimits=null,this.allFileLimits=null,this.tool=null,this.subtool=null,this.ignored=[],this.userLevel="public",Object.assign(this,t),this.concreteTool=this.getTool()}n.Limits=t}.call(this,r(1))},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},l=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},o=(Object.defineProperty(e,"__esModule",{value:!0}),e.AjaxTemplate=void 0,c.load=function(a,s){return void 0===s&&(s={}),i(this,void 0,void 0,function(){var n,e,i,o,r;return l(this,function(t){return s=s||{},n=new XMLHttpRequest,i=e=!1,o=function(t){return!e&&!i&&200===t.status},r=this.buildQueryParams(s),r=r?a+"?"+r:a,n.open("GET",c.getLangBaseUrl()+"/"+r,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Accept","text/html"),n.ontimeout=function(){return e=!0},n.onerror=function(){return i=!0},[2,new Promise(function(t,e){n.onreadystatechange=function(){4===n.readyState&&(o(n)?t(n.responseText):e(n.response))},n.send()})]})})},c.getLangBaseUrl=function(){var t=window.lang;return"en-US"==t?"/"+c.BASE_URL:"/"+t+"/"+c.BASE_URL},c.buildQueryParams=function(t){if(0===Object.keys(t).length)return null;var e,n=[];for(e in t)n.push(e+"="+encodeURIComponent(t[e]));return n.join("&")},c.BASE_URL="templates",c);function c(){}e.AjaxTemplate=o},function(t,u,d){"use strict";!function(e){var i,t,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(u,"__esModule",{value:!0}),u.TemporaryDialog=void 0,d(8)),r=d(25),a=d(79),s=(t=a.Dialog,n(l,t),l);function l(){return null!==t&&t.apply(this,arguments)||this}function c(t){var n=this;void 0===t&&(t={}),this.isShown=!1,this.setTemplate=function(t,e){return void 0===e&&(e=null),n.contentBuilderFn=null,n.template=t,n.onTemplateRenderFn=e,n},this.show=function(){var t;if(!n.isShown)return e(".modal:visible").removeAttr("tabindex"),(t=new s(n.dialogProps)).addEventListener("closed",function(){n.currentDialog=null,n.dispatchEvent(new o.IloveEvent("closed"))}),t.addEventListener("hidden",function(){n.isShown=!1,t.destroy(),n.dispatchEvent(new o.IloveEvent("hidden"))}),t.addEventListener("shown",function(){n.dispatchEvent(new o.IloveEvent("shown"))}),n.fillDialog(t),(n.currentDialog=t).show(),n.isShown=!0,t},this.close=function(){n.currentDialog&&(n.currentDialog.close(),n.currentDialog=null)},this.setContentBuilder=function(t){return n.template=null,n.onTemplateRenderFn=null,n.contentBuilderFn=t,n},this.eventEmitter=new r.ILoveEventEmitter,this.dialogProps=t}u.TemporaryDialog=s,c.prototype.isClosedOrInProcessOfClosing=function(){return!this.currentDialog||this.currentDialog.isClosedOrInProcessOfClosing()},c.prototype.fillDialog=function(t){if(this.contentBuilderFn)t.setContent(this.contentBuilderFn());else{if(!this.template)throw"Unknown DisposableDialog creation mechanism";var e;this.template.content?(e=this.template.content.cloneNode(!0),t.domRoot.appendChild(e)):(this.template,t.domRoot.innerHTML=this.template.innerHTML),this.onTemplateRenderFn&&this.onTemplateRenderFn(t.domRoot)}},c.prototype.dispatchEvent=function(t){return this.eventEmitter.dispatchEvent(t)},c.prototype.addEventListener=function(t,e){return this.eventEmitter.addEventListener(t,e)},Object.defineProperty(c.prototype,"domRoot",{get:function(){var t;return null==(t=this.currentDialog)?void 0:t.domRoot},enumerable:!1,configurable:!0}),u.default=c}.call(this,d(1))},function(t,e,n){"use strict";function o(){}Object.defineProperty(e,"__esModule",{value:!0}),e.FormDataHelper=void 0,o.buildFormData=function(e,n,i){void 0===i&&(i=null),!n||"object"!=typeof n||n instanceof Date||n instanceof File?e.append(i,null==n?"":n):Object.keys(n).forEach(function(t){o.buildFormData(e,n[t],null!=i?i+"["+t+"]":t)})},o.jsonToFormData=function(t){var e=new FormData;return o.buildFormData(e,t),e},e.FormDataHelper=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkPreloadIsNeeded=e.get_browser=e.isSafari=e.isIE11=e.isEdgeBrowser=void 0;var i=n(78);function o(t){return void 0===t&&(t=i.getUserAgent()),/^((?!chrome|android|crios).)*safari/i.test(t)}function r(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?{name:"IE",version:(t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""}:"Chrome"===n[1]&&null!=(t=e.match(/\bOPR|Edge\/(\d+)/))?{name:"Opera",version:t[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),{name:n[0],version:n[1]})}e.isEdgeBrowser=function(t){return void 0===t&&(t=i.getUserAgent()),/Edge/i.test(t)},e.isIE11=function(){return!!window.MSInputMethodContext&&!!document.documentMode},e.isSafari=o,e.get_browser=r,e.checkPreloadIsNeeded=function(){var t;return!(!i.isIos()&&!o())||"Chrome"==(t=r()).name&&t.version<=73||"Firefox"==t.name&&t.version<=94||"Edge"==t.name&&t.version<=18||"Yandex"==t.name}},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){var i,o;void 0!==(n="function"==typeof(i=o=function(){function s(){for(var t=0,e={};t<arguments.length;t++){var n,i=arguments[t];for(n in i)e[n]=i[n]}return e}function c(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(l){function a(){}function n(t,e,n){if("undefined"!=typeof document){"number"==typeof(n=s({path:"/"},a.defaults,n)).expires&&(n.expires=new Date(+new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var i=JSON.stringify(e);/^[\{\[]/.test(i)&&(e=i)}catch(t){}e=l.write?l.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o,r="";for(o in n)n[o]&&(r+="; "+o,!0!==n[o])&&(r+="="+n[o].split(";")[0]);return document.cookie=t+"="+e+r}}function e(t,e){if("undefined"!=typeof document){for(var n={},i=document.cookie?document.cookie.split("; "):[],o=0;o<i.length;o++){var r=i[o].split("="),a=r.slice(1).join("=");e||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var s=c(r[0]),a=(l.read||l)(a,s)||c(a);if(e)try{a=JSON.parse(a)}catch(t){}if(n[s]=a,t===s)break}catch(t){}}return t?n[t]:n}}return a.set=n,a.get=function(t){return e(t,!1)},a.getJSON=function(t){return e(t,!0)},a.remove=function(t,e){n(t,"",s(e,{expires:-1}))},a.defaults={},a.withConverter=t,a}(function(){})})?i.call(e,n,e,t):i)&&(t.exports=n),t.exports=o()},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},s=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},l=(Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractPaymentState=void 0,n(21)),c=n(82),h=n(8),n=(o=l.StateBase,r(u,o),u.prototype.initAbstractPayment=function(n){var i;return a(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:if(this.ctx.canGoToAPreviousState()&&this.goToPreviousStateButtonIsVisible()?(this.dispatchEvent(new h.IloveEvent("disableContentAbandonment")),this.dialogCloseBtn&&(this.dialogCloseBtn.style.display="none")):this.dialogCloseBtn&&(this.dialogCloseBtn.style.display=""),this.abstractPaymentInited)return[2];if(this.userPayment=n.userPayment||new c.UserPayment,this.abstractPaymentInited=!0,Object.assign(this,n),"gui"===(null==(i=this.paymentInterval)?void 0:i.type))switch(this.paymentInterval.gui){case"radio":break;case"boxes":this.initPaymentIntervalSelectorButtons();break;default:throw"Unknown way to determine paymentInterval '"+this.paymentInterval.type+"'"}return[4,this.initUserPayment(this.userPayment).then(function(){e.userPayment.addEventListener("UserPayment:ActionButtonClicked",e._abstractOnPayButtonClicked),e.userPayment.addEventListener("UserPayment:BeforeExternalAction",function(t){return e._onExternalPaymentAction("UserPayment:BeforeExternalAction",t)}),e.userPayment.addEventListener("UserPayment:AfterExternalAction",function(t){return e._onExternalPaymentAction("UserPayment:AfterExternalAction",t)})})];case 1:return t.sent(),[2]}})})},u.prototype.initAbstractCard=function(n){return a(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return this.abstractPaymentInited=!0,Object.assign(this,n),this.userPayment=n.userPayment||new c.UserPayment,[4,this.initUserPayment(this.userPayment).then(function(){e.userPayment.addEventListener("UserPayment:ActionButtonClicked",e._abstractOnPayButtonClicked)})];case 1:return t.sent(),[2]}})})},Object.defineProperty(u.prototype,"stripeViewParams",{get:function(){return{paymentButtonText:this.paymentProviderProps.find(function(t){return"stripe"===t.name}).paymentButtonText,currentPaymentMethod:this.currentPaymentMethod}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"paypalViewParams",{get:function(){function t(){return!(n.ctx.isTrialEnabledForThisTool()&&n.ctx.canUserDoTrial())}var e,n=this;this.paymentProviderProps.find(function(t){return"paypal"===t.name});switch(this.paymentAction){case"become_premium":case"subsc_update":e={actionName:"become_premium"===this.paymentAction?"PaySubscription":"UpdateSubscription",actionParams:{subscriptionInterval:function(){return n.selectedPaymentInterval},numUsers:function(){return n.numUsers?n.numUsers():n.paymentNumUsersDefault},numDigitalSignatures:function(){return n.numSignatures?n.numSignatures():void 0},disableTrial:t}};break;case"pay_package":e={actionName:"PayPackage",actionParams:{packageName:function(){return n.package.name},quantity:function(){return n.package.qty},disableTrial:t}};break;default:throw"Unknown paypal paymentAction '"+this.paymentAction+"'"}return{action:e}},enumerable:!1,configurable:!0}),u.prototype._executePaymentAction=function(t,e){var n=this,i=this.selectedPaymentProvider,o=this.paymentAction,r=this.paymentInterval?this.selectedPaymentInterval:void 0,a=this.numUsers?this.numUsers():this.paymentNumUsersDefault,s=(this.showLoadingScreen(),this.userPayment.disableActionButton(i),this.dispatchEvent(new h.IloveEvent("disableContentAbandonment")),!(this.ctx.isTrialEnabledForThisTool()&&this.ctx.canUserDoTrial())),l=this.couponCode?this.couponCode():void 0;switch(o){case"become_premium":u=this.userPayment.paySubscription({numUsers:a,provider:i,subscriptionInterval:r,disableTrial:s,couponCode:l});break;case"subsc_update":var c=this.numSignatures(),u=this.userPayment.updateSubscription({numSignatures:c,numUsers:a,provider:i,subscriptionInterval:r,disableTrial:s,couponCode:l});break;case"pay_package":var c=this.package.name,d=this.package.qty;u=this.userPayment.payPackage({packageName:c,packageQuantity:d,provider:i,disableTrial:s});break;case"update_card":c=this.userPayment.stripeService.view.card;u=this.userPayment.updateCard({provider:i,element:c})}u.then(function(t){return n._abstractOnPaymentSuccess(i,t)}),u.catch(function(t){return n._abstractOnPaymentFailed(i,t)});function p(t){n.clearLoadingScreen(),n.userPayment.enableActionButton(i),n.dispatchEvent(new h.IloveEvent("unsetContentAbandonment"))}return u.then(p,p),u},u.prototype.initUserPayment=function(i){var o;return a(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:return(e=this.initializedPaymentProviders).includes("stripe")?[4,i.mountView("stripe",this.stripeViewMountPoint,this.stripeViewParams)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.includes("paypal")?[4,i.mountView("paypal",this.paypalViewMountPoint,this.paypalViewParams)]:[3,4];case 3:t.sent(),t.label=4;case 4:return n=null!=(o=null==(o=this.currentPaymentMethod)?void 0:o.provider)?o:this.DEFAULT_SELECTED_PROVIDER_BTN,this.initPaymentProviderSelectorButtons(),this.clickProviderButton(n),[2]}})})},Object.defineProperty(u.prototype,"initializedPaymentProviders",{get:function(){return this.paymentProviderProps.map(function(t){return t.name})},enumerable:!1,configurable:!0}),u.prototype.initPaymentIntervalSelectorButtons=function(){var t=this.domStateRoot.querySelectorAll(".payment__interval-selector__select-box"),e=function(){t.forEach(function(t){return t.setAttribute("data-selected","false")})};t.forEach(function(t){return t.addEventListener("click",function(t){return t=t.currentTarget,e(),void t.setAttribute("data-selected","true")})})},u.prototype.clickProviderButton=function(e){var t=this,n=this.domRoot,i=(n.querySelector(".payment__provider-views"),n.querySelector(".payment__provider-selector")),n=(n.querySelectorAll(".payment__provider-selector .payment__provider-selector__item"),Array.from(i.querySelectorAll(".payment__provider-selector__item"))),i=(n.forEach(function(t){return t.setAttribute("data-checked","false")}),n.find(function(t){return t.dataset.value===e}));i.setAttribute("data-checked","true");n=i.getAttribute("data-value");t.domRoot.querySelectorAll(".payment__provider-views .payment__provider-views__item").forEach(function(t){return t.classList.remove("payment__provider-views__item--appeared")}),(n=t.domRoot.querySelector('.payment__provider-views .payment__provider-views__item[data-provider-name="'+n+'"]'))&&n.classList.add("payment__provider-views__item--appeared")},u.prototype.initPaymentProviderSelectorButtons=function(){var n=this,t=this.domRoot,e=t.querySelector(".payment__provider-selector").querySelectorAll(".payment__provider-selector__item"),t=t.querySelectorAll(".payment__provider-selector .payment__provider-selector__item"),i=(e.forEach(function(e){e.addEventListener("click",function(t){n.clickProviderButton(e.dataset.value)})}),this.initializedPaymentProviders);t.forEach(function(t){var e=t.getAttribute("data-value");if(!e)throw"Provider selector button is missing data-value attribute";i.includes(e)||(t.style.display="none")})},Object.defineProperty(u.prototype,"stripeViewMountPoint",{get:function(){var t=this.domRoot.querySelector(".payment__stripe-view");if(t)return t;throw"Mountpoint for Stripe view not found"},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"paypalViewMountPoint",{get:function(){var t=this.domRoot.querySelector(".payment__paypal-view");if(t)return t;throw"Mountpoint for Paypal view not found"},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"selectedPaymentProvider",{get:function(){return 1==this.paymentProviderProps.length?this.paymentProviderProps[0].name:this.domRoot.querySelector(".payment__provider-selector .payment__provider-selector__item[data-checked='true']").getAttribute("data-value")},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"selectedPaymentInterval",{get:function(){if("gui"===this.paymentInterval.type){if("boxes"===this.paymentInterval.gui)return this.selected_paymentInterval_boxes;if("radio"===this.paymentInterval.gui)return this.selected_paymentInterval_radio}else if("predefined"===this.paymentInterval.type)return this.paymentInterval.value;throw"Unknown way to determine paymentInterval '"+this.paymentInterval.type+"'"},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"selected_paymentInterval_radio",{get:function(){var t=Array.from(this.domRoot.querySelectorAll(".payment__interval-selector [name='paymentInterval']"));if(0===t.length)throw"Radio buttons for payment interval not found";for(var e=0;e<t.length;e++)if(t[e].checked)return t[e].value;return null},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"selected_paymentInterval_boxes",{get:function(){var t=this.domStateRoot.querySelector(".payment__interval-selector__select-box[data-selected='true']");if(t)return t.getAttribute("data-value");throw"No selected interval box found"},enumerable:!1,configurable:!0}),u);function u(){var n=null!==o&&o.apply(this,arguments)||this;return n.abstractPaymentInited=!1,n.paymentNumUsersDefault=1,n.DEFAULT_SELECTED_PROVIDER_BTN="stripe",n._onExternalPaymentAction=function(t,e){e=e.detail;"UserPayment:AfterExternalAction"===t&&n._onPaymentSuccess(e.provider,e)},n._abstractOnPayButtonClicked=function(t){n._executePaymentAction("payButton",t)},n._abstractOnPaymentSuccess=function(t,e){n._onPaymentSuccess(t,e)},n._abstractOnPaymentFailed=function(t,e){n.userPayment.notifyPaymentError(t,e,n.paymentAction),n._onPaymentFailed(t,e)},n}e.AbstractPaymentState=n},function(t,e){t.exports=function(t){var e;return t.webpackPolyfill||((e=Object.create(t)).children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1),e}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i,e=n(0),o=n(27),r=n(3),a=n(45),s=n(14),n=n(35),l=Object(r.e)(),c=(i=n.a,Object(e.b)(u,i),u.prototype.sendEvent=function(t){return this._sendRequest(Object(o.a)(t,this._api),t)},u.prototype.sendSession=function(t){return this._sendRequest(Object(o.b)(t,this._api),t)},u.prototype._sendRequest=function(o,t){var e,r=this;return this._isRateLimited(o.type)?Promise.reject({event:t,type:o.type,reason:"Transport locked till "+this._disabledUntil(o.type)+" due to too many requests.",status:429}):(e={body:o.body,method:"POST",referrerPolicy:Object(a.d)()?"origin":""},void 0!==this.options.fetchParameters&&Object.assign(e,this.options.fetchParameters),void 0!==this.options.headers&&(e.headers=this.options.headers),this._buffer.add(new s.a(function(n,i){l.fetch(o.url,e).then(function(t){var e={"x-sentry-rate-limits":t.headers.get("X-Sentry-Rate-Limits"),"retry-after":t.headers.get("Retry-After")};r._handleResponse({requestType:o.type,response:t,headers:e,resolve:n,reject:i})}).catch(i)})))},u);function u(){return null!==i&&i.apply(this,arguments)||this}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i,e=n(0),o=n(27),a=n(14),n=n(35),r=(i=n.a,Object(e.b)(s,i),s.prototype.sendEvent=function(t){return this._sendRequest(Object(o.a)(t,this._api),t)},s.prototype.sendSession=function(t){return this._sendRequest(Object(o.b)(t,this._api),t)},s.prototype._sendRequest=function(o,t){var r=this;return this._isRateLimited(o.type)?Promise.reject({event:t,type:o.type,reason:"Transport locked till "+this._disabledUntil(o.type)+" due to too many requests.",status:429}):this._buffer.add(new a.a(function(e,n){var t,i=new XMLHttpRequest;for(t in i.onreadystatechange=function(){var t;4===i.readyState&&(t={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")},r._handleResponse({requestType:o.type,response:i,headers:t,resolve:e,reject:n}))},i.open("POST",o.url),r.options.headers)r.options.headers.hasOwnProperty(t)&&i.setRequestHeader(t,r.options.headers[t]);i.send(o.body)}))},s);function s(){return null!==i&&i.apply(this,arguments)||this}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(12),o=n(20),r=n(42),a=(s.prototype.eventFromException=function(t,e){throw new o.a("Backend has to implement `eventFromException` method")},s.prototype.eventFromMessage=function(t,e,n){throw new o.a("Backend has to implement `eventFromMessage` method")},s.prototype.sendEvent=function(t){this._transport.sendEvent(t).then(null,function(t){i.a.error("Error while sending event: "+t)})},s.prototype.sendSession=function(t){this._transport.sendSession?this._transport.sendSession(t).then(null,function(t){i.a.error("Error while sending session: "+t)}):i.a.warn("Dropping session because custom transport doesn't implement sendSession")},s.prototype.getTransport=function(){return this._transport},s.prototype._setupTransport=function(){return new r.a},s);function s(t){this._options=t,this._options.dsn||i.a.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var h=n(0),a=n(36),f=n(76),i=n(105),s=n(2),l=n(12),c=n(14),u=n(3),d=n(104),o=n(5),p=n(23),v=n(20),g=n(6),m=[];function r(t){var e,n,i,o,r={};return i=(t=t).defaultIntegrations&&Object(h.e)(t.defaultIntegrations)||[],t=t.integrations,o=[],Array.isArray(t)?(e=t.map(function(t){return t.name}),n=[],i.forEach(function(t){-1===e.indexOf(t.name)&&-1===n.indexOf(t.name)&&(o.push(t),n.push(t.name))}),t.forEach(function(t){-1===n.indexOf(t.name)&&(o.push(t),n.push(t.name))})):o="function"==typeof t?(o=t(i),Array.isArray(o)?o:[o]):Object(h.e)(i),-1!==(t=o.map(function(t){return t.name})).indexOf("Debug")&&o.push.apply(o,Object(h.e)(o.splice(t.indexOf("Debug"),1))),o.forEach(function(t){r[t.name]=t,t=t,-1===m.indexOf(t.name)&&(t.setupOnce(a.b,g.b),m.push(t.name),l.a.log("Integration installed: "+t.name))}),r}b.prototype.captureException=function(t,e,n){var i=this,o=e&&e.event_id;return this._process(this._getBackend().eventFromException(t,e).then(function(t){return i._captureEvent(t,e,n)}).then(function(t){o=t})),o},b.prototype.captureMessage=function(t,e,n,i){var o=this,r=n&&n.event_id,e=Object(s.i)(t)?this._getBackend().eventFromMessage(String(t),e,n):this._getBackend().eventFromException(t,n);return this._process(e.then(function(t){return o._captureEvent(t,n,i)}).then(function(t){r=t})),r},b.prototype.captureEvent=function(t,e,n){var i=e&&e.event_id;return this._process(this._captureEvent(t,e,n).then(function(t){i=t})),i},b.prototype.captureSession=function(t){t.release?this._sendSession(t):l.a.warn("Discarded session because of missing release")},b.prototype.getDsn=function(){return this._dsn},b.prototype.getOptions=function(){return this._options},b.prototype.flush=function(t){var n=this;return this._isClientProcessing(t).then(function(e){return n._getBackend().getTransport().close(t).then(function(t){return e&&t})})},b.prototype.close=function(t){var e=this;return this.flush(t).then(function(t){return e.getOptions().enabled=!1,t})},b.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=r(this._options))},b.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return l.a.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},b.prototype._updateSessionFromEvent=function(t,e){var n,i,o,r=!1,a=!1,s=e.exception&&e.exception.values;if(s){a=!0;try{for(var l=Object(h.f)(s),c=l.next();!c.done;c=l.next()){var u=c.value.mechanism;if(u&&!1===u.handled){r=!0;break}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}s=e.user;if(!t.userAgent){var d,p=e.request?e.request.headers:{};for(d in p)if("user-agent"===d.toLowerCase()){o=p[d];break}}t.update(Object(h.a)(Object(h.a)({},r&&{status:f.a.Crashed}),{user:s,userAgent:o,errors:t.errors+Number(a||r)}))},b.prototype._sendSession=function(t){this._getBackend().sendSession(t)},b.prototype._isClientProcessing=function(i){var o=this;return new c.a(function(t){var e=0,n=setInterval(function(){0==o._processing?(clearInterval(n),t(!0)):(e+=1,i&&i<=e&&(clearInterval(n),t(!1)))},1)})},b.prototype._getBackend=function(){return this._backend},b.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},b.prototype._prepareEvent=function(t,e,n){var i=this,o=this.getOptions().normalizeDepth,r=void 0===o?3:o,o=Object(h.a)(Object(h.a)({},t),{event_id:t.event_id||(n&&n.event_id?n.event_id:Object(u.i)()),timestamp:t.timestamp||Object(d.a)()}),t=(this._applyClientOptions(o),this._applyIntegrationsMetadata(o),e),e=(n&&n.captureContext&&(t=a.a.clone(t).update(n.captureContext)),c.a.resolve(o));return(e=t?t.applyToEvent(o,n):e).then(function(t){return"number"==typeof r&&0<r?i._normalizeEvent(t,r):t})},b.prototype._normalizeEvent=function(t,e){var n;return t?(n=Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},t),t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(function(t){return Object(h.a)(Object(h.a)({},t),t.data&&{data:Object(o.d)(t.data,e)})})}),t.user&&{user:Object(o.d)(t.user,e)}),t.contexts&&{contexts:Object(o.d)(t.contexts,e)}),t.extra&&{extra:Object(o.d)(t.extra,e)}),t.contexts&&t.contexts.trace&&(n.contexts.trace=t.contexts.trace),n):null},b.prototype._applyClientOptions=function(t){var e=this.getOptions(),n=e.environment,i=e.release,o=e.dist,r=e.maxValueLength,r=void 0===r?250:r,e=("environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==i&&(t.release=i),void 0===t.dist&&void 0!==o&&(t.dist=o),t.message&&(t.message=Object(p.d)(t.message,r)),t.exception&&t.exception.values&&t.exception.values[0]),n=(e&&e.value&&(e.value=Object(p.d)(e.value,r)),t.request);n&&n.url&&(n.url=Object(p.d)(n.url,r))},b.prototype._applyIntegrationsMetadata=function(t){var t=t.sdk,e=Object.keys(this._integrations);t&&0<e.length&&(t.integrations=e)},b.prototype._sendEvent=function(t){this._getBackend().sendEvent(t)},b.prototype._captureEvent=function(t,e,n){return this._processEvent(t,e,n).then(function(t){return t.event_id},function(t){l.a.error(t)})},b.prototype._processEvent=function(t,e,n){var i,o=this,r=this.getOptions(),a=r.beforeSend,r=r.sampleRate;return this._isEnabled()?!(i="transaction"===t.type)&&"number"==typeof r&&Math.random()>r?c.a.reject(new v.a("Discarding event because it's not included in the random sample (sampling rate = "+r+")")):this._prepareEvent(t,n,e).then(function(t){if(null===t)throw new v.a("An event processor returned null, will not send event.");if(e&&e.data&&!0===e.data.__sentry__||i||!a)return t;t=a(t,e);if(void 0===t)throw new v.a("`beforeSend` method has to return `null` or a valid event.");return Object(s.m)(t)?t.then(function(t){return t},function(t){throw new v.a("beforeSend rejected with "+t)}):t}).then(function(t){if(null===t)throw new v.a("`beforeSend` returned `null`, will not send event.");var e=n&&n.getSession&&n.getSession();return!i&&e&&o._updateSessionFromEvent(e,t),o._sendEvent(t),t}).then(null,function(t){if(t instanceof v.a)throw t;throw o.captureException(t,{data:{__sentry__:!0},originalException:t}),new v.a("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+t)}):c.a.reject(new v.a("SDK not enabled, will not send event."))},b.prototype._process=function(t){var e=this;this._processing+=1,t.then(function(t){return--e._processing,t},function(t){return--e._processing,t})};var y=b;function b(t,e){this._integrations={},this._processing=0,this._backend=new t(e),(this._options=e).dsn&&(this._dsn=new i.a(e.dsn))}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});o.prototype.memoize=function(t){if(this._hasWeakSet)return!!this._inner.has(t)||(this._inner.add(t),!1);for(var e=0;e<this._inner.length;e++)if(this._inner[e]===t)return!0;return this._inner.push(t),!1},o.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var e=0;e<this._inner.length;e++)if(this._inner[e]===t){this._inner.splice(e,1);break}};var i=o;function o(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}},function(t,n,e){"use strict";!function(e){function t(){}Object.defineProperty(n,"__esModule",{value:!0}),n.LinkTitle=void 0,t.disable=function(t){e(t).hover(function(){var t=e(this).attr("data-title");void 0!==t&&!1!==t||(t=e(this).attr("title"),e(this).attr("data-title",t)),e(this).attr("title","")},function(){var t=e(this).attr("data-title");e(this).attr("title",t)})},n.LinkTitle=t}.call(this,e(1))},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=(Object.defineProperty(e,"__esModule",{value:!0}),e.PremiumContext=void 0,n(7)),p=n(59),a=n(47),s=n(119),l=n(120),c=n(122),u=n(124),n=(o=a.ContextBase,r(h,o),h.prototype.initAllFeaturesTooltip=function(t){if(!this.tooltipRoot){if(this.tooltipRoot=t.querySelector(".new-premium__all-features-tooltip"),!this.tooltipRoot)throw"'All features' dom element not found";t=t.querySelector(".new-premium__all-features-tooltip__html-template");if(!t)throw"htmlTemplate not found for 'All features' tooltip";window.tippy(this.tooltipRoot,{allowHTML:!0,theme:"light new-premium-all-features-tooltip",content:t.innerHTML,placement:"bottom",arrow:!0,animation:"fade",trigger:"mouseenter",interactive:!0})}},h.prototype.initOCRTooltip=function(t){if(!this.tooltipRoot_OCR){if(this.tooltipRoot_OCR=t.querySelector(".new-premium__ocr-tooltip"),!this.tooltipRoot_OCR)throw"'OCR' dom element not found";t=t.querySelector(".new-premium__ocr-features-tooltip__html-template");if(!t)throw"htmlTemplate not found for 'OCR' tooltip";window.tippy(this.tooltipRoot_OCR,{allowHTML:!0,theme:"light new-premium__ocr-tooltip",content:t.innerHTML,placement:"bottom",arrow:!0,animation:"fade",trigger:"mouseenter",interactive:!0})}},h.prototype.updateTitleText=function(t){var e=t.querySelector(".dialog__title");if(!e)throw"'Title' element not found";var n=this.isTrialEnabledForThisTool()&&this.canUserDoTrial();switch(this.userType){case"guest":case"user":return void(e.innerHTML=n?this.getTranslation(t,"title_canTrial"):this.getTranslation(t,"title_cannotTrial"));case"premium":return;default:throw"Unhandled userType '"+this.userType+"' for updateTitleText"}},h.prototype.updateTriggerReasonText=function(t){var e,n,i=t.querySelector(".new-premium__trigger-reason_sub1"),o=t.querySelector(".new-premium__trigger-reason_sub2");if(!i)throw"'Trigger Reason subtitle1' element not found";if(!o)throw"'Trigger Reason subtitle2' element not found";var r,a,s=null!=(n=this.tool)?n:null==(n=this.limits)?void 0:n.tool,l=null==(n=window.ilovepdfConfig)?void 0:n.subtool,c=!1;switch(this.triggerReason){case p.REASON.ERROR_FEATURE:var u="triggerReason_errorFeature";switch(s){case"sign":case"pdfa":case"pdfoffice":u+="_"+s}["pdfexcel","pdfword"].includes(l)&&(u+="_"+l),this.premiumFeatureName&&(u+="_"+this.premiumFeatureName),i.innerHTML=this.getTranslation(t,u+"_subtitle1"),"ocr"===this.premiumFeatureName&&"pdfoffice"===s&&(c=!0,i.innerHTML=i.innerHTML.replace("OCR",'<span class="new-premium__ocr-tooltip" data-template="new-premium__ocr-features-tooltip__html-template">OCR</span>')),o.innerHTML=this.getTranslation(t,u+"_subtitle2");break;case p.REASON.ERROR_FILES:if(!this.limits)throw"Limits object is needed to translate subtitles' text";r=(a=[this.limits.fileLimits[this.tool],this.limits.allFileLimits.premium_limits[this.tool]])[0],a=a[1],i.innerHTML=d.Lang.tr(this.getTranslation(t,"triggerReason_errorFilesNum_subtitle1"),{n:r.files}),o.innerHTML=d.Lang.tr(this.getTranslation(t,"triggerReason_errorFilesNum_subtitle2"),{n:a.files});break;case p.REASON.ERROR_SIZE:if(!this.limits)throw"Limits object is needed to translate subtitles' text";r=(e=[this.limits.fileLimits[this.tool],this.limits.allFileLimits.premium_limits[this.tool]])[0],a=e[1],i.innerHTML=d.Lang.tr(this.getTranslation(t,"triggerReason_errorFilesSize_subtitle1"),{n:r.mb}),o.innerHTML=d.Lang.tr(this.getTranslation(t,"triggerReason_errorFilesSize_subtitle2"),{n:a.mb/1e3});break;case p.REASON.ERROR_PAGES:if(!this.limits)throw"Limits object is needed to translate subtitles' text";r=(e=[this.limits.fileLimits[this.tool],this.limits.allFileLimits.premium_limits[this.tool]])[0],a=e[1],i.innerHTML=d.Lang.tr(this.getTranslation(t,"triggerReason_errorFilesPages_subtitle1"),{n:r.pages}),o.innerHTML=d.Lang.tr(this.getTranslation(t,"triggerReason_errorFilesPages_subtitle2"),{n:a.pages});break;case null:i.style.display="none",o.style.display="none";break;default:throw"Unknown triggerReason '"+this.triggerReason+"'"}this.initAllFeaturesTooltip(t),c&&this.initOCRTooltip(t)},h.prototype.getTranslation=function(t,e,n){if(void 0===n&&(n={}),this._translations){if(e in this._translations)return this._translations[e];throw"Translation for key '"+e+"' not found"}n=t.querySelector(".new-premium__text-translations");if(!n)throw"'Text translations' DOM not found";if("html"!==n.dataset.format)return this._translations=JSON.parse(n.innerHTML),this._translations?this.getTranslation(t,e):null;t=n.querySelector("[data-key="+e+"]");if(t)return t.innerHTML;throw"Key '"+e+"' not found"},h.prototype.getInitialState=function(){return this.isLoggedIn()?this._getInitialState():new s.AuthState},h.prototype._getInitialState=function(){switch(this.userType){case"guest":return new s.AuthState;case"user":return new(this.canUserDoTrial()&&this.isTrialEnabledForThisTool()?c.CanTrialState:l.CannotTrialState);case"premium":return new u.PremiumState;default:throw"Not implemented 'initialState' when userType is "+this.userType}},h);function h(t){var e=o.call(this,t)||this;return e.contentName="PremiumContext",e.onDomReadyCalledOnce=!1,e._onDomReady=function(t){e.onDomReadyCalledOnce||e.updateTriggerReasonText(t),e.onDomReadyCalledOnce=!0,e.updateTitleText(t)},e.triggerReason="triggerReason"in t?t.triggerReason:void 0,e.limits="limits"in t?t.limits:void 0,e.premiumFeatureName="premiumFeatureName"in t?t.premiumFeatureName:void 0,e.tool=t.tool,e}e.PremiumContext=n},function(t,n,r){"use strict";!function(a){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},e=(Object.defineProperty(n,"__esModule",{value:!0}),n.Banner=void 0,t(r(15)));function s(){}s.preventClickAds=function(){s.preventClick("ad"),s.preventClick("adsq")},s.sendEvent=function(t){return function(){return e.captureMessage(t)}},s.preventClick=function(t){void 0===t&&(t="ad");var e=document.getElementById(t),n=(a(window).width(),"prvnt"+t),i=1100,o="ac";if(document.body.classList.contains("download")&&(i=500),"adsq"==t&&(o="acsq"),null==document.getElementById(n)&&e&&0!=e.getBoundingClientRect().height){e.style.position="relative";var r=document.createElement("div");r.setAttribute("id",n),r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.width=e.getBoundingClientRect().width+"px",r.style.height=e.getBoundingClientRect().height+"px",r.style.zIndex="9",r.style.background="hsl(0,0%,100%,.01)",r.addEventListener("click",s.sendEvent(o));try{e.prepend(r)}catch(t){e.appendChild(r)}window.setTimeout(function(){r.removeEventListener("click",s.sendEvent(o)),r.remove()},i)}},n.Banner=s}.call(this,r(1))},function(t,e,n){"use strict";var i;n.d(e,"a",function(){return i}),(n=i=i||{}).Ok="ok",n.Exited="exited",n.Crashed="crashed",n.Abnormal="abnormal"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileStack=e.File=void 0;var i=n(7),n=(e.File=function(t){void 0===t&&(t={}),this.reUploaded=!1,this.server_filename=null,this.filename=null,this.rotate=null,this.password=null,this.file=null,this.elementArray=[],this.processed=!0,Object.assign(this,t),null!=this.filename&&(this.filename=this.filename.replace(/[\u00A0\u1680​\u180e\u2000-\u2009\u200a​\u200b​\u202f\u205f​\u3000\ufeff]/g," ").trim())},o.prototype.addFile=function(t){t=this.cleanName(t),this.files.push(t),this.onFileAdd()},o.prototype.getFile=function(e){return this.files.find(function(t){return t.id==e})},o.prototype.getFileIndex=function(e){return this.files.findIndex(function(t){return t.id==e})},o.prototype.swapFilesPositionsByIndex=function(t,e){var n;t!=e&&this.files[t]&&this.files[e]&&(n=[this.files[e],this.files[t]],this.files[t]=n[0],this.files[e]=n[1])},o.prototype.move=function(t,e){for(;t<0;)t+=this.files.length;for(;e<0;)e+=this.files.length;if(e>=this.files.length)for(var n=e-this.files.length;1+n--;)this.files.push(void 0);this.files.splice(e,0,this.files.splice(t,1)[0])},o.prototype.getFileByServerFilename=function(e){return this.files.find(function(t){return t.server_filename==e})},o.prototype.getFirst=function(){return this.files[0]},o.prototype.getLast=function(){return this.files[this.files.length-1]},o.prototype.onFileAdd=function(){var t,e=this;try{null!=(t=document.querySelectorAll(".numPages"))&&t.forEach(function(t){e.files[0].numPages&&(t.innerHTML=e.files[0].numPages.toString())})}catch(t){}},o.prototype.updateFile=function(t,e){t=this.getFile(t);return t&&(e=this.cleanName(e),Object.assign(t,e)),t},o.prototype.removeFile=function(n,i){var o=this;void 0===i&&(i=!1),this.files.forEach(function(t,e){t&&t.id==n&&(t.removed=!0,o.removed.push(n),-1<e&&o.files.splice(e,1),0==i)&&(t=new CustomEvent("fileRemoved",{detail:{fileId:n}}),window.dispatchEvent(t))})},o.prototype.removeFilesExcept=function(n){var i=this;this.files.forEach(function(t,e){(null==t?void 0:t.id)!==n&&-1<e&&i.files.splice(e,1)})},o.prototype.removeAllFiles=function(e){var n=this;void 0===e&&(e=!1),this.files.forEach(function(t){n.removeFile(t.id,e)})},o.prototype.limitFile=function(t,e){void 0===e&&(e=!1);var n=this.getFile(t);n&&(this.limited.push(t),n.limited=!0,window.plupload&&(n.status=window.plupload.FAILED,n.error=window.plupload.GENERIC_ERROR),0==e)&&(n=new CustomEvent("fileLimited",{detail:{fileId:t}}),window.dispatchEvent(n))},o.prototype.resetLimitedFiles=function(){this.files.forEach(function(t){1==(null==t?void 0:t.limited)&&(delete t.limited,t.status==window.plupload.FAILED)&&t.error==window.plupload.GENERIC_ERROR&&(t.status=window.plupload.QUEUED,delete t.error)}),this.limited=[]},o.prototype.removeLimitedFiles=function(t){var e=this,n=(void 0===t&&(t=!1),this.files=this.files.filter(function(t){return-1===e.limited.indexOf(t.id)}),[].concat(this.limited));this.limited=[],!0!==t&&n.forEach(function(t){t=new CustomEvent("fileRemoved",{detail:{fileId:t}});window.dispatchEvent(t)})},o.prototype.count=function(){return this.files.length},o.prototype.countNotIgnored=function(e){return void 0===e&&(e=!1),this.files.filter(function(t){return!(1==e&&1==t.limited)&&1!=t.ignored}).length},o.prototype.countNotLimited=function(){return this.files.filter(function(t){return!0!==t.limited}).length},o.prototype.countIgnored=function(){return this.files.filter(function(t){return 1==t.ignored}).length},o.prototype.countLimited=function(){return this.files.filter(function(t){return 1==t.limited}).length},o.prototype.size=function(){var e=0;return this.files.forEach(function(t){e+=parseInt(t.size)}),e},o.prototype.fileSize=function(t){var n=this,i=0;return t instanceof Array?t.forEach(function(t,e){i+=n.fileSize(t)}):(t=this.getFile(t),i=parseInt(t.size)),i},o.prototype.getFileSizeNotIgnored=function(n){void 0===n&&(n=!1);var i=0;return this.files.forEach(function(t,e){t&&(1!=n||1!=t.limited)&&1!=t.ignored&&t.size&&(i+=parseInt(t.size.toString()))}),i},o.prototype.getFilePagesNotIgnored=function(n){void 0===n&&(n=!1);var i=0;return this.files.forEach(function(t,e){t&&(1!=n||1!=t.limited)&&1!=t.ignored&&t.file&&t.file.numPages&&(i+=t.file.numPages?parseInt(t.file.numPages.toString()):0)}),i},o.prototype.cleanName=function(t){return"filename"in t&&null!=t.filename&&(t.filename,t.filename.replace(/[\u00A0\u1680​\u180e\u2000-\u2009\u200a​\u200b​\u202f\u205f​\u3000\ufeff]/g," ").trim(),t.filename=t.filename.replace(/"/g,"")),"name"in t&&null!=t.name&&(t.name,t.name.replace(/[\u00A0\u1680​\u180e\u2000-\u2009\u200a​\u200b​\u202f\u205f​\u3000\ufeff]/g," ").trim(),t.name=t.name.replace(/"/g,"")),t},o.prototype.onUploaded=function(){return new Promise(function(t,e){})},o.prototype.checkFilesUploaded=function(){var e=!0,n=this;return this.files.forEach(function(t){if(null==t)return!0;if("percent"in t&&!(t.percent<100)&&("server_filename"in t||"error"in t&&!("error"in t&&0==t.error))||(e=!1),1==t.error){e=!1;try{window.Toastr.error(i.Lang.t(t.errorData.error.param.type[0])+"<br>"+t.name,i.Lang.t("Wops"),{timeOut:5e3,positionClass:"toast-top-left"})}catch(t){}n.removeFile(t.id)}}),e},o.prototype.getUploadedFiles=function(){var n={};return this.files.forEach(function(t){var e={filename:t.name,server_filename:t.server_filename};t.rename&&(e.filename=t.rename),t.password&&(e.password=t.password),t.pages&&(e.pages=t.pages),t.rotate&&(e.rotate=t.rotate),t.elementArray&&(e.elementArray=t.elementArray),t.processed&&(e.processed=t.processed),n[t.id]=e}),n},o);function o(){var t=this;this.getFilePxsizeNotIgnored=function(e){void 0===e&&(e=!1);var n=0;return t.files.forEach(function(t){!t||1==e&&1==t.limited||1==t.ignored||(n=Math.max(t.width*t.height,n))}),n},this.files=[],this.ignored=[],this.removed=[],this.limited=[]}e.FileStack=n},function(t,e,n){"use strict";function i(){return window.navigator.mockUserAgent||window.navigator.userAgent}function o(){return!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches}function r(t){return-1!==(t=void 0===t?i():t).indexOf("FBAN")||-1!==t.indexOf("FBAV")}function a(t){return void 0===t&&(t=i()),/FxiOS/i.test(t)}function s(t){return void 0===t&&(t=i()),/EdgiOS/i.test(t)}function l(t){return-1<(t=void 0===t?i():t).indexOf("Opera Mini")}function c(t){return void 0===t&&(t=i()),/Android/.test(t)}function u(t){return void 0===t&&(t=i()),/iPhone|iPod|iPad/.test(t)}function d(t){return void 0===t&&(t=i()),/\bGSA\b/.test(t)}function p(t){return void 0===t&&(t=i()),/QQBrowser/.test(t)}function h(t){return!!u(t=void 0===t?i():t)&&(!!d(t)||/.+AppleWebKit(?!.*Safari)/.test(t))}function f(t){return!!c(t=void 0===t?i():t)&&/Version\/[\d.]+/.test(t)&&!l(t)}function v(){var t=i();return/Macintosh.*AppleWebKit(?!.*Safari)/i.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.supportsPopups=e.isMacOsCna=e.isIEIntranet=e.isIECompHeader=e.isIE=e.isWebView=e.isAndroidWebview=e.isIosWebview=e.isQQBrowser=e.isGoogleSearchApp=e.isIos=e.isAndroid=e.isOperaMini=e.isEdgeIOS=e.isFirefoxIOS=e.isFacebookWebView=e.isStandAlone=e.isDevice=e.getUserAgent=void 0,e.getUserAgent=i,e.isDevice=function(){return!!i().match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)},e.isStandAlone=o,e.isFacebookWebView=r,e.isFirefoxIOS=a,e.isEdgeIOS=s,e.isOperaMini=l,e.isAndroid=c,e.isIos=u,e.isGoogleSearchApp=d,e.isQQBrowser=p,e.isIosWebview=h,e.isAndroidWebview=f,e.isWebView=function(){return r()||h()||f()},e.isIE=function(){return!!window.document.documentMode||Boolean(window.navigator&&window.navigator.userAgent&&/Edge|MSIE/i.test(window.navigator.userAgent))},e.isIECompHeader=function(){var t=window.document.querySelector('meta[http-equiv="X-UA-Compatible"]'),e=window.document.querySelector('meta[content="IE=edge"]');return!(!t||!e)},e.isIEIntranet=function(){if(window.document.documentMode)try{var t=window.status;return(window.status="testIntranetMode")===window.status?(window.status=t,!0):!1}catch(t){}return!1},e.isMacOsCna=v,e.supportsPopups=function(t){return!(h(t=void 0===t?i():t)||f(t)||l(t)||a(t)||s(t)||r(t)||p(t)||v()||o())}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dialog=void 0;var o=n(8),r=n(25),a=n(75),n=(s.getVisibleDialogs=function(){return Array.from(this.visibleDialogs).filter(function(t){return!t.isClosing()})},s.prototype.canBeClosedByUser=function(){return void 0!==this._canBeClosedByUser?this._canBeClosedByUser:this.props.canBeClosedByUser},s.prototype.isClosedOrInProcessOfClosing=function(){return this.isClosing()||!this.isShown},s.prototype.isClosing=function(){return this._isClosing},s.prototype.listenToEvents=function(t){var e=this;-1===this.contentsListeningTo.indexOf(t.getInstanceID())&&(t.addEventListener("end",function(){e.isClosedOrInProcessOfClosing()||e.close()}),t.addEventListener("disableContentAbandonment",function(){return e._canBeClosedByUser=!1}),t.addEventListener("unsetContentAbandonment",function(){return e._canBeClosedByUser=void 0}),this.contentsListeningTo.push(t.getInstanceID()))},Object.defineProperty(s.prototype,"dialog",{get:function(){var t,e,n,i=this;return this._dialog||(e=this.createDialogContainer(),n=this.createDialogElement(),e.appendChild(n),n=this.createDialogBackdrop(),this._dialog=document.createElement("div"),this.props.dialogName&&this._dialog.setAttribute("data-dialog-name",this.props.dialogName),this._dialog.classList.add("dialog"),0<(null==(t=this.props.classes)?void 0:t.length)&&this.props.classes.forEach(function(t){return i._dialog.classList.add(t)}),this._dialog.appendChild(e),this._dialog.appendChild(n),this.props.enableCloseBtn&&this.initCloseBtn(),this._dialog.style.display="none",document.body.appendChild(this._dialog)),this._dialog},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"domRoot",{get:function(){return this.element},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"element",{get:function(){return this.dialog.children[0].children[0]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"elementContainer",{get:function(){return this.dialog.querySelector(".dialog__container")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"backdrop",{get:function(){return this.dialog.children[1]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"closeBtn",{get:function(){return this.dialog.querySelector(".dialog__close")},enumerable:!1,configurable:!0}),s.prototype.mergeWithDefaultPropValues=function(t){var e=null==(e=t.canBeClosedByUser)||e,n=null!=(n=t.clickAwayClose)&&n,i=null!=(i=t.enableCloseBtn)?i:e,o=null!=(o=t.classes)?o:[];return{dialogName:t.dialogName,canBeClosedByUser:e,clickAwayClose:n,escapeKeyClose:e,enableCloseBtn:i,classes:o}},s.prototype.getContent=function(){return this.content},s.prototype.dispatchEvent=function(t){return this.eventEmitter.dispatchEvent(t)},s.prototype.addEventListener=function(t,e){return this.eventEmitter.addEventListener(t,e)},s.visibleDialogs=new Set,s);function s(t){var i=this;void 0===t&&(t={}),this.isShown=!1,this.contentsListeningTo=new Array,this.destroyed=!1,this._canBeClosedByUser=void 0,this._isClosing=!1,this.show=function(){if(i.destroyed)throw"This dialog was destroyed. It's no longer usable";var t,e,n;document.body.style.overflow="hidden",i.isShown||(t=i.element,e=i.backdrop,n=i.closeBtn,i.content&&i.content.reset(),0==i.props.enableCloseBtn&&n&&(n.style.display="none"),i.dialog.style.display="",i.elementContainer,t.offsetWidth,i.elementContainer.classList.add("dialog__container--appeared"),e.offsetWidth,e.classList.add("dialog__backdrop--appeared"),i.isShown=!0,s.visibleDialogs.add(i),i.dispatchEvent(new o.IloveEvent("shown")))},this.close=function(){if(i.destroyed)throw"This dialog was destroyed. It's no longer usable";i.isShown&&(i.elementContainer.classList.remove("dialog__container--appeared"),i.backdrop.classList.remove("dialog__backdrop--appeared"),i._isClosing=!0,setTimeout(function(){i._dialog&&(i.dialog.style.display="none"),i.isShown=!1,i._isClosing=!1,document.body.style.overflow="",s.visibleDialogs.delete(i),i.dispatchEvent(new o.IloveEvent("hidden"))},250),i.dispatchEvent(new o.IloveEvent("closed")),i.content)&&i.content.notifyOfContainerClosing()},this.getDialogName=function(){return i.props.dialogName},this.destroy=function(){i.destroyed||(i._dialog&&(i._dialog.parentNode.removeChild(i._dialog),i._dialog=void 0),i.destroyed=!0)},this.setContent=function(t){if(i.destroyed)throw"This dialog was destroyed. It's no longer usable";return(i.content=t).setContextPlacement("dialog"),t.render(i.domRoot),i.listenToEvents(t),i},this._closeOnEscapeKey=function(t){"Escape"===t.key&&i.close()},this.createDialogContainer=function(){var t=document.createElement("div");return t.classList.add("dialog__container"),t},this.createDialogElement=function(){var t=document.createElement("div");return t.classList.add("dialog__element"),t},this.createDialogBackdrop=function(){var t=document.createElement("div");return t.classList.add("dialog__backdrop"),i.props.clickAwayClose&&t.addEventListener("click",function(){i.canBeClosedByUser()&&i.close()}),t},this.initCloseBtn=function(){i.dialog.addEventListener("click",function(t){t.target.classList.contains("dialog__close")&&i.canBeClosedByUser()&&(a.Banner.preventClickAds(),i.close())})},this.eventEmitter=new r.ILoveEventEmitter,this.props=this.mergeWithDefaultPropValues(t)}e.Dialog=n},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsTemplate=void 0;var i=n(7),o=n(17);function r(){}r.process=function(t,e){var n,i=t;for(n in e)e.hasOwnProperty(n)&&(i=(i=i.replace(new RegExp("\\$\\{"+n+"\\}","g"),e[n])).replace(new RegExp("\\$\\{ "+n+" \\}","g"),e[n]));return i},r.processButton=function(t){return'<div id="processTaskWrapper"></div><button id="processTask" class="btn btn--process btn--red '+t.tool+'"><span id="processTaskTextBtn">'+t.toolText+'</span> <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="24" height="24" fill="#FFF" fill-rule="evenodd"><path d="M13 26C5.82 26 0 20.18 0 13S5.82 0 13 0s13 5.82 13 13-5.82 13-13 13zm0-2c6.075 0 11-4.925 11-11S19.075 2 13 2 2 6.925 2 13s4.925 11 11 11z" fill-rule="nonzero"/><path d="M18.684 13.105a.55.55 0 0 1-.148.378l-5.263 5.263a.55.55 0 0 1-.378.148.54.54 0 0 1-.526-.526V15.21H7.842a.54.54 0 0 1-.526-.526v-3.158A.54.54 0 0 1 7.842 11h4.526V7.842a.52.52 0 0 1 .526-.526c.148 0 .28.066.395.164l5.247 5.247a.55.55 0 0 1 .148.378z"/></svg></span></button></div>'},r.rangeBox=function(t){return'<div class="range" id="range-'+t.rangeId+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+o.Tools.svgRemove()+'</a></div><div class="range__title">'+i.Lang.t("Range")+" "+t.rangeId+'</div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="range-'+t.rangeId+'-ini" width="'+t.screenSize.w+'" height="'+t.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+t.rangeId+'-ini">'+t.pageIni+'</span></div></div><div class="range__to"></div><div class="range__element range__element--end"><div class="range__canvas range__canvas--end"><canvas id="range-'+t.rangeId+'-end" width="'+t.screenSize.w+'" height="'+t.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+t.rangeId+'-end">'+t.pageEnd+"</span></div></div></div></div>"},r.rangeFixedBox=function(t){return'<div class="range" id="range-fix-'+t.rangeId+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+o.Tools.svgRemove()+'</a></div><div class="range__title">'+i.Lang.t("Range")+" "+t.rangeId+'</div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="range-fix-'+t.rangeId+'-ini" width="'+t.screenSize.w+'" height="'+t.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+t.rangeId+'-ini">'+t.pageIni+'</span></div></div><div class="range__to"></div><div class="range__element range__element--end"><div class="range__canvas range__canvas--end"><canvas id="range-fix-'+t.rangeId+'-end" width="'+t.screenSize.w+'" height="'+t.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+t.rangeId+'-end">'+t.pageEnd+"</span></div></div></div></div>"},r.removeBox=function(t){return'<div class="range" id="remove-page-'+t.page+'" data-page="'+t.page+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+o.Tools.svgRemove()+'</a></div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="remove-page-'+t.page+'-ini" width="'+t.screenSize.w+'" height="'+t.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name">Page '+t.page+"</span></div></div></div></div>"},r.reorderBox=function(t){return'<div class="range" id="reorder-page-'+t.page+'" data-page="'+t.page+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+o.Tools.svgRemove()+'</a></div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="reorder-page-'+t.page+'-ini" width="'+t.screenSize.w+'" height="'+t.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name">Page '+t.page+"</span></div></div></div></div>"},r.pageBox=function(t){return'<div class="page '+t.class+'" id="'+t.file+t.page+'" data-page="'+t.page+'" data-pos="'+t.pos+'" data-file="'+t.file+'"><div class="page__add tooltip tooltip--top" data-title="'+i.Lang.t("addPage")+'"></div><div class="page__actions"><a class="page__btn rotate tooltip--top tooltip" data-rotate="0" title="'+i.Lang.t("Rotate")+'"><svg width="14px" height="17px" viewBox="0 0 14 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-434.000000, -182.000000)" fill="#47474F"><g transform="translate(265.000000, 172.000000)"><g transform="translate(164.000000, 8.000000)"><path d="M7.76002152,9.05407587 L6.54613936,7.83158461 C5.77132096,8.83023944 5.28921173,9.98385795 5.14285714,11.1805219 L6.881894,11.1805219 C7.00242131,10.4315308 7.30373957,9.69975787 7.76002152,9.05407587 L7.76002152,9.05407587 Z M6.881894,12.9023406 L5.14285714,12.9023406 C5.28921173,14.0990046 5.76271186,15.2526231 6.53753027,16.2512779 L7.75141243,15.0287867 C7.30373957,14.3831047 7.00242131,13.6599408 6.881894,12.9023406 L6.881894,12.9023406 Z M7.75141243,17.4823783 C8.75006726,18.2571967 9.91229486,18.7220877 11.1089588,18.8684423 L11.1089588,17.1207963 C10.3599677,16.9916599 9.63680387,16.6989508 8.99112187,16.2340597 L7.75141243,17.4823783 L7.75141243,17.4823783 Z M12.8307775,5.21442023 L12.8307775,2.57142857 L8.91364003,6.48856605 L12.8307775,10.3196126 L12.8307775,6.95345709 C15.27576,7.36669357 17.1353242,9.48453054 17.1353242,12.0414313 C17.1353242,14.598332 15.27576,16.716169 12.8307775,17.1294054 L12.8307775,18.8684423 C16.2313694,18.4465967 18.8571429,15.5539414 18.8571429,12.0414313 C18.8571429,8.52892117 16.2313694,5.63626581 12.8307775,5.21442023 L12.8307775,5.21442023 Z" transform="translate(12.000000, 10.719935) scale(-1, 1) translate(-12.000000, -10.719935) "></path></g></g></g></g></svg></a><a class="page__btn remove tooltip--top tooltip" title="'+i.Lang.t("Remove")+'"><svg width="12px" height="12px" viewBox="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-586.000000, -216.000000)" fill="#47474F"><g transform="translate(580.000000, 210.000000)"><polygon points="18 7.20857143 16.7914286 6 12 10.7914286 7.20857143 6 6 7.20857143 10.7914286 12 6 16.7914286 7.20857143 18 12 13.2085714 16.7914286 18 18 16.7914286 13.2085714 12"></polygon></g></g></g></svg></a></div><div class="page__container"><div class="page__element"><div class="page__canvas"><canvas id="page-'+t.file+"-"+t.page+'" width="'+t.screenSize.w+'" height="'+t.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name"><span class="file__info__more"><strong>'+t.filename+"</strong><br>"+i.Lang.t("Page")+"&nbsp;</span>"+t.page+'</span></div></div></div><div class="page__add tooltip tooltip--top" data-title="'+i.Lang.t("addPage")+'"></div></div>'},r.page=function(t){return'<div class="page '+t.class+'" id="'+t.file+t.page+'" data-page="'+t.page+'" data-file="'+t.file+'"><div class="page__container"><div class="page__element"><div class="page__canvas"><canvas id="page-'+t.file+"-"+t.page+'" width="'+t.screenSize.w+'" height="'+t.screenSize.h+'"></canvas></div></div></div></div>'},r.preview=function(t){return'<div class="preview__page file_'+t.file+"_"+t.page+' active" data-file="'+t.file+'" data-page="'+t.page+'"><canvas id="preview_'+t.file+"_"+t.page+'"></canvas><div>'+t.caption+"</div></div>"},r.extractBox=function(t){return'<div class="range" id="extract-page-'+t.page+'" data-page="'+t.page+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+o.Tools.svgRemove()+'</a></div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="extract-page-'+t.page+'-ini" width="'+t.screenSize.w+'" height="'+t.screenSize.h+'"></canvas> </div><div class="file__info"><span class="file__info__name">'+t.page+"</span></div></div></div></div>"},r.askPassword=function(){return'<div id="passwordAsk"><h2 class="title2">'+i.Lang.t("Some files require password")+'</h2><div class="form__group"><div class="checkbox"><input type="checkbox" name="allPwd" id="allPwd" value="1"><label for="allPwd">'+i.Lang.t("Same password for all files")+'</label></div></div><div class="passwords"></div><div class="text-right"><button class="btn btn--red" id="pwdSend">'+i.Lang.t("Send")+'</button></div><br><br><div class="text-right"><p id="useUnlock">'+i.Lang.t("Did you forgot your password?")+' <a href="'+window.unlockPdfUrl+'">'+i.Lang.t("Unlock PDF")+'</a></p><p id="ignorePwdFiles">'+i.Lang.t("Or")+' <a id="pwdIgnore" href="#">'+i.Lang.t("Ignore these files")+"</a></p></div></div>"},r.askPasswordField=function(t){return'<div class="password" id="pwd-'+t.id+'"><label for="pwd'+t.id+'">'+t.server_filename+'</label><div class="form__group form__group--btn form__group--btn-lg"><div class="input--icon input--lock"><input class="input" type="password" name="pwd'+t.id+'" id="pwd'+t.id+'"></div><a class="btn showPassword" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12.015 7c4.751 0 8.063 3.012 9.504 4.636-1.401 1.837-4.713 5.364-9.504 5.364-4.42 0-7.93-3.536-9.478-5.407 1.493-1.647 4.817-4.593 9.478-4.593zm0-2c-7.569 0-12.015 6.551-12.015 6.551s4.835 7.449 12.015 7.449c7.733 0 11.985-7.449 11.985-7.449s-4.291-6.551-11.985-6.551zm-.015 5c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zm0-2c-2.209 0-4 1.792-4 4 0 2.209 1.791 4 4 4s4-1.791 4-4c0-2.208-1.791-4-4-4z"/></svg></a></div></div>'},r.checkOk=function(){return'<svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg>'},e.OptionsTemplate=r},function(t,f,v){"use strict";!function(c){var u,i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},e=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},d=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},n=(Object.defineProperty(f,"__esModule",{value:!0}),f.UserPayment=void 0,v(110)),p=t(v(15)),r=v(113),h=v(8),a=v(25),s=v(57),t=((t=u=u||{}).SUMMARY_INFO="/<locale?>/purchase-summary/info",t.CANCEL_SUBSCRIPTION="/user/subscription/cancel",t.CANCEL_SUBSCRIPTION_REASON="/user/subscription/cancel/reason",t.CANCEL_SUBSCR_OFFER="/user/subscription/canceloffer",t.REACTIVATE_SUBSCRIPTION="/user/subscription/reactivate",t.REMOVE_PAYMENT_DATA="/user/subscription/payment-remove",l.prototype.notifyPaymentError=function(t,e,n){var i,o="generic_payment_error";"update_card"===n&&(o="generic_card_update_error");try{var r=JSON.parse(e.responseText).msg;return void("stripe"===t?this.stripeService.view.notifyCardErrorMsg(r):"paypal"===t&&this.paypalService.notifyErrorMsg(r))}catch(t){}"stripe"===t?(i=(null==(n=null==e?void 0:e.error)?void 0:n.message)||this.stripeService.view.getTranslationText(o),this.stripeService.view.notifyCardErrorMsg(i)):"paypal"===t&&(i=this.paypalService.getTranslationText(o),this.paypalService.notifyErrorMsg(i))},l.prototype.clearPaymentError=function(t){function e(){i.paypalService.clearErrorMsg()}function n(){i.stripeService.view.clearCardErrorMsg()}var i=this;if(null===(t=void 0===t?null:t))e(),n();else if("paypal"===t)e();else{if("stripe"!==t)throw"Unknown provider "+t;n()}},l.prototype.enableActionButton=function(t){if("stripe"===t)this.stripeService.view.enableActionButton();else if("paypal"!==t)throw"Not implemented provider"},l.prototype.disableActionButton=function(t){if("stripe"===t)this.stripeService.view.disableActionButton();else if("paypal"!==t)throw"Not implemented provider"},l.prototype.initEventListenersOnProviders=function(){var e=this;this.stripeService.addEventListener("View:ActionButtonClicked",function(){e.dispatchEvent(new h.IloveEvent("UserPayment:ActionButtonClicked"))}),this.paypalService.addEventListener("onPaymentInited",function(t){t=Object.assign({provider:"paypal"},t.detail);e.dispatchEvent(new h.IloveEvent("UserPayment:BeforeExternalAction",t))}),this.paypalService.addEventListener("onPaymentAuthorized",function(t){t=Object.assign({provider:"paypal"},t.detail);e.updateUser(t.response),e.dispatchEvent(new h.IloveEvent("UserPayment:AfterExternalAction",t))}),this.paypalService.addEventListener("onPaymentInited_error",function(t){t=Object.assign({provider:"paypal"},t.detail);e.dispatchEvent(new h.IloveEvent("UserPayment:Error",t))}),this.paypalService.addEventListener("onPaymentAuthorized_error",function(t){t=Object.assign({provider:"paypal"},t.detail);e.dispatchEvent(new h.IloveEvent("UserPayment:Error",t))})},l.prototype.updateCard=function(i){return e(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:if("stripe"!==i.provider)return[3,5];e=void 0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.stripeService.updateCard(i.element)];case 2:return e=t.sent(),[3,4];case 3:throw n=t.sent(),p.configureScope(function(t){t.setExtra("error",{err:null!=(t=null==n?void 0:n.responseText)?t:n,params:i})}),p.captureMessage("Failed Stripe updateCard"),n;case 4:return this.updateUser(e),[2,e];case 5:throw"'Update card' is not implemented for provider '"+i.provider+"'"}})})},l.prototype.payPackage=function(r){return e(this,void 0,void 0,function(){var e,n,i,o;return d(this,function(t){switch(t.label){case 0:if("paypal"===r.provider)throw"This action is performed by PaypalService by mounting the view";if(e="payPackage",n=null,"stripe"!==r.provider)return[3,5];i=this.stripeService.paymentVia,i={paymentVia:i,packageName:r.packageName,quantity:r.packageQuantity,disableTrial:r.disableTrial},this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:e,params:r})),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.stripeService.payPackage(i)];case 2:return n=t.sent(),[3,4];case 3:throw o=t.sent(),p.configureScope(function(t){t.setExtra("error",{err:null!=(t=null==o?void 0:o.responseText)?t:o,params:r})}),p.captureMessage("Failed Stripe payPackage"),o;case 4:return this.updateUser(n),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:e,params:r,response:n})),[2,n];case 5:throw"Unknown provider "+r.provider}})})},l.prototype.subscribeNextMonthsWithDiscount=function(){return e(this,void 0,void 0,function(){var e,n,i,o,r,a,s;return d(this,function(t){switch(t.label){case 0:e="subscribeNextMonthsWithDiscount",this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:e,params:null})),n=c.post(u.CANCEL_SUBSCR_OFFER),t.label=1;case 1:return t.trys.push([1,3,,4]),r=(o=JSON).parse,[4,n.promise()];case 2:return i=r.apply(o,[t.sent()]),[3,4];case 3:throw a=t.sent(),p.configureScope(function(t){t.setExtra("error",{err:null!=(t=null==a?void 0:a.responseText)?t:a,params:null})}),p.captureMessage("Failed subscribeNextMonthsWithDiscount"),a;case 4:return s=i.data,this.updateUser(i),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:e,params:null,response:i})),[2,s]}})})},l.prototype.cancelSubscription=function(){return e(this,void 0,void 0,function(){var e,n,i,o,r,a,s;return d(this,function(t){switch(t.label){case 0:e="cancelSubscription",this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:e,params:null})),n=c.post(u.CANCEL_SUBSCRIPTION),t.label=1;case 1:return t.trys.push([1,3,,4]),r=(o=JSON).parse,[4,n.promise()];case 2:return i=r.apply(o,[t.sent()]),[3,4];case 3:throw a=t.sent(),p.configureScope(function(t){t.setExtra("error",{err:null!=(t=null==a?void 0:a.responseText)?t:a,params:null})}),p.captureMessage("Failed cancelSubscription"),a;case 4:return s=i.data,this.updateUser(i),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:e,params:null,response:i})),[2,s]}})})},l.prototype.reactivateSubscription=function(){return e(this,void 0,void 0,function(){var e,n,i,o,r,a,s;return d(this,function(t){switch(t.label){case 0:e="reactivateSubscription",this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:e,params:null})),n=c.post(u.REACTIVATE_SUBSCRIPTION),t.label=1;case 1:return t.trys.push([1,3,,4]),r=(o=JSON).parse,[4,n.promise()];case 2:return i=r.apply(o,[t.sent()]),[3,4];case 3:throw a=t.sent(),p.configureScope(function(t){t.setExtra("error",{err:null!=(t=null==a?void 0:a.responseText)?t:a,params:null})}),p.captureMessage("Failed reactivateSubscription"),a;case 4:return s=i.data,this.updateUser(i),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:e,params:null,response:i})),[2,s]}})})},l.prototype.cancelSubscriptionReason=function(l){return e(this,void 0,void 0,function(){var e,n,i,o,r,a,s;return d(this,function(t){switch(t.label){case 0:e="cancelSubscriptionReason",n={reason:l.reason,message:l.message},this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:e,params:l})),n=c.post(u.CANCEL_SUBSCRIPTION_REASON,n),t.label=1;case 1:return t.trys.push([1,3,,4]),r=(o=JSON).parse,[4,n.promise()];case 2:return i=r.apply(o,[t.sent()]),[3,4];case 3:throw a=t.sent(),p.configureScope(function(t){t.setExtra("error",{err:null!=(t=null==a?void 0:a.responseText)?t:a,params:l})}),p.captureMessage("Failed cancelSubscriptionReason"),a;case 4:return s=i.data,this.updateUser(i),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:e,params:null,response:i})),[2,s]}})})},l.prototype.paySubscription=function(r){return e(this,void 0,void 0,function(){var e,n,i,o;return d(this,function(t){switch(t.label){case 0:if("paypal"===r.provider)throw"This action is performed by PaypalService by mounting the view";if(n="paySubscription","stripe"!==r.provider)return[3,5];i=this.stripeService.paymentVia,i={paymentVia:i,numUsers:r.numUsers,subscriptionInterval:r.subscriptionInterval,disableTrial:r.disableTrial,couponCode:r.couponCode},this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{detail:{action:n,params:r}})),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.stripeService.paySubscription(i)];case 2:return e=t.sent(),[3,4];case 3:throw o=t.sent(),p.configureScope(function(t){t.setExtra("error",{err:null!=(t=null==o?void 0:o.responseText)?t:o,params:r})}),p.captureMessage("Failed Stripe PaySubscription"),o;case 4:return this.updateUser(e),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{detail:{action:n,params:null,response:e}})),[2,e];case 5:throw"Unknown provider "+r.provider}})})},l.prototype.updateSubscription=function(r){return e(this,void 0,void 0,function(){var e,n,i,o;return d(this,function(t){switch(t.label){case 0:if("paypal"===r.provider)throw"This action is performed by PaypalService by mounting the view";if(e="updateSubscription","stripe"!==r.provider)return[3,5];i=this.stripeService.paymentVia,n=void 0,i={paymentVia:i,numDigitalSignatures:r.numSignatures,numUsers:r.numUsers,subscriptionInterval:r.subscriptionInterval,disableTrial:r.disableTrial,couponCode:r.couponCode},this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:e,params:r})),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.stripeService.paySubscription(i)];case 2:return n=t.sent(),[3,4];case 3:throw o=t.sent(),p.configureScope(function(t){t.setExtra("error",{err:null!=(t=null==o?void 0:o.responseText)?t:o,params:r})}),p.captureMessage("Failed Stripe UpdateSubscription"),o;case 4:return this.updateUser(n),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:e,params:null,response:n})),[2,n];case 5:throw"Unknown provider "+r.provider}})})},l.prototype.paymentRemove=function(){return e(this,void 0,void 0,function(){var e,n,i,o,r,a,s;return d(this,function(t){switch(t.label){case 0:e="paymentRemove",this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{detail:{action:e,params:null}})),n=c.post(u.REMOVE_PAYMENT_DATA),t.label=1;case 1:return t.trys.push([1,3,,4]),r=(o=JSON).parse,[4,n.promise()];case 2:return i=r.apply(o,[t.sent()]),[3,4];case 3:throw a=t.sent(),p.configureScope(function(t){t.setExtra("error",{err:null!=(t=null==a?void 0:a.responseText)?t:a,params:null})}),p.captureMessage("Failed paymentRemove"),a;case 4:return s=i.data,this.updateUser(i),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{detail:{action:e,params:null,response:i}})),[2,s]}})})},l.prototype.getPaymentSummary_updateSubscription=function(t,e,n,i){return this._getPaymentSummary({type:"subscription",numDigitalSignatures:t,numUsers:e,subscriptionInterval:n,subscriptionPlan:void 0,couponCode:i})},l.prototype.getPaymentSummary_package=function(t,e){return this._getPaymentSummary({type:"package",package:t,quantity:e})},l.prototype._getPaymentSummary=function(t){var e=u.SUMMARY_INFO,e="en-US"===window.lang?e.replace("/<locale?>",""):e.replace("<locale?>",window.lang),n=null;return"subscription"===t.type?n=c.post(e,{type:"subscription",users:t.numUsers,signatures:t.numDigitalSignatures,interval:t.subscriptionInterval,code:t.couponCode}):"package"===t.type&&(n=c.post(e,{type:"package",package:t.package,quantity:t.quantity})),new Promise(function(e,i){n.done(function(t){t=JSON.parse(t);e(t)}).fail(function(e,t,n){p.configureScope(function(t){t.setExtra("error",e.responseText)}),p.captureMessage("Error while fetching payment summary"),i(e.responseText)})})},l.prototype.mountView=function(r,a,s){return e(this,void 0,void 0,function(){var e,n,i,o;return d(this,function(t){switch(t.label){case 0:switch(r){case"stripe":return[3,1];case"paypal":return[3,3]}return[3,5];case 1:return e=this.views,n="stripe",[4,this.stripeService.view.mount(a,s)];case 2:return e[n]=t.sent(),[2,this.views.stripe];case 3:return i=this.views,o="paypal",[4,this.paypalService.mountView(a,s)];case 4:return i[o]=t.sent(),[2,this.views.paypal];case 5:return[2]}})})},l.prototype.updateUser=function(t){s.UserAuth.updateUser(t.user),t.content&&s.UserAuth.updateUserMenu(t.content)},l.prototype.dispatchEvent=function(t){return this.eventEmitter.dispatchEvent(t)},l.prototype.addEventListener=function(t,e){return this.eventEmitter.addEventListener(t,e)},l);function l(t){void 0===t&&(t={}),this.views={},this.eventEmitter=new a.ILoveEventEmitter,Object.assign(this,t),this.stripeService=new n.StripeService,this.paypalService=new r.PaypalService,this.initEventListenersOnProviders()}f.UserPayment=t}.call(this,v(1))},function(e,t,n){!function(t){e.exports=t.$=n(84)}.call(this,n(31))},function(Ke,Je,t){var Qe;!function(t,e){"use strict";"object"==typeof Ke.exports?Ke.exports=t.document?e(t,!0):function(t){if(t.document)return e(t);throw new Error("jQuery requires a window with a document")}:e(t)}("undefined"!=typeof window?window:this,function(_,F){"use strict";function y(t){return"function"==typeof t&&"number"!=typeof t.nodeType}function v(t){return null!=t&&t===t.window}var t=[],x=_.document,R=Object.getPrototypeOf,s=t.slice,z=t.concat,B=t.push,N=t.indexOf,U={},H=U.toString,V=U.hasOwnProperty,W=V.toString,q=W.call(Object),g={},G={type:!0,src:!0,noModule:!0};function Y(t,e,n){var i,o=(e=e||x).createElement("script");if(o.text=t,n)for(i in G)n[i]&&(o[i]=n[i]);e.head.appendChild(o).parentNode.removeChild(o)}function f(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?U[H.call(t)]||"object":typeof t}var E=function(t,e){return new E.fn.init(t,e)},X=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function Z(t){var e=!!t&&"length"in t&&t.length,n=f(t);return!y(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}E.fn=E.prototype={jquery:"3.3.1",constructor:E,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){t=E.merge(this.constructor(),t);return t.prevObject=this,t},each:function(t){return E.each(this,t)},map:function(n){return this.pushStack(E.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,t=+t+(t<0?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:B,sort:t.sort,splice:t.splice},E.extend=E.fn.extend=function(){var t,e,n,i,o,r=arguments[0]||{},a=1,s=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[a]||{},a++),"object"==typeof r||y(r)||(r={}),a===s&&(r=this,a--);a<s;a++)if(null!=(t=arguments[a]))for(e in t)o=r[e],r!==(n=t[e])&&(l&&n&&(E.isPlainObject(n)||(i=Array.isArray(n)))?(o=i?(i=!1,o&&Array.isArray(o)?o:[]):o&&E.isPlainObject(o)?o:{},r[e]=E.extend(l,o,n)):void 0!==n&&(r[e]=n));return r},E.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){return!(!t||"[object Object]"!==H.call(t)||(t=R(t))&&("function"!=typeof(t=V.call(t,"constructor")&&t.constructor)||W.call(t)!==q))},isEmptyObject:function(t){for(var e in t)return!1;return!0},globalEval:function(t){Y(t)},each:function(t,e){var n,i=0;if(Z(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(X,"")},makeArray:function(t,e){e=e||[];return null!=t&&(Z(Object(t))?E.merge(e,"string"==typeof t?[t]:t):B.call(e,t)),e},inArray:function(t,e,n){return null==e?-1:N.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,a=!n;o<r;o++)!e(t[o],o)!=a&&i.push(t[o]);return i},map:function(t,e,n){var i,o,r=0,a=[];if(Z(t))for(i=t.length;r<i;r++)null!=(o=e(t[r],r,n))&&a.push(o);else for(r in t)null!=(o=e(t[r],r,n))&&a.push(o);return z.apply([],a)},guid:1,support:g}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=t[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){U["[object "+e+"]"]=e.toLowerCase()});function i(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&E(t).is(n))break;i.push(t)}return i}function K(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}var t=function(F){function d(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320)}function R(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}function z(){x()}var t,h,w,r,B,f,N,U,_,l,c,x,E,n,S,v,i,o,g,O="sizzle"+ +new Date,m=F.document,C=0,H=0,V=dt(),W=dt(),y=dt(),q=function(t,e){return t===e&&(c=!0),0},G={}.hasOwnProperty,e=[],Y=e.pop,X=e.push,k=e.push,Z=e.slice,b=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",a="[\\x20\\t\\r\\n\\f]",s="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",J="\\["+a+"*("+s+")(?:"+a+"*([*^$|!~]?=)"+a+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+s+"))|)"+a+"*\\]",Q=":("+s+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+J+")*)|.*)\\)|)",$=new RegExp(a+"+","g"),P=new RegExp("^"+a+"+|((?:^|[^\\\\])(?:\\\\.)*)"+a+"+$","g"),tt=new RegExp("^"+a+"*,"+a+"*"),et=new RegExp("^"+a+"*([>+~]|"+a+")"+a+"*"),nt=new RegExp("="+a+"*([^\\]'\"]*?)"+a+"*\\]","g"),it=new RegExp(Q),ot=new RegExp("^"+s+"$"),p={ID:new RegExp("^#("+s+")"),CLASS:new RegExp("^\\.("+s+")"),TAG:new RegExp("^("+s+"|[*])"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+a+"*(even|odd|(([+-]|)(\\d*)n|)"+a+"*(?:([+-]|)"+a+"*(\\d+)|))"+a+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+a+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+a+"*((?:-\\d)?\\d*)"+a+"*\\)|)(?=[^-]|$)","i")},rt=/^(?:input|select|textarea|button)$/i,at=/^h\d$/i,u=/^[^{]+\{\s*\[native \w/,st=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,lt=/[+~]/,T=new RegExp("\\\\([\\da-f]{1,6}"+a+"?|("+a+")|.)","ig"),ct=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ut=D(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{k.apply(e=Z.call(m.childNodes),m.childNodes),e[m.childNodes.length].nodeType}catch(t){k={apply:e.length?function(t,e){X.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function j(t,e,n,i){var o,r,a,s,l,c,u,d=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!i&&((e?e.ownerDocument||e:m)!==E&&x(e),e=e||E,S)){if(11!==p&&(l=st.exec(t)))if(o=l[1]){if(9===p){if(!(a=e.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(d&&(a=d.getElementById(o))&&g(e,a)&&a.id===o)return n.push(a),n}else{if(l[2])return k.apply(n,e.getElementsByTagName(t)),n;if((o=l[3])&&h.getElementsByClassName&&e.getElementsByClassName)return k.apply(n,e.getElementsByClassName(o)),n}if(h.qsa&&!y[t+" "]&&(!v||!v.test(t))){if(1!==p)d=e,u=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(ct,R):e.setAttribute("id",s=O),r=(c=f(t)).length;r--;)c[r]="#"+s+" "+I(c[r]);u=c.join(","),d=lt.test(t)&&vt(e.parentNode)||e}if(u)try{return k.apply(n,d.querySelectorAll(u)),n}catch(t){}finally{s===O&&e.removeAttribute("id")}}}return U(t.replace(P,"$1"),e,n,i)}function dt(){var n=[];function i(t,e){return n.push(t+" ")>w.cacheLength&&delete i[n.shift()],i[t+" "]=e}return i}function A(t){return t[O]=!0,t}function M(t){var e=E.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e)}}function pt(t,e){for(var n=t.split("|"),i=n.length;i--;)w.attrHandle[n[i]]=e}function ht(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ut(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function L(a){return A(function(r){return r=+r,A(function(t,e){for(var n,i=a([],t.length,r),o=i.length;o--;)t[n=i[o]]&&(t[n]=!(e[n]=t[n]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in h=j.support={},B=j.isXML=function(t){t=t&&(t.ownerDocument||t).documentElement;return!!t&&"HTML"!==t.nodeName},x=j.setDocument=function(t){var t=t?t.ownerDocument||t:m;return t!==E&&9===t.nodeType&&t.documentElement&&(n=(E=t).documentElement,S=!B(E),m!==E&&(t=E.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",z,!1):t.attachEvent&&t.attachEvent("onunload",z)),h.attributes=M(function(t){return t.className="i",!t.getAttribute("className")}),h.getElementsByTagName=M(function(t){return t.appendChild(E.createComment("")),!t.getElementsByTagName("*").length}),h.getElementsByClassName=u.test(E.getElementsByClassName),h.getById=M(function(t){return n.appendChild(t).id=O,!E.getElementsByName||!E.getElementsByName(O).length}),h.getById?(w.filter.ID=function(t){var e=t.replace(T,d);return function(t){return t.getAttribute("id")===e}},w.find.ID=function(t,e){if(void 0!==e.getElementById&&S)return(e=e.getElementById(t))?[e]:[]}):(w.filter.ID=function(t){var e=t.replace(T,d);return function(t){t=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return t&&t.value===e}},w.find.ID=function(t,e){if(void 0!==e.getElementById&&S){var n,i,o,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(o=e.getElementsByName(t),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),w.find.TAG=h.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):h.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"!==t)return r;for(;n=r[o++];)1===n.nodeType&&i.push(n);return i},w.find.CLASS=h.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&S)return e.getElementsByClassName(t)},i=[],v=[],(h.qsa=u.test(E.querySelectorAll))&&(M(function(t){n.appendChild(t).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+a+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+a+"*(?:value|"+K+")"),t.querySelectorAll("[id~="+O+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+O+"+*").length||v.push(".#.+[+~]")}),M(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=E.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+a+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),n.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(h.matchesSelector=u.test(o=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.msMatchesSelector))&&M(function(t){h.disconnectedMatch=o.call(t,"*"),o.call(t,"[s!='']:x"),i.push("!=",Q)}),v=v.length&&new RegExp(v.join("|")),i=i.length&&new RegExp(i.join("|")),t=u.test(n.compareDocumentPosition),g=t||u.test(n.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(n.contains?n.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=t?function(t,e){var n;return t===e?(c=!0,0):(n=!t.compareDocumentPosition-!e.compareDocumentPosition)||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!h.sortDetached&&e.compareDocumentPosition(t)===n?t===E||t.ownerDocument===m&&g(m,t)?-1:e===E||e.ownerDocument===m&&g(m,e)?1:l?b(l,t)-b(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return c=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,a=[t],s=[e];if(!o||!r)return t===E?-1:e===E?1:o?-1:r?1:l?b(l,t)-b(l,e):0;if(o===r)return ht(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?ht(a[i],s[i]):a[i]===m?-1:s[i]===m?1:0}),E},j.matches=function(t,e){return j(t,null,null,e)},j.matchesSelector=function(t,e){if((t.ownerDocument||t)!==E&&x(t),e=e.replace(nt,"='$1']"),h.matchesSelector&&S&&!y[e+" "]&&(!i||!i.test(e))&&(!v||!v.test(e)))try{var n=o.call(t,e);if(n||h.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return 0<j(e,E,null,[t]).length},j.contains=function(t,e){return(t.ownerDocument||t)!==E&&x(t),g(t,e)},j.attr=function(t,e){(t.ownerDocument||t)!==E&&x(t);var n=w.attrHandle[e.toLowerCase()],n=n&&G.call(w.attrHandle,e.toLowerCase())?n(t,e,!S):void 0;return void 0!==n?n:h.attributes||!S?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},j.escape=function(t){return(t+"").replace(ct,R)},j.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},j.uniqueSort=function(t){var e,n=[],i=0,o=0;if(c=!h.detectDuplicates,l=!h.sortStable&&t.slice(0),t.sort(q),c){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return l=null,t},r=j.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(w=j.selectors={cacheLength:50,createPseudo:A,match:p,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(T,d),t[3]=(t[3]||t[4]||t[5]||"").replace(T,d),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||j.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&j.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return p.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&it.test(n)&&(e=(e=f(n,!0))&&n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(T,d).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=V[t+" "];return e||(e=new RegExp("(^|"+a+")"+t+"("+a+"|$)"))&&V(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(t){t=j.attr(t,e);return null==t?"!="===n:!n||(t+="","="===n?t===i:"!="===n?t!==i:"^="===n?i&&0===t.indexOf(i):"*="===n?i&&-1<t.indexOf(i):"$="===n?i&&t.slice(-i.length)===i:"~="===n?-1<(" "+t.replace($," ")+" ").indexOf(i):"|="===n&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(f,t,e,v,g){var m="nth"!==f.slice(0,3),y="last"!==f.slice(-4),b="of-type"===t;return 1===v&&0===g?function(t){return!!t.parentNode}:function(t,e,n){var i,o,r,a,s,l,c=m!=y?"nextSibling":"previousSibling",u=t.parentNode,d=b&&t.nodeName.toLowerCase(),p=!n&&!b,h=!1;if(u){if(m){for(;c;){for(a=t;a=a[c];)if(b?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&p){for(h=(s=(i=(o=(r=(a=u)[O]||(a[O]={}))[a.uniqueID]||(r[a.uniqueID]={}))[f]||[])[0]===C&&i[1])&&i[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(h=s=0,l.pop());)if(1===a.nodeType&&++h&&a===t){o[f]=[C,s,h];break}}else if(!1===(h=p?s=(i=(o=(r=(a=t)[O]||(a[O]={}))[a.uniqueID]||(r[a.uniqueID]={}))[f]||[])[0]===C&&i[1]:h))for(;(a=++s&&a&&a[c]||(h=s=0,l.pop()))&&((b?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++h||(p&&((o=(r=a[O]||(a[O]={}))[a.uniqueID]||(r[a.uniqueID]={}))[f]=[C,h]),a!==t)););return(h-=g)===v||h%v==0&&0<=h/v}}},PSEUDO:function(t,r){var e,a=w.pseudos[t]||w.setFilters[t.toLowerCase()]||j.error("unsupported pseudo: "+t);return a[O]?a(r):1<a.length?(e=[t,t,"",r],w.setFilters.hasOwnProperty(t.toLowerCase())?A(function(t,e){for(var n,i=a(t,r),o=i.length;o--;)t[n=b(t,i[o])]=!(e[n]=i[o])}):function(t){return a(t,0,e)}):a}},pseudos:{not:A(function(t){var i=[],o=[],s=N(t.replace(P,"$1"));return s[O]?A(function(t,e,n,i){for(var o,r=s(t,null,i,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,e,n){return i[0]=t,s(i,null,n,o),i[0]=null,!o.pop()}}),has:A(function(e){return function(t){return 0<j(e,t).length}}),contains:A(function(e){return e=e.replace(T,d),function(t){return-1<(t.textContent||t.innerText||r(t)).indexOf(e)}}),lang:A(function(n){return ot.test(n||"")||j.error("unsupported lang: "+n),n=n.replace(T,d).toLowerCase(),function(t){var e;do{if(e=S?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=F.location&&F.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===n},focus:function(t){return t===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return at.test(t.nodeName)},input:function(t){return rt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:L(function(){return[0]}),last:L(function(t,e){return[e-1]}),eq:L(function(t,e,n){return[n<0?n+e:n]}),even:L(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:L(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:L(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:L(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})w.pseudos[t]=function(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}(t);function gt(){}function I(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function D(a,t,e){var s=t.dir,l=t.next,c=l||s,u=e&&"parentNode"===c,d=H++;return t.first?function(t,e,n){for(;t=t[s];)if(1===t.nodeType||u)return a(t,e,n);return!1}:function(t,e,n){var i,o,r=[C,d];if(n){for(;t=t[s];)if((1===t.nodeType||u)&&a(t,e,n))return!0}else for(;t=t[s];)if(1===t.nodeType||u)if(o=(o=t[O]||(t[O]={}))[t.uniqueID]||(o[t.uniqueID]={}),l&&l===t.nodeName.toLowerCase())t=t[s]||t;else{if((i=o[c])&&i[0]===C&&i[1]===d)return r[2]=i[2];if((o[c]=r)[2]=a(t,e,n))return!0}return!1}}function mt(o){return 1<o.length?function(t,e,n){for(var i=o.length;i--;)if(!o[i](t,e,n))return!1;return!0}:o[0]}function yt(t,e,n,i,o){for(var r,a=[],s=0,l=t.length,c=null!=e;s<l;s++)!(r=t[s])||n&&!n(r,i,o)||(a.push(r),c&&e.push(s));return a}function bt(h,f,v,g,m,t){return g&&!g[O]&&(g=bt(g)),m&&!m[O]&&(m=bt(m,t)),A(function(t,e,n,i){var o,r,a,s=[],l=[],c=e.length,u=t||function(t,e,n){for(var i=0,o=e.length;i<o;i++)j(t,e[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),d=!h||!t&&f?u:yt(u,s,h,n,i),p=v?m||(t?h:c||g)?[]:e:d;if(v&&v(d,p,n,i),g)for(o=yt(p,l),g(o,[],n,i),r=o.length;r--;)(a=o[r])&&(p[l[r]]=!(d[l[r]]=a));if(t){if(m||h){if(m){for(o=[],r=p.length;r--;)(a=p[r])&&o.push(d[r]=a);m(null,p=[],o,i)}for(r=p.length;r--;)(a=p[r])&&-1<(o=m?b(t,a):s[r])&&(t[o]=!(e[o]=a))}}else p=yt(p===e?p.splice(c,p.length):p),m?m(null,e,p,i):k.apply(e,p)})}function wt(g,m){function t(t,e,n,i,o){var r,a,s,l=0,c="0",u=t&&[],d=[],p=_,h=t||b&&w.find.TAG("*",o),f=C+=null==p?1:Math.random()||.1,v=h.length;for(o&&(_=e===E||e||o);c!==v&&null!=(r=h[c]);c++){if(b&&r){for(a=0,e||r.ownerDocument===E||(x(r),n=!S);s=g[a++];)if(s(r,e||E,n)){i.push(r);break}o&&(C=f)}y&&((r=!s&&r)&&l--,t)&&u.push(r)}if(l+=c,y&&c!==l){for(a=0;s=m[a++];)s(u,d,e,n);if(t){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=Y.call(i));d=yt(d)}k.apply(i,d),o&&!t&&0<d.length&&1<l+m.length&&j.uniqueSort(i)}return o&&(C=f,_=p),u}var y=0<m.length,b=0<g.length;return y?A(t):t}return gt.prototype=w.filters=w.pseudos,w.setFilters=new gt,f=j.tokenize=function(t,e){var n,i,o,r,a,s,l,c=W[t+" "];if(c)return e?0:c.slice(0);for(a=t,s=[],l=w.preFilter;a;){for(r in n&&!(i=tt.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(o=[])),n=!1,(i=et.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(P," ")}),a=a.slice(n.length)),w.filter)!(i=p[r].exec(a))||l[r]&&!(i=l[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?j.error(t):W(t,s).slice(0)},N=j.compile=function(t,e){var n,i=[],o=[],r=y[t+" "];if(!r){for(n=(e=e||f(t)).length;n--;)((r=function t(e){for(var i,n,o,r=e.length,a=w.relative[e[0].type],s=a||w.relative[" "],l=a?1:0,c=D(function(t){return t===i},s,!0),u=D(function(t){return-1<b(i,t)},s,!0),d=[function(t,e,n){return t=!a&&(n||e!==_)||((i=e).nodeType?c:u)(t,e,n),i=null,t}];l<r;l++)if(n=w.relative[e[l].type])d=[D(mt(d),n)];else{if((n=w.filter[e[l].type].apply(null,e[l].matches))[O]){for(o=++l;o<r&&!w.relative[e[o].type];o++);return bt(1<l&&mt(d),1<l&&I(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(P,"$1"),n,l<o&&t(e.slice(l,o)),o<r&&t(e=e.slice(o)),o<r&&I(e))}d.push(n)}return mt(d)}(e[n]))[O]?i:o).push(r);(r=y(t,wt(o,i))).selector=t}return r},U=j.select=function(t,e,n,i){var o,r,a,s,l,c="function"==typeof t&&t,u=!i&&f(t=c.selector||t);if(n=n||[],1===u.length){if(2<(r=u[0]=u[0].slice(0)).length&&"ID"===(a=r[0]).type&&9===e.nodeType&&S&&w.relative[r[1].type]){if(!(e=(w.find.ID(a.matches[0].replace(T,d),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=p.needsContext.test(t)?0:r.length;o--&&(a=r[o],!w.relative[s=a.type]);)if((l=w.find[s])&&(i=l(a.matches[0].replace(T,d),lt.test(r[0].type)&&vt(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&I(r))break;return k.apply(n,i),n}}return(c||N(t,u))(i,e,!S,n,!e||lt.test(t)&&vt(e.parentNode)||e),n},h.sortStable=O.split("").sort(q).join("")===O,h.detectDuplicates=!!c,x(),h.sortDetached=M(function(t){return 1&t.compareDocumentPosition(E.createElement("fieldset"))}),M(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||pt("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),h.attributes&&M(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||pt("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),M(function(t){return null==t.getAttribute("disabled")})||pt(K,function(t,e,n){if(!n)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),j}(_),J=(E.find=t,E.expr=t.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=t.uniqueSort,E.text=t.getText,E.isXMLDoc=t.isXML,E.contains=t.contains,E.escapeSelector=t.escape,E.expr.match.needsContext);function l(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var Q=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function $(t,n,i){return y(n)?E.grep(t,function(t,e){return!!n.call(t,e,t)!==i}):n.nodeType?E.grep(t,function(t){return t===n!==i}):"string"!=typeof n?E.grep(t,function(t){return-1<N.call(n,t)!==i}):E.filter(n,t,i)}E.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?E.find.matchesSelector(i,t)?[i]:[]:E.find.matches(t,E.grep(e,function(t){return 1===t.nodeType}))},E.fn.extend({find:function(t){var e,n,i=this.length,o=this;if("string"!=typeof t)return this.pushStack(E(t).filter(function(){for(e=0;e<i;e++)if(E.contains(o[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)E.find(t,o[e],n);return 1<i?E.uniqueSort(n):n},filter:function(t){return this.pushStack($(this,t||[],!1))},not:function(t){return this.pushStack($(this,t||[],!0))},is:function(t){return!!$(this,"string"==typeof t&&J.test(t)?E(t):t||[],!1).length}});var tt,et=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,nt=((E.fn.init=function(t,e,n){if(t){if(n=n||tt,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this);if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:et.exec(t))||!i[1]&&e)return(!e||e.jquery?e||n:this.constructor(e)).find(t);if(i[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:x,!0)),Q.test(i[1])&&E.isPlainObject(e))for(var i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i])}else(n=x.getElementById(i[2]))&&(this[0]=n,this.length=1)}return this}).prototype=E.fn,tt=E(x),/^(?:parents|prev(?:Until|All))/),it={children:!0,contents:!0,next:!0,prev:!0};function ot(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,o=this.length,r=[],a="string"!=typeof t&&E(t);if(!J.test(t))for(;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&E.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(1<r.length?E.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?N.call(E(t),this[0]):N.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){t=t.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return i(t,"parentNode")},parentsUntil:function(t,e,n){return i(t,"parentNode",n)},next:function(t){return ot(t,"nextSibling")},prev:function(t){return ot(t,"previousSibling")},nextAll:function(t){return i(t,"nextSibling")},prevAll:function(t){return i(t,"previousSibling")},nextUntil:function(t,e,n){return i(t,"nextSibling",n)},prevUntil:function(t,e,n){return i(t,"previousSibling",n)},siblings:function(t){return K((t.parentNode||{}).firstChild,t)},children:function(t){return K(t.firstChild)},contents:function(t){return l(t,"iframe")?t.contentDocument:(l(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},function(i,o){E.fn[i]=function(t,e){var n=E.map(this,o,t);return(e="Until"!==i.slice(-5)?t:e)&&"string"==typeof e&&(n=E.filter(e,n)),1<this.length&&(it[i]||E.uniqueSort(n),nt.test(i))&&n.reverse(),this.pushStack(n)}});var S=/[^\x20\t\r\n\f]+/g;function u(t){return t}function rt(t){throw t}function at(t,e,n,i){var o;try{t&&y(o=t.promise)?o.call(t).done(e).fail(n):t&&y(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(i){var t,n;i="string"==typeof i?(t=i,n={},E.each(t.match(S)||[],function(t,e){n[e]=!0}),n):E.extend({},i);function o(){for(s=s||i.once,a=r=!0;c.length;u=-1)for(e=c.shift();++u<l.length;)!1===l[u].apply(e[0],e[1])&&i.stopOnFalse&&(u=l.length,e=!1);i.memory||(e=!1),r=!1,s&&(l=e?[]:"")}var r,e,a,s,l=[],c=[],u=-1,d={add:function(){return l&&(e&&!r&&(u=l.length-1,c.push(e)),function n(t){E.each(t,function(t,e){y(e)?i.unique&&d.has(e)||l.push(e):e&&e.length&&"string"!==f(e)&&n(e)})}(arguments),e)&&!r&&o(),this},remove:function(){return E.each(arguments,function(t,e){for(var n;-1<(n=E.inArray(e,l,n));)l.splice(n,1),n<=u&&u--}),this},has:function(t){return t?-1<E.inArray(t,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=c=[],l=e="",this},disabled:function(){return!l},lock:function(){return s=c=[],e||r||(l=e=""),this},locked:function(){return!!s},fireWith:function(t,e){return s||(e=[t,(e=e||[]).slice?e.slice():e],c.push(e),r)||o(),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},E.extend({Deferred:function(t){var r=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],o="pending",a={state:function(){return o},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var o=arguments;return E.Deferred(function(i){E.each(r,function(t,e){var n=y(o[e[4]])&&o[e[4]];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&y(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this,n?[t]:arguments)})}),o=null}).promise()},then:function(e,n,i){var l=0;function c(o,r,a,s){return function(){function t(){var t,e;if(!(o<l)){if((t=a.apply(n,i))===r.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,y(e)?s?e.call(t,c(l,r,u,s),c(l,r,rt,s)):(l++,e.call(t,c(l,r,u,s),c(l,r,rt,s),c(l,r,u,r.notifyWith))):(a!==u&&(n=void 0,i=[t]),(s||r.resolveWith)(n,i))}}var n=this,i=arguments,e=s?t:function(){try{t()}catch(t){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(t,e.stackTrace),l<=o+1&&(a!==rt&&(n=void 0,i=[t]),r.rejectWith(n,i))}};o?e():(E.Deferred.getStackHook&&(e.stackTrace=E.Deferred.getStackHook()),_.setTimeout(e))}}return E.Deferred(function(t){r[0][3].add(c(0,t,y(i)?i:u,t.notifyWith)),r[1][3].add(c(0,t,y(e)?e:u)),r[2][3].add(c(0,t,y(n)?n:rt))}).promise()},promise:function(t){return null!=t?E.extend(t,a):a}},s={};return E.each(r,function(t,e){var n=e[2],i=e[5];a[e[1]]=n.add,i&&n.add(function(){o=i},r[3-t][2].disable,r[3-t][3].disable,r[0][2].lock,r[0][3].lock),n.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=n.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){function e(e){return function(t){o[e]=this,r[e]=1<arguments.length?s.call(arguments):t,--n||a.resolveWith(o,r)}}var n=arguments.length,i=n,o=Array(i),r=s.call(arguments),a=E.Deferred();if(n<=1&&(at(t,a.done(e(i)).resolve,a.reject,!n),"pending"===a.state()||y(r[i]&&r[i].then)))return a.then();for(;i--;)at(r[i],e(i),a.reject);return a.promise()}});var st=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,lt=(E.Deferred.exceptionHook=function(t,e){_.console&&_.console.warn&&t&&st.test(t.name)&&_.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){_.setTimeout(function(){throw t})},E.Deferred());function ct(){x.removeEventListener("DOMContentLoaded",ct),_.removeEventListener("load",ct),E.ready()}E.fn.ready=function(t){return lt.then(t).catch(function(t){E.readyException(t)}),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0)!==t&&0<--E.readyWait||lt.resolveWith(x,[E])}}),E.ready.then=lt.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?_.setTimeout(E.ready):(x.addEventListener("DOMContentLoaded",ct),_.addEventListener("load",ct));function d(t,e,n,i,o,r,a){var s=0,l=t.length,c=null==n;if("object"===f(n))for(s in o=!0,n)d(t,e,s,n[s],!0,r,a);else if(void 0!==i&&(o=!0,y(i)||(a=!0),e=c?a?(e.call(t,i),null):(c=e,function(t,e,n){return c.call(E(t),n)}):e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return o?t:c?e.call(t):l?e(t[0],n):r}var ut=/^-ms-/,dt=/-([a-z])/g;function pt(t,e){return e.toUpperCase()}function b(t){return t.replace(ut,"ms-").replace(dt,pt)}function ht(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function e(){this.expando=E.expando+e.uid++}e.uid=1,e.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ht(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,o=this.cache(t);if("string"==typeof e)o[b(e)]=n;else for(i in e)o[b(i)]=e[i];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][b(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(b):(e=b(e))in i?[e]:e.match(S)||[]).length;for(;n--;)delete i[e[n]]}void 0!==e&&!E.isEmptyObject(i)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){t=t[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var m=new e,c=new e,ft=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,vt=/[A-Z]/g;function gt(t,e,n){var i,o;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(vt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===(o=n)||"false"!==o&&("null"===o?null:o===+o+""?+o:ft.test(o)?JSON.parse(o):o)}catch(t){}c.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return c.hasData(t)||m.hasData(t)},data:function(t,e,n){return c.access(t,e,n)},removeData:function(t,e){c.remove(t,e)},_data:function(t,e,n){return m.access(t,e,n)},_removeData:function(t,e){m.remove(t,e)}}),E.fn.extend({data:function(n,t){var e,i,o,r=this[0],a=r&&r.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){c.set(this,n)}):d(this,function(t){var e;if(r&&void 0===t)return void 0!==(e=c.get(r,n))||void 0!==(e=gt(r,n))?e:void 0;this.each(function(){c.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(o=c.get(r),1===r.nodeType)&&!m.get(r,"hasDataAttrs")){for(e=a.length;e--;)a[e]&&0===(i=a[e].name).indexOf("data-")&&(i=b(i.slice(5)),gt(r,i,o[i]));m.set(r,"hasDataAttrs",!0)}return o},removeData:function(t){return this.each(function(){c.remove(this,t)})}}),E.extend({queue:function(t,e,n){var i;if(t)return i=m.get(t,e=(e||"fx")+"queue"),n&&(!i||Array.isArray(n)?i=m.access(t,e,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),i=n.length,o=n.shift(),r=E._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,function(){E.dequeue(t,e)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return m.get(t,n)||m.access(t,n,{empty:E.Callbacks("once memory").add(function(){m.remove(t,[e+"queue",n])})})}}),E.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?E.queue(this[0],e):void 0===n?this:this.each(function(){var t=E.queue(this,e,n);E._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&E.dequeue(this,e)})},dequeue:function(t){return this.each(function(){E.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--o||r.resolveWith(a,[a])}var i,o=1,r=E.Deferred(),a=this,s=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=m.get(a[s],t+"queueHooks"))&&i.empty&&(o++,i.empty.add(n));return n(),r.promise(e)}});function mt(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&E.contains(t.ownerDocument,t)&&"none"===E.css(t,"display")}function yt(t,e,n,i){var o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];for(o in n=n.apply(t,i||[]),e)t.style[o]=r[o];return n}var t=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,p=new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i"),h=["Top","Right","Bottom","Left"];function bt(t,e,n,i){var o,r,a=20,s=i?function(){return i.cur()}:function(){return E.css(t,e,"")},l=s(),c=n&&n[3]||(E.cssNumber[e]?"":"px"),u=(E.cssNumber[e]||"px"!==c&&+l)&&p.exec(E.css(t,e));if(u&&u[3]!==c){for(c=c||u[3],u=+(l/=2)||1;a--;)E.style(t,e,u+c),(1-r)*(1-(r=s()/l||.5))<=0&&(a=0),u/=r;E.style(t,e,(u*=2)+c),n=n||[]}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i)&&(i.unit=c,i.start=u,i.end=o),o}var wt={};function w(t,e){for(var n,i,o,r,a,s=[],l=0,c=t.length;l<c;l++)(i=t[l]).style&&(n=i.style.display,e?("none"===n&&(s[l]=m.get(i,"display")||null,s[l]||(i.style.display="")),""===i.style.display&&mt(i)&&(s[l]=(a=r=void 0,r=(o=i).ownerDocument,o=o.nodeName,(a=wt[o])||(r=r.body.appendChild(r.createElement(o)),a=E.css(r,"display"),r.parentNode.removeChild(r),wt[o]=a="none"===a?"block":a),a))):"none"!==n&&(s[l]="none",m.set(i,"display",n)));for(l=0;l<c;l++)null!=s[l]&&(t[l].style.display=s[l]);return t}E.fn.extend({show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){mt(this)?E(this).show():E(this).hide()})}});var _t=/^(?:checkbox|radio)$/i,xt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Et=/^$|^module$|\/(?:java|ecma)script/i,O={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function C(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&l(t,e)?E.merge([t],n):n}function St(t,e){for(var n=0,i=t.length;n<i;n++)m.set(t[n],"globalEval",!e||m.get(e[n],"globalEval"))}O.optgroup=O.option,O.tbody=O.tfoot=O.colgroup=O.caption=O.thead,O.th=O.td;var Ot=/<|&#?\w+;/;function Ct(t,e,n,i,o){for(var r,a,s,l,c,u=e.createDocumentFragment(),d=[],p=0,h=t.length;p<h;p++)if((r=t[p])||0===r)if("object"===f(r))E.merge(d,r.nodeType?[r]:r);else if(Ot.test(r)){for(a=a||u.appendChild(e.createElement("div")),s=(xt.exec(r)||["",""])[1].toLowerCase(),s=O[s]||O._default,a.innerHTML=s[1]+E.htmlPrefilter(r)+s[2],c=s[0];c--;)a=a.lastChild;E.merge(d,a.childNodes),(a=u.firstChild).textContent=""}else d.push(e.createTextNode(r));for(u.textContent="",p=0;r=d[p++];)if(i&&-1<E.inArray(r,i))o&&o.push(r);else if(l=E.contains(r.ownerDocument,r),a=C(u.appendChild(r),"script"),l&&St(a),n)for(c=0;r=a[c++];)Et.test(r.type||"")&&n.push(r);return u}A=x.createDocumentFragment().appendChild(x.createElement("div")),(a=x.createElement("input")).setAttribute("type","radio"),a.setAttribute("checked","checked"),a.setAttribute("name","t"),A.appendChild(a),g.checkClone=A.cloneNode(!0).cloneNode(!0).lastChild.checked,A.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!A.cloneNode(!0).lastChild.defaultValue;var kt=x.documentElement,Pt=/^key/,Tt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,jt=/^([^.]*)(?:\.(.+)|)/;function At(){return!0}function k(){return!1}function Mt(){try{return x.activeElement}catch(t){}}function Lt(t,e,n,i,o,r){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)Lt(t,s,n,i,e[s],r);return t}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=k;else if(!o)return t;return 1===r&&(a=o,(o=function(t){return E().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=E.guid++)),t.each(function(){E.event.add(this,e,o,i,n)})}E.event={global:{},add:function(e,t,n,i,o){var r,a,s,l,c,u,d,p,h,f=m.get(e);if(f)for(n.handler&&(n=(r=n).handler,o=r.selector),o&&E.find.matchesSelector(kt,o),n.guid||(n.guid=E.guid++),s=(s=f.events)||(f.events={}),a=(a=f.handle)||(f.handle=function(t){return void 0!==E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(S)||[""]).length;l--;)d=h=(p=jt.exec(t[l])||[])[1],p=(p[2]||"").split(".").sort(),d&&(c=E.event.special[d]||{},d=(o?c.delegateType:c.bindType)||d,c=E.event.special[d]||{},h=E.extend({type:d,origType:h,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&E.expr.match.needsContext.test(o),namespace:p.join(".")},r),(u=s[d])||((u=s[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,i,p,a))||e.addEventListener&&e.addEventListener(d,a),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),o?u.splice(u.delegateCount++,0,h):u.push(h),E.event.global[d]=!0)},remove:function(t,e,n,i,o){var r,a,s,l,c,u,d,p,h,f,v,g=m.hasData(t)&&m.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(S)||[""]).length;c--;)if(h=v=(s=jt.exec(e[c])||[])[1],f=(s[2]||"").split(".").sort(),h){for(d=E.event.special[h]||{},p=l[h=(i?d.delegateType:d.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=p.length;r--;)u=p[r],!o&&v!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(r,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(t,u));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(t,f,g.handle)||E.removeEvent(t,h,g.handle),delete l[h])}else for(h in l)E.event.remove(t,h+e[c],n,i,!0);E.isEmptyObject(l)&&m.remove(t,"handle events")}},dispatch:function(t){var e,n,i,o,r,a=E.event.fix(t),s=new Array(arguments.length),t=(m.get(this,"events")||{})[a.type]||[],l=E.event.special[a.type]||{};for(s[0]=a,e=1;e<arguments.length;e++)s[e]=arguments[e];if(a.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,a)){for(r=E.event.handlers.call(this,a,t),e=0;(i=r[e++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(o=((E.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(a.result=o)&&(a.preventDefault(),a.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,o,r,a,s=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],a={},n=0;n<l;n++)void 0===a[o=(i=e[n]).selector+" "]&&(a[o]=i.needsContext?-1<E(o,this).index(c):E.find(o,this,null,[c]).length),a[o]&&r.push(i);r.length&&s.push({elem:c,handlers:r})}return c=this,l<e.length&&s.push({elem:c,handlers:e.slice(l)}),s},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Mt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Mt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&l(this,"input"))return this.click(),!1},_default:function(t){return l(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?At:k,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=At,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=At,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=At,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Pt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Tt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},E.event.addProp),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){E.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||E.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=o),e}}}),E.fn.extend({on:function(t,e,n,i){return Lt(this,t,e,n,i)},one:function(t,e,n,i){return Lt(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)i=t.handleObj,E(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);else{if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=k),this.each(function(){E.event.remove(this,t,n,e)});for(o in t)this.off(o,e,t[o])}return this}});var It=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Dt=/<script|<style|<link/i,Ft=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function zt(t,e){return l(t,"table")&&l(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function Bt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ut(t,e){var n,i,o,r,a,s;if(1===e.nodeType){if(m.hasData(t)&&(r=m.access(t),a=m.set(e,r),s=r.events))for(o in delete a.handle,a.events={},s)for(n=0,i=s[o].length;n<i;n++)E.event.add(e,o,s[o][n]);c.hasData(t)&&(r=c.access(t),a=E.extend({},r),c.set(e,a))}}function P(n,i,o,r){i=z.apply([],i);var t,e,a,s,l,c,u=0,d=n.length,p=d-1,h=i[0],f=y(h);if(f||1<d&&"string"==typeof h&&!g.checkClone&&Ft.test(h))return n.each(function(t){var e=n.eq(t);f&&(i[0]=h.call(this,t,e.html())),P(e,i,o,r)});if(d&&(e=(t=Ct(i,n[0].ownerDocument,!1,n,r)).firstChild,1===t.childNodes.length&&(t=e),e||r)){for(s=(a=E.map(C(t,"script"),Bt)).length;u<d;u++)l=t,u!==p&&(l=E.clone(l,!0,!0),s)&&E.merge(a,C(l,"script")),o.call(n[u],l,u);if(s)for(c=a[a.length-1].ownerDocument,E.map(a,Nt),u=0;u<s;u++)l=a[u],Et.test(l.type||"")&&!m.access(l,"globalEval")&&E.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&E._evalUrl(l.src):Y(l.textContent.replace(Rt,""),c,l))}return n}function Ht(t,e,n){for(var i,o=e?E.filter(e,t):t,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||E.cleanData(C(i)),i.parentNode&&(n&&E.contains(i.ownerDocument,i)&&St(C(i,"script")),i.parentNode.removeChild(i));return t}E.extend({htmlPrefilter:function(t){return t.replace(It,"<$1></$2>")},clone:function(t,e,n){var i,o,r,a,s,l,c,u=t.cloneNode(!0),d=E.contains(t.ownerDocument,t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(a=C(u),i=0,o=(r=C(t)).length;i<o;i++)s=r[i],l=a[i],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&_t.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(e)if(n)for(r=r||C(t),a=a||C(u),i=0,o=r.length;i<o;i++)Ut(r[i],a[i]);else Ut(t,u);return 0<(a=C(u,"script")).length&&St(a,!d&&C(t,"script")),u},cleanData:function(t){for(var e,n,i,o=E.event.special,r=0;void 0!==(n=t[r]);r++)if(ht(n)){if(e=n[m.expando]){if(e.events)for(i in e.events)o[i]?E.event.remove(n,i):E.removeEvent(n,i,e.handle);n[m.expando]=void 0}n[c.expando]&&(n[c.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Ht(this,t,!0)},remove:function(t){return Ht(this,t)},text:function(t){return d(this,function(t){return void 0===t?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return P(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||zt(this,t).appendChild(t)})},prepend:function(){return P(this,arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=zt(this,t)).insertBefore(t,e.firstChild)})},before:function(){return P(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return P(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(C(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return E.clone(this,t,e)})},html:function(t){return d(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!O[(xt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(C(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return P(this,arguments,function(t){var e=this.parentNode;E.inArray(this,n)<0&&(E.cleanData(C(this)),e)&&e.replaceChild(t,this)},n)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){E.fn[t]=function(t){for(var e,n=[],i=E(t),o=i.length-1,r=0;r<=o;r++)e=r===o?this:this.clone(!0),E(i[r])[a](e),B.apply(n,e.get());return this.pushStack(n)}});function Vt(t){var e=t.ownerDocument.defaultView;return(e=e&&e.opener?e:_).getComputedStyle(t)}var Wt,qt,Gt,Yt,Xt,Zt,n,Kt=new RegExp("^("+t+")(?!px)[a-z%]+$","i"),Jt=new RegExp(h.join("|"),"i");function o(){var t;n&&(Zt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",n.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",kt.appendChild(Zt).appendChild(n),t=_.getComputedStyle(n),Wt="1%"!==t.top,Xt=12===Qt(t.marginLeft),n.style.right="60%",Yt=36===Qt(t.right),qt=36===Qt(t.width),n.style.position="absolute",Gt=36===n.offsetWidth||"absolute",kt.removeChild(Zt),n=null)}function Qt(t){return Math.round(parseFloat(t))}function T(t,e,n){var i,o,r=t.style;return(n=n||Vt(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||E.contains(t.ownerDocument,t)||(o=E.style(t,e)),!g.pixelBoxStyles())&&Kt.test(o)&&Jt.test(e)&&(t=r.width,e=r.minWidth,i=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=t,r.minWidth=e,r.maxWidth=i),void 0!==o?o+"":o}function $t(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}Zt=x.createElement("div"),(n=x.createElement("div")).style&&(n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===n.style.backgroundClip,E.extend(g,{boxSizingReliable:function(){return o(),qt},pixelBoxStyles:function(){return o(),Yt},pixelPosition:function(){return o(),Wt},reliableMarginLeft:function(){return o(),Xt},scrollboxSize:function(){return o(),Gt}}));var te=/^(none|table(?!-c[ea]).+)/,ee=/^--/,ne={position:"absolute",visibility:"hidden",display:"block"},ie={letterSpacing:"0",fontWeight:"400"},oe=["Webkit","Moz","ms"],re=x.createElement("div").style;function ae(t){return E.cssProps[t]||(E.cssProps[t]=function(t){if(t in re)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=oe.length;n--;)if((t=oe[n]+e)in re)return t}(t)||t)}function se(t,e,n){var i=p.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function le(t,e,n,i,o,r){var a="width"===e?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=E.css(t,n+h[a],!0,o)),i?("content"===n&&(l-=E.css(t,"padding"+h[a],!0,o)),"margin"!==n&&(l-=E.css(t,"border"+h[a]+"Width",!0,o))):(l+=E.css(t,"padding"+h[a],!0,o),"padding"!==n?l+=E.css(t,"border"+h[a]+"Width",!0,o):s+=E.css(t,"border"+h[a]+"Width",!0,o));return!i&&0<=r&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-s-.5))),l}function ce(t,e,n){var i=Vt(t),o=T(t,e,i),r="border-box"===E.css(t,"boxSizing",!1,i),a=r;if(Kt.test(o)){if(!n)return o;o="auto"}return a=a&&(g.boxSizingReliable()||o===t.style[e]),"auto"!==o&&(parseFloat(o)||"inline"!==E.css(t,"display",!1,i))||(o=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(o=parseFloat(o)||0)+le(t,e,n||(r?"border":"content"),a,i,o)+"px"}function r(t,e,n,i,o){return new r.prototype.init(t,e,n,i,o)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e)return""===(e=T(t,"opacity"))?"1":e}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,s=b(e),l=ee.test(e),c=t.style;if(l||(e=ae(s)),a=E.cssHooks[e]||E.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(t,!1,i))?o:c[e];"string"===(r=typeof n)&&(o=p.exec(n))&&o[1]&&(n=bt(t,e,o),r="number"),null==n||n!=n||("number"===r&&(n+=o&&o[3]||(E.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i)))||(l?c.setProperty(e,n):c[e]=n)}},css:function(t,e,n,i){var o,r=b(e);return ee.test(e)||(e=ae(r)),"normal"===(o=void 0===(o=(r=E.cssHooks[e]||E.cssHooks[r])&&"get"in r?r.get(t,!0,n):o)?T(t,e,i):o)&&e in ie&&(o=ie[e]),(""===n||n)&&(r=parseFloat(o),!0===n||isFinite(r))?r||0:o}}),E.each(["height","width"],function(t,r){E.cssHooks[r]={get:function(t,e,n){if(e)return!te.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ce(t,r,n):yt(t,ne,function(){return ce(t,r,n)})},set:function(t,e,n){var i=Vt(t),o="border-box"===E.css(t,"boxSizing",!1,i),n=n&&le(t,r,n,o,i);return o&&g.scrollboxSize()===i.position&&(n-=Math.ceil(t["offset"+r[0].toUpperCase()+r.slice(1)]-parseFloat(i[r])-le(t,r,"border",!1,i)-.5)),n&&(o=p.exec(e))&&"px"!==(o[3]||"px")&&(t.style[r]=e,e=E.css(t,r)),se(0,e,n)}}}),E.cssHooks.marginLeft=$t(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat(T(t,"marginLeft"))||t.getBoundingClientRect().left-yt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(o,r){E.cssHooks[o+r]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[o+h[e]+r]=i[e]||i[e-2]||i[0];return n}},"margin"!==o&&(E.cssHooks[o+r].set=se)}),E.fn.extend({css:function(t,e){return d(this,function(t,e,n){var i,o,r={},a=0;if(Array.isArray(e)){for(i=Vt(t),o=e.length;a<o;a++)r[e[a]]=E.css(t,e[a],!1,i);return r}return void 0!==n?E.style(t,e,n):E.css(t,e)},t,e,1<arguments.length)}}),((E.Tween=r).prototype={constructor:r,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(E.cssNumber[n]?"":"px")},cur:function(){var t=r.propHooks[this.prop];return(t&&t.get?t:r.propHooks._default).get(this)},run:function(t){var e,n=r.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:r.propHooks._default).set(this),this}}).init.prototype=r.prototype,(r.propHooks={_default:{get:function(t){return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(t=E.css(t.elem,t.prop,""))&&"auto"!==t?t:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[E.cssProps[t.prop]]&&!E.cssHooks[t.prop]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=r.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=r.prototype.init,E.fx.step={};var j,ue,a,A,de=/^(?:toggle|show|hide)$/,pe=/queueHooks$/;function he(){ue&&(!1===x.hidden&&_.requestAnimationFrame?_.requestAnimationFrame(he):_.setTimeout(he,E.fx.interval),E.fx.tick())}function fe(){return _.setTimeout(function(){j=void 0}),j=Date.now()}function ve(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)o["margin"+(n=h[i])]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function ge(t,e,n){for(var i,o=(M.tweeners[e]||[]).concat(M.tweeners["*"]),r=0,a=o.length;r<a;r++)if(i=o[r].call(n,e,t))return i}function M(o,t,e){var n,r,i,a,s,l,c,u=0,d=M.prefilters.length,p=E.Deferred().always(function(){delete h.elem}),h=function(){if(!r){for(var t=j||fe(),t=Math.max(0,f.startTime+f.duration-t),e=1-(t/f.duration||0),n=0,i=f.tweens.length;n<i;n++)f.tweens[n].run(e);if(p.notifyWith(o,[f,e,t]),e<1&&i)return t;i||p.notifyWith(o,[f,1,0]),p.resolveWith(o,[f])}return!1},f=p.promise({elem:o,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},e),originalProperties:t,originalOptions:e,startTime:j||fe(),duration:e.duration,tweens:[],createTween:function(t,e){e=E.Tween(o,f.opts,t,e,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(e),e},stop:function(t){var e=0,n=t?f.tweens.length:0;if(!r){for(r=!0;e<n;e++)f.tweens[e].run(1);t?(p.notifyWith(o,[f,1,0]),p.resolveWith(o,[f,t])):p.rejectWith(o,[f,t])}return this}}),v=f.props,g=v,m=f.opts.specialEasing;for(i in g)if(s=m[a=b(i)],l=g[i],Array.isArray(l)&&(s=l[1],l=g[i]=l[0]),i!==a&&(g[a]=l,delete g[i]),(c=E.cssHooks[a])&&"expand"in c)for(i in l=c.expand(l),delete g[a],l)i in g||(g[i]=l[i],m[i]=s);else m[a]=s;for(;u<d;u++)if(n=M.prefilters[u].call(f,o,v,f.opts))return y(n.stop)&&(E._queueHooks(f.elem,f.opts.queue).stop=n.stop.bind(n)),n;return E.map(v,ge,f),y(f.opts.start)&&f.opts.start.call(o,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),E.fx.timer(E.extend(h,{elem:o,anim:f,queue:f.opts.queue})),f}E.Animation=E.extend(M,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return bt(n.elem,t,p.exec(e),n),n}]},tweener:function(t,e){for(var n,i=0,o=(t=y(t)?(e=t,["*"]):t.match(S)).length;i<o;i++)n=t[i],M.tweeners[n]=M.tweeners[n]||[],M.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,o,r,a,s,l,c,u="width"in e||"height"in e,d=this,p={},h=t.style,f=t.nodeType&&mt(t),v=m.get(t,"fxshow");for(i in n.queue||(null==(a=E._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,E.queue(t,"fx").length||a.empty.fire()})})),e)if(o=e[i],de.test(o)){if(delete e[i],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!v||void 0===v[i])continue;f=!0}p[i]=v&&v[i]||E.style(t,i)}if((l=!E.isEmptyObject(e))||!E.isEmptyObject(p))for(i in u&&1===t.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=v&&v.display)&&(c=m.get(t,"display")),"none"===(u=E.css(t,"display"))&&(c?u=c:(w([t],!0),c=t.style.display||c,u=E.css(t,"display"),w([t]))),"inline"===u||"inline-block"===u&&null!=c)&&"none"===E.css(t,"float")&&(l||(d.done(function(){h.display=c}),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block"),n.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),l=!1,p)l||(v?"hidden"in v&&(f=v.hidden):v=m.access(t,"fxshow",{display:c}),r&&(v.hidden=!f),f&&w([t],!0),d.done(function(){for(i in f||w([t]),m.remove(t,"fxshow"),p)E.style(t,i,p[i])})),l=ge(f?v[i]:0,i,d),i in v||(v[i]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?M.prefilters.unshift(t):M.prefilters.push(t)}}),E.speed=function(t,e,n){var i=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(t,e,n,i){return this.filter(mt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){function o(){var t=M(this,E.extend({},e),a);(r||m.get(this,"finish"))&&t.stop(!0)}var r=E.isEmptyObject(e),a=E.speed(t,n,i);return o.finish=o,r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(o,t,r){function a(t){var e=t.stop;delete t.stop,e(r)}return"string"!=typeof o&&(r=t,t=o,o=void 0),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",n=E.timers,i=m.get(this);if(e)i[e]&&i[e].stop&&a(i[e]);else for(e in i)i[e]&&i[e].stop&&pe.test(e)&&a(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=o&&n[e].queue!==o||(n[e].anim.stop(r),t=!1,n.splice(e,1));!t&&r||E.dequeue(this,o)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=m.get(this),n=e[a+"queue"],i=e[a+"queueHooks"],o=E.timers,r=n?n.length:0;for(e.finish=!0,E.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===a&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),E.each(["toggle","show","hide"],function(t,i){var o=E.fn[i];E.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(ve(i,!0),t,e,n)}}),E.each({slideDown:ve("show"),slideUp:ve("hide"),slideToggle:ve("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){E.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(j=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),j=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){ue||(ue=!0,he())},E.fx.stop=function(){ue=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(i,t){return i=E.fx&&E.fx.speeds[i]||i,this.queue(t=t||"fx",function(t,e){var n=_.setTimeout(t,i);e.stop=function(){_.clearTimeout(n)}})},a=x.createElement("input"),A=x.createElement("select").appendChild(x.createElement("option")),a.type="checkbox",g.checkOn=""!==a.value,g.optSelected=A.selected,(a=x.createElement("input")).value="t",a.type="radio",g.radioValue="t"===a.value;var me,L=E.expr.attrHandle,ye=(E.fn.extend({attr:function(t,e){return d(this,E.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){E.removeAttr(this,t)})}}),E.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?E.prop(t,e,n):(1===r&&E.isXMLDoc(t)||(o=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?me:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:(t.setAttribute(e,n+""),n):!(o&&"get"in o&&null!==(i=o.get(t,e)))&&null==(i=E.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){var n;if(!g.radioValue&&"radio"===e&&l(t,"input"))return n=t.value,t.setAttribute("type",e),n&&(t.value=n),e}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(S);if(o&&1===t.nodeType)for(;n=o[i++];)t.removeAttribute(n)}}),me={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(t,e){var a=L[e]||E.find.attr;L[e]=function(t,e,n){var i,o,r=e.toLowerCase();return n||(o=L[r],L[r]=i,i=null!=a(t,e,n)?r:null,L[r]=o),i}}),/^(?:input|select|textarea|button)$/i),be=/^(?:a|area)$/i;function I(t){return(t.match(S)||[]).join(" ")}function D(t){return t.getAttribute&&t.getAttribute("class")||""}function we(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(S)||[]}E.fn.extend({prop:function(t,e){return d(this,E.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[E.propFix[t]||t]})}}),E.extend({prop:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&E.isXMLDoc(t)||(e=E.propFix[e]||e,o=E.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):ye.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(E.propHooks.selected={get:function(t){t=t.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(t){t=t.parentNode;t&&(t.selectedIndex,t.parentNode)&&t.parentNode.selectedIndex}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(e){var t,n,i,o,r,a,s=0;if(y(e))return this.each(function(t){E(this).addClass(e.call(this,t,D(this)))});if((t=we(e)).length)for(;n=this[s++];)if(a=D(n),i=1===n.nodeType&&" "+I(a)+" "){for(r=0;o=t[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a!==(a=I(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,o,r,a,s=0;if(y(e))return this.each(function(t){E(this).removeClass(e.call(this,t,D(this)))});if(!arguments.length)return this.attr("class","");if((t=we(e)).length)for(;n=this[s++];)if(a=D(n),i=1===n.nodeType&&" "+I(a)+" "){for(r=0;o=t[r++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");a!==(a=I(i))&&n.setAttribute("class",a)}return this},toggleClass:function(o,e){var r=typeof o,a="string"==r||Array.isArray(o);return"boolean"==typeof e&&a?e?this.addClass(o):this.removeClass(o):y(o)?this.each(function(t){E(this).toggleClass(o.call(this,t,D(this),e),e)}):this.each(function(){var t,e,n,i;if(a)for(e=0,n=E(this),i=we(o);t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==o&&"boolean"!=r||((t=D(this))&&m.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==o&&m.get(this,"__className__")||""))})},hasClass:function(t){for(var e,n=0,i=" "+t+" ";e=this[n++];)if(1===e.nodeType&&-1<(" "+I(D(e))+" ").indexOf(i))return!0;return!1}});function _e(t){t.stopPropagation()}var xe=/\r/g,Ee=(E.fn.extend({val:function(e){var n,t,i,o=this[0];return arguments.length?(i=y(e),this.each(function(t){1!==this.nodeType||(null==(t=i?e.call(this,t,E(this).val()):e)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=E.map(t,function(t){return null==t?"":t+""})),(n=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value"))||(this.value=t)})):o?(n=E.valHooks[o.type]||E.valHooks[o.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(o,"value"))?t:"string"==typeof(t=o.value)?t.replace(xe,""):null==t?"":t:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:I(E.text(t))}},select:{get:function(t){for(var e,n=t.options,i=t.selectedIndex,o="select-one"===t.type,r=o?null:[],a=o?i+1:n.length,s=i<0?a:o?i:0;s<a;s++)if(((e=n[s]).selected||s===i)&&!e.disabled&&(!e.parentNode.disabled||!l(e.parentNode,"optgroup"))){if(e=E(e).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var n,i,o=t.options,r=E.makeArray(e),a=o.length;a--;)((i=o[a]).selected=-1<E.inArray(E.valHooks.option.get(i),r))&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<E.inArray(E(t).val(),e)}},g.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),g.focusin="onfocusin"in _,/^(?:focusinfocus|focusoutblur)$/),Se=(E.extend(E.event,{trigger:function(t,e,n,i){var o,r,a,s,l,c,u,d=[n||x],p=V.call(t,"type")?t.type:t,h=V.call(t,"namespace")?t.namespace.split("."):[],f=u=r=n=n||x;if(3!==n.nodeType&&8!==n.nodeType&&!Ee.test(p+E.event.triggered)&&(-1<p.indexOf(".")&&(p=(h=p.split(".")).shift(),h.sort()),s=p.indexOf(":")<0&&"on"+p,(t=t[E.expando]?t:new E.Event(p,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),c=E.event.special[p]||{},i||!c.trigger||!1!==c.trigger.apply(n,e))){if(!i&&!c.noBubble&&!v(n)){for(a=c.delegateType||p,Ee.test(a+p)||(f=f.parentNode);f;f=f.parentNode)d.push(f),r=f;r===(n.ownerDocument||x)&&d.push(r.defaultView||r.parentWindow||_)}for(o=0;(f=d[o++])&&!t.isPropagationStopped();)u=f,t.type=1<o?a:c.bindType||p,(l=(m.get(f,"events")||{})[t.type]&&m.get(f,"handle"))&&l.apply(f,e),(l=s&&f[s])&&l.apply&&ht(f)&&(t.result=l.apply(f,e),!1===t.result)&&t.preventDefault();return t.type=p,i||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),e)||!ht(n)||s&&y(n[p])&&!v(n)&&((r=n[s])&&(n[s]=null),E.event.triggered=p,t.isPropagationStopped()&&u.addEventListener(p,_e),n[p](),t.isPropagationStopped()&&u.removeEventListener(p,_e),E.event.triggered=void 0,r)&&(n[s]=r),t.result}},simulate:function(t,e,n){n=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(n,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each(function(){E.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}}),g.focusin||E.each({focus:"focusin",blur:"focusout"},function(n,i){function o(t){E.event.simulate(i,t.target,E.event.fix(t))}E.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=m.access(t,i);e||t.addEventListener(n,o,!0),m.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=m.access(t,i)-1;e?m.access(t,i,e):(t.removeEventListener(n,o,!0),m.remove(t,i))}}}),_.location),Oe=Date.now(),Ce=/\?/,ke=(E.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new _.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+t),e},/\[\]$/),Pe=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,je=/^(?:input|select|textarea|keygen)/i;E.param=function(t,e){function n(t,e){e=y(e)?e():e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==e?"":e)}var i,o=[];if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,function(){n(this.name,this.value)});else for(i in t)!function n(i,t,o,r){if(Array.isArray(t))E.each(t,function(t,e){o||ke.test(i)?r(i,e):n(i+"["+("object"==typeof e&&null!=e?t:"")+"]",e,o,r)});else if(o||"object"!==f(t))r(i,t);else for(var e in t)n(i+"["+e+"]",t[e],o,r)}(i,t[i],e,n);return o.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&je.test(this.nodeName)&&!Te.test(t)&&(this.checked||!_t.test(t))}).map(function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:n.replace(Pe,"\r\n")}}).get()}});var Ae=/%20/g,Me=/#.*$/,Le=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,De=/^(?:GET|HEAD)$/,Fe=/^\/\//,Re={},ze={},Be="*/".concat("*"),Ne=x.createElement("a");function Ue(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,o=t.toLowerCase().match(S)||[];if(y(e))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(e)):(r[n]=r[n]||[]).push(e)}}function He(e,i,o,r){var a={},s=e===ze;function l(t){var n;return a[t]=!0,E.each(e[t]||[],function(t,e){e=e(i,o,r);return"string"!=typeof e||s||a[e]?s?!(n=e):void 0:(i.dataTypes.unshift(e),l(e),!1)}),n}return l(i.dataTypes[0])||!a["*"]&&l("*")}function Ve(t,e){var n,i,o=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i=i||{})[n]=e[n]);return i&&E.extend(!0,t,i),t}Ne.href=Se.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Se.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Be,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ve(Ve(t,E.ajaxSettings),e):Ve(E.ajaxSettings,t)},ajaxPrefilter:Ue(Re),ajaxTransport:Ue(ze),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var l,c,u,n,d,p,h,i,f=E.ajaxSetup({},e=e||{}),v=f.context||f,g=f.context&&(v.nodeType||v.jquery)?E(v):E.event,m=E.Deferred(),y=E.Callbacks("once memory"),b=f.statusCode||{},o={},r={},a="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(p){if(!n)for(n={};e=Ie.exec(u);)n[e[1].toLowerCase()]=e[2];e=n[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return p?u:null},setRequestHeader:function(t,e){return null==p&&(t=r[t.toLowerCase()]=r[t.toLowerCase()]||t,o[t]=e),this},overrideMimeType:function(t){return null==p&&(f.mimeType=t),this},statusCode:function(t){if(t)if(p)w.always(t[w.status]);else for(var e in t)b[e]=[b[e],t[e]];return this},abort:function(t){t=t||a;return l&&l.abort(t),s(0,t),this}};if(m.promise(w),f.url=((t||f.url||Se.href)+"").replace(Fe,Se.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(S)||[""],null==f.crossDomain){t=x.createElement("a");try{t.href=f.url,t.href=t.href,f.crossDomain=Ne.protocol+"//"+Ne.host!=t.protocol+"//"+t.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=E.param(f.data,f.traditional)),He(Re,f,e,w),!p){for(i in(h=E.event&&f.global)&&0==E.active++&&E.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!De.test(f.type),c=f.url.replace(Me,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ae,"+")):(t=f.url.slice(c.length),f.data&&(f.processData||"string"==typeof f.data)&&(c+=(Ce.test(c)?"&":"?")+f.data,delete f.data),!1===f.cache&&(c=c.replace(Le,"$1"),t=(Ce.test(c)?"&":"?")+"_="+Oe+++t),f.url=c+t),f.ifModified&&(E.lastModified[c]&&w.setRequestHeader("If-Modified-Since",E.lastModified[c]),E.etag[c])&&w.setRequestHeader("If-None-Match",E.etag[c]),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Be+"; q=0.01":""):f.accepts["*"]),f.headers)w.setRequestHeader(i,f.headers[i]);if(f.beforeSend&&(!1===f.beforeSend.call(v,w,f)||p))return w.abort();if(a="abort",y.add(f.complete),w.done(f.success),w.fail(f.error),l=He(ze,f,e,w)){if(w.readyState=1,h&&g.trigger("ajaxSend",[w,f]),p)return w;f.async&&0<f.timeout&&(d=_.setTimeout(function(){w.abort("timeout")},f.timeout));try{p=!1,l.send(o,s)}catch(t){if(p)throw t;s(-1,t)}}else s(-1,"No Transport")}return w;function s(t,e,n,i){var o,r,a,s=e;p||(p=!0,d&&_.clearTimeout(d),l=void 0,u=i||"",w.readyState=0<t?4:0,i=200<=t&&t<300||304===t,n&&(a=function(t,e,n){for(var i,o,r,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}a=a||o}r=r||a}if(r)return r!==l[0]&&l.unshift(r),n[r]}(f,w,n)),a=function(t,e,n,i){var o,r,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=c[l+" "+r]||c["* "+r]))for(o in c)if((s=o.split(" "))[1]===r&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(r=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(f,a,w,i),i?(f.ifModified&&((n=w.getResponseHeader("Last-Modified"))&&(E.lastModified[c]=n),n=w.getResponseHeader("etag"))&&(E.etag[c]=n),204===t||"HEAD"===f.type?s="nocontent":304===t?s="notmodified":(s=a.state,o=a.data,i=!(r=a.error))):(r=s,!t&&s||(s="error",t<0&&(t=0))),w.status=t,w.statusText=(e||s)+"",i?m.resolveWith(v,[o,s,w]):m.rejectWith(v,[w,s,r]),w.statusCode(b),b=void 0,h&&g.trigger(i?"ajaxSuccess":"ajaxError",[w,f,i?o:r]),y.fireWith(v,[w,s]),h&&(g.trigger("ajaxComplete",[w,f]),--E.active||E.event.trigger("ajaxStop")))}},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],function(t,o){E[o]=function(t,e,n,i){return y(e)&&(i=i||n,n=e,e=void 0),E.ajax(E.extend({url:t,type:o,dataType:i,data:e,success:n},E.isPlainObject(t)&&t))}}),E._evalUrl=function(t){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},E.fn.extend({wrapAll:function(t){return this[0]&&(y(t)&&(t=t.call(this[0])),t=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return y(n)?this.each(function(t){E(this).wrapInner(n.call(this,t))}):this.each(function(){var t=E(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=y(e);return this.each(function(t){E(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new _.XMLHttpRequest}catch(t){}};var We={0:200,1223:204},qe=E.ajaxSettings.xhr(),Ge=(g.cors=!!qe&&"withCredentials"in qe,g.ajax=qe=!!qe,E.ajaxTransport(function(o){var r,a;if(g.cors||qe&&!o.crossDomain)return{send:function(t,e){var n,i=o.xhr();if(i.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(n in o.xhrFields)i[n]=o.xhrFields[n];for(n in o.mimeType&&i.overrideMimeType&&i.overrideMimeType(o.mimeType),o.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);r=function(t){return function(){r&&(r=a=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===t?i.abort():"error"===t?"number"!=typeof i.status?e(0,"error"):e(i.status,i.statusText):e(We[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=r(),a=i.onerror=i.ontimeout=r("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&_.setTimeout(function(){r&&a()})},r=r("abort");try{i.send(o.hasContent&&o.data||null)}catch(t){if(r)throw t}},abort:function(){r&&r()}}}),E.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),E.ajaxTransport("script",function(n){var i,o;if(n.crossDomain)return{send:function(t,e){i=E("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",o=function(t){i.remove(),o=null,t&&e("error"===t.type?404:200,t.type)}),x.head.appendChild(i[0])},abort:function(){o&&o()}}}),[]),Ye=/(=)\?(?=&|$)|\?\?/,Xe=(E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ge.pop()||E.expando+"_"+Oe++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,r,a=!1!==t.jsonp&&(Ye.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ye,"$1"+i):!1!==t.jsonp&&(t.url+=(Ce.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return r||E.error(i+" was not called"),r[0]},t.dataTypes[0]="json",o=_[i],_[i]=function(){r=arguments},n.always(function(){void 0===o?E(_).removeProp(i):_[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ge.push(i)),r&&y(o)&&o(r[0]),r=o=void 0}),"script"}),g.createHTMLDocument=((t=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===t.childNodes.length),E.parseHTML=function(t,e,n){var i;return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((i=(e=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,e.head.appendChild(i)):e=x),i=!n&&[],(n=Q.exec(t))?[e.createElement(n[1])]:(n=Ct([t],e,i),i&&i.length&&E(i).remove(),E.merge([],n.childNodes)))},E.fn.load=function(t,e,n){var i,o,r,a=this,s=t.indexOf(" ");return-1<s&&(i=I(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),0<a.length&&E.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,a.html(i?E("<div>").append(E.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,r||[t.responseText,e,t])})}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){E.fn[e]=function(t){return this.on(e,t)}}),E.expr.pseudos.animated=function(e){return E.grep(E.timers,function(t){return e===t.elem}).length},E.offset={setOffset:function(t,e,n){var i,o,r,a,s=E.css(t,"position"),l=E(t),c={};"static"===s&&(t.style.position="relative"),r=l.offset(),i=E.css(t,"top"),a=E.css(t,"left"),s=("absolute"===s||"fixed"===s)&&-1<(i+a).indexOf("auto")?(o=(s=l.position()).top,s.left):(o=parseFloat(i)||0,parseFloat(a)||0),null!=(e=y(e)?e.call(t,n,E.extend({},r)):e).top&&(c.top=e.top-r.top+o),null!=e.left&&(c.left=e.left-r.left+s),"using"in e?e.using.call(t,c):l.css(c)}},E.fn.extend({offset:function(e){var t,n;return arguments.length?void 0===e?this:this.each(function(t){E.offset.setOffset(this,e,t)}):(n=this[0])?n.getClientRects().length?(t=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],o={top:0,left:0};if("fixed"===E.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((o=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),o.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-E.css(i,"marginTop",!0),left:e.left-o.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||kt})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var r="pageYOffset"===o;E.fn[e]=function(t){return d(this,function(t,e,n){var i;if(v(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===n)return i?i[o]:t[e];i?i.scrollTo(r?i.pageXOffset:n,r?n:i.pageYOffset):t[e]=n},e,t,arguments.length)}}),E.each(["top","left"],function(t,n){E.cssHooks[n]=$t(g.pixelPosition,function(t,e){if(e)return e=T(t,n),Kt.test(e)?E(t).position()[n]+"px":e})}),E.each({Height:"height",Width:"width"},function(a,s){E.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,r){E.fn[r]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),o=i||(!0===t||!0===e?"margin":"border");return d(this,function(t,e,n){var i;return v(t)?0===r.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+a],i["scroll"+a],t.body["offset"+a],i["offset"+a],i["client"+a])):void 0===n?E.css(t,e,o):E.style(t,e,n,o)},s,n?t:void 0,n)}})}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){E.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),E.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),E.proxy=function(t,e){var n,i;if("string"==typeof e&&(i=t[e],e=t,t=i),y(t))return n=s.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(s.call(arguments)))}).guid=t.guid=t.guid||E.guid++,i},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=l,E.isFunction=y,E.isWindow=v,E.camelCase=b,E.type=f,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0!==(Qe=function(){return E}.apply(Je,[]))&&(Ke.exports=Qe),_.jQuery),Ze=_.$;return E.noConflict=function(t){return _.$===E&&(_.$=Ze),t&&_.jQuery===E&&(_.jQuery=Xe),E},F||(_.jQuery=_.$=E),E})},function(t,o,r){"use strict";!function(i){Object.defineProperty(o,"__esModule",{value:!0}),o.Tools=void 0;var e=r(100);function n(){}n.bytesToSize=function(t){var e;return 0==t?"0 Byte":(e=Math.floor(Math.log(t)/Math.log(1024)),(t/Math.pow(1024,e)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][e])},n.mbytesToSize=function(t){return n.bytesToSize(1e6*t)},n.convertPointsToPixels=function(t){return t*(1+1/3)},n.strCapitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},n.isRtlPage=function(){var t=null!=document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir");return"rtl"==t},n.isRTL=function(){return i("body").hasClass("rtl")},Object.defineProperty(n,"textDirection",{get:function(){return n.isRTL()?"right":"left"},enumerable:!1,configurable:!0}),n.getClosestNumber=function(t,e){for(var n=Math.abs(e[0]-t),i=0,o=1;o<e.length;o++){var r=Math.abs(e[o]-t);r<n&&(i=o,n=r)}return e[i]},n.createHTMLFromText=function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild},n.modalView=function(t){var e='<div class="modal fade" id="'+t.id+'" aria-labelledby="'+t.id+'Modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content">',e="title"in t?e+('<div class="modal-header"><h4 class="modal-title">'+t.title+'</h4><button type="button" class="close" data-dismiss="modal">'+n.svgClose())+"</button></div>":e+('<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close">'+n.svgClose())+"</button></div>";return"content"in t?e=e+('<div class="modal-body">'+t.content)+"</div>":e+='<div class="modal-body"></div>',"btn"in t&&(e=e+('<div class="modal-footer"><button type="button" class="btn btn-link" data-dismiss="modal">'+t.btn)+"</button></div>"),e+="</div></div></div>"},n.feedbackModalView=function(t){var e=t.id,n=t.title,n=void 0===n?"":n,i=t.content,i=void 0===i?"":i,o=t.img,o=void 0===o?"":o,r=t.primaryBtn,t=t.secondaryBtn,a="",s="";return('\n            <div class="modal modal--alert" id="'+e+'" aria-labelledby="'+e+'Modal" tabindex="-1" role="dialog"\n            aria-hidden="true">\n                <div class="modal-dialog modal-dialog-centered" role="document">\n                    <div class="modal-content modal-content--alert">\n                        <div class="dialog__content">\n                            <div class="dialog__body">\n                                '+(a=n?(o?'<img id="'+e+'-img" src='+o+' alt="Visual feedback" />':"")+'<div id="'+e+'-title" class="dialog__title">'+n+"</div>":a)+"\n\n                                "+(s=i?'<div id="'+e+'-content">'+i+"</div>":s)+'\n                                <div class="dialog__actions">\n                                    <button id="'+e+'-secondary-btn" type="button" class="btn btn--secondary" data-dismiss="modal">'+(void 0===t?"No":t)+'</button>\n                                    <button id="'+e+'-primary-btn" type="button" class="btn" data-dismiss="modal">'+(void 0===r?"Yes":r)+"</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ").trim()},n.codeModalView=function(t){return('\n        <div class="modal fade" id="'+t.id+'" aria-labelledby="'+t.id+'Modal" tabindex="-1" role="dialog"\n        aria-hidden="true">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content modal-content--code">\n                    <div class="code-editor code-editor--light">\n                        <div class="code-editor__libraries">\n                            <div class="code-editor__libraries__title black-3">\n                                <span>'+t.title+'</span>\n                            </div>\n                        </div>\n                        <div class="code-editor__content">\n                            <textarea class="code-editor__content__textarea" data-mode="javascript" readonly>\n'+t.code+"\n                            </textarea>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n        ").trim()},n.modalViewOk=function(t){return t.btn=e.Lang.t("Ok"),n.modalView(t)},n.setInputCursorAtTheEnd=function(t){var e=t.val().length;t.focus(),t[0].setSelectionRange(e,e)},n.svgClose=function(){return n.svgRemove(12,12)},n.svgRotate=function(t,e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(t=void 0===t?14:t)+'" height="'+(e=void 0===e?16:e)+'" viewBox="0 0 14 16"><path d="M11.328 6.364l1.24-1.2c.79.98 1.283 2.113 1.433 3.288h-1.775c-.123-.735-.43-1.454-.896-2.088zm.896 3.778H14c-.15 1.175-.633 2.308-1.424 3.288l-1.24-1.2c.457-.634.765-1.344.888-2.088zm-.888 4.497C10.318 15.4 9.13 15.856 7.9 16v-1.716a5.31 5.31 0 0 0 2.162-.871l1.266 1.226zM6.152 2.595V0l4 3.846-4 3.76V4.302c-2.496.406-4.394 2.485-4.394 4.995s1.898 4.59 4.394 4.995V16C2.68 15.586 0 12.746 0 9.297s2.68-6.29 6.152-6.703z" fill="#47474F" fill-rule="evenodd"/></svg>'},n.svgRemove=function(t,e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(t=void 0===t?12:t)+'" height="'+(e=void 0===e?12:e)+'" viewBox="0 0 12 12"><polygon fill="#47474F" fill-rule="evenodd" points="12 1.208 10.79 0 6 4.792 1.21 0 0 1.208 4.79 6 0 10.792 1.21 12 6 7.208 10.79 12 12 10.792 7.21 6"/></svg>'},n.svgArrowRight=function(t,e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(t=void 0===t?12:t)+'" height="'+(e=void 0===e?12:e)+'" viewBox="0 0 448 512"><path d="M313.94 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.94v46.06c0 21.382 25.85 32.1 40.97 16.97l86.06-86.06c9.373-9.373 9.373-24.57 0-33.94l-86.06-86.06c-15.12-15.12-40.97-4.41-40.97 16.97V216z"/></svg>'},n.svgHome=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="26" height="21"><path d="M22.028 12.67v6.468a1.08 1.08 0 0 1-1.083 1.083h-5.236c-.298 0-.542-.244-.542-.542v-5.056c0-.298-.244-.542-.542-.542h-3.25c-.298 0-.542.244-.542.542v5.056c0 .298-.244.542-.542.542H5.056a1.08 1.08 0 0 1-1.083-1.083V12.67a.54.54 0 0 1 .199-.42l8.486-6.987a.55.55 0 0 1 .691 0l8.486 6.987c.122.104.194.257.194.42zm3.774-2.75l-3.774-3.1V.56c0-.298-.244-.542-.542-.542h-2.528c-.298 0-.542.244-.542.542v3.277L14.377.5c-.8-.66-1.955-.66-2.753 0L.2 9.922c-.23.2-.262.533-.072.763l1.15 1.4c.2.23.533.262.763.072l10.617-8.743a.55.55 0 0 1 .691 0l10.617 8.743c.23.2.573.158.763-.072l1.15-1.4c.2-.235.153-.573-.077-.763z"/></svg>'},n.randomId=function(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)},n.colorpicker=function(e){var t=null,t=1==i(e).data("limit")?{preferredFormat:"hex",showPaletteOnly:!0,color:"blanchedalmond",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]}:{allowEmpty:!0,showInitial:!0,preferredFormat:"hex"};1==i(e).data("input")&&(t.showInput=!0),1==i(e).data("empty")&&(t.allowEmpty=!0,1==i(e).data("limit")&&t.palette.push(["transparent"]),t.change=function(t){t=0===t._a?"transparent":t.toHexString(),i(e).val(t)}),1==i(e).data("inline")&&(t.flat=!0),1==i(e).data("aplha")&&(t.showAlpha=!0),t.clickoutFiresChange=!0;try{i(e).spectrum(t)}catch(e){}},n.isElementInView=function(t,e){return void 0===e&&(e=!1),0!=t.length&&(0==e?t.offset().top<i(window).height()&&60<t.offset().top+t.height():t.offset().top+t.height()<i(window).height()&&60<t.offset().top)},n.keepInNumericBounds=function(t,e,n){return null!==t&&n<t&&(n=t),n=null!==e&&e<n?e:n},n.scrollControl=function(e,n,i){var o=0;e.scroll(function(){var t=e.scrollTop();o<t&&"function"==typeof i&&i(),t<o&&"function"==typeof n&&n(),o=t})},n.loadingFromPreviousStart=function(){var t=i(".fromPrevious");0<=t.length||(t=i('<div class="wait fromPrevious">'+e.Lang.t("previousTaskLoading")+"</div>"),i(".main").append(t)),t.css("display","flex")},n.loadingFromPreviousFail=function(){var t="<div><p>"+e.Lang.t("previousFail")+'</p><p></p><p><button class="btn" onclick="window.history.go(-1); return false;">'+e.Lang.t("previousFailBack")+'</button> <button class="btn btn--red" id="closePrevious">'+e.Lang.t("previousFailContinue")+"</button></p></div>";i(".fromPrevious").html(t).css("background-image","none")},n.loadingFromPreviousEnd=function(){i(".fromPrevious").remove()},n.serializeFormData=function(t){var e={};try{for(var n=0,i=t.entries();n<i.length;n++){var o=i[n],r=o[0],a=o[1];e[r]=a}}catch(t){}return e={info:"form data serialize failed"}},n.parseTemplate=function(n,t,e){return void 0===e&&(e="simple"),null!=(t=void 0===t?null:t)&&("simple"==e&&i.each(t,function(t,e){n=n.replace("{"+t+"}",e)}),"dollar"==e)&&i.each(t,function(t,e){n=n.replace("${"+t+"}",e)}),n},n.isEmail=function(t){return!!/^\w+([\+\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)},o.Tools=n}.call(this,r(1))},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lazyloadCss=void 0,e.lazyloadCss=function(t,e){void 0===e&&(e={});for(var n=document.getElementsByTagName("link"),i=n.length;i--;)if(n[i].hasAttribute("href")&&n[i].href.match(t))return!0;var o,r,a=document.createElement("link");for(o in a.rel="stylesheet",a.href=t,e)e.hasOwnProperty(o)&&(r=e[o],a.setAttribute(o,r));var s=document.getElementsByTagName("link")[0];return s.parentNode.insertBefore(a,s),!0}},function(t,u,d){"use strict";!function(i){var o,t,e=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=(Object.defineProperty(u,"__esModule",{value:!0}),u.AbstractAuthState=void 0,d(57)),n=d(21),c=d(103),a=d(8),s=d(17),n=(t=n.StateBase,e(l,t),l.prototype.initAbstractAuth=function(){var e,n=this;this.abstractAuthInited||(e=this.domStateRoot,this.ELEMENTS_TO_HIDE_IN_TEMPLATE.forEach(function(t){return n.hideHtmlElement(e,t)}),this.setSocialAuthLinkContextPlacement(),c.SocialAuthPopup.addEventListener("auth:success",this._onSocialAuthSuccess),this.userAuth=new r.UserAuth({onLoginSucess:this._abstractOnLoginSuccess,onRegisterSuccess:this._abstractOnRegisterSuccess,onLoginError:this._abstractOnLoginError,onRegisterError:this._abstractOnRegisterError,runningFrom:"dialog"===this.ctx.getContextPlacement()?"popup":"auth"}),this.setUserTimeZoneInCookie(),this.initOverrideFormActions(),this.init2FactorAuth(),this.abstractAuthInited=!0)},l.prototype.showFlashMessage=function(t){var e=document.createElement("div");e.classList.add("flash"),e.innerText=t,this.currentScreen.querySelector(".social-auth").appendChild(e)},l.prototype.clearFlashMessage=function(){this.domStateRoot.querySelectorAll(".flash").forEach(function(t){return t.remove()})},Object.defineProperty(l.prototype,"extraLoginParams",{set:function(t){(this._extraLoginParams=t)||(this.userAuth.extraLoginParams=null);var e,n=[];for(e in t)n.push({name:e,value:t[e]});this.userAuth.extraLoginParams=n},enumerable:!1,configurable:!0}),l.prototype.initOverrideFormActions=function(){var e=this,t=this.domRoot;t.querySelectorAll("form").forEach(function(t){t.addEventListener("submit",function(t){t.preventDefault(),e.clearFlashMessage()})}),t.querySelectorAll("a").forEach(function(t){t.getAttribute("href").startsWith("javascript")||(t.setAttribute("data-a-href",t.href),t.href="javascript:;")}),this.goRegisterScreenBtn.addEventListener("click",function(t){return e.changeScreen("register")}),this.goLoginScreenBtn.addEventListener("click",function(t){return e.changeScreen("login")}),this.goForgetPasswordBtn.addEventListener("click",function(t){return e.changeScreen("reset")}),this.goBackFromResetScreenBtn.addEventListener("click",function(t){return e.changeScreen("login")}),this.okResetSuccessBtn.addEventListener("click",function(t){return e.dispatchEvent(new a.IloveEvent("end"))}),this.redefineActionsForLoginScreen(),this.redefineActionsForRegisterScreen(),this.redefineActionsForResetScreen()},Object.defineProperty(l.prototype,"goBackFromResetScreenBtn",{get:function(){var t=this.domRoot.querySelector("#goBackReset");if(t)return t;throw"'Go back from reset screen' button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"okResetSuccessBtn",{get:function(){var t=this.domRoot.querySelector("#resetSuccessBtn");if(t)return t;throw"'OkResetSuccessBtn' button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"goRegisterScreenBtn",{get:function(){var t=this.domRoot.querySelector("#goRegister");if(t)return t;throw"'Go register screen' button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"goLoginScreenBtn",{get:function(){var t=this.domRoot.querySelector("#goLogin");if(t)return t;throw"'Go login screen' button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"goForgetPasswordBtn",{get:function(){var t=this.domRoot.querySelector("#forget-password");if(t)return t;throw"'Go forget password screen' button not found"},enumerable:!1,configurable:!0}),l.prototype.redefineActionsForLoginScreen=function(){this.domRoot.querySelector('[data-screen="login"]').querySelector("form").addEventListener("submit",this._abstractOnLoginSubmit)},l.prototype.redefineActionsForResetScreen=function(){var t=this,e=this.domRoot.querySelector('[data-screen="reset"]'),e=(e.querySelector("form").addEventListener("submit",this._abstractOnResetSubmit),e.querySelector("form #userpasswordresetform-email"));if(!e)throw"Reset password email input not found";e.addEventListener("input",function(){return t.resetPasswordErrorDom.innerHTML=""})},Object.defineProperty(l.prototype,"resetPasswordErrorDom",{get:function(){var t=this.domStateRoot.querySelector("[data-screen='reset'] span.error");if(t)return t;throw"Error div not found"},enumerable:!1,configurable:!0}),l.prototype.redefineActionsForRegisterScreen=function(){var t=this.domRoot.querySelector('[data-screen="register"]').querySelector("form"),e=t.querySelector("#signupform-timezone"),n=s.Tools.getBrowserTimezone();"UTC"!==n&&(e.value=n),t.addEventListener("submit",this._abstractOnRegisterSubmit)},l.prototype.hideHtmlElement=function(t,e){t.querySelectorAll(e).forEach(function(t){t.style.display="none"})},l.prototype.dispatchEvent=function(t){return this.eventEmitter.dispatchEvent(t)},l.prototype.addEventListener=function(t,e){return this.eventEmitter.addEventListener(t,e)},l.prototype.init2FactorAuth=function(){this.domRoot.querySelector(".field-loginform-google_authenticator_code").style.display="none"},l.prototype.check2FactorError=function(t){"gacIsEmpty"==t&&(this.domRoot.querySelector(".field-loginform-google_authenticator_code").style.display="block",this.domRoot.querySelector(".field-loginEmail").style.display="none",this.domRoot.querySelector(".field-inputPasswordAuth").style.display="none")},l);function l(){var l=null!==t&&t.apply(this,arguments)||this;return l.abstractAuthInited=!1,l.INITIAL_SCREEN="register",l.ELEMENTS_TO_HIDE_IN_TEMPLATE=[".form__title",".brand"],l.setUserTimeZoneInCookie=function(){var t=s.Tools.getBrowserTimezone();"UTC"!==t&&window.Cookies.set("auth_tz",t)},l._onSocialAuthSuccess=function(t){!0===t.detail.socialAuth_isNewUser?l._abstractOnRegisterSuccess({from_auth_social_login:!0}):l._abstractOnLoginSuccess({from_auth_social_login:!0})},l.setSocialAuthLinkContextPlacement=function(){var t=l.domRoot.querySelectorAll(".auth-link"),a="dialog"===l.ctx.getContextPlacement()?"popup":"auth",s=c.SocialAuthPopup.runningFromAttr;t.forEach(function(n){n.setAttribute(s,a),n.removeAttribute("onclick"),n.removeAttribute("href");var i=n.getAttribute("data-provider"),t=l.t("social_provider_"+i),e=n.getAttribute("data-auth-action"),o=l.t("login"===e?"backdrop_social_signin_title":"backdrop_social_signup_title",{social_provider:t}),r=l.t("backdrop_social_subtitle");n.addEventListener("click",function(){var t=l.domStateRoot.querySelector(".auth-screens__backdrop--social"),e=document.createElement("div");e.innerHTML=t.innerHTML,l.showBackdrop(e,o,r),l.setBackdropCallback(function(){c.SocialAuthPopup.focusWindow()},function(){c.SocialAuthPopup.closeWindow(),l.clearBackdrop()}),c.SocialAuthPopup.open(i,{},n).then(l.clearBackdrop,function(t){l.clearBackdrop(),t.errors&&l.showFlashMessage(t.errors[0])})})})},l.clearInputs=function(){l.domStateRoot.querySelectorAll("input").forEach(function(t){return t.value=""})},l._abstractOnResetSubmit=function(t){var e=l.domRoot.querySelector('[data-screen="reset"] form'),e=i(e).serializeArray();l.showLoadingScreen(),l.userAuth.sendResetPasswordEmail(e).then(function(t){var e=l.domStateRoot.querySelector(".reset-password-success-msg");if(!e)throw"'Reset password success' element not found";e.innerHTML=t.data.status_msg,l.changeScreen("reset-success"),l.clearLoadingScreen()},function(t){l.clearLoadingScreen();var e,n=null==(n=null==t?void 0:t.responseJSON)?void 0:n.data;throw null!=(e=null==n?void 0:n.errors)&&e.email?l.resetPasswordErrorDom.innerHTML=n.errors.email.join(","):l.resetPasswordErrorDom.innerHTML=null!=(e=null==(n=null==(e=null==t?void 0:t.responseJSON)?void 0:e.data)?void 0:n.status_msg)?e:"",t})},l._abstractOnLoginSubmit=function(t){var e=l.domRoot.querySelector('[data-screen="login"] form'),n=i(e).serializeArray();l.userAuth.extraLoginParams&&l.userAuth.extraLoginParams.forEach(function(t){n.push(t)}),l.showLoadingScreen(),l.userAuth.login(n)},l._abstractOnRegisterSubmit=function(t){var e=l.domRoot.querySelector('[data-screen="register"] form'),e=i(e).serializeArray();l.showLoadingScreen(),l.userAuth.register(e)},l._abstractOnLoginSuccess=function(t){l.clearLoadingScreen(),!0!==(null==t?void 0:t.from_auth_social_login)&&r.UserAuth.sendEventUserAuth(),l._onLoginSuccess(t),l.dispatchEvent(new a.IloveEvent("login:success"))},l._abstractOnRegisterSuccess=function(t){l.clearLoadingScreen(),!0!==(null==t?void 0:t.from_auth_social_login)&&r.UserAuth.sendEventUserAuth(),l._onRegisterSuccess(t),l.dispatchEvent(new a.IloveEvent("register:success"))},l._abstractOnLoginError=function(t){l.genericAuthErrorHandler(t)},l._abstractOnRegisterError=function(t){l.genericAuthErrorHandler(t)},l.genericAuthErrorHandler=function(t){l.clearLoadingScreen(),l.clearFlashMessage();var e=t.responseJSON;(e=e||"object"!=typeof t?e:t)&&(e=e[t=Object.keys(e)[0]][0],l.showFlashMessage(e),l.check2FactorError(t))},l}u.AbstractAuthState=n}.call(this,d(1))},function(t,e,n){"use strict";!function(n){function t(){}Object.defineProperty(e,"__esModule",{value:!0}),e.TextHelper=void 0,t.width=function(t,e){void 0===e&&(e=null);t=n("<div>"+t+"</div>"),t.css({position:"absolute",visibility:"hidden",height:"auto",width:"auto","white-space":"nowrap","font-size":e}),t.appendTo(n("body")),e=t.width();return t.remove(),e},t.getExistantTextNodeHeight=function(t){var e,n=0;return n=document.createRange&&((e=document.createRange()).selectNodeContents(t),e.getBoundingClientRect)&&(t=e.getBoundingClientRect())?t.bottom-t.top:n},t.sanitize=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return t.replace(/[&<>"'/]/gi,function(t){return e[t]})},t.stripTags=function(t){return t.replace(/(<([^>]+)>)/gi,"")},t.maxLength=function(t,e){return t.substring(0,e)},t.maxLengthEllipse=function(t,e){return t.length>e?t.substring(0,e-3)+"...":t},t.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t.setEndOfContenteditable=function(t){var e,n;document.createRange?((e=document.createRange()).selectNodeContents(t),e.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(e)):document.selection&&((e=document.body.createTextRange()).moveToElementText(t),e.collapse(!1),e.select())},e.TextHelper=t}.call(this,n(1))},function(t,e,n){var i,o;!function(){"use strict";o=[n(32)],void 0!==(o="function"==typeof(i=function(x){"use strict";var r=x.transform;x.transform=function(t,e,n,i,o){r.call(x,x.scale(t,e,o),e,n,i,o)},x.transformCoordinates=function(){},x.getTransformedOptions=function(t,e){var n=e.aspectRatio;var i;var o;var r;var a;if(!n)return e;i={};for(o in e)if(Object.prototype.hasOwnProperty.call(e,o))i[o]=e[o];i.crop=true;r=t.naturalWidth||t.width;a=t.naturalHeight||t.height;if(r/a>n){i.maxWidth=a*n;i.maxHeight=a}else{i.maxWidth=r;i.maxHeight=r/n}return i},x.renderImageToCanvas=function(t,e,n,i,o,r,a,s,l,c,u){var d=t.getContext("2d");if(u.imageSmoothingEnabled===false)d.imageSmoothingEnabled=false;else if(u.imageSmoothingQuality)d.imageSmoothingQuality=u.imageSmoothingQuality;d.drawImage(e,n,i,o,r,a,s,l,c);return t},x.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},x.scale=function(t,e,n){e=e||{};var i=document.createElement("canvas");var o=t.getContext||x.hasCanvasOption(e)&&i.getContext;var r=t.naturalWidth||t.width;var a=t.naturalHeight||t.height;var s=r;var l=a;var c;var u;var d;var p;var h;var f;var v;var g;var m;var y;var b;function w(){var t=Math.max((d||s)/s,(p||l)/l);if(t>1){s*=t;l*=t}}function _(){var t=Math.min((c||s)/s,(u||l)/l);if(t<1){s*=t;l*=t}}if(o){e=x.getTransformedOptions(t,e,n);v=e.left||0;g=e.top||0;if(e.sourceWidth){h=e.sourceWidth;if(e.right!==undefined&&e.left===undefined)v=r-h-e.right}else h=r-v-(e.right||0);if(e.sourceHeight){f=e.sourceHeight;if(e.bottom!==undefined&&e.top===undefined)g=a-f-e.bottom}else f=a-g-(e.bottom||0);s=h;l=f}c=e.maxWidth;u=e.maxHeight;d=e.minWidth;p=e.minHeight;if(o&&c&&u&&e.crop){s=c;l=u;b=h/f-c/u;if(b<0){f=u*h/c;if(e.top===undefined&&e.bottom===undefined)g=(a-f)/2}else if(b>0){h=c*f/u;if(e.left===undefined&&e.right===undefined)v=(r-h)/2}}else{if(e.contain||e.cover){d=c=c||d;p=u=u||p}if(e.cover){_();w()}else{w();_()}}if(o){m=e.pixelRatio;if(m>1){i.style.width=s+"px";i.style.height=l+"px";s*=m;l*=m;i.getContext("2d").scale(m,m)}y=e.downsamplingRatio;if(y>0&&y<1&&s<h&&l<f)while(h*y>s){i.width=h*y;i.height=f*y;x.renderImageToCanvas(i,t,v,g,h,f,0,0,i.width,i.height,e);v=0;g=0;h=i.width;f=i.height;t=document.createElement("canvas");t.width=h;t.height=f;x.renderImageToCanvas(t,i,0,0,h,f,0,0,h,f,e)}i.width=s;i.height=l;x.transformCoordinates(i,e);return x.renderImageToCanvas(i,t,v,g,h,f,0,0,s,l,e)}t.width=s;t.height=l;return t}})?i.apply(e,o):i)&&(t.exports=o)}()},function(t,e,n){var i,o;!function(){"use strict";o=[n(32),n(46)],void 0!==(o="function"==typeof(i=function(h){"use strict";h.ExifMap=function(){return this},h.ExifMap.prototype.map={Orientation:274},h.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},h.getExifThumbnail=function(t,e,n){if(!n||e+n>t.byteLength){console.log("Invalid Exif data: Invalid thumbnail data.");return}return h.createObjectURL(new Blob([t.buffer.slice(e,e+n)]))},h.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:true},3:{getValue:function(t,e,n){return t.getUint16(e,n)},size:2},4:{getValue:function(t,e,n){return t.getUint32(e,n)},size:4},5:{getValue:function(t,e,n){return t.getUint32(e,n)/t.getUint32(e+4,n)},size:8},9:{getValue:function(t,e,n){return t.getInt32(e,n)},size:4},10:{getValue:function(t,e,n){return t.getInt32(e,n)/t.getInt32(e+4,n)},size:8}},h.exifTagTypes[7]=h.exifTagTypes[1],h.getExifValue=function(t,e,n,i,o,r){var a=h.exifTagTypes[i];var s;var l;var c;var u;var d;var p;if(!a){console.log("Invalid Exif data: Invalid tag type.");return}s=a.size*o;l=s>4?e+t.getUint32(n+8,r):n+8;if(l+s>t.byteLength){console.log("Invalid Exif data: Invalid data offset.");return}if(o===1)return a.getValue(t,l,r);c=[];for(u=0;u<o;u+=1)c[u]=a.getValue(t,l+u*a.size,r);if(a.ascii){d="";for(u=0;u<c.length;u+=1){p=c[u];if(p==="\0")break;d+=p}return d}return c},h.parseExifTag=function(t,e,n,i){return{number:t.getUint16(n,i),value:h.getExifValue(t,e,n,t.getUint16(n+2,i),t.getUint32(n+4,i),i)}},h.parseExifTags=function(t,e,n,i,o){var r,a,s,l,c;if(n+6>t.byteLength){console.log("Invalid Exif data: Invalid directory offset.");return}r=t.getUint16(n,i);a=n+2+12*r;if(a+4>t.byteLength){console.log("Invalid Exif data: Invalid directory size.");return}for(s=0;s<r;s+=1){l=n+2+12*s;c=this.parseExifTag(t,e,l,i,o);o.exif[c.number]=c.value;if(o.exifOffsets)o.exifOffsets[c.number]=l}return t.getUint32(a,i)},h.parseExifData=function(t,e,n,i,o){if(o.disableExif)return;var r=e+10;var a;var s;var l;if(t.getUint32(e+4)!==1165519206)return;if(r+8>t.byteLength){console.log("Invalid Exif data: Invalid segment size.");return}if(t.getUint16(e+8)!==0){console.log("Invalid Exif data: Missing byte alignment offset.");return}switch(t.getUint16(r)){case 18761:a=true;break;case 19789:a=false;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}if(t.getUint16(r+2,a)!==42){console.log("Invalid Exif data: Missing TIFF marker.");return}s=t.getUint32(r+4,a);i.exif=new h.ExifMap;if(!o.disableExifOffsets){i.exifOffsets=new h.ExifMap;i.exifTiffOffset=r;i.exifLittleEndian=a}s=h.parseExifTags(t,r,r+s,a,i);if(s&&!o.disableExifThumbnail){l={exif:{}};s=h.parseExifTags(t,r,r+s,a,l);if(l.exif[513])i.exif.Thumbnail=h.getExifThumbnail(t,r+l.exif[513],l.exif[514])}if(i.exif[34665]&&!o.disableExifSub)h.parseExifTags(t,r,r+i.exif[34665],a,i);if(i.exif[34853]&&!o.disableExifGps)h.parseExifTags(t,r,r+i.exif[34853],a,i)},h.metaDataParsers.jpeg[65505].push(h.parseExifData),h.exifWriters={274:function(t,e,n){var i=new DataView(t,e.exifOffsets[274]+8,2);i.setUint16(0,n,e.exifLittleEndian);return t}},h.writeExifData=function(t,e,n,i){h.exifWriters[e.exif.map[n]](t,e,i)}})?i.apply(e,o):i)&&(t.exports=o)}()},function(t,e,n){var i,o;!function(){"use strict";o=[n(32),n(46)],void 0!==(o="function"==typeof(i=function(u){"use strict";u.IptcMap=function(){return this},u.IptcMap.prototype.map={ObjectName:5},u.IptcMap.prototype.get=function(t){return this[t]||this[this.map[t]]},u.parseIptcTags=function(t,e,n,i){function o(t,e,n){var i="";for(var o=e;o<e+n;o++)i+=String.fromCharCode(t.getUint8(o));return i}var r,a,s;var l=e;while(l<e+n){if(t.getUint8(l)===28&&t.getUint8(l+1)===2){s=t.getUint8(l+2);if(s in i.iptc.tags){a=t.getInt16(l+3);r=o(t,l+5,a);if(Object.prototype.hasOwnProperty.call(i.iptc,s))if(i.iptc[s]instanceof Array)i.iptc[s].push(r);else i.iptc[s]=[i.iptc[s],r];else i.iptc[s]=r}}l++}},u.parseIptcData=function(t,e,n,i,o){if(o.disableIptc)return;var r=e+n;var a=function(t,e){return t.getUint32(e)===943868237&&t.getUint16(e+4)===1028};while(e+8<r){if(a(t,e)){var s=t.getUint8(e+7);if(s%2!==0)s+=1;if(s===0)s=4;var l=e+8+s;if(l>r){console.log("Invalid IPTC data: Invalid segment offset.");break}var c=t.getUint16(e+6+s);if(e+c>r){console.log("Invalid IPTC data: Invalid segment size.");break}i.iptc=new u.IptcMap;return u.parseIptcTags(t,l,c,i)}e++}console.log("No IPTC data at this offset - could be XMP")},u.metaDataParsers.jpeg[65517].push(u.parseIptcData)})?i.apply(e,o):i)&&(t.exports=o)}()},function(t,e,n){"use strict";t.exports=function(t,e,n,i){for(var o=65535&t|0,r=t>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;r=r+(o=o+e[i++]|0)|0,--a;);o%=65521,r%=65521}return o|r<<16|0}},function(t,e,n){"use strict";var s=function(){for(var t=[],e=0;e<256;e++){for(var n=e,i=0;i<8;i++)n=1&n?3988292384^n>>>1:n>>>1;t[e]=n}return t}();t.exports=function(t,e,n,i){var o=s,r=i+n;t^=-1;for(var a=i;a<r;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},function(t,e,n){"use strict";var l=n(37),o=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var c=new l.Buf8(256),i=0;i<256;i++)c[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function u(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&o))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}c[254]=c[254]=1,e.string2buf=function(t){for(var e,n,i,o,r=t.length,a=0,s=0;s<r;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<r&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new l.Buf8(a),s=o=0;o<a;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<r&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?e[o++]=n:(n<2048?e[o++]=192|n>>>6:(n<65536?e[o++]=224|n>>>12:(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63),e[o++]=128|n>>>6&63),e[o++]=128|63&n);return e},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var e=new l.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){for(var n,i,o=e||t.length,r=new Array(2*o),a=0,s=0;s<o;)if((n=t[s++])<128)r[a++]=n;else if(4<(i=c[n]))r[a++]=65533,s+=i-1;else{for(n&=2===i?31:3===i?15:7;1<i&&s<o;)n=n<<6|63&t[s++],i--;1<i?r[a++]=65533:n<65536?r[a++]=n:(n-=65536,r[a++]=55296|n>>10&1023,r[a++]=56320|1023&n)}return u(r,a)},e.utf8border=function(t,e){for(var n=(e=(e=e||t.length)>t.length?t.length:e)-1;0<=n&&128==(192&t[n]);)n--;return!(n<0)&&0!==n&&n+c[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,a,u){"use strict";!function(s){var i,o,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),e=(Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsManager=void 0,u(157)),n=u(160),l=u(7),c=u(17),e=(o=e.OptionsManager,t(r,o),r.prototype.triggerFirstFileReady=function(){s("body").addClass("first-file-ready");var t=new CustomEvent("firstFileReady",{detail:{file:this.files.files[0]}});window.dispatchEvent(t)},r.prototype.initViewManager=function(){this.viewManager=new n.ViewManager({tool:this.tool,subtool:this.subtool,files:this.files,processManager:this.processManager}),!0===this.passwordNeeded&&(this.viewManager.pdfViewer.needPassword=!0)},r.prototype.askForPassword=function(o){var r=this,a=this;return new Promise(function(t,e){var n=r.files.getFileByServerFilename(o),i=c.Tools.modalViewOk({id:"pwd-"+n.id,title:l.Lang.t("askPasswordTitle"),content:"<form><label>"+n.name+'</label><input type="password"></form>'});s(i).modal(),s("#pwd-"+n.id).on("click",function(){a.files.updateFile(n.id,{password:s("#pwd-"+n.id+" input").val()}),t(n)})})},r.prototype.fileAdded=function(t,e,n){return void 0===n&&(n=!1),null==this.viewManager&&this.init(),o.prototype.fileAdded.call(this,t,e,n)},r.prototype.tryInitByParent=function(){o.prototype.tryInitByParent.call(this)},r.prototype.workareaActions=function(){o.prototype.workareaActions.call(this)},r);function r(t){t=o.call(this,t=void 0===t?{}:t)||this;return t.firstFileLoaded=!1,t}a.OptionsManager=e}.call(this,u(1))},function(t,e,n){"use strict";!function(a){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.IloveError=void 0,n(7)),l=t(n(15)),c=n(13);function u(){}u.getError=function(t){if("string"==typeof t)return t;if("error"in t&&"string"==typeof t.error)return t.error;if("response"in t){var e=this.getJson(t.response);if(null!=e)return"error"in e&&"param"in e.error&&e.error.param&&e.error.param&&"type"in e.error.param&&e.error.param.type instanceof Array?e.error.param.type[0]:"error"in e&&"type"in e.error&&e.error.type&&"string"==typeof e.error.type?e.error.type:"ServerError"}return 0 in t,"param"in t&&"type"in t.param?t.param.type:"UnknownError"},u.isJson=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},u.getJson=function(t){var e=null;try{e=JSON.parse(t)}catch(t){return null}return e},u.fatalError=function(e,n,i,o,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===r&&(r=null),null==(e=void 0===e?null:e)&&(e="UnknownError"),"UnknownError"==(e=u.getError(e))&&(l.configureScope(function(t){t.setExtra("unknownError",e),t.setExtra("tool",n),t.setExtra("fileName",o),t.setExtra("workerServer",i),t.setExtra("extra",r)}),l.addBreadcrumb({category:"upload",level:c.Severity.Error,message:"Unknown Error"})),window.ev("sendOnce","event","upload-fatal",n,e),window.ev("eventOnce","upload-fatal",{tool:n,error:e}),a(".tool").hide(),a("#uploading").hide(),a("#process").hide(),a("body").addClass("process-run");var t="",t="FileRemoved"==e||"FileTooLarge"==e?e:"errorRetry",t='\n        <div class="tool-error">\n            <h2 class="title2">'+s.Lang.t("Upload error")+'</h2>\n            <div class="tool-error__content">'+s.Lang.t(t),t=(t=null!=o&&"FileRemoved"!=e?t+"<p>"+o+"</p>":t)+('</div><div class="tool-error__action"><a class="btn btn-sm" href="javascript:location.reload()">'+s.Lang.t("Retry"))+"</a></div>";a("#uploading").html(t).show()},u.error=function(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null)},e.IloveError=u}.call(this,n(1))},function(t,a,s){"use strict";!function(i){var o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},e=(Object.defineProperty(a,"__esModule",{value:!0}),a.Lang=void 0,t(s(114)));function n(){}n.t=function(n,t){var e="iloveLang";return t&&t.source&&(e=t.source),window[e]&&window[e][n]&&(n=window[e][n]),null!=t&&i.each(t,function(t,e){n=n.replace("${"+t+"}",e)}),n},n.w=function(t,e){i("."+(t=void 0===t?"translate":t)).each(function(){var t=i(this).html();i(this).html(n.t(t,e))}),i("#"+t).each(function(){var t=i(this).html();i(this).html(n.t(t,e))})},n.fontsForWritingSystem=function(t){switch(t){case"latin":return["arial","verdana","courier","comic","times-new-roman","impact","arial-unicode-ms"];case"indic":return["lohit-marathi","lohit-devanagari","arial-unicode-ms"];default:return["arial-unicode-ms"]}},n.getFontsInfo=function(){var t=window.fonts;if(t)return t;throw"[Lang Service] You have to load the fonts information from the backend to use this method"},n.loadAllFonts=function(){for(var t in window.fonts)window.fonts.hasOwnProperty(t)&&"arial"!=t&&this.loadFont(t)},n.loadFont=function(t){t in this.loadedFonts||(e.lazyloadCss("/font/"+t+".css"),this.loadedFonts[t]=!0)},n.hasHindiCharacters=function(t){return 0<t.split("").filter(function(t){t=t.charCodeAt();return 2309<=t&&t<=2361}).length},n.hasJapanCharacters=function(t){return/[\u3000-\u303f]|[\u3040-\u309f]|[\u30a0-\u30ff]|[\uff00-\uff9f]|[\u4e00-\u9faf]|[\u3400-\u4dbf]/.test(t)},n.hasChineseCharacters=function(t){return/[\u4e00-\u9fff]|[\u3400-\u4dbf]|[\uf900-\ufaff]|[\u3300-\u33ff]|[\ufe30-\ufe4f]|[\uf900-\ufaff]/.test(t)},n.hasKoreanCharacters=function(t){return/[\uac00-\uafff]|[\ub000-\ubfff]/.test(t)},n.hasArabicCharacters=function(t){return/[\u0600-\u06FF]|[\u0750-\u077F]/.test(t)},n.hasGreekCharacters=function(t){return/[\u0370-\u03FF]|[\u1F00-\u1FFF]/.test(t)},n.hasCyrillicCharacters=function(t){return/[\u0400-\u04FF]|[\u0500-\u052F]/.test(t)},n.hasCommonLatinCharacters=function(t){return!1},n.keyCodeToWritingSystem=function(t){for(var e in this.writingSystemCharacterRanges)for(var n=this.writingSystemCharacterRanges[e],i=0;i<n.length;i++){var o=n[i],r=o[0],o=o[1];if(r<=t&&t<=o)return e}return"unknown"},n.detectWritingSystems=function(t){if(0===t.length)return[];for(var e={},n=0;n<t.length;n++)e[this.keyCodeToWritingSystem(t.charCodeAt(n))]=!0;return Object.keys(e)},n.loadedFonts={},n.writingSystemCharacterRanges={latin:[[0,127],[128,255],[256,383],[384,591],[7680,7935],[9312,9471],[11360,11391],[42784,43007],[64256,64335],[65104,65135]],indic:[[2304,2431],[43232,43263]]},a.Lang=n}.call(this,s(1))},function(t,e,n){"use strict";function i(t){this.tool=null,this.subtool=null,this.config=null,Object.assign(this,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0,i.prototype.getConfig=function(t){return(this.subtool in this.config&&t in this.config[this.subtool]?this.config[this.subtool]:this.tool in this.config&&t in this.config[this.tool]?this.config[this.tool]:this.config.default)[t]},e.Config=i},function(t,e){var n,i,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return(n=setTimeout)(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var s,l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length)&&p()}function p(){if(!c){for(var t=a(d),e=(c=!0,l.length);e;){for(s=l,l=[];++u<e;)s&&s[u].run();u=-1,e=l.length}s=null,c=!1,!function(e){if(i===clearTimeout)return clearTimeout(e);if((i===r||!i)&&clearTimeout)return(i=clearTimeout)(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function f(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new h(t,e)),1!==l.length||c||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=f,t.addListener=f,t.once=f,t.off=f,t.removeListener=f,t.removeAllListeners=f,t.emit=f,t.prependListener=f,t.prependOnceListener=f,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,n,i){"use strict";!function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.SocialAuthPopup=void 0;var r=i(8),t=i(25),a=i(57);function u(){var e=this;this.eventEmitter=new t.ILoveEventEmitter,this.dispatchEvent=function(t){return e.eventEmitter.dispatchEvent(t)}}u.open=function(t,e,n){void 0===e&&(e={});function s(){window.ilove_socialAuthPopupStatus;var t=window.ilove_socialAuthPopupNewUser;window.ilove_socialAuthPopupOpened=!1,window.ilove_socialAuthPopupStatus=void 0,window.ilove_socialAuthPopupNewUser=void 0,l.popupInterval=null,l.onPopupClosed(t,n),l.popup=null}var l=u.instance,e=(l.popup&&(clearInterval(l.popupInterval),l.popupInterval=null,l.popup.close(),l.popup=null),l.mergeWindowFeatureProps(e,!0)),t="/auth/auth?authclient="+String(t),c=(l.popup=window.open(t,"social_auth_popup",e),l.popup);window.ilove_socialAuthPopupStatus=void 0,window.ilove_socialAuthPopupOpened=!0;return new Promise(function(r,a){l.popupInterval=setInterval(function(){var t,e=l.popup&&!l.popup.closed,n=!1;try{var i=l.popup.location.hostname,o=null!==l.popup.location.href.match("social-login-redirect"),n=i===window.location.hostname&&!o}catch(t){}e&&c===l.popup&&!n||(clearInterval(l.popupInterval),n?t=setInterval(function(){l.popup.addEventListener&&(clearInterval(t),l.popup.addEventListener("DOMContentLoaded",function(){var t=null==(t=null==(t=l.popup)?void 0:t.document)?void 0:t.body,t=(t.style.display="none",Array.from(t.querySelectorAll(".flash")).map(function(t){return t.innerText}));l.popup.close(),s(),a({errors:t})}))}):(s(),r({})))})})},u.focusWindow=function(){var t;null!=(t=u.instance.popup)&&t.focus()},u.closeWindow=function(){var t;null!=(t=u.instance.popup)&&t.close()},u.prototype.onPopupClosed=function(n,t){var i=this,o=null!=(t=null==t?void 0:t.getAttribute(u.runningFromAttr))?t:"auth";n&&a.UserAuth.sendGA_registered(o),e.get("/login").done(function(t){i.userAuth=new a.UserAuth({runningFrom:o}),i.userAuth.loginSuccess(t);var t={socialAuth_isNewUser:n},e=new CustomEvent("userAuth",{detail:t});window.dispatchEvent(e),i.dispatchEvent(new r.IloveEvent("auth:success",t))}).fail(function(t,e,n){})},Object.defineProperty(u,"instance",{get:function(){return window.ilove_socialAuthPopupInstance||(window.ilove_socialAuthPopupInstance=new u),window.ilove_socialAuthPopupInstance},enumerable:!1,configurable:!0}),u.prototype.mergeWindowFeatureProps=function(t,e){void 0===e&&(e=!1);var n=Object.assign({resizable:"yes",scrollbars:"no",toolbar:"no",menubar:"no",location:"no",directories:"no",status:"yes",width:450,height:380,left:null,top:null},t);if(n.left=(window.innerWidth-n.width)/2,n.top=(window.innerHeight-n.height)/2,e){var i,o=[];for(i in n)n.hasOwnProperty(i)&&o.push(i+"="+n[i]);return o.join(",")}return n},u.runningFromAttr="data-running-from",u.addEventListener=function(t,e){return u.instance.eventEmitter.addEventListener(t,e)},n.SocialAuthPopup=u}.call(this,i(1))},function(t,s,l){"use strict";!function(t){l.d(s,"a",function(){return a});var e=l(3),n=l(39),i={nowSeconds:function(){return Date.now()/1e3}};var o=(Object(n.b)()?function(){try{return Object(n.a)(t,"perf_hooks").performance}catch(t){}}:function(){var t=Object(e.e)().performance;if(t&&t.now)return{now:function(){return t.now()},timeOrigin:Date.now()-t.now()}})(),r=void 0===o?i:{nowSeconds:function(){return(o.timeOrigin+o.now())/1e3}},a=i.nowSeconds.bind(i);r.nowSeconds.bind(r),function(){var t=Object(e.e)().performance;if(t)t.timeOrigin||t.timing&&t.timing.navigationStart||Date.now()}()}.call(this,l(67)(t))},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var l=n(0),c=n(20),u=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,d="Invalid Dsn",i=(o.prototype.toString=function(t){var e=this.host,n=this.path,i=this.pass,o=this.port,r=this.projectId;return this.protocol+"://"+this.user+((t=void 0===t?!1:t)&&i?":"+i:"")+"@"+e+(o?":"+o:"")+"/"+(n&&n+"/")+r},o.prototype._fromString=function(t){t=u.exec(t);if(!t)throw new c.a(d);var t=Object(l.c)(t.slice(1),6),e=t[0],n=t[1],i=t[2],i=void 0===i?"":i,o=t[3],r=t[4],r=void 0===r?"":r,a="",t=t[5],s=t.split("/");1<s.length&&(a=s.slice(0,-1).join("/"),t=s.pop()),t&&(s=t.match(/^\d+/))&&(t=s[0]),this._fromComponents({host:o,pass:i,path:a,projectId:t,port:r,protocol:e,user:n})},o.prototype._fromComponents=function(t){this.protocol=t.protocol,this.user=t.user,this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},o.prototype._validate=function(){var e=this;if(["protocol","user","host","projectId"].forEach(function(t){if(!e[t])throw new c.a(d+": "+t+" missing")}),!this.projectId.match(/^\d+$/))throw new c.a(d+": Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new c.a(d+": Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new c.a(d+": Invalid port "+this.port)},o);function o(t){"string"==typeof t?this._fromString(t):this._fromComponents(t),this._validate()}},function(t,e,n){!function(n){var t;String.prototype.ucFirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.camelCase=function(){return this.replace(/-([a-z])/gi,function(t,e){return e.toUpperCase()})},n.fn.exchangePositionWith=function(t){var t=n(t),e=n("<span>").hide();this.before(e),t.before(this),e.replaceWith(t)},Array.prototype.move=function(t,e){if(e>=this.length)for(var n=e-this.length;1+n--;)this.push(void 0);return this.splice(e,0,this.splice(t,1)[0]),this},String.prototype.trunc=function(t){return this.substr(0,t-1)+(this.length>t?"&hellip;":"")},String.prototype.trim||(t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(t,"")}),String.prototype.ltrim||(String.prototype.ltrim=function(){return this.replace(/^\s+/g,"")})}.call(this,n(1))},function(t){t.exports=JSON.parse('{"development":{"service":"https://servicedev.ilovepdf.com","service_subdomain":"servicedev","web_prefix":"dev","api_sufix":"dev","stripe_key":"pk_test_3QB411Rie7QKjMhfSA0oiEOx","paypal_env":"sandbox","paypal_sandbox_key":"AZ1YHzR1wxJRRmfpqDHyoTwxfOwxB3UTlewVDk-1o6iZQX9SOCVHUpurugviVCowIPGCQ-SsTfbN8ubr","paypal_production_key":"AZRtaJu6iBHsygDFp5OMdCQabjEStco4pfXUdP1SnMGLnpLQdl84xBjXYIMyqY-6pyVKAj-muy5ZeMpv"},"staging":{"service":"https://servicestaging.ilovepdf.com","service_subdomain":"servicestaging","web_prefix":"staging","api_sufix":"dev","stripe_key":"pk_test_3QB411Rie7QKjMhfSA0oiEOx","stripe_key_api":"pk_test_mDCbsVuNmGS4QIePyxrnLexu","paypal_env":"sandbox","paypal_sandbox_key":"AZ1YHzR1wxJRRmfpqDHyoTwxfOwxB3UTlewVDk-1o6iZQX9SOCVHUpurugviVCowIPGCQ-SsTfbN8ubr","paypal_production_key":"AZRtaJu6iBHsygDFp5OMdCQabjEStco4pfXUdP1SnMGLnpLQdl84xBjXYIMyqY-6pyVKAj-muy5ZeMpv"},"production":{"service":"https://service.ilovepdf.com","service_subdomain":"service","web_prefix":"www","api_sufix":"","stripe_key":"pk_live_515AzAgBqa3pLeb3yKIZljNwrbjfrFpMsuvoEEZncp68ao0mQUKZgEY3Ddfh3JUMH4tIKBuFDsLt9Ot29l3d3KIey00O1gzlSiu","stripe_key_api":"pk_live_epWBEsOopGb3Oo75Y6YzAbTP","paypal_env":"production","paypal_sandbox_key":"AZ1YHzR1wxJRRmfpqDHyoTwxfOwxB3UTlewVDk-1o6iZQX9SOCVHUpurugviVCowIPGCQ-SsTfbN8ubr","paypal_production_key":"AZRtaJu6iBHsygDFp5OMdCQabjEStco4pfXUdP1SnMGLnpLQdl84xBjXYIMyqY-6pyVKAj-muy5ZeMpv"}}')},function(t,m,y){"use strict";!function(h){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},e=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},r=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},f=(Object.defineProperty(m,"__esModule",{value:!0}),m.Process=void 0,y(7)),a=t(y(15)),v=y(17),s=y(81),l=y(99),n=y(48),c=y(62),u=y(41),d=y(16),p=y(150);function g(t){var r=this;this.beforeExecute=function(){return new Promise(function(e,t){if(d.UserModel.isRealPremium())e(!0);else if(!0===r.limitsConfirmShown)e(!0);else{var n=r.limits.checkFileLimits();if(null===n)e(!0);else{try{window.history.pushState({id:"workarea"},"workarea",null)}catch(t){}r.limitsConfirmShown=!0,window.ib&&window.ib.set("p","lp");var i=document.getElementById("process"),o=(i.style.display="none",document.createElement("div"));o.setAttribute("id","confirmOcr"),i.parentNode.insertBefore(o,i),d.UserModel.isPremium();r.contextConfirmFiles&&(r.contextConfirmFiles=null),r.contextConfirmFiles=new p.ConfirmFilesProcessContext({tool:r.limits.getTool(),limits:r.limits,triggerReason:n}),r.contextConfirmFiles.render(o),r.contextConfirmFiles.addEventListener("end",function(t){t.detail?(r.limitsConfirmShown=!1,e(!1),o.remove()):(o.style.display="none",i.style.display="flex",d.UserModel.isRealPremium()?(r.files.resetLimitedFiles(),r.limits.sendEventLimitsChanged()):r.files.removeLimitedFiles(),e(!0))})}}})},this.stopGoDownload=!1,this.stopGoProblem=!1,this.taskId=null,this.tool=null,this.subtool=null,this.realTool=null,this.files=null,this.limits=null,this.ignoredFiles=[],this.filesUploaded={},this.options=null,this.optionFiles=[],this.workerServer=null,this.downloadUrl="",this.apiVersion="v1",this.appVersion=null,this.exceptions=null,this.userId=null,this.site=null,this.token=null,this.encrypted=!1,this.encryptKey=null,this.processStarted=!1,this.uploadInterval=null,this.processCheckCount=3,this.processWait=!1,this.outToPage=!1,this.processForceEnd=!1,this.params=null,this.status="ok",this.toolEvent=null,this.askedPassword=!1,this.afterFilesLoaded=null,this.processCount=0,Object.assign(this,t),null!=this.tool&&(this.toolEvent=this.tool==this.subtool?this.tool:this.tool.replace("image",this.subtool)),this.stopGoDownload="dev"==u.Settings.env()&&this.stopGoDownload,this.stopGoProblem="dev"==u.Settings.env()&&this.stopGoProblem,this.isLogoVisible=!1,this.initApi()}g.prototype.initApi=function(){this.api=new n.Api({tool:this.tool,taskId:this.taskId,workerServer:this.workerServer,downloadUrl:this.downloadUrl,token:this.token,encrypted:this.encrypted,encryptKey:this.encryptKey})},g.prototype.setOptions=function(t){Object.assign(this.options,t)},g.prototype.setUploadedFiles=function(){this.filesUploaded=this.files.getUploadedFiles()},g.prototype.process=function(){return e(this,void 0,void 0,function(){var e,n,i;return r(this,function(t){switch(t.label){case 0:return this.showProcess(),e=this,window.googletag&&window.googletag.pubads&&window.googletag.pubads().setTargeting&&window.googletag.pubads().setTargeting("pos","pro"),1==e.processForceEnd?[2]:[4,this.beforeExecute()];case 1:if(0!=t.sent())if(1==this.files.checkFilesUploaded())this.showProcess(),n={},h.each(this.files.files,function(t,e){e=/(?:\.([^.]+))?$/.exec(e.name)[1];n[e]=null==n[e]?1:n[e]+1}),i=0,h.each(n,function(t,e){var n=Math.max(i,e);i<e&&(i=n,0)}),this.execute().then(function(t){e.processExecute=!1,e.actionProcess(t)},function(t){-100!=t.status&&(e.processExecute=!1,500==t.status?e.actionProcessError(t,"500 in process"):504==t.status?e.actionProcessError(t,"504 in process"):400==t.status&&t.error&&t.error.param&&t.error.param[0]&&t.error.param[0].error&&"WrongPassword"==t.error.param[0].error?e.askForPassword(t.error.param).then(function(){e.showProcess(),e.setUploadedFiles(),e.processCount=0,e.process()},function(t){e.options.ignore_errors=!0,e.showProcess(),e.setUploadedFiles(),e.processCount=0,e.process()}):400==t.status&&t.error&&t.error.param&&t.error.param.task&&t.error.param.task[0]&&1==t.error.param.task[0].includes("complete status")?(a.captureMessage("Process error repaired "+e.subtool+e.processCount),window.clearTimeout(e.checkTimeout),e.checkTimeout=window.setTimeout(function(){e.checkTaskProcess()},1e3)):400==t.status?e.actionProcessError(t,{params:e.options}):(window.clearTimeout(e.checkTimeout),e.checkTimeout=window.setTimeout(function(){e.checkTaskProcess()},1e3)))});else{if(1==this.processStarted)return 0==e.checkFatalError()&&window.setTimeout(function(){e.process()},1e3),[2];this.showUpload(),this.processStarted=!0}return[2]}})})},g.prototype.checkTaskProcess=function(){var e=this;this.processCheckCount--,this.api.getTask().then(function(t){"TaskWaiting"==t.status?(e.setUploadedFiles(),e.process()):"TaskProcessing"==t.status?(window.clearTimeout(e.checkTimeout),e.checkTimeout=window.setTimeout(function(){e.checkTaskProcess()},1e3)):"TaskSuccess"==t.status||"TaskSuccessWithWarnings"==t.status?e.actionProcess(t):e.actionProcessError(t,{info:"in check task",params:e.options})},function(t){e.processCheckCount<0?e.actionProcessError(t,{info:"in check task error",params:e.options}):(window.clearTimeout(e.checkTimeout),e.checkTimeout=window.setTimeout(function(){e.checkTaskProcess()},1e3))})},g.prototype.showLogo=function(){var t,e,n,i;0==this.isLogoVisible&&(t=document.querySelector(".header a.brand").cloneNode(!0),n=(e=document.getElementById("workArea")).parentNode,(i=document.createElement("div")).setAttribute("class","process_brand"),i.appendChild(t),n.insertBefore(i,e),this.isLogoVisible=!0)},g.prototype.actionProcess=function(t){var e={filesize:t.filesize,server:this.workerServer,status_message:t.status_message,status:t.status,timer:t.timer,tool:this.tool,output_filenumber:t.output_filenumber,output_filesize:t.output_filesize,output_extensions:t.output_extensions,toolUrl:function(t,e){var n=t.split("?");if(2<=n.length){for(var i=encodeURIComponent(e)+"=",o=n[1].split(/[&;]/g),r=o.length;0<r--;)-1!==o[r].lastIndexOf(i,0)&&o.splice(r,1);return n[0]+(0<o.length?"?"+o.join("&"):"")}return t}(window.location.href,"from"),download_filename:t.download_filename,process_start:(new Date).toUTCString()};"warnings"in t&&(e.warnings=t.warnings),!0!==this.stopGoDownload&&(window.ib&&window.ib.count&&window.ib.count("t"),"pdfa"==this.tool&&window.ib&&window.ib.set("u","a"),Cookies.set(this.taskId,e,{expires:1/480})),this.goDownload(t)},g.prototype.actionProcessError=function(e,n){void 0===n&&(n=null);var i=this,t={error:e,server:i.api.getSubdomain(i.workerServer),taskId:i.taskId,tool:i.tool,subtool:i.subtool,toolUrl:window.location.href.split("?")[0]};if(!0!==this.stopGoProblem&&Cookies.set("error",t,{expires:1/480}),e&&e.error&&e.error.param&&e.error.param[0]&&e.error.param[0].error&&("NoText"==e.error.param[0].error||"NoImages"==e.error.param[0].error||"noTablesToExtract"==e.error.param[0].error)||(a.configureScope(function(t){t.setExtra("processError",e),t.setExtra("params",i.options),t.setExtra("extra",n)}),a.captureMessage("Process error "+i.subtool)),e.error){if(e.error.param&&e.error.param[0]&&e.error.param[0].error)return void i.goProblem(e.error.param[0].error);if(e.error.type)return void i.goProblem(e.error.type)}i.goProblem("ServerError")},g.prototype.execute=function(){var e=this,n=this;if(!0===this.processExecute)return new Promise(function(t,e){e({status:-100})});this.processExecute=!0,n.showProcess(),n.setUploadedFiles(),null!=this.afterFilesLoaded&&(this.options=this.afterFilesLoaded(this.files,this.options)),n.params=c.FormDataHelper.jsonToFormData(this.options),n.params.append("task",this.taskId),n.params.append("tool",this.tool),n.options.packaged_filename||(o=this.tool.replace("image","")+"ed",n.params.append("packaged_filename",this.site+"-"+f.Lang.t(o="splited"==(o="resizeed"==(o="croped"==o?"crop":o)?"resized":o)?"split":o)));var t,i,o=d.UserModel.get(),r=(o&&(n.params.append("custom_int",o.id),n.params.append("custom_string",o.loginkey)),0);for(t in n.filesUploaded)n.isIgnored(t)||(i=this.filesUploaded[t],n.params.append("files["+r+"][server_filename]",i.server_filename),n.params.append("files["+r+"][filename]",i.filename),i.rotate&&n.params.append("files["+r+"][rotate]",i.rotate),i.password&&n.params.append("files["+r+"][password]",i.password),i.pages&&n.params.append("files["+r+"][pages]",i.pages),i.elementArray&&c.FormDataHelper.buildFormData(n.params,i.elementArray,"files["+r+"][elementArray]"),i.processed&&n.params.append("files["+r+"][processed]",i.processed),r++);return this.processCount++,0==n.filesUploaded.length?(a.configureScope(function(t){t.setExtra("files",n.filesUploaded),t.setExtra("tool",n.subtool),t.setExtra("count",e.processCount)}),a.captureMessage("Process without files"),new Promise(function(t,e){e({status:400,error:{type:"DamagedFile"}})})):this.api.process(n.params)},g.prototype.showProcess=function(){"error"!=this.status&&(h("body").addClass("process-run"),this.showLogo(),h(".uploading").hide(),h(".process").css("display","flex").show(),setTimeout(function(){h("#waitnotify").html(f.Lang.t("waitnotify")),h("#waitnotify").show()},1e4))},g.prototype.showUpload=function(){if(1!=this.processStarted){if("error"==this.status)return this.stop(),!0;var e=this,p=(h("body").addClass("process-run"),h(".process").hide(),h(".uploading").css("display","flex").hide().fadeIn(),f.Lang.t("Uploading..."));!0!==this.uploadShowStarted&&(h(".uploading__status__title.drive").hide(),h(".uploading__status__title.dropbox").hide(),h(".uploading__status__title.user").hide(),h(".uploading__bar").hide(),h(".uploading__status__percent").hide(),this.uploadShowStarted=!0),e.uploadInterval=setInterval(function(){var t,n=0,i=0,o=0,r=0,a=0,s=0,l=0,c=0,u=0,d=!0;"error"==e.status&&e.stop(),e.checkFatalError(),h.each(e.files.files,function(t,e){!(e.percent<100)&&"server_filename"in e||!0!==e.error&&(d=!1,e.service,e.service),100==e.percent&&i++,s++,"drive"==e.service?(c++,100==e.percent&&r++):"dropbox"==e.service?(u++,100==e.percent&&a++):(l++,100==e.percent?o++:0<e.percent&&e.percent<100&&"html5"==e.runtime?(p=e.name+" ("+v.Tools.bytesToSize(e.size)+")",h("#upload_"+e.id).addClass("uploading__files__item--active")):h("#upload_"+e.id).removeClass("uploading__files__item--active"),e.loaded,e.size,n+=e.percent)}),h(".uploading__status__percent__value").html(parseInt((n/l).toString())+"%"),h(".uploading__bar__completed").css("width",n/l+"%"),h(".uploading__status__file").html(p),h(".uploading__status__total").html(l.toString()),0<l?(h(".uploading__status__title.user").show(),h(".uploading__bar").show(),h(".uploading__bar--small").hide(),h(".uploading__status__percent").show()):(h(".uploading__status__file").hide(),h(".uploading__status__info").hide()),0<c&&h(".uploading__status__title.drive").show(),0<u&&h(".uploading__status__title.dropbox").show(),o==l&&(h(".uploading__status__file").html(f.Lang.t("uploadComplete")),h(".uploading__bar").hide(),h(".uploading__status__percent").hide()),r==c&&0<c&&h(".uploading__status__title.drive").addClass("done").html("<strong>Google Drive:</strong> "+f.Lang.t("uploadComplete")),a==u&&0<c&&h(".uploading__status__title.dropbox").addClass("done").html("<strong>Dropbox:</strong> "+f.Lang.t("uploadComplete")),h(".uploading__status__title").removeClass("last"),h(".uploading__status__title:visible:last").addClass("last"),i==s&&d&&"error"!=e.status?(clearInterval(e.uploadInterval),window.setTimeout(function(){e.process()},200)):(t=Math.min(o+1,l),h(".uploading__status__current").html(t.toString()))},100)}},g.prototype.goDownload=function(t){1!=this.stopGoDownload&&(window.location.href=this.downloadUrl+"/"+this.taskId+"/"+this.getWorkerNumber())},g.prototype.getWorkerNumber=function(){return this.workerServer.split(".")[0].replace(/^\D+/g,"")},g.prototype.goProblem=function(t){void 0===t&&(t=null);var e="/problem/"+this.tool+"/"+this.taskId+"/"+this.getWorkerNumber();"en-US"!=window.lang&&(e="/"+window.lang+e),null!==t&&("string"==typeof t?e=e+"/"+t:t.error&&"string"==typeof t.error?e=e+"/"+t.error:e+="/ServerError"),1!=this.stopGoProblem&&(window.location.href=e)},g.prototype.askForPassword=function(t){var r=this,n=[];return h.each(t,function(t,e){"WrongPassword"==e.error&&n.push(r.files.getFileByServerFilename(e.server_filename))}),new Promise(function(t,e){h("#process").hide(),0==h("#passwordAsk").length&&(h(s.OptionsTemplate.askPassword()).insertAfter(h("#process")),1<r.files.files.length?h("#ignorePwdFiles").show():h("#ignorePwdFiles").hide(),"unlock"==r.tool&&h("#useUnlock").hide(),h(".passwords").append(h(s.OptionsTemplate.askPasswordField({id:"all",server_filename:""}))),h("#pwd-all").hide(),h("#allPwd").on("change",function(){1==h("#allPwd").is(":checked")?(h(".password").hide(),h("#pwd-all").show()):(h(".password").show(),h("#pwd-all").hide())})),h("#pwdSend").unbind("click").on("click",function(){var i=null,o=(1==h("#allPwd").is(":checked")&&(i=h("#pwd-all input").val()),!0);h.each(r.files.files,function(t,e){var n=null==i?h("#pwd-"+e.id+" input").val():i;if(""==n)return o=!1,h("#pwd-"+e.id+" input").focus(),window.Toastr.error(f.Lang.t("passwordRequiredFor",{filename:e.name}),f.Lang.t("paswordRequired"),{timeOut:5e3,positionClass:"toast-top-left"}),!1;r.files.updateFile(e.id,{password:n})}),!0===o&&(h("#passwordAsk").hide(),t({}))}),h("#pwdCancel").unbind("click").on("click",function(){h.each(n,function(t,e){r.files.removeFile(e.id),h("#pwd-"+e.id).remove()}),h("#passwordAsk").hide(),e()}),h("#pwdIgnore").unbind("click").on("click",function(){h("#passwordAsk").hide(),e()}),h("#passwordAsk .passwordInput").hide(),h(".password").hide(),h.each(n,function(t,e){0==h("#pwd-"+e.id).length&&(h(".passwords").append(h(s.OptionsTemplate.askPasswordField({id:e.id,server_filename:e.name}))),h("#pwd-"+e.id+" .showPassword").on("click",function(t){t.preventDefault(),h(".password input").attr("type","text"==h(".password input").attr("type")?"password":"text")})),h("#pwd-"+e.id).show()}),n.length<2&&h("#allPwd").parent().parent().hide(),h("#passwordAsk").show(),setTimeout(function(){h("#passwordAsk input:visible:first").focus()},1e3),0==r.askedPassword&&(r.askedPassword=!0,window.ev("send","event","password","ask",r.subtool),window.ev("event","password",{tool:r.subtool}))})},g.prototype.fatalError=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),"ConnectionError"!=(t=void 0===t?null:t)&&l.IloveError.fatalError(t,this.tool,this.workerServer,e,n)},g.prototype.removeFile=function(t){var e,n,t=this.files.getFile(t);return null==t?new Promise(function(t,e){t({})}):(e=t.server_filename,n=t.status,this.files.removeFile(t.id),5!=n?new Promise(function(t,e){t({})}):this.api.removeFile(e))},g.prototype.addIgnoredFile=function(t){this.ignoredFiles.push(t)},g.prototype.getIgnoredFiles=function(){return this.ignoredFiles},g.prototype.isIgnored=function(t){return-1!=this.ignoredFiles.indexOf(t)},g.prototype.deleteIgnored=function(t){t=this.ignoredFiles.indexOf(t);-1!==t&&this.ignoredFiles.splice(t,1)},g.prototype.stop=function(){clearInterval(this.uploadInterval)},g.prototype.checkFatalError=function(){if("error"==this.status)return this.stop(),!0;var n=this;if(0==this.files.files.length)return this.fatalError({error:"NoFiles"}),this.status="error",this.stop(),!0;try{h.each(n.files.files,function(t,e){if("errorData"in e)throw n.fatalError(e.errorData,e.name,"error data on task"),e.errorData})}catch(t){return n.status="error",n.stop(),!0}if(1==n.files.files.length&&!0===n.files.files[0].error)return n.status="error",n.fatalError(n.files.files[0].errorData,n.files.files[0].name,"error field on task"),n.stop(),!0;try{h.each(n.files.files,function(t,e){if("FileRemoved"==e.errorData)throw n.fatalError(e.errorData,e.name,"file removed on task"),e.errorData})}catch(t){return n.stop(),n.status="error",!0}if("merge"==this.tool)try{h.each(n.files.files,function(t,e){if("errorData"in e)throw n.fatalError(e.errorData,e.name,"error data on task, merge tool"),e.errorData})}catch(t){return n.status="error",n.stop(),!0}return!1},m.Process=g}.call(this,y(1))},function(t,e,n){"use strict";function i(){this._cache={}}Object.defineProperty(e,"__esModule",{value:!0}),e.Cache=void 0,i.prototype.existsEntry=function(t){return"template_"+t in this._cache},i.prototype.setEntry=function(t,e){return this._cache[t]=e},i.prototype.getEntry=function(t){return this._cache[t]},i.prototype.clearEntry=function(t){delete this._cache[t]},e.Cache=i},function(t,f,v){"use strict";!function(c){var u,i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},e=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},d=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=(Object.defineProperty(f,"__esModule",{value:!0}),f.StripeService=void 0,t(v(30))),t=v(41),a=v(111),s=v(25),l=v(8),p=n(v(112)),n=((n=u=u||{}).CONFIRM_3DSECURE_PAYMENT="/stripe/confirm-payment",n.EXECUTE_PAYMENT="/stripe/execute",n.BUY_PACKAGE="/stripe/buy",n.UPDATE_CARD="/stripe/update-card",h.prototype.updateCard=function(s){return e(this,void 0,void 0,function(){var e,n,i,o,r,a;return d(this,function(t){switch(t.label){case 0:return[4,this.getPaymentCardToken(s)];case 1:return e=t.sent(),e=e.id,r=c.post(u.UPDATE_CARD,{token:e}).promise(),o=(i=JSON).parse,[4,r.promise()];case 2:return(n=o.apply(i,[t.sent()]),r={type:"update",notifyParams:{token:e}},this.needs3DSecure(n))?[4,this._resolve3DSecure(n,r)]:[3,4];case 3:return a=t.sent(),[3,5];case 4:a=n,t.label=5;case 5:return[2,a]}})})},h.prototype.setPaymentVia=function(t){this._paymentVia=t},h.prototype.paySubscription=function(l){return e(this,void 0,void 0,function(){var e,n,i,o,r,a,s;return d(this,function(t){switch(t.label){case 0:return e={interval:l.subscriptionInterval,users:l.numUsers,signatures:l.numDigitalSignatures,token:void 0,dtr:l.disableTrial,verifyCode:"",code:l.couponCode},this.captcha||(this.captcha=new p.default(document.body)),[4,this.captcha.execute()];case 1:return n=t.sent(),e.verifyCode=n,[4,this._setupPaymentVia(e,l.paymentVia)];case 2:return t.sent(),n=c.post(u.EXECUTE_PAYMENT,e),r=(o=JSON).parse,[4,n.promise()];case 3:return(i=r.apply(o,[t.sent()]),a={type:"subscription",notifyParams:e},this.needs3DSecure(i))?[4,this._resolve3DSecure(i,a)]:[3,5];case 4:return s=t.sent(),[3,6];case 5:s=i,t.label=6;case 6:return[2,s]}})})},h.prototype.payPackage=function(l){return e(this,void 0,void 0,function(){var e,n,i,o,r,a,s;return d(this,function(t){switch(t.label){case 0:return e={package:l.packageName,quantity:l.quantity,token:void 0,dtr:l.disableTrial,verifyCode:""},this.captcha||(this.captcha=new p.default(document.body)),[4,this.captcha.execute()];case 1:return n=t.sent(),e.verifyCode=n,[4,this._setupPaymentVia(e,l.paymentVia)];case 2:return t.sent(),n=c.post(u.BUY_PACKAGE,e),r=(o=JSON).parse,[4,n.promise()];case 3:return(i=r.apply(o,[t.sent()]),a={type:"package",notifyParams:e},this.needs3DSecure(i))?[4,this._resolve3DSecure(i,a)]:[3,5];case 4:return s=t.sent(),[3,6];case 5:s=i,t.label=6;case 6:return[2,s]}})})},h.prototype._setupPaymentVia=function(i,o){return e(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:switch(n=o.type,o.type){case"stripeElement":return[3,1];case"stripeElementUpdateCard":return[3,3];case"paymentMethod":return[3,5]}return[3,6];case 1:return[4,this.getPaymentCardToken(o.cardElement)];case 2:return e=t.sent(),i.token=e.id,[3,7];case 3:return[4,this.getPaymentCardToken(o.cardElement)];case 4:return e=t.sent(),i.token=e.id,i.updatecard=!0,[3,7];case 5:return o.info,[3,7];case 6:throw"Unknown paymentVia type '"+n+"'";case 7:return[2]}})})},h.prototype._resolve3DSecure=function(o,r){return e(this,void 0,void 0,function(){var e,n,i;return d(this,function(t){switch(t.label){case 0:return this.needs3DSecure(o)?(e=this.extractIntentInfo(o),[4,this.show3DSecureScreenToUser(e)]):[2,o];case 1:switch(n=t.sent(),e.intentType){case"setup_intent":return[3,2];case"payment_intent":return[3,3]}return[3,5];case 2:return[2,o];case 3:return i=n.paymentIntent.id,[4,this.confirmPayment3DSecure(i,r)];case 4:return[2,o=t.sent()];case 5:throw"Unknown intent type "+e.intentType}})})},h.prototype.needs3DSecure=function(t){return!(!t||!t.user)&&("payment_intent"in t.user||"setup_intent"in t.user)},h.prototype.extractIntentInfo=function(t){var e;if(t.user.payment_intent)e="payment_intent";else{if(!t.user.setup_intent)throw"Unknown IntentType";e="setup_intent"}return{intentType:e,intentSecret:"payment_intent"===e?t.user.payment_intent:t.user.setup_intent}},h.prototype.confirmPayment3DSecure=function(o,r){return e(this,void 0,void 0,function(){var e,n,i;return d(this,function(t){switch(t.label){case 0:return e=Object.assign({},{payment_intent_id:o},r,r.notifyParams),e=c.post(u.CONFIRM_3DSECURE_PAYMENT,e),i=(n=JSON).parse,[4,e.promise()];case 1:return[2,i.apply(n,[t.sent()])]}})})},h.prototype.show3DSecureScreenToUser=function(i){return e(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return[4,this.stripe];case 1:switch(e=t.sent(),i.intentType){case"setup_intent":return[3,2];case"payment_intent":return[3,4]}return[3,6];case 2:return[4,e.confirmCardSetup(i.intentSecret)];case 3:return n=t.sent(),[3,7];case 4:return[4,e.confirmCardPayment(i.intentSecret)];case 5:return n=t.sent(),[3,7];case 6:throw"Unknown secretType "+i.intentType;case 7:if("error"in n&&n.error)throw n;return[2,n]}})})},h.prototype.getPaymentCardToken=function(i){return e(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return[4,this.stripe];case 1:e=t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,e.createToken(i)];case 3:return n=t.sent(),[3,5];case 4:throw t.sent();case 5:if(n.error)throw this.view.notifyCardErrorMsg(n.error.message),n;return[2,n.token]}})})},Object.defineProperty(h.prototype,"stripe",{get:function(){var n=this;return this._stripe?Promise.resolve(this._stripe):new Promise(function(e,t){n.createStripeInstance().then(function(t){n._stripe=t,e(n._stripe)})})},enumerable:!1,configurable:!0}),h.prototype.loadStripeLibrary=function(){return e(this,void 0,void 0,function(){var i=this;return d(this,function(t){switch(t.label){case 0:return this.isStripeLibLoaded?(this.captcha||(this.captcha=new p.default(document.body)),[2,window.Stripe]):[4,new Promise(function(t,e){r.lazyload(h.stripeLibSrc);var n=window.setInterval(function(){i.isStripeLibLoaded&&(clearInterval(n),i.captcha=new p.default(document.body),t(window.Stripe))},100)})];case 1:return[2,t.sent()]}})})},h.prototype.createStripeInstance=function(){return e(this,void 0,void 0,function(){var e,i,o=this;return d(this,function(t){switch(t.label){case 0:return[4,this.loadStripeLibrary()];case 1:return e=t.sent(),i=e(h.stripeKey,{locale:window.lang}),this.isStripeInstanceReady(i)?[2,i]:[4,new Promise(function(t,e){var n=window.setInterval(function(){o.isStripeInstanceReady(i)&&(window.clearInterval(n),t(i))},100)})];case 2:return[2,t.sent()]}})})},h.prototype.isStripeInstanceReady=function(t){return"object"==typeof t},Object.defineProperty(h.prototype,"isStripeLibLoaded",{get:function(){return null!==window.Stripe&&"function"==typeof window.Stripe},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"paymentVia",{get:function(){return this._paymentVia},enumerable:!1,configurable:!0}),h.prototype.dispatchEvent=function(t){return this.eventEmitter.dispatchEvent(t)},h.prototype.addEventListener=function(t,e){return this.eventEmitter.addEventListener(t,e)},h.stripeKey=t.Settings.get("stripe_key"),h.stripeLibSrc="https://js.stripe.com/v3/",h);function h(t){var e=this;void 0===t&&(t={}),this.eventEmitter=new s.ILoveEventEmitter,this.view=new a.StripeView(this,{onActionButtonClicked:function(){e.dispatchEvent(new l.IloveEvent("View:ActionButtonClicked"))}})}f.StripeService=n}.call(this,v(1))},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},c=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},u=(Object.defineProperty(e,"__esModule",{value:!0}),e.StripeView=void 0,n(60)),l=n(7);function d(t,e){var o=this;this._onKeepPaymentMethodBtnClicked=function(t,e){if("stripe"!==e.provider)throw"Payment method is not from provider Stripe";var n=o.currentPaymentMethodView,i=o.newPaymentMethodView;o.stripeService.setPaymentVia({type:"paymentMethod",info:e}),o.payButton.disabled=!1,n.style.display="",i.style.display="none"},this._onChangePaymentMethodBtnClicked=function(t,e){var n=o.currentPaymentMethodView,i=o.newPaymentMethodView;o.stripeService.setPaymentVia({type:"stripeElementUpdateCard",cardElement:e}),o.payButton.disabled=!1,n.style.display="none",i.style.display=""},this._onPayButtonClicked=function(){o.callback_onActionButtonClicked()},this._onStripeNewCardChange=function(t){t.error?o.notifyCardErrorMsg(t.error.message):o.clearCardErrorMsg(),o.payButton.disabled=!1},this.stripeService=t,this.callback_onActionButtonClicked=e.onActionButtonClicked}d.prototype.getTranslationText=function(t){var e=this.view.querySelector(".stripe__text-translations");if(!e)throw"Stripe text translations not found";if(t in(e=JSON.parse(e.textContent)))return e[t];throw"Stripe translation for key "+t+" not found"},d.prototype.disableActionButton=function(){this.view&&(this.payButton.disabled=!1)},d.prototype.enableActionButton=function(){this.view&&(this.payButton.disabled=!1)},d.prototype.mount=function(a,s){var l;return o(this,void 0,void 0,function(){var e,n,i,o,r;return c(this,function(t){switch(t.label){case 0:return this.view?[2,this.view]:[4,u.AjaxTemplate.load(d.TEMPLATE_NAME)];case 1:if(e=t.sent(),(r=document.createElement("div")).innerHTML=e,this.view=r,a.appendChild(this.view),e=this.view.querySelector(d.cardMountPointSelector))return n=this.currentPaymentMethodView,i=this.newPaymentMethodView,[4,(o=this).mountCardOn(e)];throw"Mount point for Stripe card not found";case 2:return o.card=t.sent(),(r="currentPaymentMethod"in s&&"stripe"===(null==(l=null==s?void 0:s.currentPaymentMethod)?void 0:l.provider)&&s.currentPaymentMethod.last_card)?i.style.display="none":n.style.display="none",r?(this.setupViewCurrentPaymentMethod(s.currentPaymentMethod,this.card),this.payButton.disabled=!1,this.stripeService.setPaymentVia({type:"paymentMethod",info:s.currentPaymentMethod})):this.stripeService.setPaymentVia({type:"stripeElement",cardElement:this.card}),this.payButton.innerHTML=s.paymentButtonText,this.payButton.addEventListener("click",this._onPayButtonClicked),[2,this.view]}})})},d.prototype.setupViewCurrentPaymentMethod=function(e,n){var i=this;if("stripe"!==e.provider)throw"Payment method is not from provider Stripe";var t=this.currentPaymentMethodView,o=this.newPaymentMethodView,r=t.querySelector(".payment__card-details__text");if(!r)throw"Stripe - Card Details text not found";var a=r.querySelector(".payment__card-details__text__brand"),r=r.querySelector(".payment__card-details__text__expires"),s=a.innerHTML.replace("${cardBrand}","<span class='payment__card-brand'>${cardBrand}</span>"),a=(a.innerHTML=l.Lang.tr(s,{cardBrand:e.brand_card||"",cardLast4Digits:e.last_card}),r.innerHTML=l.Lang.tr(r.innerHTML,{expMonthCard:e.exp_month_card,expYearCard:e.exp_year_card}),t.querySelector(".payment__card-details__change-btn"));if(!a)throw"Change button for Stripe - CurrentPaymentMethod view not found";a.addEventListener("click",function(t){i._onChangePaymentMethodBtnClicked(t,n)});s=o.querySelector(".payment__card-details__keep-card-btn");if(s.style.display="",!s)throw"'Keep payment method' button for Stripe not found";s.innerHTML=l.Lang.tr(s.innerHTML,{cardBrand:e.brand_card||"",cardLast4Digits:e.last_card}),s.addEventListener("click",function(t){i._onKeepPaymentMethodBtnClicked(t,e)})},Object.defineProperty(d.prototype,"currentPaymentMethodView",{get:function(){var t=this.view.querySelector(".payment__stripe-view__current-payment-method-view");if(t)return t;throw"Stripe - Current Payment Method view not found"},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"newPaymentMethodView",{get:function(){var t=this.view.querySelector(".payment__stripe-view__new-payment-method-view");if(t)return t;throw"Stripe - New Payment Method view not found"},enumerable:!1,configurable:!0}),d.prototype.mountCardOn=function(i){return o(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return[4,this.stripeService.stripe];case 1:return n=t.sent().elements(),e={base:{color:"#32325d",lineHeight:"24px",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},(n=n.create("card",{style:e,hidePostalCode:!0})).mount(i),n.addEventListener("change",this._onStripeNewCardChange),[2,n]}})})},d.prototype.notifyCardErrorMsg=function(e){this.cardErrorMsgDom.forEach(function(t){t.classList.remove("payment__card-error--hidden"),t.textContent=e})},d.prototype.clearCardErrorMsg=function(){this.cardErrorMsgDom.forEach(function(t){t.classList.add("payment__card-error--hidden"),t.innerHTML="&nbsp;"})},Object.defineProperty(d.prototype,"payButton",{get:function(){var t=this.view.querySelector(".payment__pay-btn");if(t)return t;throw"Submit button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"cardErrorMsgDom",{get:function(){var t=Array.from(this.view.querySelectorAll(".payment__card-error"));if(0===t.length)throw"Card Error Msg DOM not found";return t},enumerable:!1,configurable:!0}),d.TEMPLATE_NAME="stripe",d.cardMountPointSelector=".payment__stripe-view__card-binding",e.StripeView=d},function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},a=(Object.defineProperty(e,"__esModule",{value:!0}),r(n(30))),s=n(16),l=n(17),c="6LfLe9sbAAAAAO7MEsSovv3Na0tNlRReITiueEu8";function u(t,e){var n=this;void 0===e&&(e=null),this.onCaptchaValue=function(t){n.value=t,n.onCaptchaExecuted&&n.onCaptchaExecuted(n.value)},0!=this.captchaNeeded()&&(e&&(this.onCaptchaExecuted=e),this.elementRoot=t,this.appendToElement(),this.loadCaptchaJs())}u.prototype.loadCaptchaJs=function(){var n=this,i=this;return new Promise(function(t,e){if(window.grecaptcha)return n.grecaptcha=window.grecaptcha,t();a.lazyload("https://www.google.com/recaptcha/api.js?render="+c),n.captchaLoadInterval=window.setInterval(function(){null!==window.grecaptcha&&"object"==typeof window.grecaptcha&&(window.grecaptcha.ready(function(){return n.grecaptcha=window.grecaptcha,t()}),clearInterval(i.captchaLoadInterval))},100)})},u.prototype.appendToElement=function(){var t;document.getElementById("recaptcha")||((t=document.createElement("div")).setAttribute("id","recaptcha"),t.setAttribute("class","g-recaptcha"),t.setAttribute("data-sitekey",c),t.setAttribute("data-callback","onCaptchaValue"),t.setAttribute("data-size","invisible"),this.elementRoot.appendChild(t),window.onCaptchaValue=this.onCaptchaValue)},u.prototype._execute=function(t){return void 0===t&&(t=null),self.grecaptcha.execute()},u.prototype.execute=function(t){var n=this;return void 0===t&&(t=null),0==this.captchaNeeded()?(this.value=l.Tools.randomId(),Promise.resolve(this.value)):(t&&(this.onCaptchaExecuted=t),new Promise(function(e,t){n.captchaInterval=window.setInterval(function(){n.grecaptcha&&(clearInterval(n.captchaInterval),n._execute().then(function(t){e(t)}))},100)}))},u.prototype.captchaNeeded=function(){var t=s.UserModel.get();return t&&1==t.sus_rbt},e.default=u},function(t,e,n){"use strict";var s,l=this&&this.__assign||function(){return(l=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},a=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},c=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},u=(Object.defineProperty(e,"__esModule",{value:!0}),e.PaypalService=void 0,r(n(30))),d=r(n(78)),p=n(41),h=n(25),f=n(8),v=n(60),g=n(85),m=r(n(15)),n=((r=s=s||{}).CREATE_PAYMENT_SUBSC="/paypal/create",r.EXECUTE_PAYMENT_SUBSC="/paypal/execute",r.CREATE_PAYMENT_PKG="/paypal/createbuy",r.EXECUTE_PAYMENT_PKG="/paypal/executebuy",y.prototype.notifyErrorMsg=function(t){this.errorMsgDom.classList.remove("payment__method-error--hidden"),this.errorMsgDom.innerHTML=t},y.prototype.clearErrorMsg=function(){this.errorMsgDom.classList.add("payment__method-error--hidden"),this.errorMsgDom.innerHTML="&nbsp;"},y.prototype.getTranslationText=function(t){var e=this.view.querySelector(".paypal__text-translations");if(!e)throw"Paypal text translations not found";if(t in(e=JSON.parse(e.textContent)))return e[t];throw"Paypal translation for key "+t+" not found"},Object.defineProperty(y.prototype,"errorMsgDom",{get:function(){var t=this.view.querySelector(".payment__method-error");if(t)return t;throw"Missing Paypal Error message DOM not found"},enumerable:!1,configurable:!0}),y.prototype.mountView=function(o,r){return a(this,void 0,void 0,function(){var e,n,i;return c(this,function(t){switch(t.label){case 0:return this.view?[2,this.view]:[4,v.AjaxTemplate.load(y.TEMPLATE_NAME)];case 1:if(e=t.sent(),(n=document.createElement("div")).innerHTML=e,this.view=n,o.appendChild(this.view),!(i=this.view.querySelector(y.buttonMountPointSelector)))throw"Mount point for Paypal button not found";switch(r.action.actionName){case"PaySubscription":this.mountPaySubscription(i,r.action.actionParams);break;case"PayPackage":this.mountPayPackage(i,r.action.actionParams);break;case"UpdateSubscription":this.mountUpdateSubscription(i,r.action.actionParams);break;default:throw"Unknown Paypal action for Paypal mountPoint func"}return[2,this.view]}})})},y.prototype.mountPayPackage=function(i,o){return a(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return this.packageParams=o,[4,this.loadPaypalLibrary()];case 1:return t.sent(),e=this._onPaymentInit_package,n=this._onAuthorize_package,this.mountPaypalButton(i,{payment:e,onAuthorize:n}),[2]}})})},y.prototype.mountPaySubscription=function(i,o){return a(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return this.subscriptionParams=o,[4,this.loadPaypalLibrary()];case 1:return t.sent(),e=this._onPaymentInit_subsc,n=this._onAuthorize_subsc,this.mountPaypalButton(i,{payment:e,onAuthorize:n}),[2]}})})},y.prototype.mountUpdateSubscription=function(e,n){return a(this,void 0,void 0,function(){return c(this,function(t){return[2,this.mountPaySubscription(e,n)]})})},y.prototype.mountPaypalButton=function(n,i){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.loadPaypalLibrary()];case 1:return e=t.sent(),n.getAttribute("id")||n.setAttribute("id",g.Tools.randomId()),e.Button.render({env:p.Settings.get("paypal_env"),locale:this.assignedLocale,commit:!0,style:{label:"paypal",size:"medium",shape:"rect",color:"blue",tagline:!1},client:{sandbox:p.Settings.get("paypal_sandbox_key"),production:p.Settings.get("paypal_production_key")},payment:i.payment,onAuthorize:i.onAuthorize,onCancel:this._onCancel},"#"+n.getAttribute("id")),[2]}})})},y.prototype.removeUndefinedValuesFromObject=function(t){var e,n={};for(e in t)void 0===t[e]||(n[e]=t[e]);return n},y.prototype.loadPaypalLibrary=function(){return a(this,void 0,void 0,function(){var i=this;return c(this,function(t){switch(t.label){case 0:return this.isPaypalLibLoaded?[2,window.paypal]:[4,new Promise(function(t,e){u.lazyload(y.paypalLibSrc);var n=window.setInterval(function(){i.isPaypalLibLoaded&&(clearInterval(n),t(window.paypal))},100)})];case 1:return[2,t.sent()]}})})},Object.defineProperty(y.prototype,"paypal",{get:function(){var n=this;return new Promise(function(e,t){n.loadPaypalLibrary().then(function(t){return e(t)})})},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"isPaypalLibLoaded",{get:function(){return null!==window.paypal&&"object"==typeof window.paypal},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"assignedLocale",{get:function(){var t="en_US";switch(window.lang){case"en-US":t="en_US";break;case"es":t="es_ES";break;case"it":t="it_IT";break;case"fr":t="fr_FR";break;case"de":t="de_DE";break;case"pt":t="pt_BR";break;case"zh-cn":t="zh_CN";break;case"id":t="id_ID";break;case"ja":t="ja_JP";break;case"nl":t="nl_NL";break;case"pl":t="pl_PL";break;case"ru":t="ru_RU";break;case"sv":t="sv_SE";break;case"th":t="th_TH";break;case"zh-tw":t="zh_TW"}return t},enumerable:!1,configurable:!0}),y.prototype.dispatchEvent=function(t){return this.eventEmitter.dispatchEvent(t)},y.prototype.addEventListener=function(t,e){return this.eventEmitter.addEventListener(t,e)},y.paypalLibSrc="https://www.paypalobjects.com/api/checkout.js",y.TEMPLATE_NAME="paypal",y.buttonMountPointSelector=".payment__paypal-view__button-binding",y);function y(t){var a=this;if(void 0===t&&(t={}),this._onPaymentInit_package=function(){a._onPaypalButtonClicked();var n=a,i="payPackage",o=a.packageParams;return window.paypal.request.post(s.CREATE_PAYMENT_PKG,{package:o.packageName(),quantity:o.quantity(),dtr:o.disableTrial()}).then(function(t){return n.dispatchEvent(new f.IloveEvent("onPaymentInited",{action:i,params:o,response:t})),t},function(e){m.configureScope(function(t){t.setExtra("error",JSON.parse(e))}),m.captureMessage("Paypal: error on create payment package"),n.dispatchEvent(new f.IloveEvent("onPaymentInited_error",{action:i,params:o,error:JSON.parse(e)}))})},this._onAuthorize_package=function(t){var n=a,i="payPackage",o=a.packageParams;return window.paypal.request.post(s.EXECUTE_PAYMENT_PKG,{token:t.paymentToken,payment_id:t.paymentID,payer_id:t.payerID,package:o.packageName(),quantity:o.quantity(),dtr:o.disableTrial()}).then(function(t){n.dispatchEvent(new f.IloveEvent("onPaymentAuthorized",{action:i,params:o,response:t}))},function(e){m.configureScope(function(t){t.setExtra("error",JSON.parse(e))}),m.captureMessage("Paypal: error on execute payment package"),n.dispatchEvent(new f.IloveEvent("onPaymentAuthorized_error",{action:i,params:o,error:JSON.parse(e)}))})},this._onPaymentInit_subsc=function(){a._onPaypalButtonClicked();var n=a,i="paySubscription",t=window.paypal,o=a.subscriptionParams,e=a.removeUndefinedValuesFromObject({interval:o.subscriptionInterval(),users:o.numUsers(),signatures:o.numDigitalSignatures(),dtr:o.disableTrial()});return t.request.post(s.CREATE_PAYMENT_SUBSC,e).then(function(t){return n.dispatchEvent(new f.IloveEvent("onPaymentInited",{action:i,params:o,response:t})),t},function(e){m.configureScope(function(t){t.setExtra("error",JSON.parse(e))}),m.captureMessage("Paypal: error on create payment subscription"),n.dispatchEvent(new f.IloveEvent("onPaymentInited_error",{action:i,params:o,error:JSON.parse(e)}))})},this._onPaypalButtonClicked=function(){a.clearErrorMsg()},this._onAuthorize_subsc=function(t){var n=a,i="paySubscription",e=window.paypal,o=a.subscriptionParams,r=a.removeUndefinedValuesFromObject({interval:o.subscriptionInterval(),users:o.numUsers(),signatures:o.numDigitalSignatures(),dtr:o.disableTrial()});return e.request.post(s.EXECUTE_PAYMENT_SUBSC,l({token:t.paymentToken,payment_id:t.paymentID,payer_id:t.payerID},r)).then(function(t){n.dispatchEvent(new f.IloveEvent("onPaymentAuthorized",{action:i,params:o,response:t}))},function(e){m.configureScope(function(t){t.setExtra("error",JSON.parse(e))}),m.captureMessage("Paypal: error on execute payment subscription"),n.dispatchEvent(new f.IloveEvent("onPaymentAuthorized_error",{action:i,params:o,error:JSON.parse(e)}))})},this._onCancel=function(t){},this.eventEmitter=new h.ILoveEventEmitter,d.isIEIntranet())throw"Is IE Intranet"}e.PaypalService=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lazyloadCss=void 0,e.lazyloadCss=function(t,e){void 0===e&&(e={});for(var n=document.getElementsByTagName("link"),i=n.length;i--;)if(n[i].hasAttribute("href")&&n[i].href.match(t))return!0;var o,r,a=document.createElement("link");for(o in a.rel="stylesheet",a.href=t,e)e.hasOwnProperty(o)&&(r=e[o],a.setAttribute(o,r));var s=document.getElementsByTagName("link")[0];return s.parentNode.insertBefore(a,s),!0}},function(t,s,f){"use strict";!function(l){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},n=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},c=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},r=(Object.defineProperty(s,"__esModule",{value:!0}),s.PluploadUpload=void 0,t(f(30))),u=f(7),d=t(f(15)),p=f(13),e=f(48),h=f(75);function a(t){this.SLOW_CONNECTION_LIMIT=200,this.BPS_CONNECTION_LIMIT=2e4,this.RETRY_NUM=4,this.optionsManager=null,this.processManager=null,this.config=null,this.files=null,this.workerServer=null,this.startServer=null,this.token=null,this.tool=null,this.taskId=null,this.id="pickfiles",this.container="uploader",this.servers=null,this.haveDrop=!0,this.dropElement="workArea",this.ignoreFiles=!1,this.chunkSize="2Mb",Object.assign(this,t),this.appVersion=e.APP_VERSION,this.apiVersion=e.API_VERSION,this.slowConnectionCounter=0,this.dnsFallback=!1,this.dnsFallbackActive=!1,this.servers=this.shuffle(this.servers),this.notCheckedServers=this.servers,this.retryCount=this.RETRY_NUM,this.settimer0=null,this.settimer1=null;t=this.notCheckedServers.indexOf(this.workerServer);-1<t&&this.notCheckedServers.splice(t,1),this.uploader=null,this.timeout=null,this.timeLimit=684e4,this.timeCheck=3e5,this.checkServerStatusOnStart=this.optionsManager.checkServerStatusOnStart,this.init()}a.prototype.shuffle=function(t){for(var e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1)),i=[t[n],t[e]];t[e]=i[0],t[n]=i[1]}return t},a.prototype.init=function(){var t=this;this.initPlupload().then(function(){l("#"+t.id).addClass("active"),t.configPlupload(),t.dragDrop(),t.checkTimeoutInterval(),t.listenEventTaskIdChanged(),t.listenEventLimitsChanged()},function(){})},a.prototype.initPlupload=function(){return new Promise(function(t){if(null===window.plupload||void 0!==window.plupload)return t(!0);r.lazyload("/js/plupload/plupload.full.min.js");var e=window.setInterval(function(){if(null!==window.plupload&&"object"==typeof window.plupload)return clearInterval(e),t(!0)},100)})},a.prototype.listenEventTaskIdChanged=function(){var e=this;window.addEventListener("taskIdChanged",function(t){t=t.detail.taskId;t&&e.changeTaskId(t)})},a.prototype.listenEventLimitsChanged=function(){var e=this;window.addEventListener("limitsChanged",function(t){e.checkLimits([],e.id),e.uploadPendingFiles()})},a.prototype.changeDNSServer=function(t){return this.workerServer=this.workerServer.replace(".","-cf."),this.optionsManager.changeServer(this.workerServer),this.uploader.setOption("url",this.workerServer+"/"+this.apiVersion+"/upload"),this.dnsFallbackActive=!0,window.ev("sendOnce","event","upload-info","upload-change","dns - "+t),window.ev("eventOnce","upload-change",{change:"dns",reason:t}),d.addBreadcrumb({category:"upload",level:p.Severity.Info,message:"change dns: "+t}),!0},a.prototype.checkServerStatus=function(){var n=this;return new Promise(function(e,t){1==n.optionsManager.checkServerStatusOnStart?(n.optionsManager.checkServerStatusOnStart=!1,n.optionsManager.processManager.api.getStatus(n.workerServer).then(function(t){t&&"down"==t.status&&n.changeServer(),e({})},function(t){n.changeServer(),e({})})):e({})})},a.prototype.changeServer=function(){var t,e,n=this;return this.notCheckedServers=this.notCheckedServers.filter(function(t){return t!=n.workerServer.replace("-cf.",".")}),0<this.notCheckedServers.length&&(t=this.workerServer,e=this.notCheckedServers[0],this.workerServer=e,this.uploader.stop(),this.uploader.setOption("url",e+"/"+this.apiVersion+"/upload"),window.ev("sendOnce","event","upload-info","upload-change","server-"+t),window.ev("eventOnce","upload-change",{server:t}),this.optionsManager.changeServer(e),this.optionsManager.checkServerStatusOnStart=this.checkServerStatusOnStart,this.uploader.start(),d.addBreadcrumb({category:"upload",level:p.Severity.Info,message:"change server: "+t+" - "+this.workerServer}),!0)},a.prototype.configPlupload=function(){var e=this,a=this,r={file:null,offset:0,chunk:0},s=(this.uploader=new window.plupload.Uploader({browse_button:a.id,chunk_size:this.chunkSize,max_retries:0,runtimes:"html5",container:a.container,drop_element:a.dropElement,dragdrop:a.haveDrop,multi_selection:a.config.getConfig("multiSelection"),url:a.getUrl(),filters:{mime_types:a.config.getConfig("mimeTypes")},headers:a.getHeaders(),multipart_params:a.getUploadParams(),init:{Init:function(t,e){},PostInit:function(){},QueueChanged:function(t){},FilesAdded:function(o,r){return n(this,void 0,void 0,function(){var e,n,i;return c(this,function(t){switch(t.label){case 0:return h.Banner.preventClick(),[4,a.checkServerStatus()];case 1:return t.sent(),l.each(r,function(t,e){e.upBy=a.id,1==a.ignoreFiles&&(e.ignored=!0,a.optionsManager.limits.addIgnoredFile(e.id)),a.files.addFile(e)}),0!=a.ignoreFiles?[3,3]:[4,a.checkLimits(r,o)];case 2:r=t.sent(),t.label=3;case 3:if(l.each(a.files.removed,function(t,e){try{o.removeFile(e)}catch(t){}}),!(0<r.length))return[2,!1];for(e=0,n=r;e<n.length;e++)"errorData"in(i=n[e])&&delete i.errorData,a.fileAdded(i,o);return 0==a.files.limited.length&&2!=o.state&&o.start(),[2]}})})},FilesRemoved:function(t,e){},BeforeUpload:function(t,e){if(!e)return t.stop(),!1;r.file=e,r.offset=0,r.chunk=0,d.addBreadcrumb({category:"upload",level:p.Severity.Info,message:"before upload: "+e.name+" w."+e.size})},BeforeChunkUpload:function(t,e,n,i,o){return!1===a.isOnline?(t.stop(),!1):i&&i.size&&0!=i.size?(a.timeout=Date.now(),d.addBreadcrumb({category:"upload",level:p.Severity.Info,message:"before chunk: "+r.chunk}),1==a.dnsFallback&&0==a.dnsFallbackActive?(a.changeDNSServer("slow"),s(),!1):void 0):(e.status=window.plupload.FAILED,a.error({error:"FileRemoved",file:e}),e.errorData="FileRemoved",t.removeFile(e.id),a.uploader.stop(),l("body").hasClass("process-run")||a.uploader.start(),!1)},ChunkUploaded:function(t,e,n){r.offset=n.offset,r.chunk++},UploadProgress:function(t,e){if(!e)return!1;l("#uploadSpeed").html(window.plupload.formatSize(t.total.bytesPerSec).toUpperCase()+"/S");var n=Math.round((t.total.size-t.total.loaded)/t.total.bytesPerSec*1e3);null!=i(n)&&l("#timeLeft").html(i(n).toUpperCase()),e.size>3*a.BPS_CONNECTION_LIMIT&&t.total.bytesPerSec<a.BPS_CONNECTION_LIMIT?a.slowConnectionCounter++:a.slowConnectionCounter--,a.slowConnectionCounter==a.SLOW_CONNECTION_LIMIT&&(a.dnsFallback=!0,window.ib&&window.ib.set("c","s"),d.addBreadcrumb({category:"upload",level:p.Severity.Info,message:"Slow Connection: Set to change server"}))},FileUploaded:function(t,e,n){r.file=null;n=JSON.parse(n.response);a.fileUploaded(e.id,n)},UploadComplete:function(t,e){e.forEach(function(t){return a.fileChanged(t.id)})},Error:function(t,e){-600==e.code&&0==e.file.origSize?window.Toastr.error(u.Lang.t("EmptyFile")+"<br>"+e.file.name,u.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"}):-600==e.code&&0<e.file.origSize?window.Toastr.error(u.Lang.t("FileSizeExceeded")+"<br>"+e.file.name,u.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"}):-601==e.code?window.Toastr.error(u.Lang.t("InvalidExtension")+"<br>"+e.file.name,u.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"}):-200==e.code&&"status"in e&&400==e.status?a.error(e):-200==e.code?(d.addBreadcrumb({category:"upload",level:p.Severity.Error,message:"Server Error"}),500==e.status||401==e.status?(d.addBreadcrumb({category:"upload",level:p.Severity.Error,message:"Server Error"}),500==e.status&&(d.configureScope(function(t){t.setExtra("error500",e)}),d.captureMessage("upload500")),401==e.status&&(d.configureScope(function(t){t.setExtra("error401",e),t.setExtra("token",a.token)}),d.captureMessage("upload401")),1==a.changeServer()?a.reUploadAllFiles():(a.timeout=null,a.uploader.stop(),a.fatalError("ServerError"),"file"in e&&(e.file.errorData="ServerError"))):0<a.retryCount?(a.retryCount--,a.uploader.stop(),s(!0)):0==a.dnsFallbackActive?(a.uploader.stop(),a.retryCount=a.RETRY_NUM,a.changeDNSServer("connection"),s(!0)):0==e.status&&"HTTP Error."==e.message?1==a.changeServer()?a.reUploadAllFiles():(a.timeout=null,l("body").hasClass("process-run")?(a.error({error:"ConnectionError"}),a.processManager.status="error",a.uploader.stop()):a.error({error:"ConnectionError"})):a.uploader.stop()):(a.uploader.stop(),t.removeFile(e.file.id),a.error(e))}}}),function(t){void 0===t&&(t=!1),r.file.loaded=r.offset,clearTimeout(a.settimer1),a.settimer1=setTimeout(function(){if(d.addBreadcrumb({category:"upload",level:p.Severity.Info,message:"retry upload "}),r.file){r.file.status=window.plupload.UPLOADING,a.uploader.state=window.plupload.STARTED;try{a.uploader.trigger("UploadFile",r.file)}catch(t){a.uploader.stop(),a.uploader.start()}}},1500)});function i(t){u.Lang.t("Time left");var e,n=u.Lang.t("minute"),i=u.Lang.t("hour"),o=u.Lang.t("less than"),r=u.Lang.t("minutes"),a=u.Lang.t("hours"),s=u.Lang.t("seconds"),l=Math.floor(t/1e3),t=(t%=1e3,Math.floor(l/60)),c=(l%=60,Math.floor(t/60));t%=60,Math.floor(c/60);return 0==(c%=60)?0==t?e=l+" "+s:1==t?e="1 "+n:1<t&&(e=" "+t+" "+r):1==c?e=o+" "+(1+c)+" "+a:1<c&&(e=o+" "+c+" "+i),e}window.addEventListener("goProcess",function(){var t=a.getUploadProcessParams();a.uploader.setOption("multipart_params",t)},!1),window.addEventListener("offline",function(){a.isOnline=!1,a.uploader.stop(),d.addBreadcrumb({category:"upload",level:p.Severity.Info,message:"go offline "})},!1),window.addEventListener("online",function(){if(a.isOnline=!0,null===r.file)return!1;d.addBreadcrumb({category:"upload",level:p.Severity.Info,message:"go online"}),s()},!1),window.addEventListener("fileRemoved",function(t){e.uploader.removeFile(t.detail.fileId),e.optionsManager.limits&&e.optionsManager.limits.setFileLimits(),e.uploadPendingFiles()}),this.uploader.init()},a.prototype.uploadPendingFiles=function(){this.uploader.start()},a.prototype.reUploadAllFiles=function(){var t=this.uploader;d.addBreadcrumb({category:"upload",level:p.Severity.Info,message:"Reuploading all files "+this.id}),t.stop(),clearTimeout(this.settimer0),t.files.forEach(function(t,e){t.status=window.plupload.QUEUED,t.percent=0,t.loaded=0,t.error=!1,t.retry=!0,t.server_filename&&(delete t.server_filename,t.reUploaded=!0)}),this.settimer0=setTimeout(function(){t.refresh(),t.start()},500)},a.prototype.getHeaders=function(){return this.token||d.captureMessage("no token on upload!"),{Authorization:"Bearer "+this.token,Accept:"application/json"}},a.prototype.getUrl=function(){return this.workerServer+"/"+this.apiVersion+"/upload"},a.prototype.getUploadParams=function(){return{task:this.taskId,preview:1==window.processStart?0:1,pdfinfo:1==window.pdfinfo?1:0,pdfforms:1==window.pdfforms?1:0,pdfresetforms:1==window.pdfresetforms?1:0,v:this.appVersion}},a.prototype.getUploadProcessParams=function(){return{task:this.taskId,preview:0,v:this.appVersion}},a.prototype.checkLimits=function(t,e){return this.optionsManager.checkLimits(t,this.id)},a.prototype.getOnlyNoLimitedFiles=function(t){return t.filter(function(t){return!0!==t.limited})},a.prototype.getOnlyLimitedFiles=function(t){return t.filter(function(t){return!0===t.limited})},a.prototype.fileAdded=function(t,e){return t.runtime=e.runtime,t.canvasId=t.id,this.optionsManager.fileAdded(t,this.id,this.ignoreFiles)},a.prototype.fileUploaded=function(t,e){this.optionsManager.fileUploaded(t,e)},a.prototype.fileChanged=function(t){this.optionsManager.fileChanged&&this.optionsManager.fileChanged(t)},a.prototype.error=function(t){this.optionsManager.invalidUpload(t)},a.prototype.fatalError=function(t){this.optionsManager.fatalError(t)},a.prototype.dragDrop=function(){"function"!=typeof l.fn.dndhover&&0!=this.haveDrop&&(l.fn.dndhover=function(t){return this.each(function(){var n=l(this),i=l();n.on("dragenter",function(t){var e;0===i.length&&(e=t.originalEvent.dataTransfer).types&&(e.types.indexOf?-1!=e.types.indexOf("Files"):e.types.contains("Files"))&&n.trigger("dndHoverStart"),i=i.add(t.target)}),n.on("dragleave",function(t){setTimeout(function(){0===(i=i.not(t.target)).length&&n.trigger("dndHoverEnd")},1)}),n.on("drop",function(t){setTimeout(function(){0===(i=i.not(t.target)).length&&n.trigger("dndHoverEnd")},1)})})},l(".tool__workarea").dndhover().on({dndHoverStart:function(t){return l("#dropArea").text(u.Lang.t("dropIt")),l("#dropArea").show(),t.stopPropagation(),t.preventDefault(),!1},dndHoverEnd:function(t){return l("#dropArea").hide(),t.stopPropagation(),t.preventDefault(),!1}}))},a.prototype.timeIsOk=function(){var t;return null==this.timeout||(t=Date.now()-this.timeLimit,this.timeout>t)},a.prototype.checkTimeoutInterval=function(){var t=this;window.setInterval(function(){t.checkTimeout()},t.timeCheck)},a.prototype.checkTimeout=function(){null==this.timeout||this.timeIsOk()||(this.uploader.stop(),this.optionsManager.timeout&&this.optionsManager.timeout(),this.timeout=null)},a.prototype.changeTaskId=function(t){this.taskId=t,this.uploader&&(t=this.getUploadParams(),this.uploader.setOption("multipart_params",t))},s.PluploadUpload=a}.call(this,f(1))},function(t,a,s){"use strict";!function(t,v){var e=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},i=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},n=(Object.defineProperty(a,"__esModule",{value:!0}),a.ImageView=void 0,s(63)),o=s(132),o=(t.loadImage=o,s(137));function r(t){void 0===t&&(t={}),this.files=null,this.coversShow=!0,this.screenSize=[],this.imageIsLoaded=!1,this.URL=window.URL||window.webkitURL,this.URLObj={},this.imageSrc={},this.utif=s(138),this.useLoadImageLib=!1,Object.assign(this,t),this.init()}t.canvasToBlob=o,r.prototype.init=function(){},r.prototype.renderUrl=function(i,o,r){return void 0===r&&(r=!1),new Promise(function(n,t){var e=document.getElementById(o),e=(1==r?v(e).attr("src",i):v(e).attr("style","background-image: url("+i+");background-size:contain"),new Image);e.src=i,e.onload=function(){var e=new XMLHttpRequest;e.open("HEAD",i,!0),e.onreadystatechange=function(){var t;4==e.readyState&&(t=e.getResponseHeader("Content-Length"),200==e.status&&t?n({size:e.getResponseHeader("Content-Length")}):n({}))},e.send(null)}})},r.prototype.renderImage=function(t,e,n){return void 0===n&&(n=!1),1==this.useLoadImageLib?this.renderImageOrientation(t,e,n):this.renderImageBasic(t,e,n)},r.prototype.hasBrowserAppliedImageOrientation=function(t){return"from-image"===v(t).css("image-orientation")},r.prototype.renderImageBasic=function(t,u,d,e){void 0===d&&(d=!1),void 0===e&&(e=!1);var p=this;n.isIE11(),t.type;return new Promise(function(a,s){var l=document.getElementById(u);try{var c=new FileReader;c.onload=function(t){var e,n=0,n=p.getExifOrientation(t),i=new Uint8Array(c.result),o=null;try{e=new Blob([i]),o=(window.URL||window.webkitURL).createObjectURL(e)}catch(t){return void s(t)}p.imageSrc[u]=o,p.imageIsLoaded=!0;var r=new Image;r.onload=function(){var t=r.height,e=r.width;4<(n=p.hasBrowserAppliedImageOrientation(l)?0:n)&&n<9&&(t=(t+=e)-(e=t-e)),1==d?v(l).attr("src",o):v(l).css("background-image","url("+o+")").css("background-size","contain"),p.transformByOrientation(l,n),a({width:e,height:t})},r.onerror=function(t){v(l).css("background-image",'url("/img/filetype/damaged.svg")').css("background-size","35%;"),s(t)},r.src=o},c.readAsArrayBuffer(t)}catch(t){s()}})},r.prototype.renderHeic=function(t,n){return e(this,void 0,void 0,function(){var e;return i(this,function(t){return(e=document.getElementById(n)).style.backgroundImage="url( '/img/filetype/heic.svg' )",e.style.backgroundSize="contain",[2]})})},r.prototype.transformByOrientation=function(t,e){var n="";if(1<e){switch(e){case 1:break;case 2:n="scaleX(-1)";break;case 3:n="rotate(180deg)";break;case 4:n="rotate(180deg) scale(-1)";break;case 5:n="rotate(90deg) scale(-1)";break;case 6:n="rotate(90deg)";break;case 7:n="rotate(270deg) scale(-1)";break;case 8:n="rotate(270deg)"}v(t).css("transform",n)}},r.prototype.renderImageOrientation=function(t,c,u){void 0===u&&(u=!1);var d=this;return new Promise(function(r,a){var s=document.getElementById(c);try{var l=new FileReader;l.onload=function(t){var e=0,n=new Uint8Array(l.result),n=new Blob([n]);if(1<(e=d.hasBrowserAppliedImageOrientation(s)?e:d.getExifOrientation(t)))window.loadImage(n,function(t){!t||"type"in t&&"error"==t.type?a({error:"damagedImage",message:"cannot render image"}):t.toBlob(function(t){var e,n;try{e=window.URL||window.webkitURL,n=e.createObjectURL(t)}catch(t){return void a(t)}d.imageSrc[c]=n,d.imageIsLoaded=!0;var i=new Image;i.onload=function(){var t=i.height,e=i.width;u?v(s).attr("src",n):v(s).attr("style","background-image: url("+n+");background-size:contain"),window.setTimeout(function(){d.URL.revokeObjectURL(n)},1e3),r({width:e,height:t})},i.onerror=function(t){v(s).attr("style",'background-image: url("/img/filetype/damaged.svg");background-size:35%;'),a(t)},i.src=n})},{canvas:!0,orientation:e});else{var i,e=void 0;try{e=window.URL||window.webkitURL,i=e.createObjectURL(n)}catch(t){return void a(t)}d.imageSrc[c]=i,d.imageIsLoaded=!0;var o=new Image;o.onload=function(){var t=o.height,e=o.width;1==u?v(s).attr("src",i):v(s).css("background-image","url("+i+")").css("background-size","contain"),r({width:e,height:t})},o.onerror=function(t){v(s).css("background-image",'url("/img/filetype/damaged.svg")').css("background-size","35%;"),a(t)},o.src=i}},l.readAsArrayBuffer(t)}catch(t){a()}})},r.prototype.getExifOrientation=function(t){var e=new DataView(t.target.result);if(65496!=e.getUint16(0,!1))return-2;for(var n=e.byteLength,i=2;i<n;){if(e.getUint16(i+2,!1)<=8)return-1;var o=e.getUint16(i,!1);if(i+=2,65505==o){if(1165519206!=e.getUint32(i+=2,!1))return-1;var r=18761==e.getUint16(i+=6,!1),a=(i+=e.getUint32(i+4,r),e.getUint16(i,r));i+=2;for(var s=0;s<a;s++)if(274==e.getUint16(i+12*s,r))return e.getUint16(i+12*s+8,r)}else{if(65280!=(65280&o))break;i+=e.getUint16(i,!1)}}return-1},r.prototype.renderSvg=function(n,r,a){void 0===a&&(a=!1);var s=this;return new Promise(function(i,e){var o=document.getElementById(r),t=new FileReader;t.onload=function(t){s.imageSrc[r]=t.target.result,a?v(o).attr("src",s.imageSrc[r]):v(o).attr("style","background-image: url("+s.imageSrc[r]+");background-size:contain"),s.imageIsLoaded=!0;var n=new Image;n.onload=function(){var t=n.height,e=n.width;i({width:e,height:t})},n.onerror=function(t){v(o).attr("style",'background-image: url("/img/filetype/damaged.svg");background-size:35%;'),e(t)},n.src=s.imageSrc[r]};try{t.readAsDataURL(n)}catch(t){e()}})},r.prototype.renderTif=function(t,p){var h=this,f=document.getElementById(p),e=new FileReader;return new Promise(function(u,d){e.onload=function(t){try{for(var e=h.utif.decode(t.target.result)[0],n=h.utif.toRGBA8(e),i=e.width,o=e.height,r=void 0,a=0,s=(o<i?a=o*(r=h.screenSize.h)/i:r=i*(a=h.screenSize.h)/o,"canvas"!=f.tagName&&(v("#"+p).append('<canvas class="raw"></canvas>'),f=v("#"+p+" canvas")[0]),f.width=i,f.height=o,f.getContext("2d")),l=s.createImageData(i,o),c=0;c<n.length;c++)l.data[c]=n[c];s.putImageData(l,0,0),("canvas"==v("#"+p)[0].tagName?v("#"+p):v("#"+p+" canvas")).css("width",r+"px").css("height",a+"px"),u()}catch(t){d(t)}},e.readAsArrayBuffer(t)})},r.prototype.onFileReady=function(){var i=this;return new Promise(function(t,e){var n=window.setInterval(function(){!0===i.imageIsLoaded&&(clearInterval(n),t())},200)})},a.ImageView=r}.call(this,s(31),s(1))},function(t){t.exports=JSON.parse('{"default":{"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":true},"editpdf":{"maxFiles":1,"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":false},"sign":{"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":true},"organize":{"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":true},"split":{"maxFiles":1,"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":false},"imagepdf":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,png,tif,tiff","mime":"image/jpeg,image/jpg,image/png,image/tiff"}]},"watermarkimage":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,png,gif","mime":"image/jpeg,image/jpg,image/png,image/gif"}],"multiSelection":true},"officepdf":{"mimeTypes":[{"title":"Word files","extensions":"doc,docx,odt,ott,stw,sdw,sxw"},{"title":"Excel files","extensions":"xls,xlsx,ods,ots,sdc,sxc"},{"title":"Powerpoint files","extensions":"ppt,pptx,odp,pps,ppsx,sxi"}]},"wordpdf":{"mimeTypes":[{"title":"Word files","extensions":"doc,docx,odt,ott,stw,sdw,sxw"}]},"powerpointpdf":{"mimeTypes":[{"title":"Powerpoint files","extensions":"ppt,pptx,odp,pps,ppsx,sxi"}]},"excelpdf":{"mimeTypes":[{"title":"Excel files","extensions":"xls,xlsx,ods,ots,sdc,sxc"}]},"pdfcompare":{"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":true},"redact":{"maxFiles":1,"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":false},"resizeimage":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,gif,png,svg","mime":"image/jpeg,image/jpg,image/gif,image/png,image/svg+xml"}],"multiSelection":true},"cropimage":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,gif,png","mime":"image/jpeg,image/jpg,image/gif,image/png"}],"multiSelection":false},"fromjpg":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg","mime":"image/jpeg,image/jpg"}],"multiSelection":true},"tojpg":{"mimeTypes":[{"title":"Image files","extensions":"gif,tif,tiff,png,crw,cr2,dng,raf,nef,nrw,orf,rw2,pef,arw,srf,sr2,raw,psd,svg,webp,heic","mime":"image/png,image/x-sony-arw,image/x-canon-cr2,image/x-canon-crw,image/x-kodak-dcr,image/x-adobe-dng,image/x-epson-erf,image/x-kodak-k25,image/x-kodak-kdc,image/x-minolta-mrw,image/x-nikon-nef,image/x-olympus-orf,image/x-pentax-pef,image/x-fuji-raf,image/x-panasonic-raw,image/x-sony-sr2,image/x-sony-srf,image/x-sigma-x3f,image/svg+xml,mage/vnd.adobe.photoshop,application/x-photoshop,image/webp,image/heic"}],"multiSelection":true},"memeimage":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,png,gif","mime":"image/jpeg,image/jpg,image/png,image/gif"}],"multiSelection":false},"compressimage":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,png,gif,svg","mime":"image/jpeg,image/jpg,image/png,image/gif,image/svg"}],"multiSelection":true}}')},function(t,e,n){!function(i,t){t.fn.preventDoubleSubmission=function(n){return i(this).on("submit",function(t){var e=i(this);!0===e.data("submitted")?(t.preventDefault(),e.find('[type="submit"]').attr("disabled",!0)):(e.data("submitted",!0),1<n&&(e.find('[type="submit"]').attr("disabled",!0),window.setTimeout(function(){e.data("submitted",!1),e.find('[type="submit"]').attr("disabled",null)},n)))}),this}}.call(this,n(1),n(1))},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.AuthState=void 0,n(88)),n=(o=n.AbstractAuthState,r(a,o),a);function a(){var e=null!==o&&o.apply(this,arguments)||this;return e.name="AuthState",e.LAYOUT_TEMPLATE_NAME="new-premium",e.onDomReady=function(){e.initAbstractAuth(),e.ctx.tool&&(e.extraLoginParams={tool:e.ctx.tool}),e.changeScreen(e.INITIAL_SCREEN),e.clearLoadingScreen()},e._onLoginSuccess=function(){e.executeAfterLoginOrRegisterSuccess()},e._onRegisterSuccess=function(){e.executeAfterLoginOrRegisterSuccess()},e.executeAfterLoginOrRegisterSuccess=function(){var t=e.ctx._getInitialState();e.ctx.changeState(t),t.render(e.domRoot)},e}e.AuthState=n},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.CannotTrialState=void 0,n(121)),n=n(66),n=(o=n.AbstractPaymentState,r(s,o),s);function s(){var n=null!==o&&o.apply(this,arguments)||this;return n.name="CannotTrialState",n.LAYOUT_TEMPLATE_NAME="new-premium",n.INITIAL_SCREEN="default",n.onDomReady=function(){n.changeScreen(n.INITIAL_SCREEN),n.initAbstractPayment({paymentAction:"become_premium",paymentInterval:{type:"gui",gui:"boxes"},currentPaymentMethod:n.ctx.userCurrentPaymentMethod,paymentProviderProps:[{name:"stripe",paymentButtonText:n.t("paymentButtonText")},{name:"paypal"}]}).then(n._onAbstractPaymentInited)},n._onPaymentSuccess=function(t){var e="dialog"===n.ctx.getContextPlacement()?"popup":"auth",e=(window.ev("send","event","user","premium",e),window.ev("event","premium",{origin:e}),new a.SubscriptionSuccessState);n.ctx.changeState(e),e.render(n.domRoot)},n._onPaymentFailed=function(t){},n._onAbstractPaymentInited=function(){setTimeout(n.clearLoadingScreen,150)},n}e.CannotTrialState=n},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.SubscriptionSuccessState=void 0,n(8)),s=n(7),l=n(16),n=n(21),n=(o=n.StateBase,r(c,o),c.prototype.init=function(){this.actionBtn.addEventListener("click",this._onDoneButtonClick);var t=this.dialogSubtitle;t.innerHTML=t.innerHTML.replace("${email}","<b>${email}</b>"),t.innerHTML=s.Lang.tr(t.innerHTML,{email:this.authenticatedUserEmail})},c.prototype.hideHeaderAndFooter=function(){var t=this.domRoot.querySelector(".dialog__header");if(!t)throw"Header not found";var e=this.domRoot.querySelector(".dialog__footer");if(!e)throw"Footer not found";t.style.display="none",e.style.display="none"},Object.defineProperty(c.prototype,"dialogSubtitle",{get:function(){var t=this.domStateRoot.querySelector(".dialog__subtitle");if(t)return t;throw"Description elem not found"},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"authenticatedUserEmail",{get:function(){var t=l.UserModel.get();if(t)return t.email;throw"Authenticated user not found!"},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"actionBtn",{get:function(){var t=this.domStateRoot.querySelector(".dialog__action [next-from-payment-completed]");if(t)return t;throw"'Done' button not found"},enumerable:!1,configurable:!0}),c);function c(){var t=null!==o&&o.apply(this,arguments)||this;return t.name="SubscriptionSuccessState",t.LAYOUT_TEMPLATE_NAME="new-premium",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.ctx.setEndState(),t.changeScreen(t.INITIAL_SCREEN),t.init(),t.hideHeaderAndFooter(),t.clearLoadingScreen()},t._onDoneButtonClick=function(){t.dispatchEvent(new a.IloveEvent("end"))},t}e.SubscriptionSuccessState=n},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.CanTrialState=void 0,n(66)),s=n(123),n=(o=a.AbstractPaymentState,r(l,o),l);function l(){var i=null!==o&&o.apply(this,arguments)||this;return i.name="CanTrialState",i.LAYOUT_TEMPLATE_NAME="new-premium",i.INITIAL_SCREEN="default",i.onDomReady=function(){i.changeScreen(i.INITIAL_SCREEN),i.initAbstractPayment({paymentAction:"become_premium",paymentInterval:{type:"gui",gui:"radio"},currentPaymentMethod:i.ctx.userCurrentPaymentMethod,paymentProviderProps:[{name:"stripe",paymentButtonText:i.t("paymentButtonText")},{name:"paypal"}]}).then(i._onAbstractPaymentInited)},i._onPaymentSuccess=function(t,e){var n="dialog"===i.ctx.getContextPlacement()?"popup":"auth",n=(window.ev("send","event","user","premium",n),window.ev("event","premium",{origin:n}),new s.TrialSuccessState);i.ctx.changeState(n),n.render(i.domRoot)},i._onPaymentFailed=function(t,e){},i._onAbstractPaymentInited=function(){setTimeout(i.clearLoadingScreen,150)},i}e.CanTrialState=n},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.TrialSuccessState=void 0,n(8)),s=n(7),l=n(16),n=n(21),n=(o=n.StateBase,r(c,o),c.prototype.init=function(){this.actionBtn.addEventListener("click",this._onDoneButtonClick);var t=this.dialogSubtitle;t.innerHTML=t.innerHTML.replace("${email}","<b>${email}</b>"),t.innerHTML=s.Lang.tr(t.innerHTML,{email:this.authenticatedUserEmail})},c.prototype.hideHeaderAndFooter=function(){var t=this.domRoot.querySelector(".dialog__header");if(!t)throw"Header not found";var e=this.domRoot.querySelector(".dialog__footer");if(!e)throw"Footer not found";t.style.display="none",e.style.display="none"},Object.defineProperty(c.prototype,"dialogSubtitle",{get:function(){var t=this.domStateRoot.querySelector(".dialog__subtitle");if(t)return t;throw"Description elem not found"},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"authenticatedUserEmail",{get:function(){var t=l.UserModel.get();if(t)return t.email;throw"Authenticated user not found!"},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"actionBtn",{get:function(){var t=this.domStateRoot.querySelector(".dialog__action [next-from-payment-completed]");if(t)return t;throw"'Done' button not found"},enumerable:!1,configurable:!0}),c);function c(){var t=null!==o&&o.apply(this,arguments)||this;return t.name="TrialSuccessState",t.LAYOUT_TEMPLATE_NAME="new-premium",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.ctx.setEndState(),t.changeScreen(t.INITIAL_SCREEN),t.init(),t.hideHeaderAndFooter(),t.clearLoadingScreen()},t._onDoneButtonClick=function(){t.dispatchEvent(new a.IloveEvent("end"))},t}e.TrialSuccessState=n},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.PremiumState=void 0,n(8)),n=n(21),n=(o=n.StateBase,r(s,o),s.prototype.render=function(t){this.dispatchEvent(new a.IloveEvent("end"))},s);function s(){var t=null!==o&&o.apply(this,arguments)||this;return t.name="PremiumState",t.LAYOUT_TEMPLATE_NAME="new-premium",t.INITIAL_SCREEN="default",t.onDomReady=function(){},t}e.PremiumState=n},function(t,e){function n(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}"function"!=typeof window.CustomEvent&&(n.prototype=window.Event.prototype,window.CustomEvent=n)},function(t,i,e){"use strict";!function(e){function n(){}Object.defineProperty(i,"__esModule",{value:!0}),i.Network=void 0,n.checkNetwork=function(){var t=navigator.onLine;window.setInterval(function(){navigator.onLine?0==t&&(t=!0,n.hideNetworkAlert()):1==t&&(t=!1,n.showNetworkAlert(),e("#uploadSpeed").html("0 KB/s"),e("#timeLeft").html("&infin;"))},1e3)},n.showNetworkAlert=function(){e("#network").css("display","flex").hide().fadeIn()},n.hideNetworkAlert=function(){e("#network").fadeOut()},n.waitForConnection=function(i){void 0===i&&(i=null);var o=0;return new Promise(function(t,e){var n=window.setInterval(function(){navigator.onLine&&(window.clearInterval(n),t()),o+=1e3,null!=i&&i<=o&&(window.clearInterval(n),e())},1e3)})},i.Network=n}.call(this,e(1))},function(t,e,n){"use strict";!function(i){function t(){}Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=void 0,t.init=function(){i(document).on({"show.bs.modal":function(){t.setZindex(this)},"hidden.bs.modal":function(){t.cleanZindex()}},".modal")},t.setZindex=function(t){var n=1050;i(".modal:visible, .dialog:visible").each(function(t,e){n=Math.max(n,parseInt(i(e).css("z-index"))+10)}),i(t).css("z-index",n),setTimeout(function(){i(".modal-backdrop").not(".modal-stack").css("z-index",n-1).addClass("modal-stack")},10)},t.cleanZindex=function(){0<i(".modal:visible, .dialog:visible").length&&setTimeout(function(){i(document.body).addClass("modal-open")},10)},e.Modal=t}.call(this,n(1))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.DriveService=void 0,r(n(30))),s=n(63);function l(t){var e=this;void 0===t&&(t={}),this.init=function(){e.startLoadingBtn(),e.load().then(function(){setTimeout(function(){e.endLoadingBtn(),e.drive()},500)},function(){})},this.srcApi="https://apis.google.com/js/platform.js",this.srcGsi="https://accounts.google.com/gsi/client",this.appId="391438661644",this.developerKey="AIzaSyAscL1olxYauMLc0sj0LXpCWL2Jmztr8dA",this.clientId="391438661644-2uum636mg2ckariol0if8h3364a1h6dc.apps.googleusercontent.com",this.scope="https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/drive",this.URL_API="https://www.googleapis.com/drive/v3/",this.preloadSrc=s.checkPreloadIsNeeded(),Object.assign(this,t)}l.prototype.start=function(){1==this.preloadSrc?this.init():this.waitForClickToInit()},l.prototype.waitForClickToInit=function(){document.getElementById(this.id).addEventListener("click",this.init)},l.prototype.startLoadingBtn=function(){var t=document.getElementById(this.id);1==this.preloadSrc?t.classList.remove("active"):t.classList.add("load")},l.prototype.endLoadingBtn=function(){var t=document.getElementById(this.id);1==this.preloadSrc?(t.classList.add("active"),document.getElementById(this.id).addEventListener("click",this.init)):t.classList.remove("load")},l.prototype.load=function(){var i=this;return new Promise(function(t,e){if(null===window.gapi||void 0!==window.gapi)return t(!0);a.lazyload(i.srcApi),a.lazyload(i.srcGsi);var n=window.setInterval(function(){if(null!==window.gapi&&"object"==typeof window.gapi&&null!==window.google&&"object"==typeof window.google)return clearInterval(n),t(!0)},100)})},l.prototype.drive=function(){},e.DriveService=l},function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.DropboxService=void 0,r(n(30))),s=n(63);function l(t){var e=this;void 0===t&&(t={}),this.init=function(){e.startLoadingBtn(),e.load().then(function(){setTimeout(function(){e.endLoadingBtn(),e.initDropbox()},500)},function(){})},this.dropbox=function(){},this.src="https://www.dropbox.com/static/api/2/dropins.js",this.appKey="xntw8za866940lz",this.id=null,this.preloadSrc=s.checkPreloadIsNeeded(),Object.assign(this,t)}l.prototype.start=function(){1==this.preloadSrc?this.init():this.waitForClickToInit()},l.prototype.waitForClickToInit=function(){document.getElementById(this.id).addEventListener("click",this.init)},l.prototype.startLoadingBtn=function(){var t=document.getElementById(this.id);1==this.preloadSrc?t.classList.remove("active"):t.classList.add("load")},l.prototype.endLoadingBtn=function(){var t=document.getElementById(this.id);1==this.preloadSrc?t.classList.add("active"):t.classList.remove("load")},l.prototype.load=function(){var i=this;return new Promise(function(t,e){if(null===window.Dropbox||void 0!==window.Dropbox)return t(!0);a.lazyload(i.src,{"data-app-key":i.appKey,id:"dropboxjs"});var n=window.setInterval(function(){if(null!==window.Dropbox&&"object"==typeof window.Dropbox||"function"==typeof window.Dropbox)return clearInterval(n),t(!0)},100)})},l.prototype.initDropbox=function(){1==this.preloadSrc?document.getElementById(this.id).addEventListener("click",this.dropbox):(document.getElementById(this.id).removeEventListener("click",this.init),document.getElementById(this.id).addEventListener("click",this.dropbox),this.dropbox())},e.DropboxService=l},function(t,s,l){"use strict";!function(e){Object.defineProperty(s,"__esModule",{value:!0}),s.UploadManager=void 0;var t=l(152),n=l(153),i=l(115),o=l(34),r=l(154);function a(t){this.id="pickfiles",this.optionsManager=null,this.processManager=null,this.config=null,this.files=null,this.workerServer=null,this.startServer=null,this.token=null,this.tool=null,this.taskId=null,this.servers=null,Object.assign(this,t),this.plupload=null,this.drive=null,this.dropbox=null,this.firstFile=!1,this.init()}a.prototype.init=function(){this.initPluploadUpload(),window.pluploader=this.plupload,this.initDriveUpload(),this.initDropboxUpload(),this.initWsUpload();var t=this;e("#pickfiles").on("click",function(){t.firstClick()}),o.Tooltip.disable("#pickfiles"),e("#gdrive_file_selector").on("click",function(){t.firstClick()}),e("#dropbox_file_selector").on("click",function(){t.firstClick()})},a.prototype.initPluploadUpload=function(){this.plupload=new i.PluploadUpload({id:this.id,optionsManager:this.optionsManager,processManager:this.processManager,config:this.config,files:this.files,workerServer:this.workerServer,startServer:this.startServer,token:this.token,tool:this.tool,taskId:this.taskId,servers:this.servers,haveDrop:!0,dropElement:"workArea"})},a.prototype.initDriveUpload=function(){this.drive=new t.DriveUpload({id:"gdrive_file_selector",optionsManager:this.optionsManager,processManager:this.processManager,config:this.config})},a.prototype.initDropboxUpload=function(){this.dropbox=new n.DropboxUpload({id:"dropbox_file_selector",optionsManager:this.optionsManager,processManager:this.processManager,config:this.config})},a.prototype.initWsUpload=function(){this.ws=new r.WsUpload({optionsManager:this.optionsManager})},a.prototype.firstClick=function(){"pickfiles"==this.id&&0==this.firstFile&&(this.firstFile=!0)},s.UploadManager=a}.call(this,l(1))},function(t,e,n){t.exports=n(32),n(90),n(46),n(133),n(91),n(134),n(92),n(135),n(136)},function(t,e,n){var i,o;!function(){"use strict";o=[n(32),n(46)],void 0!==(o="function"==typeof(i=function(o){"use strict";if(typeof fetch!=="undefined"&&typeof Request!=="undefined")o.fetchBlob=function(t,e,n){if(o.hasMetaOption(n))fetch(new Request(t,n)).then(function(t){return t.blob()}).then(e).catch(function(t){console.log(t);e()});else e()};else if(typeof XMLHttpRequest!=="undefined"&&typeof ProgressEvent!=="undefined")o.fetchBlob=function(t,e,n){if(o.hasMetaOption(n)){n=n||{};var i=new XMLHttpRequest;i.open(n.method||"GET",t);if(n.headers)Object.keys(n.headers).forEach(function(t){i.setRequestHeader(t,n.headers[t])});i.withCredentials=n.credentials==="include";i.responseType="blob";i.onload=function(){e(i.response)};i.onerror=i.onabort=i.ontimeout=function(t){console.log(t);e()};i.send(n.body)}else e()}})?i.apply(e,o):i)&&(t.exports=o)}()},function(t,e,n){var i,o;!function(){"use strict";o=[n(32),n(91)],void 0!==(o="function"==typeof(i=function(t){"use strict";t.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},t.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},t.ExifMap.prototype.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)};var e=t.ExifMap.prototype,n=e.tags,i=e.map,o;for(o in n)if(Object.prototype.hasOwnProperty.call(n,o))i[n[o]]=o;t.ExifMap.prototype.getAll=function(){var t={};var e;var n;for(e in this)if(Object.prototype.hasOwnProperty.call(this,e)){n=this.tags[e];if(n)t[n]=this.getText(n)}return t}})?i.apply(e,o):i)&&(t.exports=o)}()},function(t,e,n){var i,o;!function(){"use strict";o=[n(32),n(92)],void 0!==(o="function"==typeof(i=function(t){"use strict";t.IptcMap.prototype.tags={3:"ObjectType",4:"ObjectAttribute",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectRef",15:"Category",20:"SupplCategory",22:"FixtureID",25:"Keywords",26:"ContentLocCode",27:"ContentLocName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"RefService",47:"RefDate",50:"RefNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"CountryName",103:"OrigTransRef",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",122:"WriterEditor",130:"ImageType",131:"ImageOrientation",135:"LanguageID"},t.IptcMap.prototype.getText=function(t){var e=this.get(t);return String(e)};var e=t.IptcMap.prototype,n=e.tags,i=e.map||{},o;for(o in n)if(Object.prototype.hasOwnProperty.call(n,o))i[n[o]]=o;t.IptcMap.prototype.getAll=function(){var t={};var e;var n;for(e in this)if(Object.prototype.hasOwnProperty.call(this,e)){n=this.tags[e];if(n)t[n]=this.getText(n)}return t}})?i.apply(e,o):i)&&(t.exports=o)}()},function(t,e,n){var i,o;!function(){"use strict";o=[n(32),n(90),n(46)],void 0!==(o="function"==typeof(i=function(l){"use strict";var e=l.hasCanvasOption,n=l.hasMetaOption,c=l.transformCoordinates,s=l.getTransformedOptions,t="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA"+"AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA"+"QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE"+"BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/x"+"ABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAA"+"AAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",i=document.createElement("img");i.onload=function(){l.orientation=i.width===1&&i.height===2},i.src=t,l.hasCanvasOption=function(t){return!!t.orientation===true&&!l.orientation||t.orientation>1&&t.orientation<9||e.call(l,t)},l.hasMetaOption=function(t){return t&&t.orientation===true&&!l.orientation||n.call(l,t)},l.transformCoordinates=function(t,e){c.call(l,t,e);var n=t.getContext("2d");var i=t.width;var o=t.height;var r=t.style.width;var a=t.style.height;var s=e.orientation;if(!(s>1&&s<9))return;if(s>4){t.width=o;t.height=i;t.style.width=a;t.style.height=r}switch(s){case 2:n.translate(i,0);n.scale(-1,1);break;case 3:n.translate(i,o);n.rotate(Math.PI);break;case 4:n.translate(0,o);n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI);n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI);n.translate(0,-o);break;case 7:n.rotate(.5*Math.PI);n.translate(i,-o);n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI);n.translate(-i,0);break}},l.getTransformedOptions=function(t,e,n){var i=s.call(l,t,e);var o=i.orientation;var r;var a;if(o===true){if(l.orientation)return i;o=n&&n.exif&&n.exif.get("Orientation")}if(!(o>1&&o<9))return i;r={};for(a in i)if(Object.prototype.hasOwnProperty.call(i,a))r[a]=i[a];r.orientation=o;switch(o){case 2:r.left=i.right;r.right=i.left;break;case 3:r.left=i.right;r.top=i.bottom;r.right=i.left;r.bottom=i.top;break;case 4:r.top=i.bottom;r.bottom=i.top;break;case 5:r.left=i.top;r.top=i.left;r.right=i.bottom;r.bottom=i.right;break;case 6:r.left=i.top;r.top=i.right;r.right=i.bottom;r.bottom=i.left;break;case 7:r.left=i.bottom;r.top=i.right;r.right=i.top;r.bottom=i.left;break;case 8:r.left=i.bottom;r.top=i.left;r.right=i.top;r.bottom=i.right;break}if(r.orientation>4){r.maxWidth=i.maxHeight;r.maxHeight=i.maxWidth;r.minWidth=i.minHeight;r.minHeight=i.minWidth;r.sourceWidth=i.sourceHeight;r.sourceHeight=i.sourceWidth}return r}})?i.apply(e,o):i)&&(t.exports=o)}()},function(e,n,i){var a;!function(t){"use strict";var o=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,s=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),l=s&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),c=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,u=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,r=(s||c)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,n,i,o,r,a=t.match(u);if(!a)throw new Error("invalid data URI");for(e=a[2]?a[1]:"text/plain"+(a[3]||";charset=US-ASCII"),r=!!a[4],t=t.slice(a[0].length),n=(r?atob:decodeURIComponent)(t),a=new ArrayBuffer(n.length),i=new Uint8Array(a),o=0;o<n.length;o+=1)i[o]=n.charCodeAt(o);return s?new Blob([l?i:a],{type:e}):((r=new c).append(a),r.getBlob(e))};t.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(t,e,n){var i=this;setTimeout(function(){n&&o.toDataURL&&r?t(r(i.toDataURL(e,n))):t(i.mozGetAsFile("blob",e))})}:o.toDataURL&&r&&(o.msToBlob?o.toBlob=function(t,e,n){var i=this;setTimeout(function(){(e&&"image/png"!==e||n)&&o.toDataURL&&r?t(r(i.toDataURL(e,n))):t(i.msToBlob(e))})}:o.toBlob=function(t,e,n){var i=this;setTimeout(function(){t(r(i.toDataURL(e,n)))})})),void 0!==(a=function(){return r}.call(n,i,n,e))&&(e.exports=a)}(window)},function(t,e,m){!function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n,i,o,r,a,s,l,O={};function c(t,e,n,i){for(var o=0;o<e.length;o++)t[e[o]]=n+o*i}O.decode=function(t){O.decode._decodeG3.allow2D=null;for(var e=new Uint8Array(t),n="II"==O._binBE.readASCII(e,0,2)?O._binLE:O._binBE,i=(n.readUshort(e,2),n.readUint(e,4)),o=[];;){var r=O.decode._readIFD(n,e,i,o);if(0==(i=n.readUint(e,r)))break}for(var a=0;a<o.length;a++){var s=o[a],l=(s.width=s.t256[0],delete s.t256,s.height=s.t257[0],delete s.t257,s.t259[0]),c=(delete s.t259,s.t266?s.t266[0]:1),u=(delete s.t266,s.t284&&s.t284[0],(s.t258?s.t258[0]:1)*(s.t277?s.t277[0]:1)),d=s.t273,p=(null==d&&(d=s.t324),s.t279),h=(null==(p=1==l&&1==d.length?[s.height*s.width*u>>3]:p)&&(p=s.t325),new Uint8Array(s.width*s.height*u>>3)),f=0;if(null!=s.t322){for(var v=s.t322[0],g=s.t323[0],m=Math.floor((s.width+v-1)/v),y=Math.floor((s.height+g-1)/g),b=new Uint8Array(v*g*u>>3),w=0;w<y;w++)for(var _=0;_<m;_++){for(var x=w*m+_,E=0;E<b.length;E++)b[E]=0;O.decode._decompress(s,e,d[x],p[x],l,b,0,c),O._copyTile(b,v*u>>3,g,h,s.width*u>>3,s.height,_*v*u>>3,w*g)}f=h.length<<3}else{for(var S=s.t278?s.t278[0]:s.height,S=Math.min(S,s.height),x=0;x<d.length;x++)O.decode._decompress(s,e,d[x],p[x],l,h,f>>3,c),f+=s.width*u*S;f=Math.min(f,h.length<<3)}s.data=new Uint8Array(h.buffer,0,f>>3)}return o},O.decode._decompress=function(t,e,n,i,o,r,a,s){var l=m(139);if(1==o)for(var c=0;c<i;c++)r[a+c]=e[n+c];else if(3==o)O.decode._decodeG3(e,n,i,r,a,t.width,s);else if(4==o)O.decode._decodeG4(e,n,i,r,a,t.width,s);else if(5==o)O.decode._decodeLZW(e,n,r,a);else if(8==o)for(var s=new Uint8Array(e.buffer,n,i),u=l.inflate(s),d=0;d<u.length;d++)r[a+d]=u[d];else 32773==o?O.decode._decodePackBits(e,n,i,r,a):32809==o&&O.decode._decodeThunder(e,n,i,r,a);if(t.t317&&2==t.t317[0])for(var p=t.t277?t.t277[0]:1,h=t.t278?t.t278[0]:t.height,f=t.width*p,v=0;v<h;v++)for(var g=a+v*f,c=p;c<f;c++)r[g+c]=r[g+c]+r[g+c-p]&255},O.decode._decodePackBits=function(t,e,n,i,o){for(var r=new Int8Array(t.buffer),a=new Int8Array(i.buffer),s=e+n;e<s;){var l=r[e];if(e++,0<=l&&l<128)for(var c=0;c<l+1;c++)a[o]=r[e],o++,e++;if(-127<=l&&l<0){for(c=0;c<1-l;c++)a[o]=r[e],o++;e++}}},O.decode._decodeThunder=function(t,e,n,i,o){for(var r=[0,1,0,-1],a=[0,1,2,3,0,-3,-2,-1],s=e+n,l=2*o,c=0;e<s;){var u,d=t[e],p=d>>6,h=63&d;if(e++,3==p&&(i[l>>1]|=(c=15&h)<<4*(1-l&1),l++),0==p)for(var f=0;f<h;f++)i[l>>1]|=c<<4*(1-l&1),l++;if(2==p)for(f=0;f<2;f++)4!=(u=h>>3*(1-f)&7)&&(c+=a[u],i[l>>1]|=c<<4*(1-l&1),l++);if(1==p)for(f=0;f<3;f++)2!=(u=h>>2*(2-f)&3)&&(c+=r[u],i[l>>1]|=c<<4*(1-l&1),l++)}},O.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},O.decode._lens=(n="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",i="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",o="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",r=(r="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100").split(","),n=n.split(","),i=i.split(","),o=o.split(","),a="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111".split(","),l={},c(s={},r,0,1),c(s,i,64,64),c(s,a,1792,64),c(l,n,0,1),c(l,o,64,64),c(l,a,1792,64),[s,l]),O.decode._decodeG4=function(t,e,n,i,o,r,a){for(var s=O.decode,l=e<<3,c=0,u="",d=[],p=[],h=0;h<r;h++)p.push(0);for(var p=s._makeDiff(p),f=0,v=0,g=0,m="",y=0;l>>3<e+n;){var b=s._findDiff(p,f+(0==f?0:1),1-v),w=s._findDiff(p,b,v),_=0;1==a&&(_=t[l>>3]>>7-(7&l)&1),2==a&&(_=t[l>>3]>>(7&l)&1),l++,u+=_,"H"==m?null!=s._lens[v][u]&&(_=s._lens[v][u],u="",c+=_,_<64)&&(s._addNtimes(d,c,v),f+=c,v=1-v,(c=0)==--y)&&(m=""):("0001"==u&&(u="",s._addNtimes(d,w-f,v),f=w),"001"==u&&(u="",m="H",y=2),null!=s._dmap[u]&&(_=b+s._dmap[u],s._addNtimes(d,_-f,v),f=_,u="",v=1-v)),d.length==r&&""==m&&(s._writeBits(d,i,8*o+g*r),g++,f=v=0,p=s._makeDiff(d),d=[])}},O.decode._findDiff=function(t,e,n){for(var i=0;i<t.length;i+=2)if(t[i]>=e&&t[i+1]==n)return t[i]},O.decode._makeDiff=function(t){var e=[];1==t[0]&&e.push(0,1);for(var n=1;n<t.length;n++)t[n-1]!=t[n]&&e.push(n,t[n]);return e.push(t.length,0,t.length,1),e},O.decode._decodeG3=function(t,e,n,i,o,r,a){for(var s=O.decode,l=e<<3,c=0,u="",d=[],p=[],h=0;h<r;h++)d.push(0);for(var f=0,v=0,g=-1,m="",y=0,b=!1;l>>3<e+n;){var w,_=s._findDiff(p,f+(0==f?0:1),1-v),x=s._findDiff(p,_,v),E=0;1==a&&(E=t[l>>3]>>7-(7&l)&1),2==a&&(E=t[l>>3]>>(7&l)&1),l++,u+=E,b?null!=s._lens[v][u]&&(w=s._lens[v][u],u="",c+=w,w<64)&&(s._addNtimes(d,c,v),v=1-v,c=0):"H"==m?null!=s._lens[v][u]&&(w=s._lens[v][u],u="",c+=w,w<64)&&(s._addNtimes(d,c,v),f+=c,v=1-v,(c=0)==--y)&&(m=""):("0001"==u&&(u="",s._addNtimes(d,x-f,v),f=x),"001"==u&&(u="",m="H",y=2),null!=s._dmap[u]&&(E=_+s._dmap[u],s._addNtimes(d,E-f,v),f=E,u="",v=1-v)),u.endsWith("000000000001")&&(0<=g&&s._writeBits(d,i,8*o+g*r),b=1==(t[l>>3]>>(7&l)&1),l++,null==s._decodeG3.allow2D&&(s._decodeG3.allow2D=b),s._decodeG3.allow2D||(b=!0,l--),u="",g++,f=v=0,p=s._makeDiff(d),d=[])}d.length==r&&s._writeBits(d,i,8*o+g*r)},O.decode._addNtimes=function(t,e,n){for(var i=0;i<e;i++)t.push(n)},O.decode._writeBits=function(t,e,n){for(var i=0;i<t.length;i++)e[n+i>>3]|=t[i]<<7-(n+i&7)},O.decode._decodeLZW=function(t,e,n,i){for(var o=[],r=9,a=e<<3,s=0,l=0;;){if(s=(t[a>>3]<<16|t[a+8>>3]<<8|t[a+16>>3])>>24-(7&a)-r&(1<<r)-1,a+=r,0==o.length&&256!=s)return;if(257==s)break;if(256==s){for(var r=9,o=[],c=0;c<258;c++)o[c]=[c];if(s=(t[a>>3]<<16|t[a+8>>3]<<8|t[a+16>>3])>>24-(7&a)-r&(1<<r)-1,a+=r,257==s)break;for(c=0;c<o[s].length;c++)n[i+c]=o[s][c];i+=o[s].length}else{if(s<o.length){for(c=0;c<o[s].length;c++)n[i+c]=o[s][c];i+=o[s].length;var u=o[l].slice(0);u.push(o[s][0]),o.push(u)}else{var d=o[l].slice(0);d.push(d[0]);for(c=0;c<d.length;c++)n[i+c]=d[c];i+=d.length,o.push(d)}o.length+1==1<<r&&r++}l=s}},O.tags={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffset",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",286:"XPosition",287:"YPosition",292:"T4Options",296:"ResolutionUnit",297:"PageNumber",305:"Software",306:"DateTime",315:"Artist",317:"Predictor",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffset",325:"TileByteCounts",336:"DotRange",338:"ExtraSample",339:"SampleFormat",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",33432:"Copyright",34377:"Photoshop"},O.decode._readIFD=function(t,e,n,i){var o=t.readUshort(e,n),r=(n+=2,{});i.push(r);for(var a=0;a<o;a++){var s=t.readUshort(e,n),l=(n+=2,t.readUshort(e,n)),c=(n+=2,t.readUint(e,n)),u=(n+=4,t.readUint(e,n)),d=(n+=4,r["t"+s]=[]);if(1==l||7==l)for(var p=0;p<c;p++)d.push(e[(c<5?n-4:u)+p]);if(2==l&&d.push(t.readASCII(e,c<5?n-4:u,c-1)),3==l)for(p=0;p<c;p++)d.push(t.readUshort(e,(c<3?n-4:u)+2*p));if(4==l)for(p=0;p<c;p++)d.push(t.readUint(e,(c<2?n-4:u)+4*p));if(5==l)for(p=0;p<c;p++)d.push(t.readUint(e,u+8*p)/t.readUint(e,u+8*p+4));d.length}return n},O.toRGBA8=function(t){var e=t.width*t.height,n=4*e,i=t.data,o=new Uint8Array(4*e),r=t.t262[0],a=t.t258?t.t258[0]:1;if(0==r){if(1==a)for(var s=0;s<e;s++){var l=s<<2,c=i[s>>3]>>7-(7&s)&1;o[l]=o[l+1]=o[l+2]=255*(1-c),o[l+3]=255}if(4==a)for(s=0;s<e;s++){l=s<<2,c=i[s>>1]>>4-4*(1&s)&15;o[l]=o[l+1]=o[l+2]=17*(15-c),o[l+3]=255}if(8==a)for(s=0;s<e;s++){l=s<<2,c=i[s];o[l]=o[l+1]=o[l+2]=255-c,o[l+3]=255}}if(1==r){if(1==a)for(s=0;s<e;s++){l=s<<2,c=i[s>>3]>>7-(7&s)&1;o[l]=o[l+1]=o[l+2]=255*c,o[l+3]=255}if(2==a)for(s=0;s<e;s++){l=s<<2,c=i[s>>2]>>6-2*(3&s)&3;o[l]=o[l+1]=o[l+2]=85*c,o[l+3]=255}if(8==a)for(s=0;s<e;s++){l=s<<2,c=i[s];o[l]=o[l+1]=o[l+2]=c,o[l+3]=255}if(16==a)for(s=0;s<e;s++){l=s<<2,c=Math.max(0,i[2*s+1]-5)<<8|i[2*s];o[l]=o[l+1]=o[l+2]=Math.min(255,c),o[l+3]=255}}if(2==r)if(8==a)if(t.t338)if(1==t.t338[0])for(s=0;s<n;s++)o[s]=i[s];else for(s=0;s<n;s+=4)o[s]=i[s],o[s+1]=i[s+1],o[s+2]=i[s+2],o[s+3]=255;else for(s=0;s<e;s++){var u=3*s;o[l=s<<2]=i[u],o[l+1]=i[u+1],o[l+2]=i[u+2],o[l+3]=255}else for(s=0;s<e;s++){u=6*s;o[l=s<<2]=i[u],o[l+1]=i[u+2],o[l+2]=i[u+4],o[l+3]=255}if(3==r)for(var d=t.t320,s=0;s<e;s++){var l=s<<2,p=i[s];o[l]=d[p]>>8,o[l+1]=d[256+p]>>8,o[l+2]=d[512+p]>>8,o[l+3]=255}if(5==r)for(s=0;s<e;s++){var h=255-i[l=s<<2],f=255-i[l+1],v=255-i[l+2],g=(255-i[l+3])*(1/255);o[l]=Math.round(h*g),o[l+1]=Math.round(f*g),o[l+2]=Math.round(v*g),o[l+3]=255}return o},O.replaceIMG=function(){for(var t=document.getElementsByTagName("img"),e=0;e<t.length;e++){var n=t[e],i=n.getAttribute("src"),o=i.split(".").pop().toLowerCase();"tif"!=o&&"tiff"!=o||(o=new XMLHttpRequest,O._xhrs.push(o),O._imgs.push(n),o.open("GET",i),o.responseType="arraybuffer",o.onload=O._imgLoaded,o.send())}},O._xhrs=[],O._imgs=[],O._imgLoaded=function(t){for(var e=O.decode(t.target.response)[0],n=O.toRGBA8(e),i=e.width,e=e.height,t=O._xhrs.indexOf(t.target),o=O._imgs[t],r=(O._xhrs.splice(t,1),O._imgs.splice(t,1),document.createElement("canvas")),t=(r.width=i,r.height=e,r.getContext("2d")),a=t.createImageData(i,e),s=0;s<n.length;s++)a.data[s]=n[s];t.putImageData(a,0,0);for(var l=["style","class","id"],s=0;s<l.length;s++)r.setAttribute(l[s],o.getAttribute(l[s]));o.parentNode.replaceChild(r,o)},O._binBE={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},readUint:function(t,e){var n=O._binBE.ui8;return n[0]=t[e+3],n[1]=t[e+2],n[2]=t[e+1],n[3]=t[e],O._binBE.ui32[0]},readASCII:function(t,e,n){for(var i="",o=0;o<n;o++)i+=String.fromCharCode(t[e+o]);return i}},O._binBE.ui8=new Uint8Array(4),O._binBE.ui32=new Uint32Array(O._binBE.ui8.buffer),O._binLE={nextZero:O._binBE.nextZero,readUshort:function(t,e){return t[e+1]<<8|t[e]},readUint:function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},readASCII:O._binBE.readASCII},O._copyTile=function(t,e,n,i,o,r,a,s){for(var l=0;l<n;l++)for(var c=0;c<e;c++){var u=a+c,d=s+l;u<o&&d<r&&(i[d*o+u]=t[l*e+c])}},"object"==e(t)&&(t.exports=O)}.call(this,m(128)(t))},function(t,e,n){"use strict";var i={};(0,n(37).assign)(i,n(140),n(143),n(97)),t.exports=i},function(t,e,n){"use strict";var a=n(141),s=n(37),l=n(95),i=n(64),o=n(96),c=Object.prototype.toString;function r(t){if(!(this instanceof r))return new r(t);this.options=s.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});t=this.options;if(t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,(this.strm.avail_out=0)!==(e=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy)))throw new Error(i[e]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var e,t="string"==typeof t.dictionary?l.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary;if(0!==(e=a.deflateSetDictionary(this.strm,t)))throw new Error(i[e]);this._dict_set=!0}}function u(t,e){e=new r(e);if(e.push(t,!0),e.err)throw e.msg||i[e.err];return e.result}r.prototype.push=function(t,e){var n,i,o=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=l.string2buf(t):"[object ArrayBuffer]"===c.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new s.Buf8(r),o.next_out=0,o.avail_out=r),1!==(n=a.deflate(o,i))&&0!==n)return this.onEnd(n),!(this.ended=!0)}while(0!==o.avail_out&&(0!==o.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(l.buf2binstring(s.shrinkBuf(o.output,o.next_out))):this.onData(s.shrinkBuf(o.output,o.next_out))),(0<o.avail_in||0===o.avail_out)&&1!==n);return 4===i?(n=a.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==i||(this.onEnd(0),!(o.avail_out=0))},r.prototype.onData=function(t){this.chunks.push(t)},r.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=r,e.deflate=u,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,u(t,e)}},function(F,t,e){"use strict";var s,d=e(37),l=e(142),p=e(93),h=e(94),R=e(64),c=0,u=4,f=0,v=-2,z=-1,B=4,N=2,g=8,U=9,n=286,H=30,V=19,W=2*n+1,q=15,m=3,y=258,b=y+m+1,w=42,_=113,x=1,E=2,S=3,O=4;function C(t,e){return t.msg=R[e],e}function k(t){return(t<<1)-(4<t?9:0)}function P(t){for(var e=t.length;0<=--e;)t[e]=0}function T(t){var e=t.state,n=e.pending;0!==(n=n>t.avail_out?t.avail_out:n)&&(d.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending)&&(e.pending_out=0)}function j(t,e){l._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,T(t.strm)}function A(t,e){t.pending_buf[t.pending++]=e}function M(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function r(t,e){var n,i,o=t.max_chain_length,r=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-b?t.strstart-(t.w_size-b):0,c=t.window,u=t.w_mask,d=t.prev,p=t.strstart+y,h=c[r+a-1],f=c[r+a];t.prev_length>=t.good_match&&(o>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(n=e)+a]===f&&c[n+a-1]===h&&c[n]===c[r]&&c[++n]===c[r+1]){for(r+=2,n++;c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&r<p;);if(i=y-(p-r),r=p-y,a<i){if(t.match_start=e,s<=(a=i))break;h=c[r+a-1],f=c[r+a]}}}while((e=d[e&u])>l&&0!=--o);return a<=t.lookahead?a:t.lookahead}function L(t){var e,n,i,o,r,a,s,l,c,u=t.w_size;do{if(l=t.window_size-t.lookahead-t.strstart,t.strstart>=u+(u-b)){for(d.arraySet(t.window,t.window,u,u,0),t.match_start-=u,t.strstart-=u,t.block_start-=u,e=n=t.hash_size;i=t.head[--e],t.head[e]=u<=i?i-u:0,--n;);for(e=n=u;i=t.prev[--e],t.prev[e]=u<=i?i-u:0,--n;);l+=u}if(0===t.strm.avail_in)break;if(r=t.strm,a=t.window,s=t.strstart+t.lookahead,l=l,c=void 0,c=r.avail_in,n=0===(c=l<c?l:c)?0:(r.avail_in-=c,d.arraySet(a,r.input,r.next_in,c,s),1===r.state.wrap?r.adler=p(r.adler,a,c,s):2===r.state.wrap&&(r.adler=h(r.adler,a,c,s)),r.next_in+=c,r.total_in+=c,c),t.lookahead+=n,t.lookahead+t.insert>=m)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+m-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<m)););}while(t.lookahead<b&&0!==t.strm.avail_in)}function i(t,e){for(var n,i;;){if(t.lookahead<b){if(L(t),t.lookahead<b&&e===c)return x;if(0===t.lookahead)break}if(n=0,t.lookahead>=m&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+m-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-b&&(t.match_length=r(t,n)),t.match_length>=m)if(i=l._tr_tally(t,t.strstart-t.match_start,t.match_length-m),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=m){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+m-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=l._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(j(t,!1),0===t.strm.avail_out))return x}return t.insert=t.strstart<m-1?t.strstart:m-1,e===u?(j(t,!0),0===t.strm.avail_out?S:O):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?x:E}function o(t,e){for(var n,i,o;;){if(t.lookahead<b){if(L(t),t.lookahead<b&&e===c)return x;if(0===t.lookahead)break}if(n=0,t.lookahead>=m&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+m-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=m-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-b&&(t.match_length=r(t,n),t.match_length<=5)&&(1===t.strategy||t.match_length===m&&4096<t.strstart-t.match_start)&&(t.match_length=m-1),t.prev_length>=m&&t.match_length<=t.prev_length){for(o=t.strstart+t.lookahead-m,i=l._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-m),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+m-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=m-1,t.strstart++,i&&(j(t,!1),0===t.strm.avail_out))return x}else if(t.match_available){if((i=l._tr_tally(t,0,t.window[t.strstart-1]))&&j(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return x}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=l._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<m-1?t.strstart:m-1,e===u?(j(t,!0),0===t.strm.avail_out?S:O):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?x:E}function a(t,e,n,i,o){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=o}function G(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*W),this.dyn_dtree=new d.Buf16(2*(2*H+1)),this.bl_tree=new d.Buf16(2*(2*V+1)),P(this.dyn_ltree),P(this.dyn_dtree),P(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(q+1),this.heap=new d.Buf16(2*n+1),P(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*n+1),P(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function I(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=N,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?w:_,t.adler=2===e.wrap?0:1,e.last_flush=c,l._tr_init(e),f):C(t,v)}function D(t){var e=I(t);return e===f&&((t=t.state).window_size=2*t.w_size,P(t.head),t.max_lazy_match=s[t.level].max_lazy,t.good_match=s[t.level].good_length,t.nice_match=s[t.level].nice_length,t.max_chain_length=s[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=m-1,t.match_available=0,t.ins_h=0),e}function Y(t,e,n,i,o,r){if(!t)return v;var a=1;if(e===z&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),o<1||U<o||n!==g||i<8||15<i||e<0||9<e||r<0||B<r)return C(t,v);8===i&&(i=9);var s=new G;return(t.state=s).strm=t,s.wrap=a,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=o+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+m-1)/m),s.window=new d.Buf8(2*s.w_size),s.head=new d.Buf16(s.hash_size),s.prev=new d.Buf16(s.w_size),s.lit_bufsize=1<<o+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new d.Buf8(s.pending_buf_size),s.d_buf=+s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=r,s.method=n,D(t)}s=[new a(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(L(t),0===t.lookahead&&e===c)return x;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,j(t,!1),0===t.strm.avail_out))return x;if(t.strstart-t.block_start>=t.w_size-b&&(j(t,!1),0===t.strm.avail_out))return x}return t.insert=0,e===u?(j(t,!0),0===t.strm.avail_out?S:O):(t.strstart>t.block_start&&(j(t,!1),t.strm.avail_out),x)}),new a(4,4,8,4,i),new a(4,5,16,8,i),new a(4,6,32,32,i),new a(4,4,16,16,o),new a(8,16,32,32,o),new a(8,16,128,128,o),new a(8,32,128,256,o),new a(32,128,258,1024,o),new a(32,258,258,4096,o)],t.deflateInit=function(t,e){return Y(t,e,g,15,8,0)},t.deflateInit2=Y,t.deflateReset=D,t.deflateResetKeep=I,t.deflateSetHeader=function(t,e){return!t||!t.state||2!==t.state.wrap?v:(t.state.gzhead=e,f)},t.deflate=function(t,e){var n,i,o,r;if(!t||!t.state||5<e||e<0)return t?C(t,v):v;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==u)return C(t,0===t.avail_out?-5:v);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===w&&(2===i.wrap?(t.adler=0,A(i,31),A(i,139),A(i,8),i.gzhead?(A(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),A(i,255&i.gzhead.time),A(i,i.gzhead.time>>8&255),A(i,i.gzhead.time>>16&255),A(i,i.gzhead.time>>24&255),A(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),A(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(A(i,255&i.gzhead.extra.length),A(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=h(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(A(i,0),A(i,0),A(i,0),A(i,0),A(i,0),A(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),A(i,3),i.status=_)):(a=g+(i.w_bits-8<<4)<<8,a|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(a|=32),a+=31-a%31,i.status=_,M(i,a),0!==i.strstart&&(M(i,t.adler>>>16),M(i,65535&t.adler)),t.adler=1)),69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(t.adler=h(t.adler,i.pending_buf,i.pending-o,o)),T(t),o=i.pending,i.pending!==i.pending_buf_size));)A(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(t.adler=h(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=h(t.adler,i.pending_buf,i.pending-o,o)),T(t),o=i.pending,i.pending===i.pending_buf_size)){r=1;break}}while(r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,A(i,r),0!==r);i.gzhead.hcrc&&i.pending>o&&(t.adler=h(t.adler,i.pending_buf,i.pending-o,o)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=h(t.adler,i.pending_buf,i.pending-o,o)),T(t),o=i.pending,i.pending===i.pending_buf_size)){r=1;break}}while(r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,A(i,r),0!==r);i.gzhead.hcrc&&i.pending>o&&(t.adler=h(t.adler,i.pending_buf,i.pending-o,o)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&T(t),i.pending+2<=i.pending_buf_size&&(A(i,255&t.adler),A(i,t.adler>>8&255),t.adler=0,i.status=_)):i.status=_),0!==i.pending){if(T(t),0===t.avail_out)return i.last_flush=-1,f}else if(0===t.avail_in&&k(e)<=k(n)&&e!==u)return C(t,-5);if(666===i.status&&0!==t.avail_in)return C(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==c&&666!==i.status){var a=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(L(t),0===t.lookahead)){if(e===c)return x;break}if(t.match_length=0,n=l._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(j(t,!1),0===t.strm.avail_out))return x}return t.insert=0,e===u?(j(t,!0),0===t.strm.avail_out?S:O):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?x:E}(i,e):3===i.strategy?function(t,e){for(var n,i,o,r,a=t.window;;){if(t.lookahead<=y){if(L(t),t.lookahead<=y&&e===c)return x;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=m&&0<t.strstart&&(i=a[o=t.strstart-1])===a[++o]&&i===a[++o]&&i===a[++o]){for(r=t.strstart+y;i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&o<r;);t.match_length=y-(r-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=m?(n=l._tr_tally(t,1,t.match_length-m),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=l._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(j(t,!1),0===t.strm.avail_out))return x}return t.insert=0,e===u?(j(t,!0),0===t.strm.avail_out?S:O):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?x:E}(i,e):s[i.level].func(i,e);if(a!==S&&a!==O||(i.status=666),a===x||a===S)return 0===t.avail_out&&(i.last_flush=-1),f;if(a===E&&(1===e?l._tr_align(i):5!==e&&(l._tr_stored_block(i,0,0,!1),3===e)&&(P(i.head),0===i.lookahead)&&(i.strstart=0,i.block_start=0,i.insert=0),T(t),0===t.avail_out))return i.last_flush=-1,f}return e!==u||!(i.wrap<=0)&&(2===i.wrap?(A(i,255&t.adler),A(i,t.adler>>8&255),A(i,t.adler>>16&255),A(i,t.adler>>24&255),A(i,255&t.total_in),A(i,t.total_in>>8&255),A(i,t.total_in>>16&255),A(i,t.total_in>>24&255)):(M(i,t.adler>>>16),M(i,65535&t.adler)),T(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending)?f:1},t.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==w&&69!==e&&73!==e&&91!==e&&103!==e&&e!==_&&666!==e?C(t,v):(t.state=null,e===_?C(t,-3):f):v},t.deflateSetDictionary=function(t,e){var n,i,o,r,a,s,l,c=e.length;if(!t||!t.state)return v;if(2===(r=(n=t.state).wrap)||1===r&&n.status!==w||n.lookahead)return v;for(1===r&&(t.adler=p(t.adler,e,c,0)),n.wrap=0,c>=n.w_size&&(0===r&&(P(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new d.Buf8(n.w_size),d.arraySet(l,e,c-n.w_size,n.w_size,0),e=l,c=n.w_size),l=t.avail_in,a=t.next_in,s=t.input,t.avail_in=c,t.next_in=0,t.input=e,L(n);n.lookahead>=m;){for(i=n.strstart,o=n.lookahead-(m-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+m-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--o;);n.strstart=i,n.lookahead=m-1,L(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=m-1,n.match_available=0,t.next_in=a,t.input=s,t.avail_in=l,n.wrap=r,f},t.deflateInfo="pako deflate (from Nodeca project)"},function(n,t,r){"use strict";var a=r(37),u=0,d=1;function e(t){for(var e=t.length;0<=--e;)t[e]=0}var s,l,c,p=29,h=256,f=h+1+p,v=30,g=19,O=2*f+1,C=15,i=16,B=7,m=256,y=16,b=17,w=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(f+2)),k=(e(S),new Array(2*v)),P=(e(k),new Array(512)),T=(e(P),new Array(256)),j=(e(T),new Array(p)),A=(e(j),new Array(v));function M(t,e,n,i,o){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=o,this.has_stree=t&&t.length}function L(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function I(t){return t<256?P[t]:P[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function D(t,e,n){t.bi_valid>i-n?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>i-t.bi_valid,t.bi_valid+=n-i):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function F(t,e,n){D(t,n[2*e],n[2*e+1])}function U(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function H(t,e,n){for(var i,o=new Array(C+1),r=0,a=1;a<=C;a++)o[a]=r=r+n[a-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=U(o[s]++,s))}}function V(t){for(var e=0;e<f;e++)t.dyn_ltree[2*e]=0;for(e=0;e<v;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function W(t){8<t.bi_valid?o(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function q(t,e,n,i){var o=2*e,r=2*n;return t[o]<t[r]||t[o]===t[r]&&i[e]<=i[n]}function R(t,e,n){for(var i=t.heap[n],o=n<<1;o<=t.heap_len&&(o<t.heap_len&&q(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!q(e,i,t.heap[o],t.depth));)t.heap[n]=t.heap[o],n=o,o<<=1;t.heap[n]=i}function G(t,e,n){var i,o,r,a,s=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],o=t.pending_buf[t.l_buf+s],s++,0==i?F(t,o,e):(F(t,(r=T[o])+h+1,e),0!==(a=_[r])&&D(t,o-=j[r],a),F(t,r=I(--i),n),0!==(a=x[r])&&D(t,i-=A[r],a)),s<t.last_lit;);F(t,m,e)}function z(t,e){var n,i,o,r=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=O,n=0;n<l;n++)0!==r[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):r[2*n+1]=0;for(;t.heap_len<2;)r[2*(o=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[o]=0,t.opt_len--,s&&(t.static_len-=a[2*o+1]);for(e.max_code=c,n=t.heap_len>>1;1<=n;n--)R(t,r,n);for(o=l;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,r[2*o]=r[2*n]+r[2*i],t.depth[o]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,r[2*n+1]=r[2*i+1]=o,t.heap[1]=o++,R(t,r,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1];for(var u,d,p,h,f,v=t,g=e.dyn_tree,m=e.max_code,y=e.stat_desc.static_tree,b=e.stat_desc.has_stree,w=e.stat_desc.extra_bits,_=e.stat_desc.extra_base,x=e.stat_desc.max_length,E=0,S=0;S<=C;S++)v.bl_count[S]=0;for(g[2*v.heap[v.heap_max]+1]=0,u=v.heap_max+1;u<O;u++)x<(S=g[2*g[2*(d=v.heap[u])+1]+1]+1)&&(S=x,E++),g[2*d+1]=S,m<d||(v.bl_count[S]++,h=0,_<=d&&(h=w[d-_]),f=g[2*d],v.opt_len+=f*(S+h),b&&(v.static_len+=f*(y[2*d+1]+h)));if(0!==E){do{for(S=x-1;0===v.bl_count[S];)S--}while(v.bl_count[S]--,v.bl_count[S+1]+=2,v.bl_count[x]--,0<(E-=2));for(S=x;0!==S;S--)for(d=v.bl_count[S];0!==d;)m<(p=v.heap[--u])||(g[2*p+1]!==S&&(v.opt_len+=(S-g[2*p+1])*g[2*p],g[2*p+1]=S),d--)}H(r,c,t.bl_count)}function Y(t,e,n){var i,o,r=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)o=a,a=e[2*(i+1)+1],++s<l&&o===a||(s<c?t.bl_tree[2*o]+=s:0!==o?(o!==r&&t.bl_tree[2*o]++,t.bl_tree[2*y]++):s<=10?t.bl_tree[2*b]++:t.bl_tree[2*w]++,r=o,c=(s=0)===a?(l=138,3):o===a?(l=6,3):(l=7,4))}function X(t,e,n){var i,o,r=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),i=0;i<=n;i++)if(o=a,a=e[2*(i+1)+1],!(++s<l&&o===a)){if(s<c)for(;F(t,o,t.bl_tree),0!=--s;);else 0!==o?(o!==r&&(F(t,o,t.bl_tree),s--),F(t,y,t.bl_tree),D(t,s-3,2)):s<=10?(F(t,b,t.bl_tree),D(t,s-3,3)):(F(t,w,t.bl_tree),D(t,s-11,7));r=o,c=(s=0)===a?(l=138,3):o===a?(l=6,3):(l=7,4)}}e(A);var Z=!1;function K(t,e,n,i){D(t,0+(i?1:0),3),i=e,e=n,n=!0,W(t=t),n&&(o(t,e),o(t,~e)),a.arraySet(t.pending_buf,t.window,i,e,t.pending),t.pending+=e}t._tr_init=function(t){if(!Z){for(var e,n,i,o=new Array(C+1),r=0,a=0;a<p-1;a++)for(j[a]=r,e=0;e<1<<_[a];e++)T[r++]=a;for(T[r-1]=a,a=i=0;a<16;a++)for(A[a]=i,e=0;e<1<<x[a];e++)P[i++]=a;for(i>>=7;a<v;a++)for(A[a]=i<<7,e=0;e<1<<x[a]-7;e++)P[256+i++]=a;for(n=0;n<=C;n++)o[n]=0;for(e=0;e<=143;)S[2*e+1]=8,e++,o[8]++;for(;e<=255;)S[2*e+1]=9,e++,o[9]++;for(;e<=279;)S[2*e+1]=7,e++,o[7]++;for(;e<=287;)S[2*e+1]=8,e++,o[8]++;for(H(S,f+1,o),e=0;e<v;e++)k[2*e+1]=5,k[2*e]=U(e,5);s=new M(S,_,h+1,f,C),l=new M(k,x,0,v,C),c=new M(new Array(0),N,0,g,B),Z=!0}t.l_desc=new L(t.dyn_ltree,s),t.d_desc=new L(t.dyn_dtree,l),t.bl_desc=new L(t.bl_tree,c),t.bi_buf=0,t.bi_valid=0,V(t)},t._tr_stored_block=K,t._tr_flush_block=function(t,e,n,i){var o,r,a=0;if(0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){for(var e=4093624447,n=0;n<=31;n++,e>>>=1)if(1&e&&0!==t.dyn_ltree[2*n])return u;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return d;for(n=32;n<h;n++)if(0!==t.dyn_ltree[2*n])return d;return u}(t)),z(t,t.l_desc),z(t,t.d_desc),a=function(t){var e;for(Y(t,t.dyn_ltree,t.l_desc.max_code),Y(t,t.dyn_dtree,t.d_desc.max_code),z(t,t.bl_desc),e=g-1;3<=e&&0===t.bl_tree[2*E[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),o=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=o&&(o=r)):o=r=n+5,n+4<=o&&-1!==e)K(t,e,n,i);else if(4===t.strategy||r===o)D(t,2+(i?1:0),3),G(t,S,k);else{D(t,4+(i?1:0),3);var s,l=t,e=t.l_desc.max_code+1,n=t.d_desc.max_code+1,c=a+1;for(D(l,e-257,5),D(l,n-1,5),D(l,c-4,4),s=0;s<c;s++)D(l,l.bl_tree[2*E[s]+1],3);X(l,l.dyn_ltree,e-1),X(l,l.dyn_dtree,n-1),G(t,t.dyn_ltree,t.dyn_dtree)}V(t),i&&W(t)},t._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(T[n]+h+1)]++,t.dyn_dtree[2*I(e)]++),t.last_lit===t.lit_bufsize-1},t._tr_align=function(t){D(t,2,3),F(t,m,S),16===(t=t).bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},function(t,e,n){"use strict";var d=n(144),p=n(37),h=n(95),f=n(97),i=n(64),o=n(96),r=n(147),v=Object.prototype.toString;function a(t){if(!(this instanceof a))return new a(t);this.options=p.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options,t=(e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits)&&(e.windowBits=-15),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0,d.inflateInit2(this.strm,e.windowBits));if(t!==f.Z_OK)throw new Error(i[t]);if(this.header=new r,d.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=h.string2buf(e.dictionary):"[object ArrayBuffer]"===v.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw)&&(t=d.inflateSetDictionary(this.strm,e.dictionary))!==f.Z_OK)throw new Error(i[t])}function s(t,e){e=new a(e);if(e.push(t,!0),e.err)throw e.msg||i[e.err];return e.result}a.prototype.push=function(t,e){var n,i,o,r,a,s=this.strm,l=this.options.chunkSize,c=this.options.dictionary,u=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?f.Z_FINISH:f.Z_NO_FLUSH,"string"==typeof t?s.input=h.binstring2buf(t):"[object ArrayBuffer]"===v.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new p.Buf8(l),s.next_out=0,s.avail_out=l),(n=(n=d.inflate(s,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&c?d.inflateSetDictionary(this.strm,c):n)===f.Z_BUF_ERROR&&!0===u&&(n=f.Z_OK,u=!1),n!==f.Z_STREAM_END&&n!==f.Z_OK)return this.onEnd(n),!(this.ended=!0)}while(!s.next_out||0!==s.avail_out&&n!==f.Z_STREAM_END&&(0!==s.avail_in||i!==f.Z_FINISH&&i!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(o=h.utf8border(s.output,s.next_out),r=s.next_out-o,a=h.buf2string(s.output,o),s.next_out=r,s.avail_out=l-r,r&&p.arraySet(s.output,s.output,o,r,0),this.onData(a)):this.onData(p.shrinkBuf(s.output,s.next_out))),0===s.avail_in&&0===s.avail_out&&(u=!0),(0<s.avail_in||0===s.avail_out)&&n!==f.Z_STREAM_END);return(i=n===f.Z_STREAM_END?f.Z_FINISH:i)===f.Z_FINISH?(n=d.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===f.Z_OK):i!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(s.avail_out=0))},a.prototype.onData=function(t){this.chunks.push(t)},a.prototype.onEnd=function(t){t===f.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=a,e.inflate=s,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,s(t,e)},e.ungzip=s},function(t,e,n){"use strict";var A=n(37),M=n(93),L=n(94),I=n(145),D=n(146),F=1,R=2,z=0,B=-2,N=1,i=852,o=592;function U(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new A.Buf16(320),this.work=new A.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=N,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new A.Buf32(i),e.distcode=e.distdyn=new A.Buf32(o),e.sane=1,e.back=-1,z):B}function s(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,a(t)):B}function l(t,e){var n,i;return!t||!t.state||(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e))?B:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,s(t))}function c(t,e){var n;return t?(n=new r,(t.state=n).window=null,(n=l(t,e))!==z&&(t.state=null),n):B}var H,V,W=!0;function q(t,e,n,i){var o,t=t.state;return null===t.window&&(t.wsize=1<<t.wbits,t.wnext=0,t.whave=0,t.window=new A.Buf8(t.wsize)),i>=t.wsize?(A.arraySet(t.window,e,n-t.wsize,t.wsize,0),t.wnext=0,t.whave=t.wsize):(i<(o=t.wsize-t.wnext)&&(o=i),A.arraySet(t.window,e,n-i,o,t.wnext),(i-=o)?(A.arraySet(t.window,e,n-i,i,0),t.wnext=i,t.whave=t.wsize):(t.wnext+=o,t.wnext===t.wsize&&(t.wnext=0),t.whave<t.wsize&&(t.whave+=o))),0}e.inflateReset=s,e.inflateReset2=l,e.inflateResetKeep=a,e.inflateInit=function(t){return c(t,15)},e.inflateInit2=c,e.inflate=function(t,e){var n,i,o,r,a,s,l,c,u,d,p,h,f,v,g,m,y,b,w,_,x,E,S,O,C=0,k=new A.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return B;12===(n=t.state).mode&&(n.mode=13),a=t.next_out,o=t.output,l=t.avail_out,r=t.next_in,i=t.input,s=t.avail_in,c=n.hold,u=n.bits,d=s,p=l,E=z;t:for(;;)switch(n.mode){case N:if(0===n.wrap)n.mode=13;else{for(;u<16;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}if(2&n.wrap&&35615===c)k[n.check=0]=255&c,k[1]=c>>>8&255,n.check=L(n.check,k,2,0),u=c=0,n.mode=2;else if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31)t.msg="incorrect header check",n.mode=30;else if(8!=(15&c))t.msg="unknown compression method",n.mode=30;else{if(u-=4,x=8+(15&(c>>>=4)),0===n.wbits)n.wbits=x;else if(x>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<x,t.adler=n.check=1,n.mode=512&c?10:12,u=c=0}}break;case 2:for(;u<16;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}if(n.flags=c,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=L(n.check,k,2,0)),u=c=0,n.mode=3;case 3:for(;u<32;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,n.check=L(n.check,k,4,0)),u=c=0,n.mode=4;case 4:for(;u<16;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=L(n.check,k,2,0)),u=c=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=L(n.check,k,2,0)),u=c=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((h=s<(h=n.length)?s:h)&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),A.arraySet(n.head.extra,i,r,h,x)),512&n.flags&&(n.check=L(n.check,i,h,r)),s-=h,r+=h,n.length-=h),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break t;for(h=0;x=i[r+h++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x)),x&&h<s;);if(512&n.flags&&(n.check=L(n.check,i,h,r)),s-=h,r+=h,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break t;for(h=0;x=i[r+h++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x)),x&&h<s;);if(512&n.flags&&(n.check=L(n.check,i,h,r)),s-=h,r+=h,x)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}if(c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}u=c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;u<32;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}t.adler=n.check=U(c),u=c=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=a,t.avail_out=l,t.next_in=r,t.avail_in=s,n.hold=c,n.bits=u,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last)c>>>=7&u,u-=7&u,n.mode=27;else{for(;u<3;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}switch(n.last=1&c,--u,3&(c>>>=1)){case 0:n.mode=14;break;case 1:T=j=void 0;var T,j=n;if(W){for(H=new A.Buf32(512),V=new A.Buf32(32),T=0;T<144;)j.lens[T++]=8;for(;T<256;)j.lens[T++]=9;for(;T<280;)j.lens[T++]=7;for(;T<288;)j.lens[T++]=8;for(D(F,j.lens,0,288,H,0,j.work,{bits:9}),T=0;T<32;)j.lens[T++]=5;D(R,j.lens,0,32,V,0,j.work,{bits:5}),W=!1}if(j.lencode=H,j.lenbits=9,j.distcode=V,j.distbits=5,n.mode=20,6!==e)break;c>>>=2,u-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}c>>>=2,u-=2}break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,u=c=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(h=n.length){if(0===(h=l<(h=s<h?s:h)?l:h))break t;A.arraySet(o,i,r,h,a),s-=h,r+=h,l-=h,a+=h,n.length-=h}else n.mode=12;break;case 17:for(;u<14;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}n.lens[P[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},E=D(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,E){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(C=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&C,!((g=C>>>24)<=u);){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}if(y<16)c>>>=g,u-=g,n.lens[n.have++]=y;else{if(16===y){for(O=g+2;u<O;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}if(c>>>=g,u-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}x=n.lens[n.have-1],h=3+(3&c),c>>>=2,u-=2}else if(17===y){for(O=g+3;u<O;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}x=0,h=3+(7&(c>>>=g)),c>>>=3,u=u-g-3}else{for(O=g+7;u<O;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}x=0,h=11+(127&(c>>>=g)),c>>>=7,u=u-g-7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;h--;)n.lens[n.have++]=x}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,S={bits:n.lenbits},E=D(F,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,E){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},E=D(R,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,E){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=s&&258<=l){t.next_out=a,t.avail_out=l,t.next_in=r,t.avail_in=s,n.hold=c,n.bits=u,I(t,p),a=t.next_out,o=t.output,l=t.avail_out,r=t.next_in,i=t.input,s=t.avail_in,c=n.hold,u=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;m=(C=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&C,!((g=C>>>24)<=u);){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}if(m&&0==(240&m)){for(b=g,w=m,_=y;m=(C=n.lencode[_+((c&(1<<b+w)-1)>>b)])>>>16&255,y=65535&C,!(b+(g=C>>>24)<=u);){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=g,u-=g,n.back+=g,n.length=y,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=12;break}if(64&m){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(O=n.extra;u<O;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(C=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&C,!((g=C>>>24)<=u);){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}if(0==(240&m)){for(b=g,w=m,_=y;m=(C=n.distcode[_+((c&(1<<b+w)-1)>>b)])>>>16&255,y=65535&C,!(b+(g=C>>>24)<=u);){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=g,u-=g,n.back+=g,64&m){t.msg="invalid distance code",n.mode=30;break}n.offset=y,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(O=n.extra;u<O;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break t;if(n.offset>(h=p-l)){if((h=n.offset-h)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}f=h>n.wnext?(h-=n.wnext,n.wsize-h):n.wnext-h,h>n.length&&(h=n.length),v=n.window}else v=o,f=a-n.offset,h=n.length;for(l-=h=l<h?l:h,n.length-=h;o[a++]=v[f++],--h;);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;o[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===s)break t;s--,c|=i[r++]<<u,u+=8}if(p-=l,t.total_out+=p,n.total+=p,p&&(t.adler=n.check=(n.flags?L:M)(n.check,o,p,a-p)),p=l,(n.flags?c:U(c))!==n.check){t.msg="incorrect data check",n.mode=30;break}u=c=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break t;s--,c+=i[r++]<<u,u+=8}if(c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}u=c=0}n.mode=29;case 29:E=1;break t;case 30:E=-3;break t;case 31:return-4;default:return B}return t.next_out=a,t.avail_out=l,t.next_in=r,t.avail_in=s,n.hold=c,n.bits=u,(n.wsize||p!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&q(t,t.output,t.next_out,p-t.avail_out)?(n.mode=31,-4):(d-=t.avail_in,p-=t.avail_out,t.total_in+=d,t.total_out+=p,n.total+=p,n.wrap&&p&&(t.adler=n.check=(n.flags?L:M)(n.check,o,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==d&&0===p||4===e)&&E===z?-5:E)},e.inflateEnd=function(t){var e;return t&&t.state?((e=t.state).window&&(e.window=null),t.state=null,z):B},e.inflateGetHeader=function(t,e){return!t||!t.state||0==(2&(t=t.state).wrap)?B:((t.head=e).done=!1,z)},e.inflateSetDictionary=function(t,e){var n,i=e.length;return!t||!t.state||0!==(n=t.state).wrap&&11!==n.mode?B:11===n.mode&&M(1,e,i,0)!==n.check?-3:q(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,z)},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,o,r,a,s,l=t.state,c=t.next_in,u=t.input,d=c+(t.avail_in-5),p=t.next_out,h=t.output,f=p-(e-t.avail_out),v=p+(t.avail_out-257),g=l.dmax,m=l.wsize,y=l.whave,b=l.wnext,w=l.window,_=l.hold,x=l.bits,E=l.lencode,S=l.distcode,O=(1<<l.lenbits)-1,C=(1<<l.distbits)-1;t:do{for(x<15&&(_+=u[c++]<<x,x+=8,_+=u[c++]<<x,x+=8),n=E[_&O];;){if(_>>>=i=n>>>24,x-=i,0===(i=n>>>16&255))h[p++]=65535&n;else{if(!(16&i)){if(0==(64&i)){n=E[(65535&n)+(_&(1<<i)-1)];continue}if(32&i){l.mode=12;break t}t.msg="invalid literal/length code",l.mode=30;break t}for(o=65535&n,(i&=15)&&(x<i&&(_+=u[c++]<<x,x+=8),o+=_&(1<<i)-1,_>>>=i,x-=i),x<15&&(_+=u[c++]<<x,x+=8,_+=u[c++]<<x,x+=8),n=S[_&C];;){if(_>>>=i=n>>>24,x-=i,!(16&(i=n>>>16&255))){if(0==(64&i)){n=S[(65535&n)+(_&(1<<i)-1)];continue}t.msg="invalid distance code",l.mode=30;break t}if(r=65535&n,x<(i&=15)&&(_+=u[c++]<<x,(x+=8)<i)&&(_+=u[c++]<<x,x+=8),g<(r+=_&(1<<i)-1)){t.msg="invalid distance too far back",l.mode=30;break t}if(_>>>=i,x-=i,(i=p-f)<r){if(y<(i=r-i)&&l.sane){t.msg="invalid distance too far back",l.mode=30;break t}if(s=w,(a=0)===b){if(a+=m-i,i<o){for(o-=i;h[p++]=w[a++],--i;);a=p-r,s=h}}else if(b<i){if(a+=m+b-i,(i-=b)<o){for(o-=i;h[p++]=w[a++],--i;);if(a=0,b<o){for(o-=i=b;h[p++]=w[a++],--i;);a=p-r,s=h}}}else if(a+=b-i,i<o){for(o-=i;h[p++]=w[a++],--i;);a=p-r,s=h}for(;2<o;)h[p++]=s[a++],h[p++]=s[a++],h[p++]=s[a++],o-=3;o&&(h[p++]=s[a++],1<o)&&(h[p++]=s[a++])}else{for(a=p-r;h[p++]=h[a++],h[p++]=h[a++],h[p++]=h[a++],2<(o-=3););o&&(h[p++]=h[a++],1<o)&&(h[p++]=h[a++])}break}}break}}while(c<d&&p<v);_&=(1<<(x-=(o=x>>3)<<3))-1,t.next_in=c-=o,t.next_out=p,t.avail_in=c<d?d-c+5:5-(c-d),t.avail_out=p<v?v-p+257:257-(p-v),l.hold=_,l.bits=x}},function(t,e,n){"use strict";var I=n(37),D=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],F=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],R=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],z=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,i,o,r,a,s){for(var l,c,u,d,p,h,f,v,g,m=s.bits,y=0,b=0,w=0,_=0,x=0,E=0,S=0,O=0,C=0,k=0,P=null,T=0,j=new I.Buf16(16),A=new I.Buf16(16),M=null,L=0,y=0;y<=15;y++)j[y]=0;for(b=0;b<i;b++)j[e[n+b]]++;for(x=m,_=15;1<=_&&0===j[_];_--);if(_<x&&(x=_),0===_)o[r++]=20971520,o[r++]=20971520,s.bits=1;else{for(w=1;w<_&&0===j[w];w++);for(x<w&&(x=w),y=O=1;y<=15;y++)if((O=(O<<=1)-j[y])<0)return-1;if(0<O&&(0===t||1!==_))return-1;for(A[1]=0,y=1;y<15;y++)A[y+1]=A[y]+j[y];for(b=0;b<i;b++)0!==e[n+b]&&(a[A[e[n+b]]++]=b);if(h=0===t?(P=M=a,19):1===t?(P=D,T-=257,M=F,L-=257,256):(P=R,M=z,-1),y=w,p=r,S=b=k=0,u=-1,d=(C=1<<(E=x))-1,1===t&&852<C||2===t&&592<C)return 1;for(;;){for(g=a[b]<h?(v=0,a[b]):a[b]>h?(v=M[L+a[b]],P[T+a[b]]):(v=96,0),l=1<<(f=y-S),w=c=1<<E;o[p+(k>>S)+(c-=l)]=f<<24|v<<16|g|0,0!==c;);for(l=1<<y-1;k&l;)l>>=1;if(k=0!==l?(k&l-1)+l:0,b++,0==--j[y]){if(y===_)break;y=e[n+a[b]]}if(x<y&&(k&d)!==u){for(p+=w,O=1<<(E=y-(S=0===S?x:S));E+S<_&&!((O-=j[E+S])<=0);)E++,O<<=1;if(C+=1<<E,1===t&&852<C||2===t&&592<C)return 1;o[u=k&d]=x<<24|E<<16|p-r|0}}0!==k&&(o[p+k]=y-S<<24|64<<16|0),s.bits=x}return 0}},function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},,function(t,g,m){"use strict";!function(a){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},s=(Object.defineProperty(g,"__esModule",{value:!0}),g.IloveTool=void 0,m(77)),e=m(108),n=m(131),r=m(101),l=t(m(15)),c=m(155),u=m(13),d=m(17),p=m(16),h=m(126),f=m(127);function v(t){var n=this;void 0===t&&(t={}),this.initTool=function(){n.config=new r.Config({tool:n.tool,subtool:n.subtool,config:n.configData}),n.initProcessManager(),n.optionsManager=n.getOptionsManager(),n.initUploader(),n.beforeInit().then(function(){},function(){}),n.listenEventTaskIdChanged()},this.action=null,this.alias=null,this.tool=null,this.subtool=null,this.realTool=null,this.toolText=null,this.fileLimits=null,this.taskId=null,this.parentId=null,this.parentTool=null,this.covers_hidden=!1,this.token=null,this.userId=null,this.startServer=null,this.workerServer=null,this.level="user",this.levelTemp="user",this.userToken=null,this.servers=null,this.downloadUrl=null,this.error=null,this.site=null,this.country=null,this.isInitialized=!1,this.files=new s.FileStack,this.processManager=null,this.uploadManager=null,this.optionsManager=null,this.defaultOptions=null,this.configData=m(156),this.config=null,Object.assign(this,t),this.subtool||(this.subtool=this.tool),this.alias&&(this.subtool=this.alias),null!=this.userId&&l.configureScope(function(t){t.setUser({id:n.userId})}),null!=this.country&&l.configureScope(function(t){t.setTag("country",n.country)}),null!=this.taskId&&l.configureScope(function(t){t.setTag("taskId",n.taskId)}),this.servers&&this.servers.forEach(function(t,e){t.includes(".com")?n.servers[e]="//"+t:n.servers[e]="//"+t+"."+n.site+".com"}),null==this.workerServer&&this.servers&&(this.workerServer=this.servers[Math.floor(Math.random()*this.servers.length)]),window.Sentry=l,window.ilovetools={user:p.UserModel},f.Modal.init()}v.prototype.variableUserLevel=function(){var t=document.URL.split("#"),t=1<t.length?t[1]:null;if("n"!==t){for(var e=window.ilovepdfConfig.fp,n=!1,i=0;i<e;i++){var o,r=null;if(window.Cookies&&(o="fp","upscaleimage"==this.tool&&(o="fpu"),r=window.Cookies.get(o+i)),null==r){n=!0;break}}!0===n&&"premium"!==this.level&&(window.ilovepdfConfig.fileLimits=this.fileLimits=this.allFileLimits.temp_limits,"user"==this.level?this.allFileLimits.limits=this.allFileLimits.temp_limits:this.allFileLimits.registered_limits=this.allFileLimits.temp_limits,window.ilovepdfConfig.levelTemp=this.levelTemp="premium")}},v.prototype.init=function(){var t;"tool"==this.action&&null!=this.tool&&(t=this.tool==this.subtool?this.tool.replace("image",""):this.tool.replace("image",this.subtool),this.alias=t,(window.Cookies&&0!=window.cmp_ck||0==window.isgdpr)&&("pdfocr"==this.subtool&&(t="pdfocr"),window.Cookies.set("lastTool",t)),this.variableUserLevel(),this.initTool(),h.Network.checkNetwork()),this.isInitialized=!0},v.prototype.beforeInit=function(){var e=this,r=this;return new Promise(function(i,t){var o;null==r.parentId?i():(d.Tools.loadingFromPreviousStart(),window.ev("send","event","tool","chained",e.tool+"-"+e.parentTool),window.ev("event","chained",{to:e.tool,from:e.parentTool}),(o=new c.Chain({parentId:r.parentId,workerServer:r.workerServer,preWorker:r.preWorker,tool:r.tool,token:r.token})).makeChild().then(function(t){r.uploadManager.taskId=r.uploadManager.plupload.taskId=r.processManager.api.taskId=r.processManager.taskId=r.taskId=t.task,r.uploadManager.plupload&&r.uploadManager.plupload.uploader&&r.uploadManager.plupload.uploader&&r.uploadManager.plupload.uploader.settings&&(r.uploadManager.plupload.uploader.settings.multipart_params.task=r.uploadManager.taskId);try{r.optionsManager.limits&&r.optionsManager.limits.checkFileLimits(0,Object.keys(t.files).length)}catch(t){return d.Tools.loadingFromPreviousFail(),void a("#closePrevious").on("click",function(){d.Tools.loadingFromPreviousEnd(),i()})}for(var e in t.files){var n;t.files.hasOwnProperty(e)&&(n=d.Tools.randomId(),n=new s.File({id:n,canvasId:n,filename:t.files[e],name:t.files[e],server_filename:e,url:o.getFileUrl(t.task,e),loaded:100,percent:100,origin:"chained",runtime:"html5"}),r.files.addFile(n),r.optionsManager.fileAdded(n,r.uploadManager.id))}d.Tools.loadingFromPreviousEnd(),i()},function(e){""==e?(l.configureScope(function(t){t.setExtra("parent_id",r.parentId),t.setExtra("tool",r.tool)}),l.captureMessage("Error on child creation: Options fail",u.Severity.Error)):e.error&&e.error.type&&"TaskRestartError"==e.error.type?(l.configureScope(function(t){t.setExtra("parent_id",r.parentId),t.setExtra("tool",r.tool),t.setExtra("error",e)}),l.captureMessage("Error on child creation, parent removed",u.Severity.Error)):(l.configureScope(function(t){t.setExtra("parent_id",r.parentId),t.setExtra("tool",r.tool),t.setExtra("error",e)}),l.captureMessage("Error on child creation",u.Severity.Error)),d.Tools.loadingFromPreviousFail(),a("#closePrevious").on("click",function(){d.Tools.loadingFromPreviousEnd(),i()})}))})},v.prototype.initProcessManager=function(){this.processManager=new e.Process({taskId:this.taskId,tool:this.tool,site:this.site,subtool:this.subtool,options:{},startServer:this.startServer,workerServer:this.workerServer,files:this.files,token:this.token,userId:this.userId,downloadUrl:this.downloadUrl})},v.prototype.initUploader=function(){this.uploadManager=new n.UploadManager({id:"pickfiles",files:this.files,startServer:this.startServer,workerServer:this.workerServer,optionsManager:this.optionsManager,processManager:this.processManager,config:this.config,token:this.token,taskId:this.taskId,tool:this.tool,servers:this.servers})},v.prototype.getOptionsManager=function(){return null},v.prototype.getToolOptions=function(){return{processManager:this.processManager,tool:this.tool,subtool:this.subtool,toolText:this.toolText,startServer:this.startServer,workerServer:this.workerServer,defaultOptions:this.defaultOptions,files:this.files,pdfViewer:this.pdfViewer,config:this.config,fileLimits:this.fileLimits,allFileLimits:this.allFileLimits,level:this.level,levelTemp:this.levelTemp,userToken:this.userToken}},v.prototype.changeServer=function(t){this.uploadManager.workerServer=t,this.uploadManager.plupload.workerServer=t,this.uploadManager.plupload.uploader.setOption("url",t+"/"+this.uploadManager.plupload.apiVersion+"/upload"),"changeServer"in this.optionsManager&&this.optionsManager.changeServer(t),this.uploadManager.workerServer=t},v.prototype.listenEventTaskIdChanged=function(){var e=this;window.addEventListener("taskIdChanged",function(t){t=t.detail.taskId;e.processManager.taskId=t,e.uploadManager.plupload.changeTaskId(t),e.processManager.api.taskId=t,window.ilovepdfConfig.taskId=e.processManager.taskId=e.processManager.api.taskId=t})},g.IloveTool=v}.call(this,m(1))},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.ConfirmFilesProcessContext=void 0,n(47)),s=n(151),l=n(8),n=(o=a.ContextBase,r(c,o),c.prototype.getInitialState=function(){return new s.DefaultState},c.prototype.remove=function(){var t=this.getState();t._cleanup(),t.dispatchEvent(new l.IloveEvent("end",{unload:!0}))},c);function c(t){var e=o.call(this,t)||this;return e.contentName="ConfirmFilesProcessContext",e.triggerReason="triggerReason"in t?t.triggerReason:void 0,e.limits="limits"in t?t.limits:void 0,e.premiumFeatureName="premiumFeatureName"in t?t.premiumFeatureName:void 0,e.tool=t.tool,e}e.ConfirmFilesProcessContext=n},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultState=void 0,n(21)),l=n(8),c=a(n(61)),u=n(74),d=n(16),p=n(34),S=n(7),O=n(59),a=(o=s.StateBase,r(h,o),h.prototype.getInitialScreen=function(){return this.INITIAL_SCREEN},h.prototype.init=function(){this.setTexts(),this.showCorrectImage(),window.ev("sendOnce","event","limits","show",this.ctx.limits.getTool()),window.ev("eventOnce","limit-action",{action:"show",tool:this.ctx.limits.getTool()});var t=this.actionAllFilesYesBtn;if(t&&0<t.length)for(var e=0;e<t.length;e++)t[e].addEventListener("click",this._onYesButtonClick);var n=this.actionAllFilesNoBtn;if(n&&0<n.length)for(var i=0;i<n.length;i++)n[i].addEventListener("click",this._onNoButtonClick);this.initActions()},h.prototype.showFilesToRemove=function(){var t=this.ctx.limits.getLimitedFilenames();this.domRoot.querySelector("#confirmFiles").innerHTML=t.join("<br>")},h.prototype.showCorrectImage=function(){var t=this.domRoot.querySelector(".ocr__icon img"),e="limit";switch(this.ctx.triggerReason){case O.REASON.ERROR_FILES:e="files";break;case O.REASON.ERROR_SIZE:e="size";break;case O.REASON.ERROR_PAGES:e="pages"}t.src=t.src.replace("limit.svg",e+".svg")},Object.defineProperty(h.prototype,"actionAllFilesYesBtn",{get:function(){return this.domStateRoot.querySelectorAll("[next-from-confirm-files-yes]")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"actionAllFilesNoBtn",{get:function(){return this.domStateRoot.querySelectorAll("[next-from-confirm-files-no]")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"taskLimits",{get:function(){var t;return this.currentLimits&&this.premiumLimits||(t=[this.ctx.limits.fileLimits[this.ctx.tool],this.ctx.limits.allFileLimits.premium_limits[this.ctx.tool]],this.currentLimits=t[0],this.premiumLimits=t[1]),[this.currentLimits,this.premiumLimits]},enumerable:!1,configurable:!0}),h.prototype.setTexts=function(){var t,e,n,i,o,r=this.domRoot.querySelector("#confirmTitle"),a=this.domRoot.querySelector("#confirmCurrent"),s=this.domRoot.querySelector("#confirmPremium"),l=this.domRoot.querySelector(".limit-slide__slide__current"),c=this.domRoot.querySelector("#confirmRemove"),u=this.domRoot.querySelector("#confirmLimit"),d=this.domRoot.querySelector("#confirmUse"),p=this.domRoot.querySelector("[next-from-confirm-files-no]"),h=this.domRoot.querySelector("[next-from-confirm-files-yes]"),f=this.ctx.limits.canContinueWithoutPremium(),v=this.taskLimits,g=v[0],m=v[1];switch(this.ctx.triggerReason){case O.REASON.ERROR_FILES:if(!this.ctx.limits)throw"Limits object is needed to translate text";t=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesNum_title"]').innerHTML,r.innerHTML=S.Lang.tr(t,{n:g.files}),o=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesNum_added"]').innerHTML,l.setAttribute("data-title",S.Lang.tr(o,{n:this.ctx.limits.files.countNotIgnored()})),n=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesNum_premium"]').innerHTML,s.innerHTML=S.Lang.tr(n,{n:m.files}),e=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesNum_premium"]').innerHTML,a.innerHTML=S.Lang.tr(e,{n:g.files}),0==f&&(i=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesNum_cancel"]').innerHTML,c.innerHTML=S.Lang.tr(i,{n:m.files}));break;case O.REASON.ERROR_SIZE:if(!this.ctx.limits)throw"Limits object is needed to translate text";var y=g.mb,b=Math.round(100*y/1e3)/100,w=m.mb,_=Math.round(100*w/1e3)/100,x=Math.round(100*this.ctx.limits.files.getFileSizeNotIgnored()/1024/1024)/100,E=Math.round(100*x/1e3)/100;y<1e3?(t=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeMb_title"]').innerHTML,r.innerHTML=S.Lang.tr(t,{n:y})):(t=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeGb_title"]').innerHTML,r.innerHTML=S.Lang.tr(t,{n:b})),x<1e3?(o=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeMb_added"]').innerHTML,l.setAttribute("data-title",S.Lang.tr(o,{n:x}))):(o=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeGb_added"]').innerHTML,l.setAttribute("data-title",S.Lang.tr(o,{n:E}))),w<1e3?(n=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeMb_premium"]').innerHTML,s.innerHTML=S.Lang.tr(n,{n:w})):(n=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeGb_premium"]').innerHTML,s.innerHTML=S.Lang.tr(n,{n:_})),y<1e3?(e=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeMb_current"]').innerHTML,a.innerHTML=S.Lang.tr(e,{n:y})):(e=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeGb_current"]').innerHTML,a.innerHTML=S.Lang.tr(e,{n:b})),0==f&&(w<1e3?(i=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeMb_cancel"]').innerHTML,c.innerHTML=S.Lang.tr(i,{n:w})):(i=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeGb_cancel"]').innerHTML,c.innerHTML=S.Lang.tr(i,{n:_})));break;case O.REASON.ERROR_PAGES:if(!this.ctx.limits)throw"Limits object is needed to translate text";t=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesPages_title"]').innerHTML,r.innerHTML=S.Lang.tr(t,{n:g.pages}),o=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesPages_added"]').innerHTML,l.setAttribute("data-title",S.Lang.tr(o,{n:this.ctx.limits.files.getFilePagesNotIgnored()})),n=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesPages_premium"]').innerHTML,s.innerHTML=S.Lang.tr(n,{n:m.pages}),e=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesPages_current"]').innerHTML,a.innerHTML=S.Lang.tr(e,{n:g.pages}),0==f&&(i=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesPages_cancel"]').innerHTML,c.innerHTML=S.Lang.tr(i,{n:m.pages}))}v=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFiles_limit"]').innerHTML,u.innerHTML=S.Lang.tr(v,{n:this.ctx.limits.files.countNotLimited()}),u=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFiles_use"]').innerHTML,d.innerHTML=S.Lang.tr(u,{n:this.ctx.limits.files.countNotIgnored()}),0==f?(p.innerHTML=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFiles_cancel"]').innerHTML,h.querySelector("#confirmUse").remove(),this.initAllFeaturesTooltip(this.domRoot)):(i=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFiles_remove"]').innerHTML,c.innerHTML=S.Lang.tr(i,{n:this.ctx.limits.getLimitedFiles().length}),(v=c.querySelector("span"))&&v.setAttribute("title",this.getFilesToRemove()))},Object.defineProperty(h.prototype,"limitSilder",{get:function(){return this.domRoot.querySelector(".limit-slide__slide__free")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"addedSilder",{get:function(){return this.domRoot.querySelector(".limit-slide__slide__current")},enumerable:!1,configurable:!0}),h.prototype.initActions=function(){var t,e,n,i=this,o=this.taskLimits,r=o[0],a=o[1];switch(this.ctx.triggerReason){case O.REASON.ERROR_FILES:t=r.files,e=this.ctx.limits.files.countNotIgnored(),n=a.files;break;case O.REASON.ERROR_SIZE:t=r.mb,e=this.ctx.limits.files.getFileSizeNotIgnored(),n=1024*a.mb*1024;break;case O.REASON.ERROR_PAGES:t=r.pages,e=this.ctx.limits.files.getFilePagesNotIgnored(),n=a.pages}var s=100*t/n,l=100*e/n;s<3&&(s=3),l<4&&(l=4),this.sliderTimeout=window.setTimeout(function(){i.limitSilder.style.width=s+"%";var t=i.addedSilder;document.body.classList.contains("rtl")?t.style.right=l+"%":t.style.left=l+"%",t.classList.add("tooltip"),i.sliderTooltipTimeout=window.setTimeout(function(){p.Tooltip.init()},1e3)},200)},h.prototype._cleanup=function(){var t,e=this.addedSilder;window.clearTimeout(this.sliderTimeout),window.clearTimeout(this.sliderTooltipTimeout),e&&(null!=(t=null==(t=e)?void 0:t._tippy)&&t.destroy(),e.classList.remove("tooltip"))},h.prototype.getFilesToRemove=function(){var t=this.ctx.limits.getLimitedFilenames();return t.slice(0,5).join("<br>")+(5<t.length?"<br>...":"")},h.prototype.initAllFeaturesTooltip=function(t){var e,n=this;this.tooltipRoot||(this.tooltipRoot=t.querySelector(".new-premium__all-features-tooltip"),this.tooltipRoot&&(e=t.querySelector(".new-premium__all-features-tooltip__html-template"))&&(this.tooltipRoot.classList.add("tooltip"),window.setTimeout(function(){window.tippy(n.tooltipRoot,{allowHTML:!0,theme:"light new-premium-all-features-tooltip",content:e.innerHTML,placement:"bottom",arrow:!0,animation:"fade",trigger:"mouseenter",interactive:!0,zIndex:99999})},1e3)))},h);function h(){var e=null!==o&&o.apply(this,arguments)||this;return e.name="DefaultState",e.LAYOUT_TEMPLATE_NAME="confirm-files",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.changeScreen(e.getInitialScreen()),e.clearLoadingScreen(),e.init()},e._onYesButtonClick=function(t){t.preventDefault(),d.UserModel.isRealPremium()?e.dispatchEvent(new l.IloveEvent("end")):((t=new c.default({dialogName:"becomePremium"})).setContentBuilder(function(){return new u.PremiumContext({tool:e.ctx.tool,triggerReason:e.ctx.triggerReason,limits:e.ctx.limits})}),t.show(),t.addEventListener("closed",function(){d.UserModel.isPremium()&&(window.ev("sendOnce","event","limits","premium",e.ctx.tool+"-"+e.ctx.triggerReason),window.ev("eventOnce","limit-action",{action:"premium",tool:e.ctx.tool,reason:e.ctx.triggerReason}),e._cleanup(),e.dispatchEvent(new l.IloveEvent("end")))}))},e._onNoButtonClick=function(t){t.preventDefault(),!1===e.ctx.limits.canContinueWithoutPremium()?(window.ev("sendOnce","event","limits","cancel",e.ctx.tool+"-"+e.ctx.triggerReason),window.ev("eventOnce","limit-action",{action:"cancel",tool:e.ctx.tool,reason:e.ctx.triggerReason}),window.location.reload()):(window.ev("sendOnce","event","limits","free",e.ctx.tool+"-"+e.ctx.triggerReason),window.ev("eventOnce","limit-action",{action:"free",tool:e.ctx.tool,reason:e.ctx.triggerReason}),e._cleanup(),e.dispatchEvent(new l.IloveEvent("end")))},e}e.DefaultState=a},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e},f=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},v=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},c=(Object.defineProperty(e,"__esModule",{value:!0}),e.DriveUpload=void 0,n(129)),u=l(n(15)),l=(o=c.DriveService,r(d,o),d.prototype.getUploadParams=function(t){t={task:this.processManager.taskId,preview:1==window.processStart?0:1,pdfinfo:1==window.pdfinfo?1:0,drive_token:this.oauthToken,cloud_source:"drive",cloud_file:t.id};return t},d.prototype.drive=function(){var s,t,e,n,i,o,r,a,l,c,u=this;function d(){return f(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,window.gapi.client.load("https://www.googleapis.com/discovery/v1/apis/drive/v3/rest")];case 1:return t.sent(),a=!0,p(),[2]}})})}function p(){a&&l&&!function(){var t=this;o.callback=function(e){return f(t,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:if(void 0!==e.error)throw e;return r=e.access_token,s.oauthToken=r,[4,c()];case 1:return t.sent(),[2]}})})},o.requestAccessToken()}()}function h(t){var e,a;t.action===window.google.picker.Action.PICKED&&(e=t[window.google.picker.Response.DOCUMENTS],a=!1,JSON.stringify(t,null,2),e.forEach(function(t,n){var i=t[window.google.picker.Document.ID],o=(t[window.google.picker.Document.URL],t[window.google.picker.Document.NAME]),r=t[window.google.picker.Document.SIZE_BYTES];window.setTimeout(function(){return f(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return a?[2]:[4,window.gapi.client.drive.files.get({fileId:i,fields:"*"})];case 1:return e=t.sent(),JSON.stringify(e.result,null,2),e.result.originalFilename=o,e.result.fileSize=r,s.fileAdded(e.result).then(function(){s.uploadFile(e.result,n)},function(t){s.optionsManager.removeFile(e.result.id),a=!0}),[2]}})})},150*(n+1))}))}1==this.preloadSrc?this.preloadSrc=!1:(t=(s=this).scope,e=this.clientId,n=this.developerKey,i=this.appId,r=null,l=a=!1,c=function(){var t=window.google.picker.ViewId.DOCS,e=u.config.getConfig("mimeTypes"),t=("Pdf files"==e[0].title?t=window.google.picker.ViewId.PDFS:"Word files"==e[0].title?t=window.google.picker.ViewId.DOCUMENTS:"Excel files"==e[0].title?t=window.google.picker.ViewId.SPREADSHEETS:"Powerpoint files"==e[0].title?t=window.google.picker.ViewId.PRESENTATIONS:"Image files"==e[0].title&&(t=window.google.picker.ViewId.DOCS_IMAGES),new window.google.picker.View(t));null!=e[0].mime&&t.setMimeTypes(e[0].mime),(new window.google.picker.PickerBuilder).enableFeature(window.google.picker.Feature.NAV_HIDDEN).enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED).setDeveloperKey(n).setAppId(i).setOAuthToken(r).addView(t).addView(new window.google.picker.DocsUploadView).setCallback(h).build().setVisible(!0)},window.gapi.load("client:picker",d),o=window.google.accounts.oauth2.initTokenClient({client_id:e,scope:t,callback:""}),l=!0,p())},d.prototype.fileAdded=function(t){t.runtime="html5",t.percent=0,t.service="drive",t.origin="drive",t.name=t.originalFilename,t.filename=t.originalFilename,t.uri=this.URL_API+"files/"+t.id+"?alt=media",t.url=this.getThumbnailLink(t.thumbnailLink),t.size=null!=(e=t.size)?e:t.fileSize,t.token=this.oauthToken,t.canvasId=t.id,t.extension=t.fileExtension;try{t.width=t.imageMediaMetadata.width,t.height=t.imageMediaMetadata.height}catch(t){}if(t.mimeType)switch(t.mimeType){case"application/vnd.google-apps.document":t.extension="docx";break;case"application/vnd.google-apps.presentation":t.extension="pptx";break;case"application/vnd.google-apps.spreadsheet":t.extension="xlsx"}this.optionsManager.files.addFile(t);var e=this.optionsManager.checkLimits([t],"drive");return 0<e.length?this.optionsManager.fileAdded(e[0],"drive"):Promise.reject()},d.prototype.uploadFile=function(n,t){var e=this,i=this,t=500*(t=void 0===t?0:t);window.setTimeout(function(){e.processManager.api.request("POST","upload",i.getUploadParams(n)).then(function(t){i.processManager.files.updateFile(n.id,{process:100,percent:100,server_filename:t.server_filename}),i.optionsManager.fileUploaded(n.id,t)},function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}e.file=n.id,n.error=!0,i.processManager.files.updateFile(n.id,{process:0,percent:0,error:!0}),i.optionsManager.invalidUpload({error:"CloudError",file:{id:n.id}}),u.configureScope(function(t){t.setExtra("error",e)}),u.captureMessage("Upload from drive error"),i.optionsManager.invalidUpload(e)})},t)},d.prototype.downloadFile=function(i){var o=this;return new Promise(function(e,t){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.onload=function(){var t;200===n.status&&(t=n.response,e(t))},n.onprogress=function(t){t.loaded,t.total},n.open("GET",o.URL_API+"files/"+i.id+"?alt=media"),n.setRequestHeader("Authorization","Bearer "+o.oauthToken),n.send()})},d);function d(t){var n=o.call(this,t=void 0===t?{}:t)||this;return n.getThumbnailLink=function(t){var e;return(null==(e=n.config.getConfig("uploader"))?void 0:e.drive.thumbnailLinkWithoutSize)?n.substringBeforeChars(t,"="):t},n.substringBeforeChars=function(t,e){e=t.lastIndexOf(e);return-1!==e?t.substring(0,e):t},n.optionsManager=null,n.processManager=null,n.pickerApiLoaded=!1,n.oauthToken=null,n.userEmail=null,n.id=null,n.config=null,Object.assign(n,t),n.start(),n}e.DriveUpload=l},function(t,p,h){"use strict";!function(i){var o,n,t=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),e=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},s=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},l=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},c=(Object.defineProperty(p,"__esModule",{value:!0}),p.DropboxUpload=void 0,h(130)),u=e(h(15)),e=(n=c.DropboxService,t(d,n),d.prototype.fileAdded=function(t){return t.id=t.id.replace(":",""),t.runtime="html5",t.percent=0,t.service="dropbox",t.url=t.link,t.size=t.bytes,t.canvasId=t.id,t.filename=t.name,t.origin="dropbox",this.optionsManager.files.addFile(t),this.optionsManager.checkLimits([],""),this.optionsManager.fileAdded(t,"dropbox")},d.prototype.getUploadParams=function(t){return{task:this.processManager.taskId,cloud_source:"dropbox",cloud_file:t.link,dropbox_link:t.link,preview:1==window.processStart?0:1,pdfinfo:1==window.pdfinfo?1:0}},d.prototype.uploadFile=function(n){var i=this;this.processManager.api.request("POST","upload",this.getUploadParams(n)).then(function(t){i.processManager.files.updateFile(n.id,{process:100,percent:100,server_filename:t.server_filename}),i.optionsManager.fileUploaded(n.id,t)},function(e){n.error=!0,i.processManager.files.updateFile(n.id,{process:0,percent:0,error:!0}),i.optionsManager.invalidUpload({error:"CloudError",file:{id:n.id}}),u.configureScope(function(t){t.setExtra("error",JSON.parse(e))}),u.captureMessage("Upload from dropbox error")})},d);function d(t){var e=n.call(this,t=void 0===t?{}:t)||this;return e.dropbox=function(){var r=e,t=e.config.getConfig("mimeTypes")[0].extensions.split(","),n=[];i.each(t,function(t,e){n.push("."+e)}),window.Dropbox.choose({success:function(o){return s(e,void 0,void 0,function(){var e,n,i;return l(this,function(t){switch(t.label){case 0:e=0,n=o,t.label=1;case 1:return e<n.length?(i=n[e],[4,r.fileAdded(i)]):[3,4];case 2:t.sent(),r.uploadFile(i),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},cancel:function(){},error:function(e){u.configureScope(function(t){t.setExtra("error",e)}),u.captureMessage("Dropbox upload error")},linkType:"direct",multiselect:!0,extensions:n})},e.optionsManager=null,e.processManager=null,e.id=null,e.config=null,Object.assign(e,t),e.start(),e}p.DropboxUpload=e}.call(this,h(1))},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},r=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},o=(Object.defineProperty(e,"__esModule",{value:!0}),e.WsUpload=void 0,a.prototype.fileArrayAdded=function(o){return i(this,void 0,void 0,function(){var e,n,i;return r(this,function(t){switch(t.label){case 0:e=0,n=o,t.label=1;case 1:return e<n.length?((i=n[e]).id=this.escape(i.id),i.canvasId=i.id,this.optionsManager.files.getFile(i.id)?[2]:(this.optionsManager.files.addFile(i),[4,this.optionsManager.fileAdded(i,"WebSocket")])):[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},a.prototype.fileRemoved=function(t){t=this.escape(t),this.optionsManager.removeFile(t),this.optionsManager.fileRemoved(t)},a.prototype.fileUploaded=function(t,e){t=this.escape(t),this.optionsManager.files.updateFile(t,{server_filename:e,percent:100}),this.optionsManager.fileChanged(t)},a.prototype.fileProgressUpdated=function(t,e){t=this.escape(t),this.optionsManager.files.updateFile(t,{percent:e}),this.optionsManager.fileChanged(t)},a.prototype.escape=function(t){for(var e="",n=0;n<t.length;n++){var i=t[n];e+=Number(i.charCodeAt(0)).toString(36)}return"str"+e},a);function a(t){t=t.optionsManager;this.optionsManager=t}e.WsUpload=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chain=void 0;var o=n(48);function i(t){this.parentId=null,this.tool=null,this.token=null,this.preWorker=null,Object.assign(this,t)}i.prototype.makeChild=function(){var t=this,i=this;return new Promise(function(e,n){null==i.parentId?e():(t.api=new o.Api({taskId:null,tool:i.tool,workerServer:i.workerServer,preWorker:i.preWorker,token:i.token}),t.api.next(i.parentId,i.tool,i.preWorker).then(function(t){e(t)},function(t){n(t)}))})},i.prototype.getFileUrl=function(t,e){return this.api.nextFile(t,e)},e.Chain=i},function(t){t.exports=JSON.parse('{"default":{"mimeTypes":[{"title":"All files"}],"multiSelection":true}}')},function(t,S,O){"use strict";!function(s){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},r=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},a=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},n=(Object.defineProperty(S,"__esModule",{value:!0}),S.OptionsManager=void 0,O(81)),l=O(59),c=O(7),u=O(34),d=t(O(15)),p=O(13),h=O(17),f=O(16),v=O(99),g=O(73),m=O(89),y=O(158),b=O(74),w=O(79),_=e(O(61)),x=e(O(65));function E(t){void 0===t&&(t={}),this.backCount=0,this.forwardCount=0,this.backRefreshInterval=null,this._BACKREFRESH_TIME=3e5,this.limitDialogOpen=null,this.config={},this.processManager=null,this.tool=null,this.subtool=null,this.toolText="Process",this.template=null,this.defaultOptions={},this.fileLimits=null,this.allFileLimits=null,this.level="user",this.userToken=null,this.workerServer=null,this.startServer=null,this.hideRotation=!1,this.levelTemp="user",this.options={},this.values={},this.files=null,this.started=!1,this.workareaStarted=!1,this.viewManager=null,this.limits=null,this.ignoreLimits=!1,this.damagedRemove=!1,this.premiumTask=!1,this.processBtnPulseTimeout=7e3,this.showFileGroups=!0,this.processBlock=!1,this.checkServerStatusOnStart=!1,Object.assign(this,t),null==this.subtool&&(this.subtool=this.tool),null==this.toolText&&(this.toolText=this.tool),this.limits=new l.Limits({files:this.files,fileLimits:this.fileLimits,allFileLimits:this.allFileLimits,tool:this.tool,subtool:this.subtool}),this.removedFiles=0,window.processStart=!1,window.iuser=f.UserModel,g.LinkTitle.disable(s("#pickfiles")),this.tryInitByParent(),this.removeFilesOnLimitReatched="b"==(null!=(t=window.ab)&&t.limits?window.ab.limits:"a"),this.checkBackRefresh()}E.prototype.tryInitByParent=function(){var n=this;0<this.files.files.length&&(this.init(),s.each(this.files.files,function(t,e){n.fileAdded(e,"parent").then(function(){},function(){})}))},E.prototype.init=function(){!0!==this.started&&(s("#sidebar").prepend(this.getInnactiveView()),this.startPanels(),this.started=!0),this.initViewManager()},E.prototype.initViewManager=function(){},E.prototype.checkLimits=function(t,e){var n=this.getLimit();return this.actionLimitReatched(n),t=null===n||1!=this.limits.hasSurpasedLimits(n)&&1!=this.removeFilesOnLimitReatched?t:this.removeLimitFiles(t,!0)},E.prototype.getLimit=function(){return this.limits.checkFileLimits(this.files.getFileSizeNotIgnored(),this.files.countNotIgnored(),this.files.getFilePagesNotIgnored())},E.prototype.actionLimitReatched=function(t,e){var n,i=this;void 0===e&&(e=!1),null!==t?(window.ib&&window.ib.set("p","l"),this.setLimitedFiles(),n=this.limits.hasSurpasedLimits(t),!e&&this.alertElement&&!n&&!0!==this.removeFilesOnLimitReatched||null!=this.limitDialogOpen&&!0!==this.removeFilesOnLimitReatched?this.displayLimitsAlert():(this.limitDialogOpen=this.displayLimitsDialog(t),this.limitDialogOpen&&this.limitDialogOpen.addEventListener("closed",function(t){var e;f.UserModel.isRealPremium()?(i.files.resetLimitedFiles(),i.hideLimitsAlert(),i.limits.sendEventLimitsChanged()):null==(e=i.getLimit())||i.limits.hasSurpasedLimits(e)?(i.limits.sendEventLimitsChanged(),i.hideLimitsAlert()):i.displayLimitsAlert(),i.limitDialogOpen=null}))):(this.files.resetLimitedFiles(),this.hideLimitsAlert())},Object.defineProperty(E.prototype,"alertElementId",{get:function(){return"limitAlert"},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"alertElement",{get:function(){return document.getElementById(this.alertElementId)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"alertElementHeader",{get:function(){return document.querySelector("#"+this.alertElementId+" .limit-alert__header")},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"alertElementContent",{get:function(){return document.querySelector("#"+this.alertElementId+" .limit-alert__content")},enumerable:!1,configurable:!0}),E.prototype.displayLimitsAlert=function(){var t=this,e=this.alertElement,n=this.alertElementHeader,i=this.alertElementContent,n=(e||((e=document.createElement("div")).id=this.alertElementId,e.classList.add("limit-alert"),(n=document.createElement("div")).classList.add("limit-alert__header"),(i=document.createElement("div")).classList.add("limit-alert__content"),i.innerHTML=n.innerHTML=c.Lang.t("upgradePremium"),e.appendChild(n),e.appendChild(i),e.addEventListener("click",function(){t.actionLimitReatched(t.getLimit(),!0)}),document.getElementById("workArea").appendChild(e)),this.limits.getLimitTexts());i.innerHTML="<div>"+n.current+"</div><div>"+n.premium+"</div>",e.style.display="block",e.classList.add("limit-alert--"+n.limit)},E.prototype.hideLimitsAlert=function(){this.alertElement&&(this.alertElement.style.display="none",this.limits.resetEventSent())},E.prototype.displayLimitsDialog=function(t,e){var n=this,i=(void 0===e&&(e=!1),this.limits.getNextLimit(t)),e=e||!1===i.nextValue,i=null,o=w.Dialog.getVisibleDialogs().find(function(t){return"PremiumContext"===t.getContent().contentName||"NoMoreLimitsContext"===t.getContent().contentName});if(t===l.REASON.ERROR_FEATURE){if(o)return;i=function(){return new b.PremiumContext({tool:n.limits.getTool(),limits:n.limits,triggerReason:t})}}else if(e)i=function(){return new y.NoMoreLimitsContext({tool:n.limits.getTool(),limits:n.limits,triggerReason:t})};else{if(o)return;i=function(){return new b.PremiumContext({tool:n.limits.getTool(),limits:n.limits,triggerReason:t})}}e=new _.default({dialogName:"Limits"});return e.setContentBuilder(i),e.show(),s("#pickfiles").addClass("limitsShow"),e},E.prototype.removeLimitFiles=function(t,e){void 0===e&&(e=!1);var n=this.limits.checkFileLimits(this.files.getFileSizeNotIgnored(),this.files.countNotIgnored()),i=this.limits.hasSurpasedLimits(n);if(null!==n&&(1==e&&1==i||1==this.removeFilesOnLimitReatched)){n=t.pop();try{n&&([].push(n.id),this.files.removeFile(n.id,!0))}catch(t){}if(0<t.length)try{t=this.removeLimitFiles(t,e)}catch(t){}}return t},E.prototype.setLimitedFiles=function(){this.limits.setFileLimits()},E.prototype.fileAdded=function(i,t,o){var r=this,a=(void 0===o&&(o=!1),this);return i.name&&(i.name=m.TextHelper.stripTags(i.name).replace('"',"")),i.filename&&(i.filename=m.TextHelper.stripTags(i.filename).replace('"',"")),new Promise(function(e,n){1==o&&(a.limits.addIgnoredFile(i.id),a.processManager.addIgnoredFile(i.id),a.files.updateFile(i.id,{ignored:!0}));var t=a.limits.checkFileLimits(a.files.getFileSizeNotIgnored(),a.files.countNotIgnored(),a.files.getFilePagesNotIgnored()),t=(null!==t&&(a.limits.setFileLimits(),r.alertElement&&0==r.limits.hasSurpasedLimits(t)?r.displayLimitsAlert():r.displayLimitsDialog(t),a.setFilecount()),a.makeWorkarea().then(function(){},function(t){d.captureMessage("Fail: createworkarea"),n()}),null),t=("function"==typeof i.getSource&&(t=i.getSource().getSource()),{name:i.name,id:i.id,canvasId:i.canvasId,tool:a.tool,subtool:a.subtool,size:i.size,source:t,url:i.url,uri:i.uri,token:i.token,runtime:i.runtime,service:i.service,thumbnail:i.thumbnail,rotable:i.rotable});i.extension&&(t.name+="."+i.extension),0==a.config.getConfig("multiSelection")&&s("#uploader").hide(),a.viewManager.addFileDOM(t).then(function(t){a.setValue("numPages",t.numPages),a.printValues("numPages",t.numPages),a.setValue("width",t.width),a.printValues("height",t.height),a.fileReady(i),1!=o&&a.setFilecount(),a.initFileNameEditable(i.id),u.Tooltip.init(),e({})},function(t){"PasswordException"==t.name?(s("#"+i.id).attr("title",c.Lang.t("paswordRequired")).attr("data-title",c.Lang.t("paswordRequired")),u.Tooltip.setContent(s("#"+i.id),c.Lang.t("paswordRequired"))):(s("#"+i.id).attr("title",c.Lang.t("damaged file?")).attr("data-title",c.Lang.t("damaged file?")),u.Tooltip.setContent(s("#"+i.id),c.Lang.t("damaged file?"))),s("#"+i.id+" .file__info__size").hide(),u.Tooltip.init();try{if("removeFile"==t.name)return void n()}catch(t){}"function"==typeof a.damagedAction&&a.damagedAction(),1==a.damagedRemove?(a.fileAddError(i.id),n()):(a.setFilecount(),u.Tooltip.init(s("#"+i.id+" .remove")),"noRenderMode"!=t&&s("#cover-"+i.canvasId).addClass("error"),e({}))}),0==a.config.getConfig("multiSelection")&&s("#uploader").hide()})},E.prototype.initFileNameEditable=function(t){var e,n,i=this;!1!==this.nameEditable&&0!=(e=s("#"+t+" .file__info__name")).length&&(n=e.text().split(".").pop(),e.attr("contenteditable","true"),e.attr("data-ext","true"),e.attr("data-orig",e.text()),e.on("change keyup mouseup",function(){i.files.updateFile(t,{rename:m.TextHelper.stripTags(e.text().replace(/"/g,""))})}),e.on("blur",function(){e.html(m.TextHelper.stripTags(e.text().replace(/"/g,""))),""!=e.text()&&e.text()!="."+n||e.html(e.attr("data-orig")),e.text()==n&&e.html(n+"."+n),e.text().split(".").pop()!=n&&(e.html(e.text()+"."+n),i.files.updateFile(t,{rename:e.text()}))}))},E.prototype.setFilecount=function(){var t=this.files.countNotIgnored(),e=s("#filecount");0==e.length?s("#uploader").prepend('<div id="filecount">'+t+"</div>"):e.html(t.toString())},E.prototype.fileUploaded=function(t,e){this.files.updateFile(t,e);var n;null!==this.viewManager&&(null!=(n=this.files.getFile(t))&&"thumbnail"in n&&null!=n.thumbnail&&(n.thumbnail=this.workerServer+"/thumbnails/"+n.thumbnail),this.viewManager.fileUploaded(t,e))},E.prototype.changeServer=function(t){this.processManager.workerServer=t,this.processManager.api.workerServer=t,this.workerServer=t},E.prototype.fileReady=function(t){var e=t.canvasId,n=t.canvasId;this.limits.checkHasLimits("pages")&&0==this.checkLimits([t],null).length?(this.viewManager.removeFile(e),this.fileRemoved(n)):(this.fileChanged(t),e=s("#"+t.id),n=h.Tools.bytesToSize(t.size),0<e.length&&"width"in t&&"height"in t?(n=n+" - "+t.width+"x"+t.height,e.attr("data-width",t.width).attr("data-height",t.height)):"file"in t&&t.file&&"numPages"in t.file&&(n=n+" - "+c.Lang.t("numPages",{numPages:t.file.numPages})),this.checkRotation(t),e.attr("title",n).attr("data-title",n).addClass("tooltip"),u.Tooltip.init(),this.setFilecount())},E.prototype.checkRotation=function(e){if(!0===this.hideRotation)s(".rotate").hide();else try{var t=e.name.substr(e.name.lastIndexOf(".")+1).toUpperCase();-1==["JPG","JPEG","PNG","GIF","PDF","DOC","DOCX","XLS","XLSX","PPT","PPTX"].indexOf(t)&&s("#"+e.canvasId+" .rotate").hide()}catch(t){s("#"+e.canvasId+" .rotate").hide()}},E.prototype.makeWorkarea=function(){var n=this,i=this;return new Promise(function(e,t){return r(n,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return 1==i.workareaStarted?[3,2]:(i.workareaStarted=!0,s("#contentArea").hide(),s(".tool__workarea__rendered").css("display","flex").hide().fadeIn(),0==i.showFileGroups&&s("#fileGroups").hide(),i.moveUploader(),[4,i.workareaActions()]);case 1:t.sent(),t.label=2;case 2:return e({}),[2]}})})})},E.prototype.workareaActions=function(){},E.prototype.moveUploader=function(){var t=s("#uploader"),e=(u.Tooltip.init(),s("#uploadDisk").on("click",function(){s("#uploader input").trigger("click")}),t.attr("data-title"));void 0!==e&&"false"!==e||(e=t.attr("title"),t.attr("data-title",e)),t.attr("title",""),t.hide(),s("body").addClass("sidebar-active"),s("body").addClass("tool-"+this.tool),s(".uploader__extra a").removeClass("tooltip--right").addClass("tooltip--left"),this.init(),t.detach(),t.addClass("box"),s("#settingsToogle").on("click",function(){s(".tool").toggleClass("tool--toggle")}),s("#orderByName").on("click",function(){s(this).toggleClass("order--desc");var t=s(this).data("order");"asc"==t?s(this).data("order","desc"):s(this).data("order","asc"),s("#fileGroups > div").tsort({order:t,natural:!0})});try{t.insertAfter("#settingsToogle")}catch(t){}this.onUploaderMoved(t)},E.prototype.onUploaderMoved=function(t){var e=this;window.googletag&&window.googletag.pubads&&window.googletag.pubads().setTargeting&&window.googletag.pubads().setTargeting("pos","wrk"),e.config.getConfig("multiSelection")&&t.fadeIn("slow",function(){e.onUploaderMovedAndShow()})},E.prototype.onUploaderMovedAndShow=function(){s("#pickfiles").addClass("tooltip"),u.Tooltip.enable(s("#pickfiles")),0<s(".modal.show").length||s("#pickfiles").hasClass("limitsShow")||(u.Tooltip.show(s("#pickfiles"),5e3),window.tooltip=u.Tooltip)},E.prototype.checkProcessBtn=function(){"no"==s(".option__panel--active").data("process")?s("#processTask").fadeOut():(s("#processTask").fadeIn(),this.checkProcessPulse())},E.prototype.checkProcessPulse=function(){var t;window.Cookies&&1!=s("#processTask").is(":disabled")&&(t=parseInt(x.default.get("pulse"))||0,t++,window.Cookies.set("pulse",""+t),t<3)&&setTimeout(function(){s("#processTask").addClass("pulse")},this.processBtnPulseTimeout)},E.prototype.startPanels=function(){1!=this.panelsStarted&&(this.panelsStarted=!0,this.initDefaultOptions(),this.initDefaultValues(),this.initActions(),this.initFromUrl(),this.addButtonTask(),this.checkProcessBtn(),this.premiumActions())},E.prototype.premiumActions=function(){f.UserModel.isRealPremium()&&s("#ocr-options").show()},E.prototype.initDefaultOptions=function(){var n=this;s.each(n.defaultOptions,function(t,e){n.setOption(t,e)})},E.prototype.initDefaultValues=function(){var n=this;s.each(n.defaultOptions,function(t,e){n.setValue(t,e)}),n.setValue("numPages",0)},E.prototype.initFromUrl=function(){var t=location.hash.substr(1).split(",");if("process"!=t[0]){var e="",n="";t[0]&&(e=t[0]),t[1]&&(n=t[1]);try{""!=e&&0==s("#"+e).length&&(e="")}catch(t){e=""}if(""==e||"undefined"==e?(e=s(".option__panel--active").attr("id"),this.callPanelActions(e)):s(".option__panel").first().attr("id")!=e&&(s(".option__panel").first().removeClass("option__panel--active").addClass("option__panel--inactive"),s("#"+e).addClass("option__panel--active"),this.callPanelActions(e)),s("#"+e+" .option__tab__select__item").removeClass("option--active"),s("#"+e+" .option__tab__content").removeClass("option__tab__content--active"),void 0!==n&&""!=n)try{s("#tab-"+n).addClass("option--active"),s("#tab-content-"+n).addClass("option__tab__content--active"),this.callTabActions(n)}catch(t){}else{t=s("#"+e+" .option__tab__select__item");0<t.length&&(n=t.first().attr("data-target"),t.first().trigger("click"))}}},E.prototype.initActions=function(){function e(t){var e=(s(t).val()-parseInt(s(t).attr("min")))/(parseInt(s(t).attr("max"))-parseInt(s(t).attr("min"))),n=(h.Tools.isRTL()&&(e=1-e),h.Tools.isRTL()?"#7A9FAB":"#E5322D"),i=h.Tools.isRTL()?"#E5322D":"#7A9FAB";s(t).attr("data-value",e),s(t).css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+e+", "+n+"), color-stop("+e+", "+i+"))")}var o=this,t=(window.addEventListener("fileRemoved",function(t){o.fileRemoved(t.detail)},!1),this.initBackFromProcessListenEvent(),1<s(".option__panel").length&&window.addEventListener("popstate",function(t){var t=t.state,e=null,e=null===t?s(".option__panel").first().attr("id"):t.id;s("#"+e).addClass("option__panel--inactive"),s(".option__panel").removeClass("option__panel--active"),s("#"+e).removeClass("option__panel--inactive").addClass("option__panel--active"),o.checkProcessBtn(),o.callPanelActions(e)}),s(".option__description__more__toggle").each(function(){s(this).on("click",function(t){t.stopPropagation(),s(this).parent().toggleClass("option__description__more--extend")})}),s(".option__select__item").on("click",function(){if(s(this).hasClass("option--disabled"))return!0;s(this).siblings().removeClass("option--active"),s(this).siblings().find(".option").removeClass("option--active"),"panel"!=s(this).data("action")&&s(this).addClass("option--active"),o.options[s(this).data("name")]=s(this).data("value")}),s(".option__tab__select__item").on("click",function(){if(s(this).hasClass("option--disabled"))return!0;var t=s(this).data("name"),e=s(this).data("value"),t=(s(this).siblings().removeClass("option--active"),s(this).addClass("option--active"),"undefined"!=t&&o.setOption(t,e),s(this).data("target")),e=(s(this).parent().parent().find(".option__tab__content").removeClass("option__tab__content--active"),s("#tab-content-"+t).addClass("option__tab__content--active"),s(this).parent().parent().parent().attr("id")),t=s(this).data("target"),n=s(this).attr("id"),i={id:n};history.pushState(i,n,"#"+e+","+t),o.checkProcessBtn(),o.callTabActions(t)}),s(".option__image__item").on("click",function(t){if(s(this).hasClass("option--disabled"))return!0;var e=s(this).data("name"),n=s(this).data("value");s(this).siblings().removeClass("option--active"),s(this).addClass("option--active"),null!=e&&o.setOption(e,n)}),s(".option__panel .back").each(function(){s(this).on("click",function(){if(s(this).hasClass("option--disabled"))return!0;var t=s(this).data("target"),e=s(".option__panel--active").attr("id");history.pushState({id:e},e,"#"),s("#"+t).addClass("option__panel--active"),s(".option__panel--active").removeClass("option__panel--active"),s("#"+t).removeClass("option__panel--inactive").addClass("option__panel--active"),o.checkProcessBtn(),o.callPanelActions(t)})}),s("[data-action]").each(function(){s(this).hasClass("option--disabled")||s(this).on("click",function(){o.callFormAction(s(this).data("action"),s(this),"click")})}),s(".option__panel .option").on("click",function(t){if(s(this).hasClass("option--disabled"))return!0;var e=s(this).data("name"),n=s(this).data("value");e&&n&&(o.options[e]=n,s('*[data-show="'+e+'"]').html(n))}),null),n=(s("input.option").on("keyup mouseup",function(){clearTimeout(t);var n=s(this);t=setTimeout(function(){var t=n.attr("name"),e=n.val();o.setOption(t,e),null!=n.data("action")&&o.callFormAction(n.data("action"),n,"keyup")},1e3)}),s(".option:checkbox").change(function(){var t=s(this).attr("name"),e=s(this).is(":checked"),n=null;1==e&&s(this)[0].hasAttribute("data-checked")?n=s(this).attr("data-checked"):0==e&&s(this)[0].hasAttribute("data-unchecked")&&(n=s(this).attr("data-unchecked")),null!=n?o.setOption(t,n):o.setOption(t,e)}),s(".option:radio").change(function(){var t=s(this).attr("name"),e=s('[name="'+t+'"]:checked').val();null!=e&&o.setOption(t,e)}),s("select.option").on("change",function(){var t=s(this).attr("name"),e=s(this).val();o.setOption(t,e)}),s("textarea.option").on("keyup change",function(){var t=s(this).attr("name"),e=s(this).val();o.setOption(t,e)}),s(".option--radio").on("click",function(){if(s(this).hasClass("option--disabled"))return!0;s(this).hasClass("option--active")?(o.setValue(s(this).data("name"),s(this).data("inactive")),o.options[s(this).data("name")]=s(this).data("inactive")):(o.setValue(s(this).data("name"),s(this).data("active")),o.options[s(this).data("name")]=s(this).data("active"))}),s('input[type="range"]').each(function(){e(this)}),null);s('input[type="range"]').change(function(){null!==n&&clearTimeout(n);var t=this;n=setTimeout(function(){e(t)},1e3)})},E.prototype.initSidetoolsActions=function(){},E.prototype.fileRemoved=function(t){this.removedFiles++,this.fileChanged(t),this.setFilecount(),this.checkLimits(null,null)},E.prototype.fileChanged=function(t){this.updateOrderStatus(),0<this.files.countNotIgnored()?("string"!=typeof t&&(null!=t&&"upBy"in t&&"pickwatermark"==t.upBy?this.checkProcessBtn():this.enableProcessBtn()),s(".tool__sidebar__inactive").fadeOut(),s(".tool__sidebar").css("overflow-y","auto")):(this.disableProcessBtn(c.Lang.t("No file selected.")),s(".tool__sidebar").css("overflow-y","hidden"),s(".tool__sidebar__inactive").css("display","flex").hide().fadeIn(),this.showUploaderTooltip())},E.prototype.showUploaderTooltip=function(){u.Tooltip.show(s("#pickfiles"),8e3)},E.prototype.updateOrderStatus=function(){1<this.files.countNotIgnored()?s("#orderByName").css("display","flex"):s("#orderByName").hide()},E.prototype.addButtonTask=function(){var t=this;0==s("#processTask").length&&(s(".main .tool").append(n.OptionsTemplate.processButton({tool:t.tool,toolText:t.toolText})),s("#processTask").on("click",function(){1!=t.premiumTask||f.UserModel.isPremium()||"premium"==window.ilovepdfConfig.levelTemp?(s("#processTask").attr("disabled","true"),Math.floor(((new Date).getTime()-window.startTime)/1e3),t.processTask()):(s('#highres-options [data-value="0"]').trigger("click"),t.displayLimitsDialog(l.REASON.ERROR_FEATURE),window.ev("send","event","limits","feature-exceeded","pdfa"),window.ev("event","limit",{reason:"feature",tool:"pdfa"}))}))},E.prototype.setOption=function(t,e){if("undefined"==t)throw"InvalidOption "+t+":"+e;this.options[t]=e,this.values[t]=e,this.printOption(t,e)},E.prototype.deleteOption=function(t){if("undefined"==t)throw"InvalidOption "+t;delete this.options[t],delete this.values[t]},E.prototype.setValue=function(t,e){this.values[t]=e,this.printValues(t,e)},E.prototype.printOption=function(e,n){if(null!=n&&""!=n.toString()){try{s('*[data-name="'+e+'"]').removeClass("option--active"),s('*[data-name="'+e+'"][data-value="'+n+'"]').addClass("option--active")}catch(t){d.configureScope(function(t){t.setExtra("dataKey",e),t.setExtra("dataValue",n)}),d.captureMessage("setting option error")}s('input[type="text"][name="'+e+'"]').val(n),s('input[type="number"][name="'+e+'"]').val(n),s('input[type="color"][name="'+e+'"]').val(n),s('input[type="checkbox"][name="'+e+'"]').attr("checked",n);try{s('input[type="radio"][name="'+e+'"][value="'+n.toString()+'"]').attr("checked","true")}catch(t){}s('select[name="'+e+'"]').val(n),s('.option--radio[data-name="'+e+'"]').each(function(){s(this).attr("data-active")==n?s(this).addClass("option--active"):s(this).removeClass("option--active")}),s('input[type="checkbox"][name="'+e+'"]').attr("checked",n),s('*[data-show="'+e+'"]').attr("data-value",n).html(n),s(".option__value--color").each(function(){s(this).css("background-color",s(this).attr("data-value"))}),s('*[data-show="'+e+'"]').html(this.printTransform(e,n)),s('*[data-show="'+e+'"]').attr("data-value",n),s('*[data-show="'+e+'"][data-type="color"]').css("background-color",n),s('*[data-if="'+e+'"]').each(function(){s(this).attr("data-value")==n?s(this).show():s(this).hide()})}},E.prototype.applyAllOptions=function(){for(var t in this.options)this.options.hasOwnProperty(t)&&this.printOption(t,this.options[t])},E.prototype.printTransform=function(t,e){return e},E.prototype.printValues=function(t,e){s("."+t).html(e),s("input."+t).val(e)},E.prototype.getValue=function(t){return this.values[t]},E.prototype.processTask=function(){var t,e=this;1!=this.processBlock&&(this.processBlock=!0,this.disableProcessBtn(),(t=this).getPanelActiveOptions(),t.beforeProcess().then(function(){t.savePremium().then(function(){e.hideLimitsAlert(),t.processManager.setOptions(t.options),t.processManager.limits=e.limits,e.checkBackForward(),e.clearBackRefreshDetection(),t.processManager.process()},function(e){d.configureScope(function(t){t.setExtra("error",e)}),d.captureMessage("Error on save premium task data")})},function(t){e.onBeforeProcessReject(t)}))},E.prototype.onBeforeProcessReject=function(e){e instanceof Error&&(d.configureScope(function(t){t.setExtra("error",e)}),d.captureMessage("onBeforeProcessReject error")),this.enableProcessBtn()},E.prototype.beforeProcess=function(){return new Promise(function(t,e){var n=!!window.MSInputMethodContext&&!!document.documentMode;if(window.processStart=!0,n)document.createEvent("Event").initEvent("goProcess",!0,!0);else try{var i=new Event("goProcess");window.dispatchEvent(i)}catch(t){}t({})})},E.prototype.getOption=function(t){return this.options[t]},E.prototype.getOptions=function(){return this.options},E.prototype.getPanelActiveOptions=function(){var i=this,t=s(".option__panel--active");t.find(".option--active").each(function(t,e){var n=s(e).attr("data-name");null!=n&&(0<n.indexOf("[]")?(i.options[n]instanceof Array||(i.options[n]=[]),i.options[n].push(s(e).attr("data-value"))):i.options[n]=s(e).attr("data-value"))}),t.find('input[type="text"], input[type="number"], input[type="color"], select, input[type="hidden"]').each(function(t,e){var n=s(e).attr("data-name");null==n&&null==(n=s(e).attr("name"))||(0<n.indexOf("[]")?(i.options[n]instanceof Array||(i.options[n]=[]),i.options[n].push(s(e).val())):i.options[n]=s(e).val())}),t.find('input[type="checkbox"]').each(function(t,e){var n=s(e).attr("name");i.options[n]=s(e).is(":checked")}),i.unsetUndefinedOptions()},E.prototype.unsetUndefinedOptions=function(){"undefined"in this.options&&delete this.options.undefined},E.prototype.callPanelActions=function(t){null!=t&&(t="action"+t.camelCase().ucFirst())in this&&this[t]()},E.prototype.callTabActions=function(t){null!=t&&""!=t&&(t="action"+t.camelCase().ucFirst())in this&&this[t]()},E.prototype.callOptionAction=function(t,n,i){var o;void 0===i&&(i="click"),null!=t&&(t=t.split(" "),o=this,s.each(t,function(t,e){null!=e&&(e="actionOption"+e.camelCase().ucFirst())in o&&o[e](n,i)}))},E.prototype.callFormAction=function(t,n,i){var o;void 0===i&&(i="click"),null!=t&&(t=t.split(" "),o=this,s.each(t,function(t,e){null!=e&&(e="actionForm"+e.camelCase().ucFirst())in o&&o[e](n,i)}))},E.prototype.actionFormPanel=function(t,e){var n,t=t.data("target"),i=s(".option__panel--active").attr("id"),o={id:i};history.pushState(o,i,"#"+t),s(".option__panel--active").removeClass("option__panel--active").addClass("option__panel--inactive"),s("#"+t).addClass("option__panel--active"),this.checkProcessBtn(),this.callPanelActions(t),0<s("#"+t).find(".option__tab").length&&(n=s(".option__tab__select__item.option--active").data("target"),this.callTabActions(n)),history.pushState(o,i,"#"+t)},E.prototype.actionFormShowOptions=function(t,e){var n=s(t).val();s(".option--if").hide(),s('*[data-if="'+name+'"]').each(function(){t.data("value")==n?t.show():t.hide()})},E.prototype.actionFormDecimal=function(t,e){void 0===e&&(e=null);e=s(t=void 0===t?null:t).val();s(t).val(e.replace(",","."))},E.prototype.getInnactiveView=function(){return'<div class="tool__sidebar__inactive"><p>'+c.Lang.t("No file selected.")+'</p><svg xmlns="http://www.w3.org/2000/svg" width="75" height="66" viewBox="0 0 150 132"><path fill="#FFF" d="M0,0 C0,18.75 28.125,56.25 93.75,56.25 L93.75,18.75 L150,75 L93.75,131.25 L93.75,93.75 C42.0594727,93.75 0,51.6905273 0,0 Z" transform="rotate(-180 75 66)"/></svg><p>'+c.Lang.t("Please add a file to activate options")+"</p></div>"},E.prototype.initPremium=function(){f.UserModel.isPremium()&&(s(this.getPremiumView()).insertBefore(s(".gobutton")),s("#save_options").change(function(){s(this).is(":checked")}))},E.prototype.savePremium=function(){var i=this,o=this;return new Promise(function(t,e){var n;s("#save_options").length&&s("#save_options").is(":checked")?((n=o.getOptions()).tool=i.tool,n=o.beforeSavePremiumOptions(n),o.processManager.api.saveToolConfig(o.tool,n,f.UserModel.get().token).then(function(){t({})},function(){e()})):t({})})},E.prototype.invalidUpload=function(e,n){var i=this,o=(void 0===n&&(n=null),v.IloveError.getError(e)),t=this.tool==this.subtool?this.tool:this.tool.replace("image",this.subtool);if(s("body").hasClass("process-run"))try{"object"==typeof e&&"file"in e&&"id"in e.file&&this.files.updateFile(e.file.id,{error:!0,percent:100,errorData:o})}catch(t){}else{0<=["FileSizeExceeded","FileTooLarge","FileRemoved"].indexOf(o)?(window.ev("sendOnce","event","upload-info",o,t),window.ev("eventOnce","upload_info",{tool:t,reason:o})):(window.ev("send","event","upload-invalid",t,o),window.ev("event","upload_invalid",{tool:t,error:o}),d.configureScope(function(t){t.setExtra("error",e)}),null!=n&&d.configureScope(function(t){t.setExtra("error_extra",n),t.setExtra("task_id",i.processManager.taskId)}),d.captureMessage("upload-invalid."+o,p.Severity.Error));try{"object"==typeof e&&"file"in e?(this.viewManager.removeFile(e.file.canvasId),window.Toastr.error(c.Lang.t(o)+"<br>"+e.file.name,c.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"})):this.fatalError(o)}catch(t){this.fatalError(o)}}},E.prototype.beforeSavePremiumOptions=function(t){return t},E.prototype.getPremiumView=function(){return""},E.prototype.disableProcessBtn=function(t){void 0===t&&(t=null);var e=s("#processTask"),n=s("#processTaskWrapper");e.attr("disabled","true"),e.removeClass("pulse"),n.addClass("tooltip tooltip--top").removeAttr("title").show(),null!=t&&"undefined"!=t?(n.attr("data-title",t),n.attr("title",t),u.Tooltip.setContent(n,t),u.Tooltip.enable(n)):u.Tooltip.disable(n)},E.prototype.enableProcessBtn=function(){s("#processTask").removeClass("tooltip tooltip--top").removeAttr("title").removeAttr("disabled"),u.Tooltip.hide("#processTaskWrapper"),s("#processTaskWrapper").hide(),this.processBlock=!1},E.prototype.fatalError=function(t){v.IloveError.fatalError(t,this.tool,this.workerServer)},E.prototype.timeout=function(){window.location.reload()},E.prototype.timeoutPopup=function(){var n=this,i=[],o=[],t=(s.each(this.files.files,function(t,e){"canvasId"in e?i.push(e.canvasId):"id"in e&&o.push(e.id)}),s.each(i,function(t,e){n.viewManager.removeFile(e)}),s.each(o,function(t,e){n.files.removeFile(e)}),h.Tools.modalViewOk({id:"timelimit",title:c.Lang.t("Wops"),content:"<p>"+c.Lang.t("Welcome back after upload")+"</p>"}));s(t).modal()},E.prototype.removeFile=function(t){try{this.viewManager.removeFile(t)}catch(t){}this.files.removeFile(t),this.checkLimits(null,null)},E.prototype.loadingStart=function(){0===s(".item-loading").length&&0==s(".loading").length&&s("body").append('<div class="item-loading"></div>'),s(".item-loading").show()},E.prototype.loadingEnd=function(){s(".item-loading").hide()},E.prototype.fileAddError=function(t,e,n){void 0===n&&(n="DamagedFile"),1==(e=void 0===e?!1:e)?window.Toastr.error(c.Lang.t(n),c.Lang.t("Error"),{timeOut:0,closeButton:!0,preventDuplicates:!0,positionClass:"toast-top-left"}):window.Toastr.error(c.Lang.t(n),c.Lang.t("Error"),{timeOut:5e3,positionClass:"toast-top-left"}),this.removeFile(t),this.loadingEnd()},E.prototype.initBackFromProcessListenEvent=function(){var e=this;window.addEventListener("popstate",function(t){t.state;e.processManager.contextConfirmFiles&&(e.backCount++,s(".process").hide(),s(".uploading").hide(),e.processManager.contextConfirmFiles.remove(),document.body.classList.remove("process-run"),e.checkLimits([],null),e.enableProcessBtn(),e.checkProcessBtn(),t=e.getLimit(),window.ev("sendOnce","event","limits","back",e.tool+"-"+t),window.ev("eventOnce","limit-action",{action:"back",tool:e.tool,reason:t}),e.processManager.contextConfirmFiles=null,e.initBackRefreshDetection())})},E.prototype.checkBackForward=function(){var t;0<this.backCount&&(this.forwardCount++,t=this.getLimit()||"solved",window.ev("sendOnce","event","limits","forward",t),window.ev("eventOnce","limit-actions",{action:"back",tool:this.tool,reason:t}))},E.prototype.initBackRefreshDetection=function(){var t=new Date((new Date).getTime()+this._BACKREFRESH_TIME);x.default.set("br",this.tool,{expires:t})},E.prototype.refreshBackDetection=function(){x.default.get("br")==this.tool&&x.default.set("brt",(new Date).getTime().toString(),{expires:1})},E.prototype.clearBackRefreshDetection=function(){x.default.remove("br")},E.prototype.checkBackRefresh=function(){var t=x.default.get("br");t&&(this.clearBackRefreshDetection(),window.ev("sendOnce","event","limits","back-"+(t==this.tool?"refresh":"change"),this.tool),window.ev("eventOnce","limit-actions",{action:"back-"+(t==this.tool?"refresh":"change"),tool:this.tool}))},S.OptionsManager=E}.call(this,O(1))},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.NoMoreLimitsContext=void 0,n(47)),s=n(159),n=(o=a.ContextBase,r(l,o),l.prototype.getInitialState=function(){return new s.DefaultState({reason:this.limits.getLimitTexts().limit})},l);function l(t){var e=o.call(this,t=void 0===t?{}:t)||this;return e.contentName="NoMoreLimitsContext",e.triggerReason="triggerReason"in t?t.triggerReason:void 0,e.limits="limits"in t?t.limits:void 0,e.tool="tool"in t?t.tool:void 0,e}e.NoMoreLimitsContext=n},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultState=void 0,n(21)),s=n(8),n=(o=a.StateBase,r(l,o),l.prototype.init=function(){var t=this.getUserOperativeSystem(),t=(this.showPlatform(t),this.showReasonMessage(),this.actionBtn);t&&t.addEventListener("click",this._onDoneButtonClick)},l.prototype.showPlatform=function(t){for(var e=this.domRoot.querySelectorAll("[platform-mac], [platform-win]"),n=0;n<e.length;n++)e[n].style.display="none";for(var i=this.domRoot.querySelectorAll("[platform-"+t+"]"),n=0;n<i.length;n++)i[n].style.display="block"},l.prototype.showReasonMessage=function(){var t=this.domRoot.querySelector('[ data-reason="'+this.params.reason+'" ]');t&&(t.hidden=!1)},l.prototype.getUserOperativeSystem=function(){return-1!=window.navigator.platform.indexOf("Mac")?"mac":(-1==navigator.userAgent.indexOf("WOW64")&&navigator.userAgent.indexOf("Win64"),"win")},Object.defineProperty(l.prototype,"actionBtn",{get:function(){return this.domStateRoot.querySelector("[next-from-no-more-limits]")},enumerable:!1,configurable:!0}),l);function l(t){var e=o.call(this)||this;return e.name="DefaultState",e.LAYOUT_TEMPLATE_NAME="no-more-limits",e.INITIAL_SCREEN="default",e.onDomReady=function(){"sign"==e.ctx.tool?e.changeScreen("sign"):e.changeScreen(e.INITIAL_SCREEN),e.clearLoadingScreen(),e.init()},e._onDoneButtonClick=function(t){t.preventDefault(),e.dispatchEvent(new s.IloveEvent("end"))},e.params=t,e}e.DefaultState=n},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.ViewManager=void 0,n(161)),s=n(162),l=n(116),c=n(163),u=n(164),n=(o=a.ViewManager,r(d,o),d.prototype.init=function(){o.prototype.init.call(this),this.pdfViewer=new s.PdfView({screenSize:this.screenSize,files:this.files}),this.imageViewer=new l.ImageView({screenSize:this.screenSize,files:this.files}),this.officeViewer=new c.OfficeView({screenSize:this.screenSize,files:this.files}),this.previewViewer=new u.PreviewView({screenSize:this.screenSize,files:this.files})},d);function d(t){return o.call(this,t)||this}e.ViewManager=n},function(t,a,s){"use strict";!function(c){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},u=(Object.defineProperty(a,"__esModule",{value:!0}),a.ViewManager=void 0,t(s(15))),d=s(13),n=s(17),r=s(7);function e(t){void 0===t&&(t={}),this.files=null,this.tool=null,this.subtool=null,this.pdfViewer=null,this.imageViewer=null,this.officeViewer=null,this.previewViewer=null,this.fileBox="",this.covers_hidden=!1,this.processManager=null,this.onBeforeRemoveFile=null,this.onRemoveFile=null,this.resizeTimeout=!1,this.screenSizes={sm:{w:70,h:100},md:{w:99,h:140},lg:{w:127,h:180}},this.screenSize=this.screenSizes.md,this.currentSize="md",1281<window.innerWidth?(this.screenSize=this.screenSizes.lg,this.currentSize="lg"):window.innerWidth<640&&(this.screenSize=this.screenSizes.sm,this.currentSize="sm"),Object.assign(this,t),this.init()}e.prototype.init=function(){var e=this;window.addEventListener("resize",function(t){e.resize()})},e.prototype.resize=function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){1280<window.innerWidth&&"lg"!=t.currentSize?(t.screenSize=t.screenSizes.lg,t.currentSize="lg",t.reRender()):window.innerWidth<640&&"sm"!=t.currentSize?(t.screenSize=t.screenSizes.sm,t.currentSize="sm",t.reRender()):640<window.innerWidth&&window.innerWidth<1280&&"md"!=t.currentSize&&(t.screenSize=t.screenSizes.md,t.currentSize="md",t.reRender()),"object"==typeof t.pdfViewer&&null!=t.pdfViewer&&(t.pdfViewer.screenSize=t.screenSize),"object"==typeof t.imageViewer&&null!=t.imageViewer&&(t.imageViewer.screenSize=t.screenSize),"object"==typeof t.officeViewer&&t.officeViewer,"object"==typeof t.previewViewer&&t.previewViewer},500)},e.prototype.reRender=function(){var o=this;c(".file canvas, .range__element canvas").each(function(t,e){var n=c(e).attr("data-file"),i=c(e).attr("data-page");n&&i&&(i=parseInt(c(e).attr("data-page").toString()),e=c(e).attr("id"),o.renderPDF(n,i,e))})},e.prototype.addFileDOM=function(s){var l=this;return new Promise(function(e,n){var i,o,r=l,t=(l.totalFilesSelectedHistory++,l.boxfiles++,s.name.substr(s.name.lastIndexOf(".")+1).toUpperCase()),a=(s.extension&&(t=s.extension.toUpperCase()),s.service||(s.service="user"),l.getFileboxTemplate({tool:r.tool,subtool:r.subtool,screenSize:r.screenSize,fileName:s.name,fileID:s.canvasId,filesize:s.size,service:s.service,rotable:s.rotable}));c("#fileGroups").append(a),r.initRotate(s),c("#"+s.canvasId+" .remove").on("click",function(){r.removeFile(s.canvasId)}),"html5"==s.runtime&&(i="cover-"+s.canvasId,o=document.getElementById(i),"user"==s.service?(o.className=o.className+" "+t.toLowerCase()+" ",null!=s.thumbnail?(o.className="image "+o.className,l.renderPreview(s.id,i,null).then(function(){e(s)},function(e){u.configureScope(function(t){t.setExtra("error",e)}),u.captureMessage("render preview thumbnail error",d.Severity.Info),n(e)})):"url"in s&&null!=s.url?"PDF"==t&&0==l.covers_hidden?r.pdfViewer.loadUrlPDF(s.url,null).then(function(t){r.files.updateFile(s.id,{file:t}),"size"in t&&r.files.updateFile(s.id,{size:t.size}),r.renderPDF(s.id,1,i),e(t)},function(t){"removeFile"==t.name?r.removeFile(s.canvasId):"PasswordException"==t.name?o.className=o.className+" password ":"UnexpectedResponseException"==t.name?r.removeFile(s.id):("InvalidPDFException"!=t.name&&t.name,o.className=o.className+" error "),n(t)}):l.renderUrl(s.id,i,null).then(function(t){"size"in t&&r.files.updateFile(s.id,{size:t.size}),e(s)},function(e){u.configureScope(function(t){t.setExtra("error",e)}),u.captureMessage("render url error",d.Severity.Info),n(e)}):"PDF"==t&&0==l.covers_hidden?r.pdfViewer.loadSourcePDF(s.id,s.source).then(function(t){r.files.updateFile(s.id,{file:t}),r.renderPDF(s.id,1,i),e(t)},function(t){"removeFile"==t.name?r.removeFile(s.canvasId):"PasswordException"==t.name&&(o.className=o.className+" password "),"UnexpectedResponseException"==t.name?r.removeFile(s.canvasId):(t.name,o.className=o.className+" error "),n(t)}):"JPG"==t||"JPEG"==t?l.renderImageJpg(s.id,i,null).then(function(){e(s)},function(t){n(t)}):"HEIC"===t?l.renderHeic(s.id,i).then(function(){e(s)}).catch(n):"PNG"==t||"GIF"==t||"WEBP"==t?l.renderImage(s.id,i,null).then(function(){e(s)},function(t){n(t)}):"SVG"==t?(o.className="image "+o.className,l.renderSvg(s.id,i,!1).then(function(){e(s)},function(t){n(t)})):"TIF"==t||"TIFF"==t?(o.className=o.className+" image tif",l.renderTif(s.id,i).then(function(){e(s)},function(t){})):"DOC"==t||"DOCX"==t?(l.renderDoc(s.id,i),o.className=o.className+" word "+t.toLowerCase(),e(s)):"XLS"==t||"XLSX"==t?(l.renderDoc(s.id,i),o.className=o.className+" excel "+t.toLowerCase(),e(s)):"PPT"==t||"PPTX"==t?(l.renderDoc(s.id,i),o.className=o.className+" powerpoint "+t.toLowerCase(),e(s)):(o.className=o.className+t.toLowerCase(),n("noRenderMode"))):"drive"==s.service?(o.className=o.className+" "+t.toLowerCase(),"PDF"==t&&0==l.covers_hidden?!s.size||s.size<2e8?r.pdfViewer.loadUrlPDF(s.uri,s.token).then(function(t){r.files.updateFile(s.id,{file:t}),r.renderPDF(s.id,1,i),e(t)},function(e){u.configureScope(function(t){t.setExtra("error",e)}),u.captureMessage("drive url pdf error"),n(e)}):n():null!=s.url?l.renderUrl(s.id,i,null).then(function(t){e(s)},function(e){u.configureScope(function(t){t.setExtra("error",e)}),u.configureScope(function(t){t.setExtra("url",s.url)}),u.captureMessage("drive with url error"),n(e)}):(u.configureScope(function(t){t.setExtra("file",s)}),u.captureMessage("drive viewer not set"),n("drive viewer not exists"))):"dropbox"==s.service?"PDF"==t&&0==l.covers_hidden?s.size<2e8&&r.pdfViewer.loadUrlPDF(s.url,s.token).then(function(t){r.files.updateFile(s.id,{file:t}),r.renderPDF(s.id,1,i),e(t)},function(e){u.configureScope(function(t){t.setExtra("error",e)}),u.captureMessage("dropbox load error"),n(e)}):null!=s.url?((a=document.getElementById(i)).className=a.className+" image "+t.toLowerCase(),l.renderUrl(s.id,i,null).then(function(t){e(s)},function(e){u.configureScope(function(t){t.setExtra("error",e)}),u.captureMessage("dropbox with url error"),n(e)})):(u.captureMessage("dropbox preview not set"),n("uooops, dropbox viewer not set here!")):(u.captureMessage("unknow method/origin to render file"),n("unknow method/origin to render file")))})},e.prototype.initRotate=function(n){var i=this;c("#"+n.canvasId+" .rotate").on("click",function(){var t=parseInt(c(this).attr("data-rotate")),e=(280==(t+=90)&&(t=0),c(this).attr("data-rotate",t),c("#"+n.canvasId+" .file__canvas"));e.css({WebkitTransform:"rotate("+t+"deg)"}),e.css({"-moz-transform":"rotate("+t+"deg)"}),e.css({transform:"rotate("+t+"deg)"}),i.files.updateFile(n.id,{rotate:t})})},e.prototype.removeFile=function(t){var e=this;"function"==typeof e.onBeforeRemoveFile&&e.onBeforeRemoveFile(t),c("#"+t).remove(),e.processManager.removeFile(t).then(function(){"function"==typeof e.onRemoveFile&&e.onRemoveFile(t),c(".uploader.box").show()},function(t){})},e.prototype.renderPDF=function(t,e,n,i){void 0===i&&(i=null);var o=this;"object"==typeof o.pdfViewer&&null!=o.pdfViewer&&o.pdfViewer.onFileReady().then(function(){o.pdfViewer.renderPage(t,e,n).then(function(){},function(){})},function(e){u.configureScope(function(t){t.setExtra("error",e)}),u.captureMessage("Error pdf file not ready")})},e.prototype.renderImage=function(t,i,o){void 0===o&&(o=!1);var r=this,a=r.files.getFile(t),s=a.getSource().getSource();return new Promise(function(e,n){r.imageViewer.renderImage(s,i,o).then(function(t){return a.width=t.width,a.height=t.height,e(t)},function(t){n(t)})})},e.prototype.renderImageJpg=function(t,e,n){return this.renderImage(t,e,n=void 0===n?!1:n)},e.prototype.renderUrl=function(t,i,o){void 0===o&&(o=!1);var r=this,a=r.files.getFile(t),s=a.url;return new Promise(function(e,n){r.imageViewer.renderUrl(s,i,o).then(function(t){"size"in t&&(a.size=t.size),"width"in a?e({width:a.width,height:a.height}):((t=new Image).addEventListener("load",function(){a.width=this.naturalWidth,a.height=this.naturalHeight,e({width:this.naturalWidth,height:this.naturalHeight})}),t.src=a.url)},function(t){n()})})},e.prototype.renderPreview=function(t,n,i){void 0===i&&(i=!1);var o=this,r=o.files.getFile(t).thumbnail;return new Promise(function(t,e){o.previewViewer.renderPreview(r,n,i),t({})})},e.prototype.renderSvg=function(t,i,o){void 0===o&&(o=!1);var r=this,a=r.files.getFile(t),s=a.getSource().getSource();return new Promise(function(e,n){r.imageViewer.renderSvg(s,i,o).then(function(t){return a.width=t.width,a.height=t.height,e(t)},function(t){n(t)})})},e.prototype.renderTif=function(t,n){var i=this,o=i.files.getFile(t).getSource().getSource();return new Promise(function(t,e){i.imageViewer.renderTif(o,n).then(function(){t()},function(){e()})})},e.prototype.renderHeic=function(t,e){t=this.files.getFile(t).getSource().getSource();return this.imageViewer.renderHeic(t,e)},e.prototype.renderDoc=function(t,e){t=this.files.getFile(t).getSource().getSource();return this.officeViewer.renderDocument(t,e)},e.prototype.getFileboxTemplate=function(t){var e=/(?:\.([^.]+))?$/.exec(t.fileName)[1];return'<div class="file file--'+t.tool+' tooltip--top" id="'+t.fileID+'" rel="'+t.service+'" data-size="'+t.filesize+'" data-extension="'+e.toUpperCase()+'"  title="image size..."><div class="file__actions"><a class="file__btn rotate tooltip--top tooltip" data-rotate="0" title="'+r.Lang.t("Rotate")+'">'+n.Tools.svgRotate()+'</a><a class="file__btn remove tooltip--top tooltip" title="'+r.Lang.t("Remove this file")+'">'+n.Tools.svgRemove()+'</a></div><div class="file__canvas"><canvas id="cover-'+t.fileID+'" width="'+t.screenSize.w+'" height="'+t.screenSize.h+'" class="'+e+'"></canvas></div><div class="file__info"><span class="file__info__name">'+t.fileName+"</span></div></div>\n        "},e.prototype.fileUploaded=function(t,e){var n=document.getElementById(t),i="cover-"+t;"object"==typeof e&&"thumbnail"in e&&e.thumbnail&&null!=n&&(n.className=n.className+" image",this.renderPreview(t,i,null).then(function(t){},function(e){u.configureScope(function(t){t.setExtra("error",e)}),u.captureMessage("Render preview on file upload",d.Severity.Info)}))},a.ViewManager=e}.call(this,s(1))},function(t,n,a){"use strict";!function(u){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},r=(Object.defineProperty(n,"__esModule",{value:!0}),n.PdfView=void 0,t(a(30))),d=a(17),s=a(7);function e(t){void 0===t&&(t={}),this.hasPdfjs=!1,this.pdfIsLoaded=!1,this.renderProcess=!1,this.pdfjs=null,this.files=null,this.coversShow=!0,this.screenSize={},this.notRendered={},this.rendering=!1,this.needPassword=!1,this.passwordCount={},this.passwordLimit=3,this.scale=1,Object.assign(this,t),this.init()}e.prototype.init=function(){var t=this;this.initPdfJs().then(function(){t.configPdfjs()},function(){}),this.scrollControl()},e.prototype.scrollControl=function(){var t=this;d.Tools.scrollControl(u("#workArea"),function(){t.checkIfNotRendered()},function(){t.checkIfNotRendered()}),d.Tools.scrollControl(u(".tool__preview"),function(){t.checkIfNotRendered()},function(){t.checkIfNotRendered()})},e.prototype.checkIfNotRendered=function(){var n=this;0==n.rendering&&(n.rendering=!0,window.setTimeout(function(){u.each(n.notRendered,function(t,e){1==d.Tools.isElementInView(u("#"+e.canvasId))&&(n.renderPage(e.fileId,e.pageNum,e.canvasId,e.full).then(function(){},function(){}),delete n.notRendered[e.canvasId])}),n.rendering=!1},500))},e.prototype.initPdfJs=function(){var n=this,i=this;return new Promise(function(t,e){null!==window.PDFJS&&void 0===window.PDFJS&&(r.lazyload("/js/pdfjs/pdf.min.js"),n.pdfjsInterval=window.setInterval(function(){if(null!==window.PDFJS&&"object"==typeof window.PDFJS)return i.hasPdfjs=!0,i.pdfjs=window.PDFJS,clearInterval(i.pdfjsInterval),t(i.hasPdfjs)},100))})},e.prototype.configPdfjs=function(){},e.prototype.loadSourcePDF=function(o,r,t){var e=this,a=(void 0===t&&(t=null),this);return void 0===this.passwordCount[o]&&(this.passwordCount[o]=0),new Promise(function(n,i){0==u("#"+o).length||a.passwordCount[o]>a.passwordLimit?i({name:"removeFile"}):e.loadPDF(r,null,null,t).then(function(t){n(t)},function(t){var e;"PasswordException"!=t.name||1!=a.needPassword||("Incorrect Password"==t.message&&(e=a.files.getFile(o).name,window.Toastr.error(s.Lang.t("incorrectPassword")+"<br>"+e,s.Lang.t("Wops"),{timeOut:5e3,positionClass:"toast-top-left"})),0==u("#"+o).length)||a.passwordCount[o]>a.passwordLimit?i(t):a.askForPassword(o).then(function(t){a.passwordCount[o]++,a.loadSourcePDF(o,r,t.password).then(function(t){n(t)},function(t){i(t)})},function(t){i(t)})})})},e.prototype.askForPassword=function(r){var a=this;return new Promise(function(n,i){var t,o=a.files.getFile(r);0==u("#pwd-"+o.id).length?(a.passwordCount[r]=0,t=d.Tools.modalViewOk({id:"pwd-"+o.id,title:s.Lang.t("requirePassword"),content:"<p>"+o.name+'</p><br><form><input type="password" autocomplete="false"></form>'}),u(t).modal()):(a.passwordCount[r]>a.passwordLimit&&(a.passwordCount[r]=0,i({name:"removeFile"})),u("#pwd-"+o.id+" input").val("")),u("#pwd-"+r+" input").first().focus(),setTimeout(function(){var e=!1;u("#pwd-"+r).off("hidden.bs.modal").on("hidden.bs.modal",function(){0==e?i({name:"removeFile"}):e=!1}),u("#pwd-"+o.id).modal("show"),u("#pwd-"+r+" form").submit(function(t){t.preventDefault(),u("#pwd-"+r+" .btn").trigger("click")}),u("#pwd-"+r+" .btn").on("click",function(){var t=u("#pwd-"+r+" input").val();e=!0,""==t?i({name:"removeFile"}):(a.files.updateFile(r,{password:t}),u("#pwd-"+r).modal(),o.password=t,n(o))})},800)})},e.prototype.loadUrlPDF=function(t,e,n){return this.loadPDF(null,t,e=void 0===e?null:e,n=void 0===n?null:n)},e.prototype.loadPDF=function(u,d,p,h){void 0===u&&(u=null),void 0===d&&(d=null),void 0===p&&(p=null),void 0===h&&(h=null);var f=this;return new Promise(function(s,l){var c=window.setInterval(function(){function i(e){if(f.pdfIsLoaded=!0,null!=d){if(e)try{e.getDownloadInfo().then(function(t){e.size=t.length,s(e)},function(){s(e)})}catch(t){l("file removed while reading")}}else s(e);e.getMetadata().then(function(t){},function(){})}function o(t){l(t)}function t(t){var e=this.result,n=null;(n=null==h?f.pdfjs.getDocument(e).then(i).catch(o):n).onProgress=function(t){}}var r,e,n,a;!0===f.hasPdfjs&&(clearInterval(c),(r=null)!=u?null!=h?((e=new FileReader).onload=function(t){var e,n=new Uint8Array(t.target.result),n=new Blob([n]);try{e=(window.URL||window.webkitURL).createObjectURL(n)}catch(t){return void l(t)}r=f.pdfjs.getDocument({url:e,password:h}).then(i).catch(o);try{r.getDownloadInfo().then(function(t){},function(){})}catch(t){}},e.readAsArrayBuffer(u)):(n=u,(a=new FileReader).onload=t,a.readAsArrayBuffer(n),a.onerror=o):null!=d&&(null===p?null==h?f.pdfjs.getDocument(d).then(i).catch(o):f.pdfjs.getDocument({url:d,password:h}).then(i).catch(o):(e={url:d,httpHeaders:{Authorization:"Bearer "+p}},null==h?((n=f.pdfjs.getDocument(e).then(i).catch(o)).onProgress=function(t){},n.onPassword=function(t,e){"PasswordException"===e.name?t(h):l(e)}):(e.password=h,f.pdfjs.getDocument(e).then(i).catch(o)))))},100)})},e.prototype.onFileReady=function(){var i=this;return new Promise(function(t,e){var n=window.setInterval(function(){!0===i.pdfIsLoaded&&(clearInterval(n),t())},200)})},e.prototype.renderPage=function(t,e,n,l){var i,c=this,o=(void 0===l&&(l=!1),this.files.getFile(t));return null==o?new Promise(function(t,e){e()}):(i=o.file,this.renderProcess=!0,e=parseInt(e),(o=document.getElementById(n)).setAttribute("data-file",t),o.setAttribute("data-page",e),new Promise(function(o,r){if("file"!=n&&0==d.Tools.isElementInView(u("#"+n)))return c.notRendered[n]={fileId:t,pageNum:e,canvasId:n,full:l},o();var a=document.getElementById(n),s=a.getContext("2d");i?i.getPage(e).then(function(t){var e,n=t.getViewport(c.scale,t.pageInfo.rotate),i=(a.setAttribute("data-width",n.width),a.setAttribute("data-height",n.height),1==l?(n=t.getViewport(c.scale,t.pageInfo.rotate),a.width=n.width,a.height=n.height):n.width>n.height?(i=c.screenSize.h,n=t.getViewport(i/n.width,t.pageInfo.rotate),a.width=c.screenSize.h,a.height=n.height):(i=c.screenSize.h,n=t.getViewport(i/n.height,t.pageInfo.rotate),a.height=c.screenSize.h,a.width=n.width),{canvasContext:s,viewport:n});!0===c.coversShow&&((n=t.render(i)).promise.then(e=function(){a.style.backgroundImage="none",c.renderProcess=!1,o()},function(t){c.renderProcess=!1,r(t)}),window.renderTask=n,window.setTimeout(function(){1==c.renderProcess&&e()},5e3))},function(t){"PasswordException"==t.name?a.className=a.className+" password":"InvalidPDFException"==t.name?a.className=a.className+" damaged":a.className=a.className+" error",r(t)}):r()}))},n.PdfView=e}.call(this,a(1))},function(t,e,n){"use strict";function i(t){void 0===t&&(t={}),this.documentIsLoaded=!1,Object.assign(this,t),this.init()}Object.defineProperty(e,"__esModule",{value:!0}),e.OfficeView=void 0,i.prototype.init=function(){},i.prototype.renderDocument=function(t,e){var n=this;return new Promise(function(t,e){n.documentIsLoaded=!0,t()})},i.prototype.onFileReady=function(){var i=this;return new Promise(function(t,e){var n=window.setInterval(function(){!0===i.documentIsLoaded&&(clearInterval(n),t(!0))},200)})},e.OfficeView=i},function(t,e,n){"use strict";!function(o){function t(t){void 0===t&&(t={}),this.coversShow=!0,Object.assign(this,t),this.init()}Object.defineProperty(e,"__esModule",{value:!0}),e.PreviewView=void 0,t.prototype.init=function(){},t.prototype.renderPreview=function(t,e,n){void 0===n&&(n=!1);var i=document.getElementById(e),n=(n?o(i).attr("src",t):o(i).attr("style","background-color: transparent; background-image: url("+t+");background-size:contain; width: 100%;background-repeat: no-repeat;background-position: center;"),o("#"+e+" canvas"));0<n.length&&n.remove()},e.PreviewView=t}.call(this,n(1))},,,,function(t,e,n){var i,o;!function(){"use strict";o=[n(1),n(169)],void 0!==(o="function"==typeof(i=function(t,r){"use strict";t.tinysort={defaults:r.defaults},t.fn.extend({tinysort:function(){var t=Array.prototype.slice.call(arguments),e,n;t.unshift(this);e=r.apply(null,t);n=e.length;for(var i=0,o=this.length;i<o;i++)if(i<n)this[i]=e[i];else delete this[i];this.length=n;return this}}),t.fn.tsort=t.fn.tinysort})?i.apply(e,o):i)&&(t.exports=o)}()},function(e,n,i){var o;!function(t){"use strict";void 0!==(o="function"==typeof(o=function(){return t})?o.call(n,i,n,e):o)&&(e.exports=o)}(function(){"use strict";var _,t=window,x=t.document,E=parseFloat,S=/(-?\d+\.?\d*)\s*$/g,O=/(\d+\.?\d*)\s*$/g,C=[],k=0,P=0,T=String.fromCharCode(4095),j={selector:null,order:"asc",attr:null,data:null,useVal:!1,place:"org",returns:!1,cases:!1,natural:!1,forceStrings:!1,ignoreDashes:!1,sortFunction:null,useFlex:!1,emptyEnd:!1};function A(t,e){for(var n,i=t.length,o=i;o--;)e(t[n=i-o-1],n)}function M(t,e,n){for(var i in e)!n&&t[i]!==_||(t[i]=e[i]);return t}function e(t,e,n){C.push({prepare:t,sort:e,sortBy:n})}return t.Element&&((t=Element.prototype).matchesSelector=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){for(var e=(this.parentNode||this.document).querySelectorAll(t),n=-1;e[++n]&&e[n]!=this;);return!!e[n]}),M(e,{loop:A}),M(function(t,e){(t=w(t)?x.querySelectorAll(t):t).length;var n,o,i,r,a=x.createDocumentFragment(),s=[],l=[],c=[],d=[],u=!0,p=t.length&&t[0].parentNode,h=p.rootNode!==document,e=t.length&&(e===_||!1!==e.useFlex)&&!h&&-1!==getComputedStyle(p,null).display.indexOf("flex"),h=(!function(){0===arguments.length?f({}):A(arguments,function(t){f(w(t)?{selector:t}:t)});k=d.length}.apply(null,Array.prototype.slice.call(arguments,1)),A(t,function(t,e){o?o!==t.parentNode&&(u=!1):o=t.parentNode;var n=d[0],i=n.hasFilter,n=n.selector,i=!n||i&&t.matchesSelector(n)||n&&t.querySelector(n)?l:c,n={elm:t,pos:e,posn:i.length};s.push(n),i.push(n)}),n=l.slice(0),l.sort(function(t,e){var n=0;0!==P&&(P=0);for(;0===n&&P<k;){var i,o,r,a,s,l,c=d[P],u=c.ignoreDashes?O:S;A(C,function(t){t=t.prepare;t&&t(c)}),n=c.sortFunction?c.sortFunction(t,e):"rand"==c.order?Math.random()<.5?1:-1:(i=!1,o=b(t,c),r=b(e,c),s=""===o||o===_,a=""===r||r===_,o===r?0:c.emptyEnd&&(s||a)?s&&a?0:s?1:-1:(c.forceStrings||(a=!!w(o)&&o&&o.match(u),s=!!w(r)&&r&&r.match(u),a&&s&&(u=o.substr(0,o.length-a[0].length),l=r.substr(0,r.length-s[0].length),u==l)&&(i=!0,o=E(a[0]),r=E(s[0]))),o===_||r===_?0:c.natural&&(isNaN(o)||isNaN(r))?function(t,e,n){for(var i=n(t.toString()),o=n(e.toString()),r=0;i[r]&&o[r];r++){var a,s;if(i[r]!==o[r])return a=Number(i[r]),s=Number(o[r]),a==i[r]&&s==o[r]?a-s:i[r]>o[r]?1:-1}return i.length-o.length}(o,r,v):o<r?-1:r<o?1:0)),A(C,function(t){t=t.sort;t&&(n=t(c,i,o,r,n))}),0===(n*=c.sortReturnNumber)&&P++}0===n&&(n=t.pos>e.pos?1:-1);return n}),l.length===s.length);function f(t){var e=!!t.selector,n=e&&":"===t.selector[0],t=M(t||{},j);d.push(M({hasSelector:e,hasAttr:!(null===t.attr||""===t.attr),hasData:null!==t.data,hasFilter:n,sortReturnNumber:"asc"===t.order?1:-1},t))}function v(t){for(var e,n=[],i=0,o=-1,r=0;a=(e=t.charAt(i++)).charCodeAt(0);){var a=46==a||48<=a&&a<=57;a!==r&&(n[++o]="",r=a),n[o]+=e}return n}function g(){return l.forEach(function(t){a.appendChild(t.elm)}),a}function m(t){var e=t.elm,n=x.createElement("div");return t.ghost=n,e.parentNode.insertBefore(n,e),t}function y(t,e){var n=t.ghost,i=n.parentNode;i.insertBefore(e,n),i.removeChild(n),delete t.ghost}function b(t,e){var n,t=t.elm;return e.selector&&(e.hasFilter?t.matchesSelector(e.selector)||(t=null):t=t.querySelector(e.selector)),e.hasAttr?n=t.getAttribute(e.attr):e.useVal?n=t.value||t.getAttribute("value"):e.hasData?n=t.getAttribute("data-"+e.data):t&&(n=t.textContent),n=null===(n=w(n)?(n=e.cases?n:n.toLowerCase()).replace(/\s+/g," "):n)?T:n}function w(t){return"string"==typeof t}return u&&h?e?l.forEach(function(t,e){t.elm.style.order=e}):o&&o.appendChild(g()):(h=d[0].place,p="start"===h,t="end"===h,e="first"===h,i="last"===h,"org"===h?(l.forEach(m),l.forEach(function(t,e){y(n[e],t.elm)})):p||t?(h=n[p?0:n.length-1],r=h&&h.elm.parentNode,(p=r&&(p&&r.firstChild||r.lastChild))&&(m(h=p!==h.elm?{elm:p}:h),t&&r.appendChild(h.ghost),y(h,g()))):(e||i)&&y(m(n[e?0:n.length-1]),g())),l.map(function(t){return t.elm})},{plugin:e,defaults:j})}())},,,,,,,,,,,,,,,function(e,n,i){"use strict";function v(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function j(i){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?v(Object(o),!0).forEach(function(t){var e,n;e=i,n=o[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(o,t))})}return i}function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function m(t,e){if(null==t)return{};var n,i=function(t,e){if(null==t)return{};for(var n,i={},o=Object.keys(t),r=0;r<o.length;r++)n=o[r],0<=e.indexOf(n)||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),r=0;r<o.length;r++)n=o[r],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n]);return i}function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var b=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),w=t(/Edge/i),y=t(/firefox/i),_=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),x=t(/iP(ad|od|hone)/i),E=t(/chrome/i)&&t(/android/i),S={capture:!1,passive:!1};function l(t,e,n){t.addEventListener(e,n,!b&&S)}function r(t,e,n){t.removeEventListener(e,n,!b&&S)}function O(t,e){if(e&&(">"===e[0]&&(e=e.substring(1)),t))try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}function A(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"!==e[0]||t.parentNode===n)&&O(t,e)||i&&t===n)return t}while(t!==n&&(t=(o=t).host&&o!==document&&o.host.nodeType?o.host:o.parentNode))}var o;return null}var C,k=/\s+/g;function M(t,e,n){var i;t&&e&&(t.classList?t.classList[n?"add":"remove"](e):(i=(" "+t.className+" ").replace(k," ").replace(" "+e+" "," "),t.className=(i+(n?" "+e:"")).replace(k," ")))}function L(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];i[e=e in i||-1!==e.indexOf("webkit")?e:"-webkit-"+e]=n+("string"==typeof n?"":"px")}}function h(t,e){var n="";if("string"==typeof t)n=t;else do{var i=L(t,"transform")}while(i&&"none"!==i&&(n=i+" "+n),!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function J(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,r=i.length;if(n)for(;o<r;o++)n(i[o],o);return i}return[]}function P(){var t=document.scrollingElement;return t||document.documentElement}function I(t,e,n,i,o){if(t.getBoundingClientRect||t===window){var r,a,s,l,c,u,d=t!==window&&t.parentNode&&t!==P()?(a=(r=t.getBoundingClientRect()).top,s=r.left,l=r.bottom,c=r.right,u=r.height,r.width):(s=a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,window.innerWidth);if((e||n)&&t!==window&&(o=o||t.parentNode,!b))do{if(o&&o.getBoundingClientRect&&("none"!==L(o,"transform")||n&&"static"!==L(o,"position"))){var p=o.getBoundingClientRect();a-=p.top+parseInt(L(o,"border-top-width")),s-=p.left+parseInt(L(o,"border-left-width")),l=a+r.height,c=s+r.width;break}}while(o=o.parentNode);return i&&t!==window&&(i=(e=h(o||t))&&e.a,t=e&&e.d,e)&&(l=(a/=t)+(u/=t),c=(s/=i)+(d/=i)),{top:a,left:s,bottom:l,right:c,width:d,height:u}}}function Q(t,e,n){for(var i=T(t,!0),o=I(t)[e];i;){var r=I(i)[n];if(!("top"===n||"left"===n?r<=o:o<=r))return i;if(i===P())break;i=T(i,!1)}return!1}function D(t,e,n,i){for(var o=0,r=0,a=t.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==Z.ghost&&(i||a[r]!==Z.dragged)&&A(a[r],n.draggable,t,!1)){if(o===e)return a[r];o++}r++}return null}function $(t,e){for(var n=t.lastElementChild;n&&(n===Z.ghost||"none"===L(n,"display")||e&&!O(n,e));)n=n.previousElementSibling;return n||null}function F(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Z.clone||e&&!O(t,e)||n++;return n}function tt(t){var e=0,n=0,i=P();if(t)do{var o=h(t),r=o.a,o=o.d}while(e+=t.scrollLeft*r,n+=t.scrollTop*o,t!==i&&(t=t.parentNode));return[e,n]}function T(t,e){if(t&&t.getBoundingClientRect){var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=L(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return P();if(i||e)return n;i=!0}}}while(n=n.parentNode)}return P()}function et(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function nt(e,n){return function(){var t;C||(1===(t=arguments).length?e.call(this,t[0]):e.apply(this,t),C=setTimeout(function(){C=void 0},n))}}function it(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function ot(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var R="Sortable"+(new Date).getTime();function rt(){var e,i=[];return{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){var e,n;"none"!==L(t,"display")&&t!==Z.ghost&&(i.push({target:t,rect:I(t)}),e=j({},i[i.length-1].rect),t.thisAnimationDuration&&(n=h(t,!0))&&(e.top-=n.f,e.left-=n.e),t.fromRect=e)})},addAnimationState:function(t){i.push(t)},removeAnimationState:function(t){i.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}(i,{target:t}),1)},animateAll:function(t){var c,u,d=this;this.options.animation?(c=!1,u=0,i.forEach(function(t){var e,n=0,i=t.target,o=i.fromRect,r=I(i),a=i.prevFromRect,s=i.prevToRect,t=t.rect,l=h(i,!0);l&&(r.top-=l.f,r.left-=l.e),i.toRect=r,i.thisAnimationDuration&&et(a,r)&&!et(o,r)&&(t.top-r.top)/(t.left-r.left)==(o.top-r.top)/(o.left-r.left)&&(l=t,a=a,s=s,e=d.options,n=Math.sqrt(Math.pow(a.top-l.top,2)+Math.pow(a.left-l.left,2))/Math.sqrt(Math.pow(a.top-s.top,2)+Math.pow(a.left-s.left,2))*e.animation),et(r,o)||(i.prevFromRect=o,i.prevToRect=r,n=n||d.options.animation,d.animate(i,t,r,n)),n&&(c=!0,u=Math.max(u,n),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},n),i.thisAnimationDuration=n)}),clearTimeout(e),c?e=setTimeout(function(){"function"==typeof t&&t()},u):"function"==typeof t&&t(),i=[]):(clearTimeout(e),"function"==typeof t&&t())},animate:function(t,e,n,i){var o,r;i&&(L(t,"transition",""),L(t,"transform",""),r=(o=h(this.el))&&o.a,o=o&&o.d,r=(e.left-n.left)/(r||1),e=(e.top-n.top)/(o||1),t.animatingX=!!r,t.animatingY=!!e,L(t,"transform","translate3d("+r+"px,"+e+"px,0)"),this.forRepaintDummy=t.offsetWidth,L(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),L(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){L(t,"transition",""),L(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},i))}}}var s=[],at={initializeByDefault:!0},st={mount:function(e){for(var t in at)!at.hasOwnProperty(t)||t in e||(e[t]=at[t]);s.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),s.push(e)},pluginEvent:function(e,n,i){var t=this,o=(this.eventCanceled=!1,i.cancel=function(){t.eventCanceled=!0},e+"Global");s.forEach(function(t){n[t.pluginName]&&(n[t.pluginName][o]&&n[t.pluginName][o](j({sortable:n},i)),n.options[t.pluginName])&&n[t.pluginName][e]&&n[t.pluginName][e](j({sortable:n},i))})},initializePlugins:function(n,i,o,t){for(var e in s.forEach(function(t){var e=t.pluginName;(n.options[e]||t.initializeByDefault)&&((t=new t(n,i,n.options)).sortable=n,t.options=n.options,n[e]=t,a(o,t.defaults))}),n.options){var r;n.options.hasOwnProperty(e)&&void 0!==(r=this.modifyOption(n,e,n.options[e]))&&(n.options[e]=r)}},getEventProperties:function(e,n){var i={};return s.forEach(function(t){"function"==typeof t.eventProperties&&a(i,t.eventProperties.call(n[t.pluginName],e))}),i},modifyOption:function(e,n,i){var o;return s.forEach(function(t){e[t.pluginName]&&t.optionListeners&&"function"==typeof t.optionListeners[n]&&(o=t.optionListeners[n].call(e[t.pluginName],i))}),o}};function lt(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,r=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,p=t.originalEvent,h=t.putSortable,t=t.extraEventProperties;if(e=e||n&&n[R]){var f,v,g=e.options,m="on"+i.charAt(0).toUpperCase()+i.substr(1),y=(!window.CustomEvent||b||w?(f=document.createEvent("Event")).initEvent(i,!0,!0):f=new CustomEvent(i,{bubbles:!0,cancelable:!0}),f.to=a||n,f.from=s||n,f.item=o||n,f.clone=r,f.oldIndex=l,f.newIndex=c,f.oldDraggableIndex=u,f.newDraggableIndex=d,f.originalEvent=p,f.pullMode=h?h.lastPutMode:void 0,j(j({},t),st.getEventProperties(i,e)));for(v in y)f[v]=y[v];n&&n.dispatchEvent(f),g[m]&&g[m].call(e,f)}}function z(t,e){var n=(i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).evt,i=m(i,ct);st.pluginEvent.bind(Z)(t,e,j({dragEl:U,parentEl:H,ghostEl:V,rootEl:W,nextEl:q,lastDownEl:vt,cloneEl:c,cloneHidden:o,dragStarted:xt,putSortable:X,activeSortable:Z.active,originalEvent:n,oldIndex:f,oldDraggableIndex:gt,newIndex:G,newDraggableIndex:Y,hideGhostForTarget:pt,unhideGhostForTarget:ht,cloneNowHidden:function(){o=!0},cloneNowShown:function(){o=!1},dispatchSortableEvent:function(t){B({sortable:e,name:t,originalEvent:n})}},i))}var ct=["evt"];function B(t){lt(j({putSortable:X,cloneEl:c,targetEl:U,rootEl:W,oldIndex:f,oldDraggableIndex:gt,newIndex:G,newDraggableIndex:Y},t))}function ut(t,e){var n,i=L(t),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=D(t,0,e),t=D(t,1,e),e=r&&L(r),a=t&&L(t),s=e&&parseInt(e.marginLeft)+parseInt(e.marginRight)+I(r).width,l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+I(t).width;return"flex"===i.display?"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal":"grid"===i.display?i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":r&&e.float&&"none"!==e.float?(n="left"===e.float?"left":"right",!t||"both"!==a.clear&&a.clear!==n?"horizontal":"vertical"):r&&("block"===e.display||"flex"===e.display||"table"===e.display||"grid"===e.display||o<=s&&"none"===i[Ft]||t&&"none"===i[Ft]&&o<s+l)?"vertical":"horizontal"}function dt(t){function s(r,a){return function(t,e,n,i){var o=t.options.group.name&&e.options.group.name&&t.options.group.name===e.options.group.name;return!(null!=r||!a&&!o)||null!=r&&!1!==r&&(a&&"clone"===r?r:"function"==typeof r?s(r(t,e,n,i),a)(t,e,n,i):(o=(a?t:e).options.group.name,!0===r||"string"==typeof r&&r===o||r.join&&-1<r.indexOf(o)))}}var e={},n=t.group;n&&"object"==g(n)||(n={name:n}),e.name=n.name,e.checkPull=s(n.pull,!0),e.checkPut=s(n.put),e.revertClone=n.revertClone,t.group=e}function pt(){!zt&&V&&L(V,"display","none")}function ht(){!zt&&V&&L(V,"display","")}function N(t){if(U){t=t.touches?t.touches[0]:t;o=t.clientX,r=t.clientY,Pt.some(function(t){var e,n,i=t[R].options.emptyInsertThreshold;if(i&&!$(t))return n=I(t),e=o>=n.left-i&&o<=n.right+i,n=r>=n.top-i&&r<=n.bottom+i,e&&n?a=t:void 0});var e=a;if(e){var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[R]._onDragOver(i)}}var o,r,a}function ft(t){U&&U.parentNode[R]._isOutsideThisEl(t.target)}var U,H,V,W,q,vt,c,o,f,G,gt,Y,mt,X,u,d,yt,bt,wt,_t,xt,Et,St,Ot,p,Ct=!1,kt=!1,Pt=[],Tt=!1,jt=!1,At=[],Mt=!1,Lt=[],It="undefined"!=typeof document,Dt=x,Ft=w||b?"cssFloat":"float",Rt=It&&!E&&!x&&"draggable"in document.createElement("div"),zt=function(){var t;if(It)return!b&&((t=document.createElement("x")).style.cssText="pointer-events:auto","auto"===t.style.pointerEvents)}();It&&document.addEventListener("click",function(t){if(kt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),kt=!1},!0);function Z(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=a({},e),t[R]=this;var n,i,o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ut(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Z.supportPointer&&"PointerEvent"in window&&!_,emptyInsertThreshold:5};for(n in st.initializePlugins(this,t,o),o)n in e||(e[n]=o[n]);for(i in dt(e),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!e.forceFallback&&Rt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?l(t,"pointerdown",this._onTapStart):(l(t,"mousedown",this._onTapStart),l(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(l(t,"dragover",this),l(t,"dragenter",this)),Pt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),a(this,rt())}function Bt(t,e,n,i,o,r,a,s){var l,c,u=t[R],d=u.options.onMove;return!window.CustomEvent||b||w?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=o||e,l.relatedRect=r||I(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),c=d?d.call(u,l,a):c}function Nt(t){t.draggable=!1}function Ut(){Mt=!1}function Ht(t){return setTimeout(t,0)}function Vt(t){return clearTimeout(t)}Z.prototype={constructor:Z,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Et=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,U):this.options.direction},_onTapStart:function(e){if(e.cancelable){for(var n=this,i=this.el,t=this.options,o=t.preventOnFilter,r=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=t.filter,u=i,d=(Lt.length=0,u.getElementsByTagName("input")),p=d.length;p--;){var h=d[p];h.checked&&Lt.push(h)}if(!U&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||t.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!_||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=A(s,t.draggable,i,!1))&&s.animated||vt===s)){if(f=F(s),gt=F(s,t.draggable),"function"==typeof c){if(c.call(this,e,s,this))return B({sortable:n,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),z("filter",n,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c=c&&c.split(",").some(function(t){if(t=A(l,t.trim(),i,!1))return B({sortable:n,rootEl:t,name:"filter",targetEl:s,fromEl:i,toEl:i}),z("filter",n,{evt:e}),!0}))return void(o&&e.cancelable&&e.preventDefault());t.handle&&!A(l,t.handle,i,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(t,e,n){var i,o=this,r=o.el,a=o.options,s=r.ownerDocument;n&&!U&&n.parentNode===r&&(i=I(n),W=r,H=(U=n).parentNode,q=U.nextSibling,vt=n,mt=a.group,u={target:Z.dragged=U,clientX:(e||t).clientX,clientY:(e||t).clientY},wt=u.clientX-i.left,_t=u.clientY-i.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,U.style["will-change"]="all",r=function(){z("delayEnded",o,{evt:t}),Z.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!y&&o.nativeDraggable&&(U.draggable=!0),o._triggerDragStart(t,e),B({sortable:o,name:"choose",originalEvent:t}),M(U,a.chosenClass,!0))},a.ignore.split(",").forEach(function(t){J(U,t.trim(),Nt)}),l(s,"dragover",N),l(s,"mousemove",N),l(s,"touchmove",N),l(s,"mouseup",o._onDrop),l(s,"touchend",o._onDrop),l(s,"touchcancel",o._onDrop),y&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),z("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(w||b)?r():Z.eventCanceled?this._onDrop():(l(s,"mouseup",o._disableDelayedDrag),l(s,"touchend",o._disableDelayedDrag),l(s,"touchcancel",o._disableDelayedDrag),l(s,"mousemove",o._delayedDragTouchMoveHandler),l(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&l(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,a.delay)))},_delayedDragTouchMoveHandler:function(t){t=t.touches?t.touches[0]:t;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&Nt(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;r(t,"mouseup",this._disableDelayedDrag),r(t,"touchend",this._disableDelayedDrag),r(t,"touchcancel",this._disableDelayedDrag),r(t,"mousemove",this._delayedDragTouchMoveHandler),r(t,"touchmove",this._delayedDragTouchMoveHandler),r(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?l(document,"pointermove",this._onTouchMove):l(document,e?"touchmove":"mousemove",this._onTouchMove):(l(U,"dragend",this),l(W,"dragstart",this._onDragStart));try{document.selection?Ht(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){var n;Ct=!1,W&&U?(z("dragStarted",this,{evt:e}),this.nativeDraggable&&l(document,"dragover",ft),n=this.options,t||M(U,n.dragClass,!1),M(U,n.ghostClass,!0),Z.active=this,t&&this._appendGhost(),B({sortable:this,name:"start",originalEvent:e})):this._nulling()},_emulateDragOver:function(){if(d){this._lastX=d.clientX,this._lastY=d.clientY,pt();for(var t=document.elementFromPoint(d.clientX,d.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(d.clientX,d.clientY))!==e;)e=t;if(U.parentNode[R]._isOutsideThisEl(t),e)do{if(e[R])if(e[R]._onDragOver({clientX:d.clientX,clientY:d.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}while(e=(t=e).parentNode);ht()}},_onTouchMove:function(t){if(u){var e=this.options,n=e.fallbackTolerance,e=e.fallbackOffset,i=t.touches?t.touches[0]:t,o=V&&h(V,!0),r=V&&o&&o.a,a=V&&o&&o.d,s=Dt&&p&&tt(p),r=(i.clientX-u.clientX+e.x)/(r||1)+(s?s[0]-At[0]:0)/(r||1),e=(i.clientY-u.clientY+e.y)/(a||1)+(s?s[1]-At[1]:0)/(a||1);if(!Z.active&&!Ct){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}V&&(o?(o.e+=r-(yt||0),o.f+=e-(bt||0)):o={a:1,b:0,c:0,d:1,e:r,f:e},s="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")"),L(V,"webkitTransform",s),L(V,"mozTransform",s),L(V,"msTransform",s),L(V,"transform",s),yt=r,bt=e,d=i),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!V){var t=this.options.fallbackOnBody?document.body:W,e=I(U,!0,Dt,!0,t),n=this.options;if(Dt){for(p=t;"static"===L(p,"position")&&"none"===L(p,"transform")&&p!==document;)p=p.parentNode;p!==document.body&&p!==document.documentElement?(p===document&&(p=P()),e.top+=p.scrollTop,e.left+=p.scrollLeft):p=P(),At=tt(p)}M(V=U.cloneNode(!0),n.ghostClass,!1),M(V,n.fallbackClass,!0),M(V,n.dragClass,!0),L(V,"transition",""),L(V,"transform",""),L(V,"box-sizing","border-box"),L(V,"margin",0),L(V,"top",e.top),L(V,"left",e.left),L(V,"width",e.width),L(V,"height",e.height),L(V,"opacity","0.8"),L(V,"position",Dt?"absolute":"fixed"),L(V,"zIndex","100000"),L(V,"pointerEvents","none"),Z.ghost=V,t.appendChild(V),L(V,"transform-origin",wt/parseInt(V.style.width)*100+"% "+_t/parseInt(V.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,o=n.options;z("dragStart",this,{evt:t}),Z.eventCanceled?this._onDrop():(z("setupClone",this),Z.eventCanceled||((c=ot(U)).draggable=!1,c.style["will-change"]="",this._hideClone(),M(c,this.options.chosenClass,!1),Z.clone=c),n.cloneId=Ht(function(){z("clone",n),Z.eventCanceled||(n.options.removeCloneOnHide||W.insertBefore(c,U),n._hideClone(),B({sortable:n,name:"clone"}))}),e||M(U,o.dragClass,!0),e?(kt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(r(document,"mouseup",n._onDrop),r(document,"touchend",n._onDrop),r(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",o.setData)&&o.setData.call(n,i,U),l(document,"drop",n),L(U,"transform","translateZ(0)")),Ct=!0,n._dragStartId=Ht(n._dragStarted.bind(n,e,t)),l(document,"selectstart",n),xt=!0,_&&L(document.body,"user-select","none"))},_onDragOver:function(n){var i,o,r,a=this.el,s=n.target,e=this.options,t=e.group,l=Z.active,c=mt===t,u=e.sort,d=X||l,p=this,h=!1;if(!Mt){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),s=A(s,e.draggable,a,!0),C("dragOver"),Z.eventCanceled)return h;if(U.contains(n.target)||s.animated&&s.animatingX&&s.animatingY||p._ignoreWhileAnimating===s)return P(!1);if(kt=!1,l&&!e.disabled&&(c?u||(o=H!==W):X===this||(this.lastPutMode=mt.checkPull(this,l,U,n))&&t.checkPut(this,l,U,n))){if(r="vertical"===this._getDirection(n,s),i=I(U),C("dragOverValid"),Z.eventCanceled)return h;if(o)return H=W,k(),this._hideClone(),C("revert"),Z.eventCanceled||(q?W.insertBefore(U,q):W.appendChild(U)),P(!0);t=$(a,e.draggable);if(!t||function(t,e,n){n=I($(n.el,n.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}(n,r,this)&&!t.animated){if(t===U)return P(!1);if((s=t&&a===n.target?t:s)&&(m=I(s)),!1!==Bt(W,a,U,i,s,m,n,!!s))return k(),a.appendChild(U),H=a,T(),P(!0)}else if(t&&function(t,e,n){n=I(D(n.el,0,n.options,!0));return e?t.clientX<n.left-10||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-10||t.clientY<n.bottom&&t.clientX<n.left}(n,r,this)){t=D(a,0,e,!0);if(t===U)return P(!1);if(m=I(s=t),!1!==Bt(W,a,U,i,s,m,n,!1))return k(),a.insertBefore(U,t),H=a,T(),P(!0)}else if(s.parentNode===a){var f,v,g,m=I(s),t=U.parentNode!==a,y=(E=U.animated&&U.toRect||i,y=s.animated&&s.toRect||m,_=(O=r)?E.left:E.top,b=O?E.right:E.bottom,E=O?E.width:E.height,S=O?y.left:y.top,w=O?y.right:y.bottom,O=O?y.width:y.height,!(_===S||b===w||_+E/2===S+O/2)),b=r?"top":"left",w=Q(s,"top","top")||Q(U,"top","top"),_=w?w.scrollTop:void 0;if(Et!==s&&(v=m[b],Tt=!1,jt=!y&&e.invertSwap||t),0!==(f=function(t,e,n,i,o,r,a,s){var t=i?t.clientY:t.clientX,l=i?n.height:n.width,c=i?n.top:n.left,i=i?n.bottom:n.right,n=!1;if(!a)if(s&&Ot<l*o){if(Tt=!Tt&&(1===St?c+l*r/2<t:t<i-l*r/2)?!0:Tt)n=!0;else if(1===St?t<c+Ot:i-Ot<t)return-St}else if(c+l*(1-o)/2<t&&t<i-l*(1-o)/2)return function(t){return F(U)<F(t)?1:-1}(e);if((n=n||a)&&(t<c+l*r/2||i-l*r/2<t))return c+l/2<t?1:-1;return 0}(n,s,m,r,y?1:e.swapThreshold,null==e.invertedSwapThreshold?e.swapThreshold:e.invertedSwapThreshold,jt,Et===s)))for(var x=F(U);(g=H.children[x-=f])&&("none"===L(g,"display")||g===V););if(0===f||g===s)return P(!1);St=f;var E=(Et=s).nextElementSibling,S=!1,O=Bt(W,a,U,i,s,m,n,S=1===f);if(!1!==O)return 1!==O&&-1!==O||(S=1===O),Mt=!0,setTimeout(Ut,30),k(),S&&!E?a.appendChild(U):s.parentNode.insertBefore(U,S?E:s),w&&it(w,0,_-w.scrollTop),H=U.parentNode,void 0===v||jt||(Ot=Math.abs(v-I(s)[b])),T(),P(!0)}if(a.contains(U))return P(!1)}return!1}function C(t,e){z(t,p,j({evt:n,isOwner:c,axis:r?"vertical":"horizontal",revert:o,dragRect:i,targetRect:m,canSort:u,fromSortable:d,target:s,completed:P,onMove:function(t,e){return Bt(W,a,U,i,t,I(t),n,e)},changed:T},e))}function k(){C("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function P(t){return C("dragOverCompleted",{insertion:t}),t&&(c?l._hideClone():l._showClone(p),p!==d&&(M(U,(X||l).options.ghostClass,!1),M(U,e.ghostClass,!0)),X!==p&&p!==Z.active?X=p:p===Z.active&&(X=X&&null),d===p&&(p._ignoreWhileAnimating=s),p.animateAll(function(){C("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d)&&(d.animateAll(),d._ignoreWhileAnimating=null),(s===U&&!U.animated||s===a&&!s.animated)&&(Et=null),e.dragoverBubble||n.rootEl||s===document||(U.parentNode[R]._isOutsideThisEl(n.target),t)||N(n),!e.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),h=!0}function T(){G=F(U),Y=F(U,e.draggable),B({sortable:p,name:"change",toEl:a,newIndex:G,newDraggableIndex:Y,originalEvent:n})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){r(document,"mousemove",this._onTouchMove),r(document,"touchmove",this._onTouchMove),r(document,"pointermove",this._onTouchMove),r(document,"dragover",N),r(document,"mousemove",N),r(document,"touchmove",N)},_offUpEvents:function(){var t=this.el.ownerDocument;r(t,"mouseup",this._onDrop),r(t,"touchend",this._onDrop),r(t,"pointerup",this._onDrop),r(t,"touchcancel",this._onDrop),r(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;G=F(U),Y=F(U,n.draggable),z("drop",this,{evt:t}),H=U&&U.parentNode,G=F(U),Y=F(U,n.draggable),Z.eventCanceled||(Tt=jt=Ct=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Vt(this.cloneId),Vt(this._dragStartId),this.nativeDraggable&&(r(document,"drop",this),r(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_&&L(document.body,"user-select",""),L(U,"transform",""),t&&(xt&&(t.cancelable&&t.preventDefault(),n.dropBubble||t.stopPropagation()),V&&V.parentNode&&V.parentNode.removeChild(V),(W===H||X&&"clone"!==X.lastPutMode)&&c&&c.parentNode&&c.parentNode.removeChild(c),U)&&(this.nativeDraggable&&r(U,"dragend",this),Nt(U),U.style["will-change"]="",xt&&!Ct&&M(U,(X||this).options.ghostClass,!1),M(U,this.options.chosenClass,!1),B({sortable:this,name:"unchoose",toEl:H,newIndex:null,newDraggableIndex:null,originalEvent:t}),W!==H?(0<=G&&(B({rootEl:H,name:"add",toEl:H,fromEl:W,originalEvent:t}),B({sortable:this,name:"remove",toEl:H,originalEvent:t}),B({rootEl:H,name:"sort",toEl:H,fromEl:W,originalEvent:t}),B({sortable:this,name:"sort",toEl:H,originalEvent:t})),X&&X.save()):G!==f&&0<=G&&(B({sortable:this,name:"update",toEl:H,originalEvent:t}),B({sortable:this,name:"sort",toEl:H,originalEvent:t})),Z.active)&&(null!=G&&-1!==G||(G=f,Y=gt),B({sortable:this,name:"end",toEl:H,originalEvent:t}),this.save())),this._nulling()},_nulling:function(){z("nulling",this),W=U=H=V=q=c=vt=o=u=d=xt=G=Y=f=gt=Et=St=X=mt=Z.dragged=Z.ghost=Z.clone=Z.active=null,Lt.forEach(function(t){t.checked=!0}),Lt.length=yt=bt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":var e;U&&(this._onDragOver(t),(e=t).dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable)&&e.preventDefault();break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,o=n.length,r=this.options;i<o;i++)A(t=n[i],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||function(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;for(;n--;)i+=e.charCodeAt(n);return i.toString(36)}(t));return e},sort:function(t,e){var n={},i=this.el;this.toArray().forEach(function(t,e){e=i.children[e];A(e,this.options.draggable,i,!1)&&(n[t]=e)},this),e&&this.captureAnimationState(),t.forEach(function(t){n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return A(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=st.modifyOption(this,t,e);n[t]=void 0!==i?i:e,"group"===t&&dt(n)},destroy:function(){z("destroy",this);var t=this.el;t[R]=null,r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),r(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(r(t,"dragover",this),r(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Pt.splice(Pt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){o||(z("hideClone",this),Z.eventCanceled)||(L(c,"display","none"),this.options.removeCloneOnHide&&c.parentNode&&c.parentNode.removeChild(c),o=!0)},_showClone:function(t){"clone"!==t.lastPutMode?this._hideClone():o&&(z("showClone",this),Z.eventCanceled||(U.parentNode!=W||this.options.group.revertClone?q?W.insertBefore(c,q):W.appendChild(c):W.insertBefore(c,U),this.options.group.revertClone&&this.animate(U,c),L(c,"display",""),o=!1))}},It&&l(document,"touchmove",function(t){(Z.active||Ct)&&t.cancelable&&t.preventDefault()}),Z.utils={on:l,off:r,css:L,find:J,is:function(t,e){return!!A(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:nt,closest:A,toggleClass:M,clone:ot,index:F,nextTick:Ht,cancelNextTick:Vt,detectDirection:ut,getChild:D},Z.get=function(t){return t[R]},Z.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];(e=e[0].constructor===Array?e[0]:e).forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Z.utils=j(j({},Z.utils),t.utils)),st.mount(t)})},Z.create=function(t,e){return new Z(t,e)};var Wt,qt,Gt,Yt,Xt,Zt,K=[],Kt=!(Z.version="1.14.0");function Jt(){K.forEach(function(t){clearInterval(t.pid)}),K=[]}function Qt(){clearInterval(Zt)}function $t(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,o=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,t=t.unhideGhostForTarget;e&&(o=n||o,a(),a=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,e=document.elementFromPoint(a.clientX,a.clientY),t(),o)&&!o.el.contains(e)&&(r("spill"),this.onSpill({dragEl:i,putSortable:n}))}var te=nt(function(n,t,e,i){if(t.scroll){var o,r=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=P(),u=!1,d=0,p=Wt=qt!==e&&(qt=e,Jt(),Wt=t.scroll,o=t.scrollFn,!0===Wt)?T(e,!0):Wt;do{var h=p,f=I(h),v=f.top,g=f.bottom,m=f.left,y=f.right,b=f.width,f=f.height,w=void 0,_=void 0,x=h.scrollWidth,E=h.scrollHeight,S=L(h),O=h.scrollLeft,C=h.scrollTop,_=h===c?(w=b<x&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),f<E&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(w=b<x&&("auto"===S.overflowX||"scroll"===S.overflowX),f<E&&("auto"===S.overflowY||"scroll"===S.overflowY)),S=w&&(Math.abs(y-r)<=s&&O+b<x)-(Math.abs(m-r)<=s&&!!O),w=_&&(Math.abs(g-a)<=s&&C+f<E)-(Math.abs(v-a)<=s&&!!C);if(!K[d])for(var k=0;k<=d;k++)K[k]||(K[k]={});K[d].vx==S&&K[d].vy==w&&K[d].el===h||(K[d].el=h,K[d].vx=S,K[d].vy=w,clearInterval(K[d].pid),0==S&&0==w)||(u=!0,K[d].pid=setInterval(function(){i&&0===this.layer&&Z.active._onTouchMove(Xt);var t=K[this.layer].vy?K[this.layer].vy*l:0,e=K[this.layer].vx?K[this.layer].vx*l:0;"function"==typeof o&&"continue"!==o.call(Z.dragged.parentNode[R],e,t,n,Xt,K[this.layer].el)||it(K[this.layer].el,e,t)}.bind({layer:d}),24)),d++}while(t.bubbleScroll&&p!==c&&(p=T(p,!1)));Kt=u}},30);function ee(){}function ne(){}ee.prototype={startIndex:null,dragStart:function(t){t=t.oldDraggableIndex;this.startIndex=t},onSpill:function(t){var e=t.dragEl,t=t.putSortable,n=(this.sortable.captureAnimationState(),t&&t.captureAnimationState(),D(this.sortable.el,this.startIndex,this.options));n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),t&&t.animateAll()},drop:$t},a(ee,{pluginName:"revertOnSpill"}),ne.prototype={onSpill:function(t){var e=t.dragEl,t=t.putSortable||this.sortable;t.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),t.animateAll()},drop:$t},a(ne,{pluginName:"removeOnSpill"});Z.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){t=t.originalEvent;this.sortable.nativeDraggable?l(document,"dragover",this._handleAutoScroll):this.options.supportPointer?l(document,"pointermove",this._handleFallbackAutoScroll):t.touches?l(document,"touchmove",this._handleFallbackAutoScroll):l(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){t=t.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?r(document,"dragover",this._handleAutoScroll):(r(document,"pointermove",this._handleFallbackAutoScroll),r(document,"touchmove",this._handleFallbackAutoScroll),r(document,"mousemove",this._handleFallbackAutoScroll)),Qt(),Jt(),clearTimeout(C),C=void 0},nulling:function(){Xt=qt=Wt=Kt=Zt=Gt=Yt=null,K.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(e,n){var i,o=this,r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,t=document.elementFromPoint(r,a);Xt=e,n||this.options.forceAutoScrollFallback||w||b||_?(te(e,this.options,t,n),i=T(t,!0),!Kt||Zt&&r===Gt&&a===Yt||(Zt&&Qt(),Zt=setInterval(function(){var t=T(document.elementFromPoint(r,a),!0);t!==i&&(i=t,Jt()),te(e,o.options,t,n)},10),Gt=r,Yt=a)):this.options.bubbleScroll&&T(t,!0)!==P()?te(e,this.options,T(t,!1),!1):Jt()}},a(t,{pluginName:"scroll",initializeByDefault:!0})}),Z.mount(ne,ee),n.a=Z},,,,,function(t,e,n){"use strict";!function(p){Object.defineProperty(e,"__esModule",{value:!0}),e.PdfrenderView=void 0;var h=n(197),f=n(48);function t(t){void 0===t&&(t={}),Object.assign(this,t)}t.prototype.fileInfo=function(t,e){this.workerServer},t.prototype.renderPage=function(t,e,n,i,o,r,a,s){var l,c,u=this,d=(void 0===o&&(o=150),void 0===r&&(r=null),void 0===a&&(a={}),void 0===s&&(s=2),this.workerServer+"/v1/pdfrender/"+t+"/"+e+"/"+n+"/"+o);null!=r&&(d+="/1/"+r),d+="?token="+window.ilovepdfConfig.token,"resetForms"in a&&(l=!0===a.resetForms?1:0,d+="&reset_forms="+l),(c=p("string"==typeof i?"#"+i:c=i)).attr("src",d),c.attr("data-dpi",o),h.ImageHelper.test(d).then(function(){},function(){c.attr("src","data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22/%3E"),0<s?window.setTimeout(function(){f.Api.ping(d,!0).then(function(){s--,u.renderPage(t,e,n,i,o,r,a,s)},function(){})},500):c.attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjeJSQ8B8ABmwCooj3XREAAAAASUVORK5CYII=")})},e.PdfrenderView=t}.call(this,n(1))},,,,,,,,function(t,e,n){"use strict";function i(){}Object.defineProperty(e,"__esModule",{value:!0}),e.ImageHelper=void 0,i.test=function(i,o,r){return void 0===o&&(o=null),void 0===r&&(r=null),new Promise(function(t,e){var n=new Image;n.addEventListener("load",function(){o&&"function"==typeof o&&o();t()}),n.addEventListener("error",function(){r&&"function"==typeof r&&r();e()}),n.src=i})},e.ImageHelper=i},,,,,,,,,,,,,,function(t,e,n){t.exports=function(){var F={},v=(Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0,F.default=function(t){return!(!t||!t.Window)&&t instanceof t.Window},{}),R=(Object.defineProperty(v,"__esModule",{value:!0}),v.getWindow=function(t){return(0,F.default)(t)?t:(t.ownerDocument||t).defaultView||z.window},v.init=B,v.window=v.realWindow=void 0),z=(v.realWindow=R,void 0);function B(t){v.realWindow=R=t;var e=t.document.createTextNode("");e.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(e)===e&&(t=t.wrap(t)),v.window=z=t}v.window=z,"undefined"!=typeof window&&window&&B(window);var O={};function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var U=function(t){return!!t&&"object"===N(t)},H=function(t){return"function"==typeof t},V,W=(O.default={window:function(t){return t===v.window||(0,F.default)(t)},docFrag:function(t){return U(t)&&11===t.nodeType},object:U,func:H,number:function(t){return"number"==typeof t},bool:function(t){return"boolean"==typeof t},string:function(t){return"string"==typeof t},element:function(t){if(!t||"object"!==N(t))return!1;var e=v.getWindow(t)||v.window;return/object|function/.test("undefined"==typeof Element?"undefined":N(Element))?t instanceof Element||t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName},plainObject:function(t){return U(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString())},array:function(t){return U(t)&&void 0!==t.length&&H(t.splice)}},{});function q(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.prepared.axis;"x"===n?(e.coords.cur.page.y=e.coords.start.page.y,e.coords.cur.client.y=e.coords.start.client.y,e.coords.velocity.client.y=0,e.coords.velocity.page.y=0):"y"===n&&(e.coords.cur.page.x=e.coords.start.page.x,e.coords.cur.client.x=e.coords.start.client.x,e.coords.velocity.client.x=0,e.coords.velocity.page.x=0)}}function G(t){var e=t.iEvent,n=t.interaction;if("drag"===n.prepared.name){var i=n.prepared.axis;if("x"===i||"y"===i){var o="x"===i?"y":"x";e.page[o]=n.coords.start.page[o],e.client[o]=n.coords.start.client[o],e.delta[o]=0}}}Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var Y={id:"actions/drag",install:function(t){var e=t.actions,n=t.Interactable,i=t.defaults;n.prototype.draggable=Y.draggable,e.map.drag=Y,e.methodDict.drag="draggable",i.actions.drag=Y.defaults},listeners:{"interactions:before-action-move":q,"interactions:action-resume":q,"interactions:action-move":G,"auto-start:check":function(t){var e=t.interaction,n=t.interactable,i=t.buttons,o=n.options.drag;if(o&&o.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(i&n.options.drag.mouseButtons)))return t.action={name:"drag",axis:"start"===o.lockAxis?o.startAxis:o.lockAxis},!1}},draggable:function(t){return O.default.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):O.default.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},beforeMove:q,move:G,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},X,g=(W.default=Y,{}),n=(Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,{init:function(t){var e=t;n.document=e.document,n.DocumentFragment=e.DocumentFragment||Z,n.SVGElement=e.SVGElement||Z,n.SVGSVGElement=e.SVGSVGElement||Z,n.SVGElementInstance=e.SVGElementInstance||Z,n.Element=e.Element||Z,n.HTMLElement=e.HTMLElement||n.Element,n.Event=e.Event,n.Touch=e.Touch||Z,n.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null});function Z(){}var K,x=(g.default=n,{}),i=(Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0,{init:function(t){var e=g.default.Element,n=t.navigator||{};i.supportsTouch="ontouchstart"in t||O.default.func(t.DocumentTouch)&&g.default.document instanceof t.DocumentTouch,i.supportsPointerEvent=!1!==n.pointerEnabled&&!!g.default.PointerEvent,i.isIOS=/iP(hone|od|ad)/.test(n.platform),i.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),i.isIe9=/MSIE 9/.test(n.userAgent),i.isOperaMobile="Opera"===n.appName&&i.supportsTouch&&/Presto/.test(n.userAgent),i.prefixedMatchesSelector="matches"in e.prototype?"matches":"webkitMatchesSelector"in e.prototype?"webkitMatchesSelector":"mozMatchesSelector"in e.prototype?"mozMatchesSelector":"oMatchesSelector"in e.prototype?"oMatchesSelector":"msMatchesSelector",i.pEventTypes=i.supportsPointerEvent?g.default.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,i.wheelEvent=g.default.document&&"onmousewheel"in g.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null}),J,_=(x.default=i,{});function Q(t){var e=t.parentNode;if(O.default.docFrag(e)){for(;(e=e.host)&&O.default.docFrag(e););return e}return e}function $(t,e){return v.window!==v.realWindow&&(e=e.replace(/\/deep\//g," ")),t[x.default.prefixedMatchesSelector](e)}Object.defineProperty(_,"__esModule",{value:!0}),_.closest=function(t,e){for(;O.default.element(t);){if($(t,e))return t;t=Q(t)}return null},_.getActualElement=function(t){return t.correspondingUseElement||t},_.getElementClientRect=it,_.getElementRect=function(t){var e=it(t);if(!x.default.isIOS7&&e){var n=nt(v.getWindow(t));e.left+=n.x,e.right+=n.x,e.top+=n.y,e.bottom+=n.y}return e},_.getPath=function(t){for(var e=[];t;)e.push(t),t=Q(t);return e},_.getScrollXY=nt,_.indexOfDeepestElement=function(t){for(var e,n=[],i=0;i<t.length;i++){var o=t[i],r=t[e];if(o&&i!==e)if(r){var a=tt(o),s=tt(r);if(a!==o.ownerDocument)if(s!==o.ownerDocument)if(a!==s){n=n.length?n:et(r);var l=void 0;if(r instanceof g.default.HTMLElement&&o instanceof g.default.SVGElement&&!(o instanceof g.default.SVGSVGElement)){if(o===s)continue;l=o.ownerSVGElement}else l=o;for(var c=et(l,r.ownerDocument),u=0;c[u]&&c[u]===n[u];)u++;var d=[c[u-1],c[u],n[u]];if(d[0])for(var p=d[0].lastChild;p;){if(p===d[1]){e=i,n=c;break}if(p===d[2])break;p=p.previousSibling}}else h=o,f=r,void 0,void 0,(parseInt(v.getWindow(h).getComputedStyle(h).zIndex,10)||0)>=(parseInt(v.getWindow(f).getComputedStyle(f).zIndex,10)||0)&&(e=i);else e=i}else e=i}var h,f;return e},_.matchesSelector=$,_.matchesUpTo=function(t,e,n){for(;O.default.element(t);){if($(t,e))return!0;if((t=Q(t))===n)return $(t,e)}return!1},_.nodeContains=function(t,e){if(t.contains)return t.contains(e);for(;e;){if(e===t)return!0;e=e.parentNode}return!1},_.parentNode=Q,_.trySelector=function(t){return!!O.default.string(t)&&(g.default.document.querySelector(t),!0)};var tt=function(t){return t.parentNode||t.host};function et(t,e){for(var n,i=[],o=t;(n=tt(o))&&o!==e&&n!==o.ownerDocument;)i.unshift(o),o=n;return i}function nt(t){return{x:(t=t||v.window).scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}}function it(t){var e=t instanceof g.default.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}var C={},m=(Object.defineProperty(C,"__esModule",{value:!0}),C.default=function(t,e){for(var n in e)t[n]=e[n];return t},{});function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function rt(t,e,n){return"parent"===t?(0,_.parentNode)(n):"self"===t?e.getRect(n):(0,_.closest)(n,t)}Object.defineProperty(m,"__esModule",{value:!0}),m.addEdges=function(t,e,n){t.left&&(e.left+=n.x),t.right&&(e.right+=n.x),t.top&&(e.top+=n.y),t.bottom&&(e.bottom+=n.y),e.width=e.right-e.left,e.height=e.bottom-e.top},m.getStringOptionResult=rt,m.rectToXY=function(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}},m.resolveRectLike=function(t,e,n,i){var o,r=t;return O.default.string(r)?r=rt(r,e,n):O.default.func(r)&&(r=r.apply(void 0,function(t){if(Array.isArray(t))return ot(t)}(o=i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),O.default.element(r)&&(r=(0,_.getElementRect)(r)),r},m.tlbrToXywh=function(t){return!t||"x"in t&&"y"in t||((t=(0,C.default)({},t)).x=t.left||0,t.y=t.top||0,t.width=t.width||(t.right||0)-t.x,t.height=t.height||(t.bottom||0)-t.y),t},m.xywhToTlbr=function(t){return!t||"left"in t&&"top"in t||((t=(0,C.default)({},t)).left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t};var at={},st=(Object.defineProperty(at,"__esModule",{value:!0}),at.default=function(t,e,n){var i=t.options[n],o=i&&i.origin||t.options.origin,r=(0,m.resolveRectLike)(o,t,e,[t&&e]);return(0,m.rectToXY)(r)||{x:0,y:0}},{});function lt(t){return t.trim().split(/ +/)}Object.defineProperty(st,"__esModule",{value:!0}),st.default=function n(e,i,o){if(o=o||{},O.default.string(e)&&-1!==e.search(" ")&&(e=lt(e)),O.default.array(e))return e.reduce(function(t,e){return(0,C.default)(t,n(e,i,o))},o);if(O.default.object(e)&&(i=e,e=""),O.default.func(i))o[e]=o[e]||[],o[e].push(i);else if(O.default.array(i))for(var t=0;t<i.length;t++){var r;r=i[t],n(e,r,o)}else if(O.default.object(i))for(var a in i){var s=lt(a).map(function(t){return"".concat(e).concat(t)});n(s,i[a],o)}return o};var k={},ct=(Object.defineProperty(k,"__esModule",{value:!0}),k.default=void 0,k.default=function(t,e){return Math.sqrt(t*t+e*e)},{}),E=(Object.defineProperty(ct,"__esModule",{value:!0}),ct.default=function(n,t){n.__set||(n.__set={});var e=function(e){"function"!=typeof n[e]&&"__set"!==e&&Object.defineProperty(n,e,{get:function(){return e in n.__set?n.__set[e]:n.__set[e]=t[e]},set:function(t){n.__set[e]=t},configurable:!0})};for(var i in t)e(i);return n},{});function ut(t){return t instanceof g.default.Event||t instanceof g.default.Touch}function dt(t,e,n){return t=t||"page",(n=n||{}).x=e[t+"X"],n.y=e[t+"Y"],n}function pt(t,e){return e=e||{x:0,y:0},x.default.isOperaMobile&&ut(t)?(dt("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):dt("page",t,e),e}function ht(t,e){return e=e||{},x.default.isOperaMobile&&ut(t)?dt("screen",t,e):dt("client",t,e),e}function ft(t){var e=[];return O.default.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function vt(t){for(var e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<t.length;n++){var i=t[n];for(var o in e)e[o]+=i[o]}for(var r in e)e[r]/=t.length;return e}Object.defineProperty(E,"__esModule",{value:!0}),E.coordsToEvent=function(t){return{coords:t,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},E.copyCoords=function(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp},E.getClientXY=ht,E.getEventTargets=function(t){var e=O.default.func(t.composedPath)?t.composedPath():t.path;return[_.getActualElement(e?e[0]:t.target),_.getActualElement(t.currentTarget)]},E.getPageXY=pt,E.getPointerId=function(t){return O.default.number(t.pointerId)?t.pointerId:t.identifier},E.getPointerType=function(t){return O.default.string(t.pointerType)?t.pointerType:O.default.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type||"")||t instanceof g.default.Touch?"touch":"mouse"},E.getTouchPair=ft,E.getXY=dt,E.isNativePointer=ut,E.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},E.pointerAverage=vt,Object.defineProperty(E,"pointerExtend",{enumerable:!0,get:function(){return ct.default}}),E.setCoordDeltas=function(t,e,n){t.page.x=n.page.x-e.page.x,t.page.y=n.page.y-e.page.y,t.client.x=n.client.x-e.client.x,t.client.y=n.client.y-e.client.y,t.timeStamp=n.timeStamp-e.timeStamp},E.setCoordVelocity=function(t,e){var n=Math.max(e.timeStamp/1e3,.001);t.page.x=e.page.x/n,t.page.y=e.page.y/n,t.client.x=e.client.x/n,t.client.y=e.client.y/n,t.timeStamp=n},E.setCoords=function(t,e,n){var i=e.length>1?vt(e):e[0];pt(i,t.page),ht(i,t.client),t.timeStamp=n},E.setZeroCoords=function(t){t.page.x=0,t.page.y=0,t.client.x=0,t.client.y=0},E.touchAngle=function(t,e){var n=e+"X",i=e+"Y",o=ft(t),r=o[1][n]-o[0][n],a=o[1][i]-o[0][i];return 180*Math.atan2(a,r)/Math.PI},E.touchBBox=function(t){if(!t.length)return null;var e=ft(t),n=Math.min(e[0].pageX,e[1].pageX),i=Math.min(e[0].pageY,e[1].pageY),o=Math.max(e[0].pageX,e[1].pageX),r=Math.max(e[0].pageY,e[1].pageY);return{x:n,y:i,left:n,top:i,right:o,bottom:r,width:o-n,height:r-i}},E.touchDistance=function(t,e){var n=e+"X",i=e+"Y",o=ft(t),r=o[0][n]-o[1][n],a=o[0][i]-o[1][i];return(0,k.default)(r,a)};var gt={};function mt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(gt,"__esModule",{value:!0}),gt.BaseEvent=void 0;var bt=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),yt(this,"immediatePropagationStopped",!1),yt(this,"propagationStopped",!1),this._interaction=t}var t,n;return t=e,(n=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&mt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),f=(gt.BaseEvent=bt,Object.defineProperty(bt.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}}),{}),wt=(Object.defineProperty(f,"__esModule",{value:!0}),f.remove=f.merge=f.from=f.findIndex=f.find=f.contains=void 0,f.contains=function(t,e){return-1!==t.indexOf(e)},f.remove=function(t,e){return t.splice(t.indexOf(e),1)},function(t,e){for(var n=0;n<e.length;n++){var i=e[n];t.push(i)}return t}),_t=(f.merge=wt,f.from=function(t){return wt([],t)},function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}),r=(f.findIndex=_t,f.find=function(t,e){return t[_t(t,e)]},{});function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function Et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function St(t,e){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},St(t,e)}function Ot(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ct(t)}function Ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kt(t)}function Pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(r,"__esModule",{value:!0}),r.DropEvent=void 0;var Tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&St(t,e)}(l,t);var e,n,i,o,s=(i=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=kt(i);if(o){var n=kt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ot(this,t)});function l(t,e,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),Pt(Ct(i=s.call(this,e._interaction)),"dropzone",void 0),Pt(Ct(i),"dragEvent",void 0),Pt(Ct(i),"relatedTarget",void 0),Pt(Ct(i),"draggable",void 0),Pt(Ct(i),"propagationStopped",!1),Pt(Ct(i),"immediatePropagationStopped",!1);var o="dragleave"===n?t.prev:t.cur,r=o.element,a=o.dropzone;return i.type=n,i.target=r,i.currentTarget=r,i.dropzone=a,i.dragEvent=e,i.relatedTarget=e.target,i.draggable=e.interactable,i.timeStamp=e.timeStamp,i}return e=l,(n=[{key:"reject",value:function(){var i=this,t=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&t.cur.dropzone===this.dropzone&&t.cur.element===this.target)if(t.prev.dropzone=this.dropzone,t.prev.element=this.target,t.rejected=!0,t.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var e=t.activeDrops,n=f.findIndex(e,function(t){var e=t.dropzone,n=t.element;return e===i.dropzone&&n===i.target});t.activeDrops.splice(n,1);var o=new l(t,this.dragEvent,"dropdeactivate");o.dropzone=this.dropzone,o.target=this.target,this.dropzone.fire(o)}else this.dropzone.fire(new l(t,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&Et(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),l}(gt.BaseEvent),jt=(r.DropEvent=Tt,{});function At(t,e){for(var n=0;n<t.slice().length;n++){var i=t.slice()[n],o=i.dropzone,r=i.element;e.dropzone=o,e.target=r,o.fire(e),e.propagationStopped=e.immediatePropagationStopped=!1}}function Mt(t,e){for(var n=function(t,e){for(var n=t.interactables,i=[],o=0;o<n.list.length;o++){var r=n.list[o];if(r.options.drop.enabled){var a=r.options.drop.accept;if(!(O.default.element(a)&&a!==e||O.default.string(a)&&!_.matchesSelector(e,a)||O.default.func(a)&&!a({dropzone:r,draggableElement:e})))for(var s=O.default.string(r.target)?r._context.querySelectorAll(r.target):O.default.array(r.target)?r.target:[r.target],l=0;l<s.length;l++){var c=s[l];c!==e&&i.push({dropzone:r,element:c,rect:r.getRect(c)})}}}return i}(t,e),i=0;i<n.length;i++){var o=n[i];o.rect=o.dropzone.getRect(o.element)}return n}function Lt(t,e,n){for(var i=t.dropState,o=t.interactable,r=t.element,a=[],s=0;s<i.activeDrops.length;s++){var l=i.activeDrops[s],c=l.dropzone,u=l.element,d=l.rect;a.push(c.dropCheck(e,n,o,r,u,d)?u:null)}var p=_.indexOfDeepestElement(a);return i.activeDrops[p]||null}function It(t,e,n){var i=t.dropState,o={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(o.activate=new r.DropEvent(i,n,"dropactivate"),o.activate.target=null,o.activate.dropzone=null),"dragend"===n.type&&(o.deactivate=new r.DropEvent(i,n,"dropdeactivate"),o.deactivate.target=null,o.deactivate.dropzone=null),i.rejected||(i.cur.element!==i.prev.element&&(i.prev.dropzone&&(o.leave=new r.DropEvent(i,n,"dragleave"),n.dragLeave=o.leave.target=i.prev.element,n.prevDropzone=o.leave.dropzone=i.prev.dropzone),i.cur.dropzone&&(o.enter=new r.DropEvent(i,n,"dragenter"),n.dragEnter=i.cur.element,n.dropzone=i.cur.dropzone)),"dragend"===n.type&&i.cur.dropzone&&(o.drop=new r.DropEvent(i,n,"drop"),n.dropzone=i.cur.dropzone,n.relatedTarget=i.cur.element),"dragmove"===n.type&&i.cur.dropzone&&(o.move=new r.DropEvent(i,n,"dropmove"),o.move.dragmove=n,n.dropzone=i.cur.dropzone)),o}function Dt(t,e){var n=t.dropState,i=n.activeDrops,o=n.cur,r=n.prev;e.leave&&r.dropzone.fire(e.leave),e.enter&&o.dropzone.fire(e.enter),e.move&&o.dropzone.fire(e.move),e.drop&&o.dropzone.fire(e.drop),e.deactivate&&At(i,e.deactivate),n.prev.dropzone=o.dropzone,n.prev.element=o.element}function Ft(t,e){var n=t.interaction,i=t.iEvent,o=t.event;if("dragmove"===i.type||"dragend"===i.type){var r=n.dropState;e.dynamicDrop&&(r.activeDrops=Mt(e,n.element));var a=i,s=Lt(n,a,o);r.rejected=r.rejected&&!!s&&s.dropzone===r.cur.dropzone&&s.element===r.cur.element,r.cur.dropzone=s&&s.dropzone,r.cur.element=s&&s.element,r.events=It(n,0,a)}}Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=void 0;var Rt={id:"actions/drop",install:function(e){var t=e.actions,n=e.interactStatic,i=e.Interactable,o=e.defaults;e.usePlugin(W.default),i.prototype.dropzone=function(t){return function(t,e){if(O.default.object(e)){if(t.options.drop.enabled=!1!==e.enabled,e.listeners){var n=(0,st.default)(e.listeners),i=Object.keys(n).reduce(function(t,e){return t[/^(enter|leave)/.test(e)?"drag".concat(e):/^(activate|deactivate|move)/.test(e)?"drop".concat(e):e]=n[e],t},{});t.off(t.options.drop.listeners),t.on(i),t.options.drop.listeners=i}return O.default.func(e.ondrop)&&t.on("drop",e.ondrop),O.default.func(e.ondropactivate)&&t.on("dropactivate",e.ondropactivate),O.default.func(e.ondropdeactivate)&&t.on("dropdeactivate",e.ondropdeactivate),O.default.func(e.ondragenter)&&t.on("dragenter",e.ondragenter),O.default.func(e.ondragleave)&&t.on("dragleave",e.ondragleave),O.default.func(e.ondropmove)&&t.on("dropmove",e.ondropmove),/^(pointer|center)$/.test(e.overlap)?t.options.drop.overlap=e.overlap:O.default.number(e.overlap)&&(t.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(t.options.drop.accept=e.accept),"checker"in e&&(t.options.drop.checker=e.checker),t}return O.default.bool(e)?(t.options.drop.enabled=e,t):t.options.drop}(this,t)},i.prototype.dropCheck=function(t,e,n,i,o,r){return function(t,e,n,i,o,r,a){var s=!1;if(!(a=a||t.getRect(r)))return!!t.options.drop.checker&&t.options.drop.checker(e,n,s,t,r,i,o);var l=t.options.drop.overlap;if("pointer"===l){var c=(0,at.default)(i,o,"drag"),u=E.getPageXY(e);u.x+=c.x,u.y+=c.y;var d=u.x>a.left&&u.x<a.right,p=u.y>a.top&&u.y<a.bottom;s=d&&p}var h=i.getRect(o);if(h&&"center"===l){var f=h.left+h.width/2,v=h.top+h.height/2;s=f>=a.left&&f<=a.right&&v>=a.top&&v<=a.bottom}return h&&O.default.number(l)&&(s=Math.max(0,Math.min(a.right,h.right)-Math.max(a.left,h.left))*Math.max(0,Math.min(a.bottom,h.bottom)-Math.max(a.top,h.top))/(h.width*h.height)>=l),t.options.drop.checker&&(s=t.options.drop.checker(e,n,s,t,r,i,o)),s}(this,t,e,n,i,o,r)},n.dynamicDrop=function(t){return O.default.bool(t)?(e.dynamicDrop=t,n):e.dynamicDrop},(0,C.default)(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,o.actions.drop=Rt.defaults},listeners:{"interactions:before-action-start":function(t){var e=t.interaction;"drag"===e.prepared.name&&(e.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(t,e){var n=t.interaction,i=(t.event,t.iEvent);if("drag"===n.prepared.name){var o=n.dropState;o.activeDrops=null,o.events=null,o.activeDrops=Mt(e,n.element),o.events=It(n,0,i),o.events.activate&&(At(o.activeDrops,o.events.activate),e.fire("actions/drop:start",{interaction:n,dragEvent:i}))}},"interactions:action-move":Ft,"interactions:after-action-move":function(t,e){var n=t.interaction,i=t.iEvent;"drag"===n.prepared.name&&(Dt(n,n.dropState.events),e.fire("actions/drop:move",{interaction:n,dragEvent:i}),n.dropState.events={})},"interactions:action-end":function(t,e){if("drag"===t.interaction.prepared.name){var n=t.interaction,i=t.iEvent;Ft(t,e),Dt(n,n.dropState.events),e.fire("actions/drop:end",{interaction:n,dragEvent:i})}},"interactions:stop":function(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:Mt,getDrop:Lt,getDropEvents:It,fireDropEvents:Dt,defaults:{enabled:!1,accept:null,overlap:"pointer"}},zt,Bt=(jt.default=Rt,{});function Nt(t){var e=t.interaction,n=t.iEvent,i=t.phase;if("gesture"===e.prepared.name){var o=e.pointers.map(function(t){return t.pointer}),r="start"===i,a="end"===i,s=e.interactable.options.deltaSource;if(n.touches=[o[0],o[1]],r)n.distance=E.touchDistance(o,s),n.box=E.touchBBox(o),n.scale=1,n.ds=0,n.angle=E.touchAngle(o,s),n.da=0,e.gesture.startDistance=n.distance,e.gesture.startAngle=n.angle;else if(a){var l=e.prevEvent;n.distance=l.distance,n.box=l.box,n.scale=l.scale,n.ds=0,n.angle=l.angle,n.da=0}else n.distance=E.touchDistance(o,s),n.box=E.touchBBox(o),n.scale=n.distance/e.gesture.startDistance,n.angle=E.touchAngle(o,s),n.ds=n.scale-e.gesture.scale,n.da=n.angle-e.gesture.angle;e.gesture.distance=n.distance,e.gesture.angle=n.angle,O.default.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(e.gesture.scale=n.scale)}}Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.default=void 0;var Ut={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(t){var e=t.actions,n=t.Interactable,i=t.defaults;n.prototype.gesturable=function(t){return O.default.object(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):O.default.bool(t)?(this.options.gesture.enabled=t,this):this.options.gesture},e.map.gesture=Ut,e.methodDict.gesture="gesturable",i.actions.gesture=Ut.defaults},listeners:{"interactions:action-start":Nt,"interactions:action-move":Nt,"interactions:action-end":Nt,"interactions:new":function(t){t.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(t){if(!(t.interaction.pointers.length<2)){var e=t.interactable.options.gesture;if(e&&e.enabled)return t.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},Ht,Vt=(Bt.default=Ut,{});function Wt(t,e,n,i,o,r,a){if(!e)return!1;if(!0===e){var s=O.default.number(r.width)?r.width:r.right-r.left,l=O.default.number(r.height)?r.height:r.bottom-r.top;if(a=Math.min(a,Math.abs(("left"===t||"right"===t?s:l)/2)),s<0&&("left"===t?t="right":"right"===t&&(t="left")),l<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t){var c=s>=0?r.left:r.right;return n.x<c+a}if("top"===t){var u=l>=0?r.top:r.bottom;return n.y<u+a}if("right"===t)return n.x>(s>=0?r.right:r.left)-a;if("bottom"===t)return n.y>(l>=0?r.bottom:r.top)-a}return!!O.default.element(i)&&(O.default.element(e)?e===i:_.matchesUpTo(i,e,o))}function qt(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var i=e;n.interactable.options.resize.square?("y"===n.resizeAxes?i.delta.x=i.delta.y:i.delta.y=i.delta.x,i.axes="xy"):(i.axes=n.resizeAxes,"x"===n.resizeAxes?i.delta.y=0:"y"===n.resizeAxes&&(i.delta.x=0))}}Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.default=void 0;var p={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,n=e.browser,i=e.Interactable,o=e.defaults;p.cursors=function(t){return t.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),p.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,i.prototype.resizable=function(t){return function(t,e,n){return O.default.object(e)?(t.options.resize.enabled=!1!==e.enabled,t.setPerAction("resize",e),t.setOnEvents("resize",e),O.default.string(e.axis)&&/^x$|^y$|^xy$/.test(e.axis)?t.options.resize.axis=e.axis:null===e.axis&&(t.options.resize.axis=n.defaults.actions.resize.axis),O.default.bool(e.preserveAspectRatio)?t.options.resize.preserveAspectRatio=e.preserveAspectRatio:O.default.bool(e.square)&&(t.options.resize.square=e.square),t):O.default.bool(e)?(t.options.resize.enabled=e,t):t.options.resize}(this,t,e)},t.map.resize=p,t.methodDict.resize="resizable",o.actions.resize=p.defaults},listeners:{"interactions:new":function(t){t.interaction.resizeAxes="xy"},"interactions:action-start":function(t){!function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=e,o=n.rect;n._rects={start:(0,C.default)({},o),corrected:(0,C.default)({},o),previous:(0,C.default)({},o),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}}(t),qt(t)},"interactions:action-move":function(t){!function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=e,o=n.interactable.options.resize.invert,r="reposition"===o||"negate"===o,a=n.rect,s=n._rects,l=s.start,c=s.corrected,u=s.delta,d=s.previous;if((0,C.default)(d,c),r){if((0,C.default)(c,a),"reposition"===o){if(c.top>c.bottom){var p=c.top;c.top=c.bottom,c.bottom=p}if(c.left>c.right){var h=c.left;c.left=c.right,c.right=h}}}else c.top=Math.min(a.top,l.bottom),c.bottom=Math.max(a.bottom,l.top),c.left=Math.min(a.left,l.right),c.right=Math.max(a.right,l.left);for(var f in c.width=c.right-c.left,c.height=c.bottom-c.top,c)u[f]=c[f]-d[f];i.edges=n.prepared.edges,i.rect=c,i.deltaRect=u}}(t),qt(t)},"interactions:action-end":function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=e;i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}},"auto-start:check":function(t){var e=t.interaction,n=t.interactable,i=t.element,o=t.rect,r=t.buttons;if(o){var a=(0,C.default)({},e.coords.cur.page),s=n.options.resize;if(s&&s.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(r&s.mouseButtons))){if(O.default.object(s.edges)){var l={left:!1,right:!1,top:!1,bottom:!1};for(var c in l)l[c]=Wt(c,s.edges[c],a,e._latestPointer.eventTarget,i,o,s.margin||p.defaultMargin);l.left=l.left&&!l.right,l.top=l.top&&!l.bottom,(l.left||l.right||l.top||l.bottom)&&(t.action={name:"resize",edges:l})}else{var u="y"!==s.axis&&a.x>o.right-p.defaultMargin,d="x"!==s.axis&&a.y>o.bottom-p.defaultMargin;(u||d)&&(t.action={name:"resize",axes:(u?"x":"")+(d?"y":"")})}return!t.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(t){var e=t.edges,n=t.axis,i=t.name,o=p.cursors,r=null;if(n)r=o[i+n];else if(e){for(var a="",s=["top","bottom","left","right"],l=0;l<s.length;l++){var c=s[l];e[c]&&(a+=c)}r=o[a]}return r},defaultMargin:null},Gt,Yt=(Vt.default=p,{}),Xt=(Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.default=void 0,{id:"actions",install:function(t){t.usePlugin(Bt.default),t.usePlugin(Vt.default),t.usePlugin(W.default),t.usePlugin(jt.default)}}),h=(Yt.default=Xt,{});Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var a,Zt,Kt=0,Jt,t=(h.default={request:function(t){return a(t)},cancel:function(t){return Zt(t)},init:function(o){if(a=o.requestAnimationFrame,Zt=o.cancelAnimationFrame,!a)for(var t=["ms","moz","webkit","o"],e=0;e<t.length;e++){var n=t[e];a=o["".concat(n,"RequestAnimationFrame")],Zt=o["".concat(n,"CancelAnimationFrame")]||o["".concat(n,"CancelRequestAnimationFrame")]}a=a&&a.bind(o),Zt=Zt&&Zt.bind(o),a||(a=function(t){var e=Date.now(),n=Math.max(0,16-(e-Kt)),i=o.setTimeout(function(){t(e+n)},n);return Kt=e+n,i},Zt=function(t){return clearTimeout(t)})}},{}),y=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getContainer=Qt,t.getScroll=$t,t.getScrollSize=function(t){return O.default.window(t)&&(t=window.document.body),{x:t.scrollWidth,y:t.scrollHeight}},{defaults:{enabled:!(t.getScrollSizeDelta=function(t,e){var n=t.interaction,i=t.element,o=n&&n.interactable.options[n.prepared.name].autoScroll;if(!o||!o.enabled)return e(),{x:0,y:0};var r=Qt(o.container,n.interactable,i),a=$t(r);e();var s=$t(r);return{x:s.x-a.x,y:s.y-a.y}}),margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(t){y.isScrolling=!0,h.default.cancel(y.i),t.autoScroll=y,y.interaction=t,y.prevTime=y.now(),y.i=h.default.request(y.scroll)},stop:function(){y.isScrolling=!1,y.interaction&&(y.interaction.autoScroll=null),h.default.cancel(y.i)},scroll:function(){var t=y.interaction,e=t.interactable,n=t.element,i=t.prepared.name,o=e.options[i].autoScroll,r=Qt(o.container,e,n),a=y.now(),s=(a-y.prevTime)/1e3,l=o.speed*s;if(l>=1){var c={x:y.x*l,y:y.y*l};if(c.x||c.y){var u=$t(r);O.default.window(r)?r.scrollBy(c.x,c.y):r&&(r.scrollLeft+=c.x,r.scrollTop+=c.y);var d=$t(r),p={x:d.x-u.x,y:d.y-u.y};(p.x||p.y)&&e.fire({type:"autoscroll",target:n,interactable:e,delta:p,interaction:t,container:r})}y.prevTime=a}y.isScrolling&&(h.default.cancel(y.i),y.i=h.default.request(y.scroll))},check:function(t,e){var n;return null==(n=t.options[e].autoScroll)?void 0:n.enabled},onInteractionMove:function(t){var e=t.interaction,n=t.pointer;if(e.interacting()&&y.check(e.interactable,e.prepared.name))if(e.simulation)y.x=y.y=0;else{var i,o,r,a,s=e.interactable,l=e.element,c=e.prepared.name,u=s.options[c].autoScroll,d=Qt(u.container,s,l);if(O.default.window(d))a=n.clientX<y.margin,i=n.clientY<y.margin,o=n.clientX>d.innerWidth-y.margin,r=n.clientY>d.innerHeight-y.margin;else{var p=_.getElementClientRect(d);a=n.clientX<p.left+y.margin,i=n.clientY<p.top+y.margin,o=n.clientX>p.right-y.margin,r=n.clientY>p.bottom-y.margin}y.x=o?1:a?-1:0,y.y=r?1:i?-1:0,y.isScrolling||(y.margin=u.margin,y.speed=u.speed,y.start(e))}}});function Qt(t,e,n){return(O.default.string(t)?(0,m.getStringOptionResult)(t,e,n):t)||(0,v.getWindow)(n)}function $t(t){return O.default.window(t)&&(t=window.document.body),{x:t.scrollLeft,y:t.scrollTop}}var te={id:"auto-scroll",install:function(t){var e=t.defaults,n=t.actions;t.autoScroll=y,y.now=function(){return t.now()},n.phaselessTypes.autoscroll=!0,e.perAction.autoScroll=y.defaults},listeners:{"interactions:new":function(t){t.interaction.autoScroll=null},"interactions:destroy":function(t){t.interaction.autoScroll=null,y.stop(),y.interaction&&(y.interaction=null)},"interactions:stop":y.stop,"interactions:action-move":function(t){return y.onInteractionMove(t)}}},ee,b=(t.default=te,{}),ne=(Object.defineProperty(b,"__esModule",{value:!0}),b.copyAction=function(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t},b.sign=void 0,b.warnOnce=function(t,e){var n=!1;return function(){return n||(v.window.console.warn(e),n=!0),t.apply(this,arguments)}},b.sign=function(t){return t>=0?1:-1},{});function ie(t){return O.default.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor}function oe(t){return O.default.func(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=void 0;var re,ae=(ne.default={id:"auto-start/interactableMethods",install:function(r){var t=r.Interactable;t.prototype.getAction=function(t,e,n,i){var o=function(t,e,n,i,o){var r=t.getRect(i),a={action:null,interactable:t,interaction:n,element:i,rect:r,buttons:e.buttons||{0:1,1:4,3:8,4:16}[e.button]};return o.fire("auto-start:check",a),a.action}(this,e,n,i,r);return this.options.actionChecker?this.options.actionChecker(t,e,o,this,i,n):o},t.prototype.ignoreFrom=(0,b.warnOnce)(function(t){return this._backCompatOption("ignoreFrom",t)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,b.warnOnce)(function(t){return this._backCompatOption("allowFrom",t)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=oe,t.prototype.styleCursor=ie}},{});function se(t,e,n,i,o){return e.testIgnoreAllow(e.options[t.name],n,i)&&e.options[t.name].enabled&&de(e,n,t,o)?t:null}function le(t,e,n,i,o,r,a){for(var s=0,l=i.length;s<l;s++){var c=i[s],u=o[s],d=c.getAction(e,n,t,u);if(d){var p=se(d,c,u,r,a);if(p)return{action:p,interactable:c,element:u}}}return{action:null,interactable:null,element:null}}function ce(t,e,n,i,o){var r=[],a=[],s=i;function l(t){r.push(t),a.push(s)}for(;O.default.element(s);){r=[],a=[],o.interactables.forEachMatch(s,l);var c=le(t,e,n,r,a,i,o);if(c.action&&!c.interactable.options[c.action.name].manualStart)return c;s=_.parentNode(s)}return{action:null,interactable:null,element:null}}function ue(t,e,n){var i=e.action,o=e.interactable,r=e.element;i=i||{name:null},t.interactable=o,t.element=r,(0,b.copyAction)(t.prepared,i),t.rect=o&&i.name?o.getRect(r):null,fe(t,n),n.fire("autoStart:prepared",{interaction:t})}function de(t,e,n,i){var o=t.options,r=o[n.name].max,a=o[n.name].maxPerElement,s=i.autoStart.maxInteractions,l=0,c=0,u=0;if(!(r&&a&&s))return!1;for(var d=0;d<i.interactions.list.length;d++){var p=i.interactions.list[d],h=p.prepared.name;if(p.interacting()){if(++l>=s)return!1;if(p.interactable===t){if((c+=h===n.name?1:0)>=r)return!1;if(p.element===e&&(u++,h===n.name&&u>=a))return!1}}}return s>0}function pe(t,e){return O.default.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function he(t,e,n){var i=n.autoStart.cursorElement;i&&i!==t&&(i.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,n.autoStart.cursorElement=e?t:null}function fe(t,e){var n=t.interactable,i=t.element,o=t.prepared;if("mouse"===t.pointerType&&n&&n.options.styleCursor){var r="";if(o.name){var a=n.options[o.name].cursorChecker;r=O.default.func(a)?a(o,n,i,t._interacting):e.actions.map[o.name].getCursor(o)}he(t.element,r||"",e)}else e.autoStart.cursorElement&&he(e.autoStart.cursorElement,"",e)}Object.defineProperty(ae,"__esModule",{value:!0}),ae.default=void 0;var ve,ge,me=(ae.default={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,n=e.defaults;e.usePlugin(ne.default),n.base.actionChecker=null,n.base.styleCursor=!0,(0,C.default)(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(t){return pe(t,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:de,cursorElement:null}},listeners:{"interactions:down":function(t,e){var n=t.interaction,i=t.pointer,o=t.event,r=t.eventTarget;n.interacting()||ue(n,ce(n,i,o,r,e),e)},"interactions:move":function(t,e){!function(t,e){var n=t.interaction,i=t.pointer,o=t.event,r=t.eventTarget;"mouse"!==n.pointerType||n.pointerIsDown||n.interacting()||ue(n,ce(n,i,o,r,e),e)}(t,e),function(t,e){var n=t.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){e.fire("autoStart:before-start",t);var i=n.interactable,o=n.prepared.name;o&&i&&(i.options[o].manualStart||!de(i,n.element,n.prepared,e)?n.stop():(n.start(n.prepared,i,n.element),fe(n,e)))}}(t,e)},"interactions:stop":function(t,e){var n=t.interaction,i=n.interactable;i&&i.options.styleCursor&&he(n.element,"",e)}},maxInteractions:pe,withinInteractionLimit:de,validateAction:se},{}),ye=(Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0,{id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(t,i){var o=t.interaction,r=t.eventTarget,e=t.dx,n=t.dy;if("drag"===o.prepared.name){var a=Math.abs(e),s=Math.abs(n),l=o.interactable.options.drag,c=l.startAxis,u=a>s?"x":a<s?"y":"xy";if(o.prepared.axis="start"===l.lockAxis?u[0]:l.lockAxis,"xy"!==u&&"xy"!==c&&c!==u){o.prepared.name=null;for(var d=r,p=function(t){if(t!==o.interactable){var e=o.interactable.options.drag;if(!e.manualStart&&t.testIgnoreAllow(e,d,r)){var n=t.getAction(o.downPointer,o.downEvent,o,d);if(n&&"drag"===n.name&&function(t,e){if(!e)return!1;var n=e.options.drag.startAxis;return"xy"===t||"xy"===n||n===t}(u,t)&&ae.default.validateAction(n,t,d,r,i))return t}}};O.default.element(d);){var h=i.interactables.forEachMatch(d,p);if(h){o.prepared.name="drag",o.interactable=h,o.element=d;break}d=(0,_.parentNode)(d)}}}}}}),be=(me.default=ye,{});function we(t){var e=t.prepared&&t.prepared.name;if(!e)return null;var n=t.interactable.options;return n[e].hold||n[e].delay}Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var _e,xe,Ee=(be.default={id:"auto-start/hold",install:function(t){var e=t.defaults;t.usePlugin(ae.default),e.perAction.hold=0,e.perAction.delay=0},listeners:{"interactions:new":function(t){t.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(t){var e=t.interaction,n=we(e);n>0&&(e.autoStartHoldTimer=setTimeout(function(){e.start(e.prepared,e.interactable,e.element)},n))},"interactions:move":function(t){var e=t.interaction,n=t.duplicate;e.autoStartHoldTimer&&e.pointerWasMoved&&!n&&(clearTimeout(e.autoStartHoldTimer),e.autoStartHoldTimer=null)},"autoStart:before-start":function(t){var e=t.interaction;we(e)>0&&(e.prepared.name=null)}},getHoldDuration:we},{}),Se=(Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0,{id:"auto-start",install:function(t){t.usePlugin(ae.default),t.usePlugin(be.default),t.usePlugin(me.default)}}),Oe=(Ee.default=Se,{});function Ce(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):O.default.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault}function ke(t){var e=t.interaction,n=t.event;e.interactable&&e.interactable.checkAndPreventDefault(n)}function Pe(i){var t=i.Interactable;t.prototype.preventDefault=Ce,t.prototype.checkAndPreventDefault=function(t){return function(t,e,n){var i=t.options.preventDefault;if("never"!==i)if("always"!==i){if(e.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){var o=(0,v.getWindow)(n.target).document,r=e.getDocOptions(o);if(!r||!r.events||!1!==r.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||O.default.element(n.target)&&(0,_.matchesSelector)(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,i,t)},i.interactions.docEvents.push({type:"dragstart",listener:function(t){for(var e=0;e<i.interactions.list.length;e++){var n=i.interactions.list[e];if(n.element&&(n.element===t.target||(0,_.nodeContains)(n.element,t.target)))return void n.interactable.checkAndPreventDefault(t)}}})}Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.default=void 0;var Te={id:"core/interactablePreventDefault",install:Oe.install=Pe,listeners:["down","move","up","cancel"].reduce(function(t,e){return t["interactions:".concat(e)]=ke,t},{})},je=(Oe.default=Te,{});Object.defineProperty(je,"__esModule",{value:!0}),je.default=void 0,je.default={};var Ae,Me={},Le=(Object.defineProperty(Me,"__esModule",{value:!0}),Me.default=void 0,Ae||(Ae={}));Le.touchAction="touchAction",Le.boxSizing="boxSizing",Le.noListeners="noListeners",Ae.touchAction,Ae.boxSizing,Ae.noListeners;var Ie,De=(Me.default={id:"dev-tools",install:function(){}},{}),Fe=(Object.defineProperty(De,"__esModule",{value:!0}),De.default=function t(e){var n={};for(var i in e){var o=e[i];O.default.plainObject(o)?n[i]=t(o):O.default.array(o)?n[i]=f.from(o):n[i]=o}return n},{});function Re(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ze(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Be(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=void 0,Fe.getRectOffset=Ve;var Ue=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ne(this,"states",[]),Ne(this,"startOffset",{left:0,right:0,top:0,bottom:0}),Ne(this,"startDelta",void 0),Ne(this,"result",void 0),Ne(this,"endResult",void 0),Ne(this,"edges",void 0),Ne(this,"interaction",void 0),this.interaction=t,this.result=He()}var t,n;return t=e,(n=[{key:"start",value:function(t,e){var n=t.phase,i=this.interaction,o=function(t){var n=t.interactable.options[t.prepared.name],e=n.modifiers;return e&&e.length?e:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(t){var e=n[t];return e&&e.enabled&&{options:e,methods:e._methods}}).filter(function(t){return!!t})}(i);this.prepareStates(o),this.edges=(0,C.default)({},i.edges),this.startOffset=Ve(i.rect,e),this.startDelta={x:0,y:0};var r=this.fillArg({phase:n,pageCoords:e,preEnd:!1});return this.result=He(),this.startAll(r),this.result=this.setAll(r)}},{key:"fillArg",value:function(t){var e=this.interaction;return t.interaction=e,t.interactable=e.interactable,t.element=e.element,t.rect=t.rect||e.rect,t.edges=this.edges,t.startOffset=this.startOffset,t}},{key:"startAll",value:function(t){for(var e=0;e<this.states.length;e++){var n=this.states[e];n.methods.start&&(t.state=n,n.methods.start(t))}}},{key:"setAll",value:function(t){var e=t.phase,n=t.preEnd,i=t.skipModifiers,o=t.rect;t.coords=(0,C.default)({},t.pageCoords),t.rect=(0,C.default)({},o);for(var r=i?this.states.slice(i):this.states,a=He(t.coords,t.rect),s=0;s<r.length;s++){var l,c=r[s],u=c.options,d=(0,C.default)({},t.coords),p=null;null!=(l=c.methods)&&l.set&&this.shouldDo(u,n,e)&&(t.state=c,p=c.methods.set(t),m.addEdges(this.interaction.edges,t.rect,{x:t.coords.x-d.x,y:t.coords.y-d.y})),a.eventProps.push(p)}a.delta.x=t.coords.x-t.pageCoords.x,a.delta.y=t.coords.y-t.pageCoords.y,a.rectDelta.left=t.rect.left-o.left,a.rectDelta.right=t.rect.right-o.right,a.rectDelta.top=t.rect.top-o.top,a.rectDelta.bottom=t.rect.bottom-o.bottom;var h=this.result.coords,f=this.result.rect;if(h&&f){var v=a.rect.left!==f.left||a.rect.right!==f.right||a.rect.top!==f.top||a.rect.bottom!==f.bottom;a.changed=v||h.x!==a.coords.x||h.y!==a.coords.y}return a}},{key:"applyToInteraction",value:function(t){var e=this.interaction,n=t.phase,i=e.coords.cur,o=e.coords.start,r=this.result,a=this.startDelta,s=r.delta;"start"===n&&(0,C.default)(this.startDelta,r.delta);for(var l=0;l<[[o,a],[i,s]].length;l++){var c=Re([[o,a],[i,s]][l],2),u=c[0],d=c[1];u.page.x+=d.x,u.page.y+=d.y,u.client.x+=d.x,u.client.y+=d.y}var p=this.result.rectDelta,h=t.rect||e.rect;h.left+=p.left,h.right+=p.right,h.top+=p.top,h.bottom+=p.bottom,h.width=h.right-h.left,h.height=h.bottom-h.top}},{key:"setAndApply",value:function(t){var e=this.interaction,n=t.phase,i=t.preEnd,o=t.skipModifiers,r=this.setAll(this.fillArg({preEnd:i,phase:n,pageCoords:t.modifiedCoords||e.coords.cur.page}));if(this.result=r,!r.changed&&(!o||o<this.states.length)&&e.interacting())return!1;if(t.modifiedCoords){var a=e.coords.cur.page,s={x:t.modifiedCoords.x-a.x,y:t.modifiedCoords.y-a.y};r.coords.x+=s.x,r.coords.y+=s.y,r.delta.x+=s.x,r.delta.y+=s.y}this.applyToInteraction(t)}},{key:"beforeEnd",value:function(t){var e=t.interaction,n=t.event,i=this.states;if(i&&i.length){for(var o=!1,r=0;r<i.length;r++){var a=i[r];t.state=a;var s=a.options,l=a.methods,c=l.beforeEnd&&l.beforeEnd(t);if(c)return this.endResult=c,!1;o=o||!o&&this.shouldDo(s,!0,t.phase,!0)}o&&e.move({event:n,preEnd:!0})}}},{key:"stop",value:function(t){var e=t.interaction;if(this.states&&this.states.length){var n=(0,C.default)({states:this.states,interactable:e.interactable,element:e.element,rect:null},t);this.fillArg(n);for(var i=0;i<this.states.length;i++){var o=this.states[i];n.state=o,o.methods.stop&&o.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(t){this.states=[];for(var e=0;e<t.length;e++){var n=t[e],i=n.options,o=n.methods,r=n.name;this.states.push({options:i,methods:o,index:e,name:r})}return this.states}},{key:"restoreInteractionCoords",value:function(t){var e=t.interaction,n=e.coords,i=e.rect,o=e.modification;if(o.result){for(var r=o.startDelta,a=o.result,s=a.delta,l=a.rectDelta,c=[[n.start,r],[n.cur,s]],u=0;u<c.length;u++){var d=Re(c[u],2),p=d[0],h=d[1];p.page.x-=h.x,p.page.y-=h.y,p.client.x-=h.x,p.client.y-=h.y}i.left-=l.left,i.right-=l.right,i.top-=l.top,i.bottom-=l.bottom}}},{key:"shouldDo",value:function(t,e,n,i){return!(!t||!1===t.enabled||i&&!t.endOnly||t.endOnly&&!e||"start"===n&&!t.setStart)}},{key:"copyFrom",value:function(t){this.startOffset=t.startOffset,this.startDelta=t.startDelta,this.edges=t.edges,this.states=t.states.map(function(t){return(0,De.default)(t)}),this.result=He((0,C.default)({},t.result.coords),(0,C.default)({},t.result.rect))}},{key:"destroy",value:function(){for(var t in this)this[t]=null}}])&&Be(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function He(t,e){return{rect:e,coords:t,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Ve(t,e){return t?{left:e.x-t.left,top:e.y-t.top,right:t.right-e.x,bottom:t.bottom-e.y}:{left:0,top:0,right:0,bottom:0}}Fe.default=Ue;var s={};function We(t){var e=t.iEvent,n=t.interaction.modification.result;n&&(e.modifiers=n.eventProps)}Object.defineProperty(s,"__esModule",{value:!0}),s.addEventModifiers=We,s.default=void 0,s.makeModifier=function(t,o){var r=t.defaults,a={start:t.start,set:t.set,beforeEnd:t.beforeEnd,stop:t.stop},e=function(t){var e=t||{};for(var n in e.enabled=!1!==e.enabled,r)n in e||(e[n]=r[n]);var i={options:e,methods:a,name:o,enable:function(){return e.enabled=!0,i},disable:function(){return e.enabled=!1,i}};return i};return o&&"string"==typeof o&&(e._defaults=r,e._methods=a),e};var qe,Ge,Ye=(s.default={id:"modifiers/base",before:["actions"],install:function(t){t.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(t){var e=t.interaction;e.modification=new Fe.default(e)},"interactions:before-action-start":function(t){var e=t.interaction.modification;e.start(t,t.interaction.coords.start.page),t.interaction.edges=e.edges,e.applyToInteraction(t)},"interactions:before-action-move":function(t){return t.interaction.modification.setAndApply(t)},"interactions:before-action-end":function(t){return t.interaction.modification.beforeEnd(t)},"interactions:action-start":We,"interactions:action-move":We,"interactions:action-end":We,"interactions:after-action-start":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-move":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:stop":function(t){return t.interaction.modification.stop(t)}}},{}),Xe=(Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.defaults=void 0,Ye.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},{});function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function Ke(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Je(t,e){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Je(t,e)}function Qe(t,e){if(e&&("object"===Ze(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(t){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$e(t)}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.InteractEvent=void 0;var tn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Je(t,e)}(g,t);var e,n,i,o,v=(i=g,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=$e(i);if(o){var n=$e(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Qe(this,t)});function g(t,e,n,i,o,r,a){var s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),S(w(s=v.call(this,t)),"relatedTarget",null),S(w(s),"screenX",void 0),S(w(s),"screenY",void 0),S(w(s),"button",void 0),S(w(s),"buttons",void 0),S(w(s),"ctrlKey",void 0),S(w(s),"shiftKey",void 0),S(w(s),"altKey",void 0),S(w(s),"metaKey",void 0),S(w(s),"page",void 0),S(w(s),"client",void 0),S(w(s),"delta",void 0),S(w(s),"rect",void 0),S(w(s),"x0",void 0),S(w(s),"y0",void 0),S(w(s),"t0",void 0),S(w(s),"dt",void 0),S(w(s),"duration",void 0),S(w(s),"clientX0",void 0),S(w(s),"clientY0",void 0),S(w(s),"velocity",void 0),S(w(s),"speed",void 0),S(w(s),"swipe",void 0),S(w(s),"axes",void 0),S(w(s),"preEnd",void 0),o=o||t.element;var l=t.interactable,c=(l&&l.options||Ye.defaults).deltaSource,u=(0,at.default)(l,o,n),d="start"===i,p="end"===i,h=d?w(s):t.prevEvent,f=d?t.coords.start:p?{page:h.page,client:h.client,timeStamp:t.coords.cur.timeStamp}:t.coords.cur;return s.page=(0,C.default)({},f.page),s.client=(0,C.default)({},f.client),s.rect=(0,C.default)({},t.rect),s.timeStamp=f.timeStamp,p||(s.page.x-=u.x,s.page.y-=u.y,s.client.x-=u.x,s.client.y-=u.y),s.ctrlKey=e.ctrlKey,s.altKey=e.altKey,s.shiftKey=e.shiftKey,s.metaKey=e.metaKey,s.button=e.button,s.buttons=e.buttons,s.target=o,s.currentTarget=o,s.preEnd=r,s.type=a||n+(i||""),s.interactable=l,s.t0=d?t.pointers[t.pointers.length-1].downTime:h.t0,s.x0=t.coords.start.page.x-u.x,s.y0=t.coords.start.page.y-u.y,s.clientX0=t.coords.start.client.x-u.x,s.clientY0=t.coords.start.client.y-u.y,s.delta=d||p?{x:0,y:0}:{x:s[c].x-h[c].x,y:s[c].y-h[c].y},s.dt=t.coords.delta.timeStamp,s.duration=s.timeStamp-s.t0,s.velocity=(0,C.default)({},t.coords.velocity[c]),s.speed=(0,k.default)(s.velocity.x,s.velocity.y),s.swipe=p||"inertiastart"===i?s.getSwipe():null,s}return e=g,(n=[{key:"getSwipe",value:function(){var t=this._interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150)return null;var e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);var n=112.5<=e&&e<247.5,i=202.5<=e&&e<337.5;return{up:i,down:!i&&22.5<=e&&e<157.5,left:n,right:!n&&(292.5<=e||e<67.5),angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&Ke(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),g}(gt.BaseEvent),en=(Xe.InteractEvent=tn,Object.defineProperties(tn.prototype,{pageX:{get:function(){return this.page.x},set:function(t){this.page.x=t}},pageY:{get:function(){return this.page.y},set:function(t){this.page.y=t}},clientX:{get:function(){return this.client.x},set:function(t){this.client.x=t}},clientY:{get:function(){return this.client.y},set:function(t){this.client.y=t}},dx:{get:function(){return this.delta.x},set:function(t){this.delta.x=t}},dy:{get:function(){return this.delta.y},set:function(t){this.delta.y=t}},velocityX:{get:function(){return this.velocity.x},set:function(t){this.velocity.x=t}},velocityY:{get:function(){return this.velocity.y},set:function(t){this.velocity.y=t}}}),{});function nn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function on(t,e,n){return e&&nn(t.prototype,e),n&&nn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(en,"__esModule",{value:!0}),en.PointerInfo=void 0;var an=on(function t(e,n,i,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),rn(this,"id",void 0),rn(this,"pointer",void 0),rn(this,"event",void 0),rn(this,"downTime",void 0),rn(this,"downTarget",void 0),this.id=e,this.pointer=n,this.event=i,this.downTime=o,this.downTarget=r});en.PointerInfo=an;var sn,ln,l={};function cn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(l,"__esModule",{value:!0}),l.Interaction=void 0,Object.defineProperty(l,"PointerInfo",{enumerable:!0,get:function(){return en.PointerInfo}}),l.default=l._ProxyValues=l._ProxyMethods=void 0;var un=(l._ProxyValues=sn)||(l._ProxyValues=sn={}),dn=(un.interactable="",un.element="",un.prepared="",un.pointerIsDown="",un.pointerWasMoved="",un._proxy="",(l._ProxyMethods=ln)||(l._ProxyMethods=ln={})),pn=(dn.start="",dn.move="",dn.end="",dn.stop="",dn.interacting="",0),hn=function(){function c(t){var e=this,n=t.pointerType,i=t.scopeFire;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),u(this,"interactable",null),u(this,"element",null),u(this,"rect",null),u(this,"_rects",void 0),u(this,"edges",null),u(this,"_scopeFire",void 0),u(this,"prepared",{name:null,axis:null,edges:null}),u(this,"pointerType",void 0),u(this,"pointers",[]),u(this,"downEvent",null),u(this,"downPointer",{}),u(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),u(this,"prevEvent",null),u(this,"pointerIsDown",!1),u(this,"pointerWasMoved",!1),u(this,"_interacting",!1),u(this,"_ending",!1),u(this,"_stopped",!0),u(this,"_proxy",null),u(this,"simulation",null),u(this,"doMove",(0,b.warnOnce)(function(t){this.move(t)},"The interaction.doMove() method has been renamed to interaction.move()")),u(this,"coords",{start:E.newCoords(),prev:E.newCoords(),cur:E.newCoords(),delta:E.newCoords(),velocity:E.newCoords()}),u(this,"_id",pn++),this._scopeFire=i,this.pointerType=n;var o=this;this._proxy={};var r=function(t){Object.defineProperty(e._proxy,t,{get:function(){return o[t]}})};for(var a in sn)r(a);var s=function(t){Object.defineProperty(e._proxy,t,{value:function(){return o[t].apply(o,arguments)}})};for(var l in ln)s(l);this._scopeFire("interactions:new",{interaction:this})}var t,e;return t=c,e=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(t,e,n){var i=this.updatePointer(t,e,n,!0),o=this.pointers[i];this._scopeFire("interactions:down",{pointer:t,event:e,eventTarget:n,pointerIndex:i,pointerInfo:o,type:"down",interaction:this})}},{key:"start",value:function(t,e,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===t.name?2:1)||!e.options[t.name].enabled)&&((0,b.copyAction)(this.prepared,t),this.interactable=e,this.element=n,this.rect=e.getRect(n),this.edges=this.prepared.edges?(0,C.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(t,e,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(t,e,n,!1);var i,o,r=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(i=this.coords.cur.client.x-this.coords.start.client.x,o=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,k.default)(i,o)>this.pointerMoveTolerance);var a=this.getPointerIndex(t),s={pointer:t,pointerIndex:a,pointerInfo:this.pointers[a],event:e,type:"move",eventTarget:n,dx:i,dy:o,duplicate:r,interaction:this};r||E.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",s),r||this.simulation||(this.interacting()&&(s.type=null,this.move(s)),this.pointerWasMoved&&E.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(t){t&&t.event||E.setZeroCoords(this.coords.delta),(t=(0,C.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase="move",this._doPhase(t)}},{key:"pointerUp",value:function(t,e,n,i){var o=this.getPointerIndex(t);-1===o&&(o=this.updatePointer(t,e,n,!1));var r=/cancel$/i.test(e.type)?"cancel":"up";this._scopeFire("interactions:".concat(r),{pointer:t,pointerIndex:o,pointerInfo:this.pointers[o],event:e,eventTarget:n,type:r,curEventTarget:i,interaction:this}),this.simulation||this.end(e),this.removePointer(t,e)}},{key:"documentBlur",value:function(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})}},{key:"end",value:function(t){var e;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(e=this._doPhase({event:t,interaction:this,phase:"end"})),this._ending=!1,!0===e&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(t){var e=E.getPointerId(t);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:f.findIndex(this.pointers,function(t){return t.id===e})}},{key:"getPointerInfo",value:function(t){return this.pointers[this.getPointerIndex(t)]}},{key:"updatePointer",value:function(t,e,n,i){var o=E.getPointerId(t),r=this.getPointerIndex(t),a=this.pointers[r];return i=!1!==i&&(i||/(down|start)$/i.test(e.type)),a?a.pointer=t:(a=new en.PointerInfo(o,t,e,null,null),r=this.pointers.length,this.pointers.push(a)),E.setCoords(this.coords.cur,this.pointers.map(function(t){return t.pointer}),this._now()),E.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),i&&(this.pointerIsDown=!0,a.downTime=this.coords.cur.timeStamp,a.downTarget=n,E.pointerExtend(this.downPointer,t),this.interacting()||(E.copyCoords(this.coords.start,this.coords.cur),E.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=e,this.pointerWasMoved=!1)),this._updateLatestPointer(t,e,n),this._scopeFire("interactions:update-pointer",{pointer:t,event:e,eventTarget:n,down:i,pointerInfo:a,pointerIndex:r,interaction:this}),r}},{key:"removePointer",value:function(t,e){var n=this.getPointerIndex(t);if(-1!==n){var i=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:t,event:e,eventTarget:null,pointerIndex:n,pointerInfo:i,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(t,e,n){this._latestPointer.pointer=t,this._latestPointer.event=e,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(t,e,n,i){return new Xe.InteractEvent(this,t,this.prepared.name,e,this.element,n,i)}},{key:"_fireEvent",value:function(t){var e;null==(e=this.interactable)||e.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}},{key:"_doPhase",value:function(t){var e=t.event,n=t.phase,i=t.preEnd,o=t.type,r=this.rect;if(r&&"move"===n&&(m.addEdges(this.edges,r,this.coords.delta[this.interactable.options.deltaSource]),r.width=r.right-r.left,r.height=r.bottom-r.top),!1===this._scopeFire("interactions:before-action-".concat(n),t))return!1;var a=t.iEvent=this._createPreparedEvent(e,n,i,o);return this._scopeFire("interactions:action-".concat(n),t),"start"===n&&(this.prevEvent=a),this._fireEvent(a),this._scopeFire("interactions:after-action-".concat(n),t),!0}},{key:"_now",value:function(){return Date.now()}}],e&&cn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),c}(),fn=l.Interaction=hn,o=(l.default=fn,{});function vn(t){t.pointerIsDown&&(bn(t.coords.cur,t.offset.total),t.offset.pending.x=0,t.offset.pending.y=0)}function gn(t){mn(t.interaction)}function mn(t){if(!function(t){return!(!t.offset.pending.x&&!t.offset.pending.y)}(t))return!1;var e=t.offset.pending;return bn(t.coords.cur,e),bn(t.coords.delta,e),m.addEdges(t.edges,t.rect,e),e.x=0,e.y=0,!0}function yn(t){var e=t.x,n=t.y;this.offset.pending.x+=e,this.offset.pending.y+=n,this.offset.total.x+=e,this.offset.total.y+=n}function bn(t,e){var n=t.page,i=t.client,o=e.x,r=e.y;n.x+=o,n.y+=r,i.x+=o,i.y+=r}Object.defineProperty(o,"__esModule",{value:!0}),o.addTotal=vn,o.applyPending=mn,o.default=void 0,l._ProxyMethods.offsetBy="";var wn,_n,xn=(o.default={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(t){t.Interaction.prototype.offsetBy=yn},listeners:{"interactions:new":function(t){t.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(t){return vn(t.interaction)},"interactions:before-action-start":gn,"interactions:before-action-move":gn,"interactions:before-action-end":function(t){var e=t.interaction;if(mn(e))return e.move({offset:!0}),e.end(),!1},"interactions:stop":function(t){var e=t.interaction;e.offset.total.x=0,e.offset.total.y=0,e.offset.pending.x=0,e.offset.pending.y=0}}},{});function En(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(xn,"__esModule",{value:!0}),xn.default=xn.InertiaState=void 0;var Sn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"active",!1),c(this,"isModified",!1),c(this,"smoothEnd",!1),c(this,"allowResume",!1),c(this,"modification",void 0),c(this,"modifierCount",0),c(this,"modifierArg",void 0),c(this,"startCoords",void 0),c(this,"t0",0),c(this,"v0",0),c(this,"te",0),c(this,"targetOffset",void 0),c(this,"modifiedOffset",void 0),c(this,"currentOffset",void 0),c(this,"lambda_v0",0),c(this,"one_ve_v0",0),c(this,"timeout",void 0),c(this,"interaction",void 0),this.interaction=t}var t,n;return t=e,(n=[{key:"start",value:function(t){var e=this.interaction,n=On(e);if(!n||!n.enabled)return!1;var i=e.coords.velocity.client,o=(0,k.default)(i.x,i.y),r=this.modification||(this.modification=new Fe.default(e));if(r.copyFrom(e.modification),this.t0=e._now(),this.allowResume=n.allowResume,this.v0=o,this.currentOffset={x:0,y:0},this.startCoords=e.coords.cur.page,this.modifierArg=r.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-e.coords.cur.timeStamp<50&&o>n.minSpeed&&o>n.endSpeed)this.startInertia();else{if(r.result=r.setAll(this.modifierArg),!r.result.changed)return!1;this.startSmoothEnd()}return e.modification.result.rect=null,e.offsetBy(this.targetOffset),e._doPhase({interaction:e,event:t,phase:"inertiastart"}),e.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),e.modification.result.rect=null,this.active=!0,e.simulation=this,!0}},{key:"startInertia",value:function(){var t=this,e=this.interaction.coords.velocity.client,n=On(this.interaction),i=n.resistance,o=-Math.log(n.endSpeed/this.v0)/i;this.targetOffset={x:(e.x-o)/i,y:(e.y-o)/i},this.te=o,this.lambda_v0=i/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var r=this.modification,a=this.modifierArg;a.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},r.result=r.setAll(a),r.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+r.result.delta.x,y:this.targetOffset.y+r.result.delta.y}),this.onNextFrame(function(){return t.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var t=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return t.smoothEndTick()})}},{key:"onNextFrame",value:function(t){var e=this;this.timeout=h.default.request(function(){e.active&&t()})}},{key:"inertiaTick",value:function(){var t,e,n,i,o,r=this,a=this.interaction,s=On(a).resistance,l=(a._now()-this.t0)/1e3;if(l<this.te){var c,u=1-(Math.exp(-s*l)-this.lambda_v0)/this.one_ve_v0;this.isModified?(0,0,t=this.targetOffset.x,e=this.targetOffset.y,n=this.modifiedOffset.x,i=this.modifiedOffset.y,c={x:kn(o=u,0,t,n),y:kn(o,0,e,i)}):c={x:this.targetOffset.x*u,y:this.targetOffset.y*u};var d={x:c.x-this.currentOffset.x,y:c.y-this.currentOffset.y};this.currentOffset.x+=d.x,this.currentOffset.y+=d.y,a.offsetBy(d),a.move(),this.onNextFrame(function(){return r.inertiaTick()})}else a.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var t=this,e=this.interaction,n=e._now()-this.t0,i=On(e).smoothEndDuration;if(n<i){var o={x:Pn(n,0,this.targetOffset.x,i),y:Pn(n,0,this.targetOffset.y,i)},r={x:o.x-this.currentOffset.x,y:o.y-this.currentOffset.y};this.currentOffset.x+=r.x,this.currentOffset.y+=r.y,e.offsetBy(r),e.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return t.smoothEndTick()})}else e.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(t){var e=t.pointer,n=t.event,i=t.eventTarget,o=this.interaction;o.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),o.updatePointer(e,n,i,!0),o._doPhase({interaction:o,event:n,phase:"resume"}),(0,E.copyCoords)(o.coords.prev,o.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,h.default.cancel(this.timeout)}}])&&En(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function On(t){var e=t.interactable,n=t.prepared;return e&&e.options&&n.name&&e.options[n.name].inertia}xn.InertiaState=Sn;var Cn={id:"inertia",before:["modifiers","actions"],install:function(t){var e=t.defaults;t.usePlugin(o.default),t.usePlugin(s.default),t.actions.phases.inertiastart=!0,t.actions.phases.resume=!0,e.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(t){var e=t.interaction;e.inertia=new Sn(e)},"interactions:before-action-end":function(t){var e=t.interaction,n=t.event;return(!e._interacting||e.simulation||!e.inertia.start(n))&&null},"interactions:down":function(t){var e=t.interaction,n=t.eventTarget,i=e.inertia;if(i.active)for(var o=n;O.default.element(o);){if(o===e.element){i.resume(t);break}o=_.parentNode(o)}},"interactions:stop":function(t){var e=t.interaction.inertia;e.active&&e.stop()},"interactions:before-action-resume":function(t){var e=t.interaction.modification;e.stop(t),e.start(t,t.interaction.coords.cur.page),e.applyToInteraction(t)},"interactions:before-action-inertiastart":function(t){return t.interaction.modification.setAndApply(t)},"interactions:action-resume":s.addEventModifiers,"interactions:action-inertiastart":s.addEventModifiers,"interactions:after-action-inertiastart":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-resume":function(t){return t.interaction.modification.restoreInteractionCoords(t)}}};function kn(t,e,n,i){var o=1-t;return o*o*e+2*o*t*n+t*t*i}function Pn(t,e,n,i){return-n*(t/=i)*(t-2)+e}var Tn,jn=(xn.default=Cn,{});function An(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(t.immediatePropagationStopped)break;i(t)}}Object.defineProperty(jn,"__esModule",{value:!0}),jn.Eventable=void 0;var In=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Mn(this,"options",void 0),Mn(this,"types",{}),Mn(this,"propagationStopped",!1),Mn(this,"immediatePropagationStopped",!1),Mn(this,"global",void 0),this.options=(0,C.default)({},t||{})}var t,n;return t=e,(n=[{key:"fire",value:function(t){var e,n=this.global;(e=this.types[t.type])&&Ln(t,e),!t.propagationStopped&&n&&(e=n[t.type])&&Ln(t,e)}},{key:"on",value:function(t,e){var n=(0,st.default)(t,e);for(t in n)this.types[t]=f.merge(this.types[t]||[],n[t])}},{key:"off",value:function(t,e){var n=(0,st.default)(t,e);for(t in n){var i=this.types[t];if(i&&i.length)for(var o=0;o<n[t].length;o++){var r=n[t][o],a=i.indexOf(r);-1!==a&&i.splice(a,1)}}}},{key:"getRect",value:function(t){return null}}])&&An(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Dn=(jn.Eventable=In,{}),Fn=(Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.default=function(t,e){if(e.phaselessTypes[t])return!0;for(var n in e.map)if(0===t.indexOf(n)&&t.substr(n.length)in e.phases)return!0;return!1},{}),Rn=(Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.createInteractStatic=function(o){var t=function t(e,n){var i=o.interactables.get(e,n);return i||((i=o.interactables.new(e,n)).events.global=t.globalEvents),i};return t.getPointerAverage=E.pointerAverage,t.getTouchBBox=E.touchBBox,t.getTouchDistance=E.touchDistance,t.getTouchAngle=E.touchAngle,t.getElementRect=_.getElementRect,t.getElementClientRect=_.getElementClientRect,t.matchesSelector=_.matchesSelector,t.closest=_.closest,t.globalEvents={},t.version="1.10.17",t.scope=o,t.use=function(t,e){return this.scope.usePlugin(t,e),this},t.isSet=function(t,e){return!!this.scope.interactables.get(t,e&&e.context)},t.on=(0,b.warnOnce)(function(t,e,n){if(O.default.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),O.default.array(t)){for(var i=0;i<t.length;i++){var o=t[i];this.on(o,e,n)}return this}if(O.default.object(t)){for(var r in t)this.on(r,t[r],e);return this}return(0,Dn.default)(t,this.scope.actions)?this.globalEvents[t]?this.globalEvents[t].push(e):this.globalEvents[t]=[e]:this.scope.events.add(this.scope.document,t,e,{options:n}),this},"The interact.on() method is being deprecated"),t.off=(0,b.warnOnce)(function(t,e,n){if(O.default.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),O.default.array(t)){for(var i=0;i<t.length;i++){var o=t[i];this.off(o,e,n)}return this}if(O.default.object(t)){for(var r in t)this.off(r,t[r],e);return this}var a;return(0,Dn.default)(t,this.scope.actions)?t in this.globalEvents&&-1!==(a=this.globalEvents[t].indexOf(e))&&this.globalEvents[t].splice(a,1):this.scope.events.remove(this.scope.document,t,e,n),this},"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return x.default.supportsTouch},t.supportsPointerEvent=function(){return x.default.supportsPointerEvent},t.stop=function(){for(var t=0;t<this.scope.interactions.list.length;t++)this.scope.interactions.list[t].stop();return this},t.pointerMoveTolerance=function(t){return O.default.number(t)?(this.scope.interactions.pointerMoveTolerance=t,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(t,e){this.scope.addDocument(t,e)},t.removeDocument=function(t){this.scope.removeDocument(t)},t},{});function zn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.Interactable=void 0;var Bn=function(){function o(t,e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),d(this,"options",void 0),d(this,"_actions",void 0),d(this,"target",void 0),d(this,"events",new jn.Eventable),d(this,"_context",void 0),d(this,"_win",void 0),d(this,"_doc",void 0),d(this,"_scopeEvents",void 0),d(this,"_rectChecker",void 0),this._actions=e.actions,this.target=t,this._context=e.context||n,this._win=(0,v.getWindow)((0,_.trySelector)(t)?this._context:t),this._doc=this._win.document,this._scopeEvents=i,this.set(e)}var t,e;return t=o,(e=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(t,e){return O.default.func(e.onstart)&&this.on("".concat(t,"start"),e.onstart),O.default.func(e.onmove)&&this.on("".concat(t,"move"),e.onmove),O.default.func(e.onend)&&this.on("".concat(t,"end"),e.onend),O.default.func(e.oninertiastart)&&this.on("".concat(t,"inertiastart"),e.oninertiastart),this}},{key:"updatePerActionListeners",value:function(t,e,n){(O.default.array(e)||O.default.object(e))&&this.off(t,e),(O.default.array(n)||O.default.object(n))&&this.on(t,n)}},{key:"setPerAction",value:function(t,e){var n=this._defaults;for(var i in e){var o=i,r=this.options[t],a=e[o];"listeners"===o&&this.updatePerActionListeners(t,r.listeners,a),O.default.array(a)?r[o]=f.from(a):O.default.plainObject(a)?(r[o]=(0,C.default)(r[o]||{},(0,De.default)(a)),O.default.object(n.perAction[o])&&"enabled"in n.perAction[o]&&(r[o].enabled=!1!==a.enabled)):O.default.bool(a)&&O.default.object(n.perAction[o])?r[o].enabled=a:r[o]=a}}},{key:"getRect",value:function(t){return t=t||(O.default.element(this.target)?this.target:null),O.default.string(this.target)&&(t=t||this._context.querySelector(this.target)),(0,_.getElementRect)(t)}},{key:"rectChecker",value:function(t){var n=this;return O.default.func(t)?(this._rectChecker=t,this.getRect=function(t){var e=(0,C.default)({},n._rectChecker(t));return"width"in e||(e.width=e.right-e.left,e.height=e.bottom-e.top),e},this):null===t?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(t,e){if((0,_.trySelector)(e)||O.default.object(e)){for(var n in this.options[t]=e,this._actions.map)this.options[n][t]=e;return this}return this.options[t]}},{key:"origin",value:function(t){return this._backCompatOption("origin",t)}},{key:"deltaSource",value:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(t){return this._context===t.ownerDocument||(0,_.nodeContains)(this._context,t)}},{key:"testIgnoreAllow",value:function(t,e,n){return!this.testIgnore(t.ignoreFrom,e,n)&&this.testAllow(t.allowFrom,e,n)}},{key:"testAllow",value:function(t,e,n){return!t||!!O.default.element(n)&&(O.default.string(t)?(0,_.matchesUpTo)(n,t,e):!!O.default.element(t)&&(0,_.nodeContains)(t,n))}},{key:"testIgnore",value:function(t,e,n){return!(!t||!O.default.element(n))&&(O.default.string(t)?(0,_.matchesUpTo)(n,t,e):!!O.default.element(t)&&(0,_.nodeContains)(t,n))}},{key:"fire",value:function(t){return this.events.fire(t),this}},{key:"_onOff",value:function(t,e,n,i){O.default.object(e)&&!O.default.array(e)&&(i=n,n=null);var o="on"===t?"add":"remove",r=(0,st.default)(e,n);for(var a in r){"wheel"===a&&(a=x.default.wheelEvent);for(var s=0;s<r[a].length;s++){var l=r[a][s];(0,Dn.default)(a,this._actions)?this.events[t](a,l):O.default.string(this.target)?this._scopeEvents["".concat(o,"Delegate")](this.target,this._context,a,l,i):this._scopeEvents[o](this.target,a,l,i)}}return this}},{key:"on",value:function(t,e,n){return this._onOff("on",t,e,n)}},{key:"off",value:function(t,e,n){return this._onOff("off",t,e,n)}},{key:"set",value:function(t){var e=this._defaults;for(var n in O.default.object(t)||(t={}),this.options=(0,De.default)(e.base),this._actions.methodDict){var i=n,o=this._actions.methodDict[i];this.options[i]={},this.setPerAction(i,(0,C.default)((0,C.default)({},e.perAction),e.actions[i])),this[o](t[i])}for(var r in t)O.default.func(this[r])&&this[r](t[r]);return this}},{key:"unset",value:function(){if(O.default.string(this.target))for(var t in this._scopeEvents.delegatedEvents)for(var e=this._scopeEvents.delegatedEvents[t],n=e.length-1;n>=0;n--){var i=e[n],o=i.selector,r=i.context,a=i.listeners;o===this.target&&r===this._context&&e.splice(n,1);for(var s=a.length-1;s>=0;s--)this._scopeEvents.removeDelegate(this.target,this._context,t,a[s][0],a[s][1])}else this._scopeEvents.remove(this.target,"all")}}])&&zn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(),Nn=(Rn.Interactable=Bn,{});function Un(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Hn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.InteractableSet=void 0;var Vn=function(){function e(t){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hn(this,"list",[]),Hn(this,"selectorMap",{}),Hn(this,"scope",void 0),this.scope=t,t.addListeners({"interactable:unset":function(t){var e=t.interactable,n=e.target,i=e._context,o=O.default.string(n)?a.selectorMap[n]:n[a.scope.id],r=f.findIndex(o,function(t){return t.context===i});o[r]&&(o[r].context=null,o[r].interactable=null),o.splice(r,1)}})}var t,n;return t=e,(n=[{key:"new",value:function(t,e){e=(0,C.default)(e||{},{actions:this.scope.actions});var n=new this.scope.Interactable(t,e,this.scope.document,this.scope.events),i={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),O.default.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(i)):(n.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(i)),this.scope.fire("interactable:new",{target:t,options:e,interactable:n,win:this.scope._win}),n}},{key:"get",value:function(e,t){var n=t&&t.context||this.scope.document,i=O.default.string(e),o=i?this.selectorMap[e]:e[this.scope.id];if(!o)return null;var r=f.find(o,function(t){return t.context===n&&(i||t.interactable.inContext(e))});return r&&r.interactable}},{key:"forEachMatch",value:function(t,e){for(var n=0;n<this.list.length;n++){var i=this.list[n],o=void 0;if((O.default.string(i.target)?O.default.element(t)&&_.matchesSelector(t,i.target):t===i.target)&&i.inContext(t)&&(o=e(i)),void 0!==o)return o}}}])&&Un(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Wn=(Nn.InteractableSet=Vn,{});function qn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Gn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Xn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.default=void 0;var Zn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gn(this,"currentTarget",void 0),Gn(this,"originalEvent",void 0),Gn(this,"type",void 0),this.originalEvent=t,(0,ct.default)(this,t)}var t,n;return t=e,(n=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&qn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Kn(t){if(!O.default.object(t))return{capture:!!t,passive:!1};var e=(0,C.default)({},t);return e.capture=!!t.capture,e.passive=!!t.passive,e}var Jn,Qn=(Wn.default={id:"events",install:function(t){var e,d=[],y={},u=[],p={add:h,remove:m,addDelegate:function(e,n,t,i,o){var r=Kn(o);if(!y[t]){y[t]=[];for(var a=0;a<u.length;a++){var s=u[a];h(s,t,b),h(s,t,w,!0)}}var l=y[t],c=f.find(l,function(t){return t.selector===e&&t.context===n});c||(c={selector:e,context:n,listeners:[]},l.push(c)),c.listeners.push([i,r])},removeDelegate:function(t,e,n,i,o){var r,a=Kn(o),s=y[n],l=!1;if(s)for(r=s.length-1;r>=0;r--){var c=s[r];if(c.selector===t&&c.context===e){for(var u=c.listeners,d=u.length-1;d>=0;d--){var p=Yn(u[d],2),h=p[0],f=p[1],v=f.capture,g=f.passive;if(h===i&&v===a.capture&&g===a.passive){u.splice(d,1),u.length||(s.splice(r,1),m(e,n,b),m(e,n,w,!0)),l=!0;break}}if(l)break}}},delegateListener:b,delegateUseCapture:w,delegatedEvents:y,documents:u,targets:d,supportsOptions:!1,supportsPassive:!1};function h(e,t,n,i){var o=Kn(i),r=f.find(d,function(t){return t.eventTarget===e});r||(r={eventTarget:e,events:{}},d.push(r)),r.events[t]||(r.events[t]=[]),e.addEventListener&&!f.contains(r.events[t],n)&&(e.addEventListener(t,n,p.supportsOptions?o:o.capture),r.events[t].push(n))}function m(e,t,n,i){var o=Kn(i),r=f.findIndex(d,function(t){return t.eventTarget===e}),a=d[r];if(a&&a.events)if("all"!==t){var s=!1,l=a.events[t];if(l){if("all"===n){for(var c=l.length-1;c>=0;c--)m(e,t,l[c],o);return}for(var u=0;u<l.length;u++)if(l[u]===n){e.removeEventListener(t,n,p.supportsOptions?o:o.capture),l.splice(u,1),0===l.length&&(delete a.events[t],s=!0);break}}s&&!Object.keys(a.events).length&&d.splice(r,1)}else for(t in a.events)a.events.hasOwnProperty(t)&&m(e,t,"all")}function b(t,e){for(var n=Kn(e),i=new Zn(t),o=y[t.type],r=Yn(E.getEventTargets(t),1)[0],a=r;O.default.element(a);){for(var s=0;s<o.length;s++){var l=o[s],c=l.selector,u=l.context;if(_.matchesSelector(a,c)&&_.nodeContains(u,r)&&_.nodeContains(u,a)){var d=l.listeners;i.currentTarget=a;for(var p=0;p<d.length;p++){var h=Yn(d[p],2),f=h[0],v=h[1],g=v.capture,m=v.passive;g===n.capture&&m===n.passive&&f(i)}}}a=_.parentNode(a)}}function w(t){return b(t,!0)}return null==(e=t.document)||e.createElement("div").addEventListener("test",null,{get capture(){return p.supportsOptions=!0},get passive(){return p.supportsPassive=!0}}),t.events=p,p}},{}),$n=(Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.default=void 0,{methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(t){for(var e=0;e<$n.methodOrder.length;e++){var n;n=$n.methodOrder[e];var i=$n[n](t);if(i)return i}return null},simulationResume:function(t){var e=t.pointerType,n=t.eventType,i=t.eventTarget,o=t.scope;if(!/down|start/i.test(n))return null;for(var r=0;r<o.interactions.list.length;r++){var a=o.interactions.list[r],s=i;if(a.simulation&&a.simulation.allowResume&&a.pointerType===e)for(;s;){if(s===a.element)return a;s=_.parentNode(s)}}return null},mouseOrPen:function(t){var e,n=t.pointerId,i=t.pointerType,o=t.eventType,r=t.scope;if("mouse"!==i&&"pen"!==i)return null;for(var a=0;a<r.interactions.list.length;a++){var s=r.interactions.list[a];if(s.pointerType===i){if(s.simulation&&!ti(s,n))continue;if(s.interacting())return s;e||(e=s)}}if(e)return e;for(var l=0;l<r.interactions.list.length;l++){var c=r.interactions.list[l];if(!(c.pointerType!==i||/down/i.test(o)&&c.simulation))return c}return null},hasPointer:function(t){for(var e=t.pointerId,n=t.scope,i=0;i<n.interactions.list.length;i++){var o=n.interactions.list[i];if(ti(o,e))return o}return null},idle:function(t){for(var e=t.pointerType,n=t.scope,i=0;i<n.interactions.list.length;i++){var o=n.interactions.list[i];if(1===o.pointers.length){var r=o.interactable;if(r&&(!r.options.gesture||!r.options.gesture.enabled))continue}else if(o.pointers.length>=2)continue;if(!o.interacting()&&e===o.pointerType)return o}return null}});function ti(t,e){return t.pointers.some(function(t){return t.id===e})}var ei,ni=(Qn.default=$n,{});function ii(t){return ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ii(t)}function oi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ri(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ri(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ri(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function ai(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function si(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function li(t,e){return li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},li(t,e)}function ci(t,e){if(e&&("object"===ii(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ui(t){return ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ui(t)}Object.defineProperty(ni,"__esModule",{value:!0}),ni.default=void 0;var di=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function pi(w,_){return function(t){var e=_.interactions.list,n=E.getPointerType(t),i=oi(E.getEventTargets(t),2),o=i[0],r=i[1],a=[];if(/^touch/.test(t.type)){_.prevTouchTime=_.now();for(var s=0;s<t.changedTouches.length;s++){var l=t.changedTouches[s],c={pointer:l,pointerId:E.getPointerId(l),pointerType:n,eventType:t.type,eventTarget:o,curEventTarget:r,scope:_},u=hi(c);a.push([c.pointer,c.eventTarget,c.curEventTarget,u])}}else{var d=!1;if(!x.default.supportsPointerEvent&&/mouse/.test(t.type)){for(var p=0;p<e.length&&!d;p++)d="mouse"!==e[p].pointerType&&e[p].pointerIsDown;d=d||_.now()-_.prevTouchTime<500||0===t.timeStamp}if(!d){var h={pointer:t,pointerId:E.getPointerId(t),pointerType:n,eventType:t.type,curEventTarget:r,eventTarget:o,scope:_},f=hi(h);a.push([h.pointer,h.eventTarget,h.curEventTarget,f])}}for(var v=0;v<a.length;v++){var g=oi(a[v],4),m=g[0],y=g[1],b=g[2];g[3][w](m,t,y,b)}}}function hi(t){var e=t.pointerType,n=t.scope,i={interaction:Qn.default.search(t),searchDetails:t};return n.fire("interactions:find",i),i.interaction||n.interactions.new({pointerType:e})}function fi(t,e){var n=t.doc,i=t.scope,o=t.options,r=i.interactions.docEvents,a=i.events,s=a[e];for(var l in i.browser.isIOS&&!o.events&&(o.events={passive:!1}),a.delegatedEvents)s(n,l,a.delegateListener),s(n,l,a.delegateUseCapture,!0);for(var c=o&&o.events,u=0;u<r.length;u++){var d=r[u];s(n,d.type,d.listener,c)}}var vi,gi,mi=(ni.default={id:"core/interactions",install:function(s){for(var t={},e=0;e<di.length;e++){var n=di[e];t[n]=pi(n,s)}var i,o=x.default.pEventTypes;function r(){for(var t=0;t<s.interactions.list.length;t++){var e=s.interactions.list[t];if(e.pointerIsDown&&"touch"===e.pointerType&&!e._interacting)for(var n=function(){var n=e.pointers[i];s.documents.some(function(t){var e=t.doc;return(0,_.nodeContains)(e,n.downTarget)})||e.removePointer(n.pointer,n.event)},i=0;i<e.pointers.length;i++)n()}}(i=g.default.PointerEvent?[{type:o.down,listener:r},{type:o.down,listener:t.pointerDown},{type:o.move,listener:t.pointerMove},{type:o.up,listener:t.pointerUp},{type:o.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:r},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(t){for(var e=0;e<s.interactions.list.length;e++)s.interactions.list[e].documentBlur(t)}}),s.prevTouchTime=0,s.Interaction=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&li(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=ui(i);if(o){var n=ui(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ci(this,t)});function a(){return ai(this,a),r.apply(this,arguments)}return e=a,(n=[{key:"pointerMoveTolerance",get:function(){return s.interactions.pointerMoveTolerance},set:function(t){s.interactions.pointerMoveTolerance=t}},{key:"_now",value:function(){return s.now()}}])&&si(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(l.default),s.interactions={list:[],new:function(t){t.scopeFire=function(t,e){return s.fire(t,e)};var e=new s.Interaction(t);return s.interactions.list.push(e),e},listeners:t,docEvents:i,pointerMoveTolerance:1},s.usePlugin(Oe.default)},listeners:{"scope:add-document":function(t){return fi(t,"add")},"scope:remove-document":function(t){return fi(t,"remove")},"interactable:unset":function(t,e){for(var n=t.interactable,i=e.interactions.list.length-1;i>=0;i--){var o=e.interactions.list[i];o.interactable===n&&(o.stop(),e.fire("interactions:destroy",{interaction:o}),o.destroy(),e.interactions.list.length>2&&e.interactions.list.splice(i,1))}}},onDocSignal:fi,doOnInteractions:pi,methodNames:di},{});function yi(t){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(t)}function bi(){return bi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=wi(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},bi.apply(this,arguments)}function wi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}function _i(t,e){return _i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_i(t,e)}function xi(t,e){if(e&&("object"===yi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}function Ei(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Si(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Oi(t,e,n){return e&&Si(t.prototype,e),n&&Si(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(mi,"__esModule",{value:!0}),mi.Scope=void 0,mi.initScope=ki;var Ci=function(){function t(){var e=this;Ei(this,t),T(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),T(this,"isInitialized",!1),T(this,"listenerMaps",[]),T(this,"browser",x.default),T(this,"defaults",(0,De.default)(Ye.defaults)),T(this,"Eventable",jn.Eventable),T(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),T(this,"interactStatic",(0,Fn.createInteractStatic)(this)),T(this,"InteractEvent",Xe.InteractEvent),T(this,"Interactable",void 0),T(this,"interactables",new Nn.InteractableSet(this)),T(this,"_win",void 0),T(this,"document",void 0),T(this,"window",void 0),T(this,"documents",[]),T(this,"_plugins",{list:[],map:{}}),T(this,"onWindowUnload",function(t){return e.removeDocument(t.target)});var r=this;this.Interactable=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_i(t,e)}(n,t);var i,o,e=(i=n,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=P(i);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return xi(this,t)});function n(){return Ei(this,n),e.apply(this,arguments)}return Oi(n,[{key:"_defaults",get:function(){return r.defaults}},{key:"set",value:function(t){return bi(P(n.prototype),"set",this).call(this,t),r.fire("interactable:set",{options:t,interactable:this}),this}},{key:"unset",value:function(){bi(P(n.prototype),"unset",this).call(this);var t=r.interactables.list.indexOf(this);t<0||(bi(P(n.prototype),"unset",this).call(this),r.interactables.list.splice(t,1),r.fire("interactable:unset",{interactable:this}))}}]),n}(Rn.Interactable)}return Oi(t,[{key:"addListeners",value:function(t,e){this.listenerMaps.push({id:e,map:t})}},{key:"fire",value:function(t,e){for(var n=0;n<this.listenerMaps.length;n++){var i=this.listenerMaps[n].map[t];if(i&&!1===i(e,this,t))return!1}}},{key:"init",value:function(t){return this.isInitialized?this:ki(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._plugins.map[t.id]||-1!==this._plugins.list.indexOf(t)}},{key:"usePlugin",value:function(t,e){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,e),t.listeners&&t.before){for(var n=0,i=this.listenerMaps.length,o=t.before.reduce(function(t,e){return t[e]=!0,t[Pi(e)]=!0,t},{});n<i;n++){var r=this.listenerMaps[n].id;if(o[r]||o[Pi(r)])break}this.listenerMaps.splice(n,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,e){if(-1!==this.getDocIndex(t))return!1;var n=v.getWindow(t);e=e?(0,C.default)({},e):{},this.documents.push({doc:t,options:e}),this.events.documents.push(t),t!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:n,scope:this,options:e})}},{key:"removeDocument",value:function(t){var e=this.getDocIndex(t),n=v.getWindow(t),i=this.documents[e].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(e,1),this.events.documents.splice(e,1),this.fire("scope:remove-document",{doc:t,window:n,scope:this,options:i})}},{key:"getDocIndex",value:function(t){for(var e=0;e<this.documents.length;e++)if(this.documents[e].doc===t)return e;return-1}},{key:"getDocOptions",value:function(t){var e=this.getDocIndex(t);return-1===e?null:this.documents[e].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),t}();function ki(t,e){return t.isInitialized=!0,O.default.window(e)&&v.init(e),g.default.init(e),x.default.init(e),h.default.init(e),t.window=e,t.document=e.document,t.usePlugin(ni.default),t.usePlugin(Wn.default),t}function Pi(t){return t&&t.replace(/\/.*$/,"")}mi.Scope=Ci;var e={},Ti=(Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,new mi.Scope),ji=Ti.interactStatic,Ai=(e.default=ji,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0),Mi=(Ti.init(Ai),{}),Li=(Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.default=void 0,Mi.default=function(){},{}),Ii=(Object.defineProperty(Li,"__esModule",{value:!0}),Li.default=void 0,Li.default=function(){},{});function Di(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Fi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fi(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.default=void 0,Ii.default=function(f){var v=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(t){var e=Di(t,2),n=e[0],i=e[1];return n in f||i in f}),t=function(t,e){for(var n=f.range,i=f.limits,o=void 0===i?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:i,r=f.offset,a=void 0===r?{x:0,y:0}:r,s={range:n,grid:f,x:null,y:null},l=0;l<v.length;l++){var c=Di(v[l],2),u=c[0],d=c[1],p=Math.round((t-a.x)/f[u]),h=Math.round((e-a.y)/f[d]);s[u]=Math.max(o.left,Math.min(o.right,p*f[u]+a.x)),s[d]=Math.max(o.top,Math.min(o.bottom,h*f[d]+a.y))}return s};return t.grid=f,t.coordFields=v,t};var Ri={},zi=(Object.defineProperty(Ri,"__esModule",{value:!0}),Object.defineProperty(Ri,"edgeTarget",{enumerable:!0,get:function(){return Mi.default}}),Object.defineProperty(Ri,"elements",{enumerable:!0,get:function(){return Li.default}}),Object.defineProperty(Ri,"grid",{enumerable:!0,get:function(){return Ii.default}}),{}),Bi=(Object.defineProperty(zi,"__esModule",{value:!0}),zi.default=void 0,{id:"snappers",install:function(t){var e=t.interactStatic;e.snappers=(0,C.default)(e.snappers||{},Ri),e.createSnapGrid=e.snappers.grid}}),Ni,Ui=(zi.default=Bi,{});function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.default=Ui.aspectRatio=void 0;var qi={start:function(t){var e=t.state,n=t.rect,i=t.edges,o=t.pageCoords,r=e.options.ratio,a=e.options,s=a.equalDelta,l=a.modifiers;"preserve"===r&&(r=n.width/n.height),e.startCoords=(0,C.default)({},o),e.startRect=(0,C.default)({},n),e.ratio=r,e.equalDelta=s;var c=e.linkedEdges={top:i.top||i.left&&!i.bottom,left:i.left||i.top&&!i.right,bottom:i.bottom||i.right&&!i.top,right:i.right||i.bottom&&!i.left};if(e.xIsPrimaryAxis=!(!i.left&&!i.right),e.equalDelta){var u=(c.left?1:-1)*(c.top?1:-1);e.edgeSign={x:u,y:u}}else e.edgeSign={x:c.left?-1:1,y:c.top?-1:1};if((0,C.default)(t.edges,c),l&&l.length){var d=new Fe.default(t.interaction);d.copyFrom(t.interaction.modification),d.prepareStates(l),e.subModification=d,d.startAll(Vi({},t))}},set:function(t){var e=t.state,n=t.rect,i=t.coords,o=(0,C.default)({},i),r=e.equalDelta?Gi:Yi;if(r(e,e.xIsPrimaryAxis,i,n),!e.subModification)return null;var a=(0,C.default)({},n);(0,m.addEdges)(e.linkedEdges,a,{x:i.x-o.x,y:i.y-o.y});var s=e.subModification.setAll(Vi(Vi({},t),{},{rect:a,edges:e.linkedEdges,pageCoords:i,prevCoords:i,prevRect:a})),l=s.delta;return s.changed&&(r(e,Math.abs(l.x)>Math.abs(l.y),s.coords,s.rect),(0,C.default)(i,s.coords)),s.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Gi(t,e,n){var i=t.startCoords,o=t.edgeSign;e?n.y=i.y+(n.x-i.x)*o.y:n.x=i.x+(n.y-i.y)*o.x}function Yi(t,e,n,i){var o=t.startRect,r=t.startCoords,a=t.ratio,s=t.edgeSign;if(e){var l=i.width/a;n.y=r.y+(l-o.height)*s.y}else{var c=i.height*a;n.x=r.x+(c-o.width)*s.x}}Ui.aspectRatio=qi;var Xi=(0,s.makeModifier)(qi,"aspectRatio"),Zi=(Ui.default=Xi,{}),Ki=(Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.default=void 0,function(){});Ki._defaults={};var Ji,Qi=(Zi.default=Ki,{}),j=(Object.defineProperty(Qi,"__esModule",{value:!0}),Object.defineProperty(Qi,"default",{enumerable:!0,get:function(){return Zi.default}}),{});function $i(t,e,n){return O.default.func(t)?m.resolveRectLike(t,e.interactable,e.element,[n.x,n.y,e]):m.resolveRectLike(t,e.interactable,e.element)}Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,j.getRestrictionRect=$i,j.restrict=void 0;var to={start:function(t){var e=t.rect,n=t.startOffset,i=t.state,o=t.interaction,r=t.pageCoords,a=i.options,s=a.elementRect,l=(0,C.default)({left:0,top:0,right:0,bottom:0},a.offset||{});if(e&&s){var c=$i(a.restriction,o,r);if(c){var u=c.right-c.left-e.width,d=c.bottom-c.top-e.height;u<0&&(l.left+=u,l.right+=u),d<0&&(l.top+=d,l.bottom+=d)}l.left+=n.left-e.width*s.left,l.top+=n.top-e.height*s.top,l.right+=n.right-e.width*(1-s.right),l.bottom+=n.bottom-e.height*(1-s.bottom)}i.offset=l},set:function(t){var e=t.coords,n=t.interaction,i=t.state,o=i.options,r=i.offset,a=$i(o.restriction,n,e);if(a){var s=m.xywhToTlbr(a);e.x=Math.max(Math.min(s.right-r.right,e.x),s.left+r.left),e.y=Math.max(Math.min(s.bottom-r.bottom,e.y),s.top+r.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},eo=(j.restrict=to,(0,s.makeModifier)(to,"restrict")),A=(j.default=eo,{}),no=(Object.defineProperty(A,"__esModule",{value:!0}),A.restrictEdges=A.default=void 0,{top:1/0,left:1/0,bottom:-1/0,right:-1/0}),io={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function oo(t,e){for(var n=["top","left","bottom","right"],i=0;i<n.length;i++){var o=n[i];o in t||(t[o]=e[o])}return t}var ro={noInner:no,noOuter:io,start:function(t){var e,n=t.interaction,i=t.startOffset,o=t.state,r=o.options;if(r){var a=(0,j.getRestrictionRect)(r.offset,n,n.coords.start.page);e=m.rectToXY(a)}e=e||{x:0,y:0},o.offset={top:e.y+i.top,left:e.x+i.left,bottom:e.y-i.bottom,right:e.x-i.right}},set:function(t){var e=t.coords,n=t.edges,i=t.interaction,o=t.state,r=o.offset,a=o.options;if(n){var s=(0,C.default)({},e),l=(0,j.getRestrictionRect)(a.inner,i,s)||{},c=(0,j.getRestrictionRect)(a.outer,i,s)||{};oo(l,no),oo(c,io),n.top?e.y=Math.min(Math.max(c.top+r.top,s.y),l.top+r.top):n.bottom&&(e.y=Math.max(Math.min(c.bottom+r.bottom,s.y),l.bottom+r.bottom)),n.left?e.x=Math.min(Math.max(c.left+r.left,s.x),l.left+r.left):n.right&&(e.x=Math.max(Math.min(c.right+r.right,s.x),l.right+r.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},ao=(A.restrictEdges=ro,(0,s.makeModifier)(ro,"restrictEdges")),so=(A.default=ao,{}),lo=(Object.defineProperty(so,"__esModule",{value:!0}),(so.restrictRect=so.default=void 0,C.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(t){}},j.restrict.defaults)),co={start:j.restrict.start,set:j.restrict.set,defaults:lo},uo=(so.restrictRect=co,(0,s.makeModifier)(co,"restrictRect")),po=(so.default=uo,{}),ho=(Object.defineProperty(po,"__esModule",{value:!0}),po.restrictSize=po.default=void 0,{width:-1/0,height:-1/0}),fo={width:1/0,height:1/0},vo={start:function(t){return A.restrictEdges.start(t)},set:function(t){var e=t.interaction,n=t.state,i=t.rect,o=t.edges,r=n.options;if(o){var a=m.tlbrToXywh((0,j.getRestrictionRect)(r.min,e,t.coords))||ho,s=m.tlbrToXywh((0,j.getRestrictionRect)(r.max,e,t.coords))||fo;n.options={endOnly:r.endOnly,inner:(0,C.default)({},A.restrictEdges.noInner),outer:(0,C.default)({},A.restrictEdges.noOuter)},o.top?(n.options.inner.top=i.bottom-a.height,n.options.outer.top=i.bottom-s.height):o.bottom&&(n.options.inner.bottom=i.top+a.height,n.options.outer.bottom=i.top+s.height),o.left?(n.options.inner.left=i.right-a.width,n.options.outer.left=i.right-s.width):o.right&&(n.options.inner.right=i.left+a.width,n.options.outer.right=i.left+s.width),A.restrictEdges.set(t),n.options=r}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},go=(po.restrictSize=vo,(0,s.makeModifier)(vo,"restrictSize")),mo=(po.default=go,{}),M=(Object.defineProperty(mo,"__esModule",{value:!0}),Object.defineProperty(mo,"default",{enumerable:!0,get:function(){return Zi.default}}),{}),yo=(Object.defineProperty(M,"__esModule",{value:!0}),{start:function(t){var n,e=t.interaction,i=t.interactable,o=t.element,r=t.rect,a=t.state,s=t.startOffset,l=a.options,c=l.offsetWithOrigin?function(t){var e=t.interaction.element;return(0,m.rectToXY)((0,m.resolveRectLike)(t.state.options.origin,null,null,[e]))||(0,at.default)(t.interactable,e,t.interaction.prepared.name)}(t):{x:0,y:0};if("startCoords"===l.offset)n={x:e.coords.start.page.x,y:e.coords.start.page.y};else{var u=(0,m.resolveRectLike)(l.offset,i,o,[e]);(n=(0,m.rectToXY)(u)||{x:0,y:0}).x+=c.x,n.y+=c.y}var d=l.relativePoints;a.offsets=r&&d&&d.length?d.map(function(t,e){return{index:e,relativePoint:t,x:s.left-r.width*t.x+n.x,y:s.top-r.height*t.y+n.y}}):[{index:0,relativePoint:null,x:n.x,y:n.y}]},set:function(t){var e=t.interaction,n=t.coords,i=t.state,o=i.options,r=i.offsets,a=(0,at.default)(e.interactable,e.element,e.prepared.name),s=(0,C.default)({},n),l=[];o.offsetWithOrigin||(s.x-=a.x,s.y-=a.y);for(var c=0;c<r.length;c++)for(var u=r[c],d=s.x-u.x,p=s.y-u.y,h=0,f=o.targets.length;h<f;h++){var v,g=o.targets[h];(v=O.default.func(g)?g(d,p,e._proxy,u,h):g)&&l.push({x:(O.default.number(v.x)?v.x:d)+u.x,y:(O.default.number(v.y)?v.y:p)+u.y,range:O.default.number(v.range)?v.range:o.range,source:g,index:h,offset:u})}for(var m={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},y=0;y<l.length;y++){var b=l[y],w=b.range,_=b.x-s.x,x=b.y-s.y,E=(0,k.default)(_,x),S=E<=w;w===1/0&&m.inRange&&m.range!==1/0&&(S=!1),m.target&&!(S?m.inRange&&w!==1/0?E/w<m.distance/m.range:w===1/0&&m.range!==1/0||E<m.distance:!m.inRange&&E<m.distance)||(m.target=b,m.distance=E,m.range=w,m.inRange=S,m.delta.x=_,m.delta.y=x)}return m.inRange&&(n.x=m.target.x,n.y=m.target.y),i.closest=m,m},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!(M.snap=M.default=void 0),origin:null,relativePoints:null,endOnly:!1,enabled:!1}}),bo=(M.snap=yo,(0,s.makeModifier)(yo,"snap")),L=(M.default=bo,{});function wo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(L,"__esModule",{value:!0}),L.snapSize=L.default=void 0;var _o={start:function(t){var e=t.state,n=t.edges,i=e.options;if(!n)return null;t.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:i.offset||"self",origin:{x:0,y:0},range:i.range}},e.targetFields=e.targetFields||[["width","height"],["x","y"]],M.snap.start(t),e.offsets=t.state.offsets,t.state=e},set:function(t){var e,n,i=t.interaction,o=t.state,r=t.coords,a=o.options,s=o.offsets,l={x:r.x-s[0].x,y:r.y-s[0].y};o.options=(0,C.default)({},a),o.options.targets=[];for(var c=0;c<(a.targets||[]).length;c++){var u=(a.targets||[])[c],d=void 0;if(d=O.default.func(u)?u(l.x,l.y,i):u){for(var p=0;p<o.targetFields.length;p++){var h=(e=o.targetFields[p],n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(e,n)||function(t,e){if(t){if("string"==typeof t)return wo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wo(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=h[0],v=h[1];if(f in d||v in d){d.x=d[f],d.y=d[v];break}}o.options.targets.push(d)}}var g=M.snap.set(t);return o.options=a,g},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},xo=(L.snapSize=_o,(0,s.makeModifier)(_o,"snapSize")),Eo=(L.default=xo,{}),So=(Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.snapEdges=Eo.default=void 0,{start:function(t){var e=t.edges;return e?(t.state.targetFields=t.state.targetFields||[[e.left?"left":"right",e.top?"top":"bottom"]],L.snapSize.start(t)):null},set:L.snapSize.set,defaults:(0,C.default)((0,De.default)(L.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})}),Oo=(Eo.snapEdges=So,(0,s.makeModifier)(So,"snapEdges")),Co=(Eo.default=Oo,{}),ko=(Object.defineProperty(Co,"__esModule",{value:!0}),Object.defineProperty(Co,"default",{enumerable:!0,get:function(){return Zi.default}}),{}),Po=(Object.defineProperty(ko,"__esModule",{value:!0}),Object.defineProperty(ko,"default",{enumerable:!0,get:function(){return Zi.default}}),{}),To=(Object.defineProperty(Po,"__esModule",{value:!0}),Po.default=void 0,{aspectRatio:Ui.default,restrictEdges:A.default,restrict:j.default,restrictRect:so.default,restrictSize:po.default,snapEdges:Eo.default,snap:M.default,snapSize:L.default,spring:Co.default,avoid:Qi.default,transform:ko.default,rubberband:mo.default}),jo=(Po.default=To,{}),Ao=(Object.defineProperty(jo,"__esModule",{value:!0}),jo.default=void 0,{id:"modifiers",install:function(t){var e=t.interactStatic;for(var n in t.usePlugin(s.default),t.usePlugin(zi.default),e.modifiers=Po.default,Po.default){var i=Po.default[n],o=i._defaults,r=i._methods;o._methods=r,t.defaults.perAction[n]=o}}}),Mo,Lo=(jo.default=Ao,{});function Io(t){return Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Io(t)}function Do(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Fo(t,e){return Fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fo(t,e)}function Ro(t,e){if(e&&("object"===Io(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zo(t)}function zo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bo(t){return Bo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bo(t)}Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.default=Lo.PointerEvent=void 0;var No=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fo(t,e)}(u,t);var e,n,i,o,c=(i=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=Bo(i);if(o){var n=Bo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ro(this,t)});function u(t,e,n,i,o,r){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),a=c.call(this,o),E.pointerExtend(zo(a),n),n!==e&&E.pointerExtend(zo(a),e),a.timeStamp=r,a.originalEvent=n,a.type=t,a.pointerId=E.getPointerId(e),a.pointerType=E.getPointerType(e),a.target=i,a.currentTarget=null,"tap"===t){var s=o.getPointerIndex(e);a.dt=a.timeStamp-o.pointers[s].downTime;var l=a.timeStamp-o.tapTime;a.double=!!o.prevTap&&"doubletap"!==o.prevTap.type&&o.prevTap.target===a.target&&l<500}else"doubletap"===t&&(a.dt=e.timeStamp-o.tapTime,a.double=!0);return a}return e=u,(n=[{key:"_subtractOrigin",value:function(t){var e=t.x,n=t.y;return this.pageX-=e,this.pageY-=n,this.clientX-=e,this.clientY-=n,this}},{key:"_addOrigin",value:function(t){var e=t.x,n=t.y;return this.pageX+=e,this.pageY+=n,this.clientX+=e,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&Do(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(gt.BaseEvent),Uo=(Lo.PointerEvent=Lo.default=No,{}),Ho=(Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.default=void 0,{id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(t){t.pointerEvents=Ho,t.defaults.actions.pointerEvents=Ho.defaults,(0,C.default)(t.actions.phaselessTypes,Ho.types)},listeners:{"interactions:new":function(t){var e=t.interaction;e.prevTap=null,e.tapTime=0},"interactions:update-pointer":function(t){var e=t.down,n=t.pointerInfo;!e&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(t,e){var n=t.interaction,i=t.pointer,o=t.event,r=t.eventTarget;t.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&Wo(t),I({interaction:n,pointer:i,event:o,eventTarget:r,type:"move"},e))},"interactions:down":function(t,e){!function(t,e){for(var n=t.interaction,i=t.pointer,o=t.event,r=t.eventTarget,a=t.pointerIndex,s=n.pointers[a].hold,l=_.getPath(r),c={interaction:n,pointer:i,event:o,eventTarget:r,type:"hold",targets:[],path:l,node:null},u=0;u<l.length;u++){var d=l[u];c.node=d,e.fire("pointerEvents:collect-targets",c)}if(c.targets.length){for(var p=1/0,h=0;h<c.targets.length;h++){var f=c.targets[h].eventable.options.holdDuration;f<p&&(p=f)}s.duration=p,s.timeout=setTimeout(function(){I({interaction:n,eventTarget:r,pointer:i,event:o,type:"hold"},e)},p)}}(t,e),I(t,e)},"interactions:up":function(t,e){Wo(t),I(t,e),function(t,e){var n=t.interaction,i=t.pointer,o=t.event,r=t.eventTarget;n.pointerWasMoved||I({interaction:n,eventTarget:r,pointer:i,event:o,type:"tap"},e)}(t,e)},"interactions:cancel":function(t,e){Wo(t),I(t,e)}},PointerEvent:Lo.PointerEvent,fire:I,collectEventTargets:Vo,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}});function I(t,e){var n=t.interaction,i=t.pointer,o=t.event,r=t.eventTarget,a=t.type,s=t.targets,l=void 0===s?Vo(t,e):s,c=new Lo.PointerEvent(a,i,o,r,n,e.now());e.fire("pointerEvents:new",{pointerEvent:c});for(var u={interaction:n,pointer:i,event:o,eventTarget:r,targets:l,type:a,pointerEvent:c},d=0;d<l.length;d++){var p=l[d];for(var h in p.props||{})c[h]=p.props[h];var f=(0,at.default)(p.eventable,p.node);if(c._subtractOrigin(f),c.eventable=p.eventable,c.currentTarget=p.node,p.eventable.fire(c),c._addOrigin(f),c.immediatePropagationStopped||c.propagationStopped&&d+1<l.length&&l[d+1].node!==c.currentTarget)break}if(e.fire("pointerEvents:fired",u),"tap"===a){var v=c.double?I({interaction:n,pointer:i,event:o,eventTarget:r,type:"doubletap"},e):c;n.prevTap=v,n.tapTime=v.timeStamp}return c}function Vo(t,e){var n=t.interaction,i=t.pointer,o=t.event,r=t.eventTarget,a=t.type,s=n.getPointerIndex(i),l=n.pointers[s];if("tap"===a&&(n.pointerWasMoved||!l||l.downTarget!==r))return[];for(var c=_.getPath(r),u={interaction:n,pointer:i,event:o,eventTarget:r,type:a,path:c,targets:[],node:null},d=0;d<c.length;d++){var p=c[d];u.node=p,e.fire("pointerEvents:collect-targets",u)}return"hold"===a&&(u.targets=u.targets.filter(function(t){var e;return t.eventable.options.holdDuration===(null==(e=n.pointers[s])?void 0:e.hold.duration)})),u.targets}function Wo(t){var e=t.interaction,n=t.pointerIndex,i=e.pointers[n].hold;i&&i.timeout&&(clearTimeout(i.timeout),i.timeout=null)}var qo,Go=(Uo.default=Ho,{});function Yo(t){var e=t.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}Object.defineProperty(Go,"__esModule",{value:!0}),Go.default=void 0;var Xo={id:"pointer-events/holdRepeat",install:function(t){t.usePlugin(Uo.default);var e=t.pointerEvents;e.defaults.holdRepeatInterval=0,e.types.holdrepeat=t.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(t,e){return t["pointerEvents:".concat(e)]=Yo,t},{"pointerEvents:new":function(t){var e=t.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)},"pointerEvents:fired":function(t,e){var n=t.interaction,i=t.pointerEvent,o=t.eventTarget,r=t.targets;if("hold"===i.type&&r.length){var a=r[0].eventable.options.holdRepeatInterval;a<=0||(n.holdIntervalHandle=setTimeout(function(){e.pointerEvents.fire({interaction:n,eventTarget:o,type:"hold",pointer:i,event:i},e)},a))}}})},Zo,Ko=(Go.default=Xo,{});function Jo(t){return(0,C.default)(this.events.options,t),this}Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.default=void 0;var Qo,$o,tr=(Ko.default={id:"pointer-events/interactableTargets",install:function(t){var e=t.Interactable;e.prototype.pointerEvents=Jo;var i=e.prototype._backCompatOption;e.prototype._backCompatOption=function(t,e){var n=i.call(this,t,e);return n===this&&(this.events.options[t]=e),n}},listeners:{"pointerEvents:collect-targets":function(t,e){var i=t.targets,o=t.node,r=t.type,a=t.eventTarget;e.interactables.forEachMatch(o,function(t){var e=t.events,n=e.options;e.types[r]&&e.types[r].length&&t.testIgnoreAllow(n,o,a)&&i.push({node:o,eventable:e,props:{interactable:t}})})},"interactable:new":function(t){var e=t.interactable;e.events.getRect=function(t){return e.getRect(t)}},"interactable:set":function(t,e){var n=t.interactable,i=t.options;(0,C.default)(n.events.options,e.pointerEvents.defaults),(0,C.default)(n.events.options,i.pointerEvents||{})}}},{}),er=(Object.defineProperty(tr,"__esModule",{value:!0}),tr.default=void 0,{id:"pointer-events",install:function(t){t.usePlugin(Uo),t.usePlugin(Go.default),t.usePlugin(Ko.default)}}),nr,ir=(tr.default=er,{});function or(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(t){return function(s,l,c){for(var u=O.default.string(s.target)?f.from(s._context.querySelectorAll(s.target)):[s.target],d=c.window.Promise,p=d?[]:null,t=function(){var e=u[h],t=s.getRect(e);if(!t)return"break";var n=f.find(c.interactions.list,function(t){return t.interacting()&&t.interactable===s&&t.element===e&&t.prepared.name===l.name}),i=void 0;if(n)n.move(),p&&(i=n._reflowPromise||new d(function(t){n._reflowResolve=t}));else{var o=(0,m.tlbrToXywh)(t),r={page:{x:o.x,y:o.y},client:{x:o.x,y:o.y},timeStamp:c.now()},a=E.coordsToEvent(r);i=function(t,e,n,i,o){var r=t.interactions.new({pointerType:"reflow"}),a={interaction:r,event:o,pointer:o,eventTarget:n,phase:"reflow"};r.interactable=e,r.element=n,r.prevEvent=o,r.updatePointer(o,o,n,!0),E.setZeroCoords(r.coords.delta),(0,b.copyAction)(r.prepared,i),r._doPhase(a);var s=t.window.Promise,l=s?new s(function(t){r._reflowResolve=t}):void 0;return r._reflowPromise=l,r.start(i,e,n),r._interacting?(r.move(a),r.end(o)):(r.stop(),r._reflowResolve()),r.removePointer(o,o),l}(c,s,e,l,a)}p&&p.push(i)},h=0;h<u.length&&"break"!==t();h++);return p&&d.all(p).then(function(){return s})}(this,t,e)}}Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0,ir.install=or;var rr,ar,D=(ir.default={id:"reflow",install:or,listeners:{"interactions:stop":function(t,e){var n=t.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),f.remove(e.interactions.list,n))}}},{exports:{}});function sr(t){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(t)}Object.defineProperty(D.exports,"__esModule",{value:!0}),D.exports.default=void 0,e.default.use(Oe.default),e.default.use(o.default),e.default.use(tr.default),e.default.use(xn.default),e.default.use(jo.default),e.default.use(Ee.default),e.default.use(Yt.default),e.default.use(t.default),e.default.use(ir.default);var lr=e.default;if(D.exports.default=lr,"object"===sr(D)&&D)try{D.exports=e.default}catch(F){}e.default.default=e.default,Yt.default,t.default,Ee.default,Oe.default,Me.default,xn.default,e.default,jo.default,o.default,tr.default,ir.default;var D=D.exports,cr={exports:{}};function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}Object.defineProperty(cr.exports,"__esModule",{value:!0}),cr.exports.default=void 0;var dr=D.default;if(cr.exports.default=dr,"object"===ur(cr)&&cr)try{cr.exports=D.default}catch(F){}return D.default.default=D.default,cr.exports}()},,,,,,,,,,function(t,r,e){"use strict";!function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.InputManager=r.MOUSE=r.KEYBOARD=void 0,(t=i=r.KEYBOARD||(r.KEYBOARD={}))[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Escape=27]="Escape",t[t.Spacebar=32]="Spacebar",t[t.Supr=46]="Supr",t[t.Cmd=91]="Cmd",t[t.F2=113]="F2",t[t.LeftArrow=37]="LeftArrow",t[t.UpArrow=38]="UpArrow",t[t.RightArrow=39]="RightArrow",t[t.DownArrow=40]="DownArrow",t[t.x=88]="x",t[t.c=67]="c",t[t.v=86]="v",t[t.g=71]="g",(t=o=r.MOUSE||(r.MOUSE={}))[t.LeftClick=1]="LeftClick",t[t.MiddleClick=2]="MiddleClick",t[t.RightClick=3]="RightClick",n.getInstance=function(){return this.instance||(this.instance=new n),this.instance},n.prototype.isBeingPressed=function(t){return t in this.pressed_keys&&this.pressed_keys[t]},n.prototype.onKeyPressed=function(t,e){t in this.callbacks.pressed||(this.callbacks.pressed[t]=[]),this.callbacks.pressed[t].push(e)},n.prototype.onKeyCombinationPressed=function(t,n){var i=this,o=t.split("+").map(function(t){return t.trim()}),r=!1;o.forEach(function(t){i.onKeyPressed(t,function(t){var e=o.every(function(t){return i.isBeingPressed(t)});e?n(!0):!1===e&&r&&n(!1),r=e})})},n.prototype.cleanup=function(){var t=e(window);t.off("keydown",this.onKeyDown),t.off("keyup",this.onKeyUp),t.off("mousedown",this.onMouseDown),t.off("mouseup",this.onMouseUp),this.pressed_keys={},this.callbacks={pressed:{}},n.instance=null},n.instance=null;var i,o,t=n;function n(){var n=this,t=(this.onKeyDown=function(e){var t;e.keyCode in i&&(t=i[e.keyCode],!0!==n.pressed_keys[t])&&(n.pressed_keys[t]=!0,t in n.callbacks.pressed)&&n.callbacks.pressed[t].forEach(function(t){return t(!0,e)})},this.onKeyUp=function(e){var t;e.keyCode in i&&(t=i[e.keyCode],!1!==n.pressed_keys[t])&&(n.pressed_keys[t]=!1,t in n.callbacks.pressed)&&n.callbacks.pressed[t].forEach(function(t){return t(!1,e)})},this.onMouseDown=function(t){t.which in o&&(t=o[t.which],!0!==n.pressed_keys[t])&&(n.pressed_keys[t]=!0)},this.onMouseUp=function(t){t.which in o&&(t=o[t.which],!1!==n.pressed_keys[t])&&(n.pressed_keys[t]=!1)},this.pressed_keys={},this.callbacks={pressed:{}},e(window));t.on("keydown",this.onKeyDown),t.on("keyup",this.onKeyUp),t.on("mousedown",this.onMouseDown),t.on("mouseup",this.onMouseUp)}r.InputManager=t}.call(this,e(1))},function(t,n,o){"use strict";!function(b){Object.defineProperty(n,"__esModule",{value:!0}),n.SubmenuBase=void 0;var t=o(367),w=o(254),u=o(491),i=o(310),p=o(17),d=o(7);function e(t,e){this.afterRenderCallbacks=[],this.blocks=[],this.internalEventCallbacks={},this.showRecycleBin=!0,this.alwaysBlockAlign=!1,this.design_mediaQueryBlockAlignment_minWidth=1600,this.menu=e,this.canvasObject=t}e.prototype.mustAlignSubmenuToCenter=function(){var t=this.design_mediaQueryBlockAlignment_minWidth;return window.innerWidth>=t},e.prototype.isPreviewSidebarOpened=function(){return b(".tool__preview__toggle.closed").length<=0},e.prototype.block=function(t,e){var n=this.menu.getTemplate("block");n.attr("data-name",t),e(this.currBlock=n),this.blocks.push(this.currBlock),this.currBlock=null},e.prototype.inputNumberElement=function(n,i,t,e){function o(t){(e=parseInt(c.val()))&&!isNaN(e)||0!==e&&(e=0);var e=p.Tools.keepInNumericBounds(i.from,i.to,e+t);c.val(e+i.unit),a.canvasObject.setUserAttributes(((t={})[n]=e,t))}function r(t){return function(){t(),d(),u=setInterval(t,85)}}var a=this,s=(void 0===e&&(e={}),this.currBlock),l=this.createItem(),c=(l.addClass("editpdf__submenu__input-number"),s.append(l),t=this.resolveValue(t),i.unit?i.unit=" "+i.unit:i.unit="",b('<input type="text" id="'+n+'_inputNumber" value="'+t+i.unit+'">')),s=b(w.IconRepository.unfoldArrow()),t=(s.addClass("substraction-arrow"),b(w.IconRepository.unfoldArrow())),u=(t.addClass("addition-arrow"),e.leftIcon&&(e.leftIcon=b(w.IconRepository[e.leftIcon]()),e.leftIcon.addClass("editpdf-icon"),e.leftIcon.addClass("leftside-icon"),l.prepend(e.leftIcon)),null),d=function(){b(document).one("mouseup",function(){clearInterval(u)})};t.mousedown(r(function(){o(1)})),s.mousedown(r(function(){o(-1)})),c.blur(function(){return o(0)}),c.keydown(function(t){13===t.which&&o(0),38===t.which&&o(1),40===t.which&&o(-1)}),l.append(c),l.append(t),l.append(s),e.disabled&&l.addClass("disabled"),e.tooltip&&this.addTooltip(l,e.tooltip)},e.prototype.selectElement=function(i,t,e,n){var o=this,r=(void 0===n&&(n={}),this.currBlock),a=this.createItem(),s=b("<select id='"+i+"_select'>");r.append(a),a.append(s),n.leftsideIcon&&(n.leftsideIcon=b(w.IconRepository[n.leftsideIcon]()),n.leftsideIcon.addClass("editpdf-icon"),n.leftsideIcon.addClass("leftside-icon"),a.prepend(n.leftsideIcon)),t=this.resolveValue(t),this.fillSelectWithOptions(s,t,this.resolveValue(e)),s.change(function(t){var e,n=s.val(),n=o.str_humanize(n);o.canvasObject.setUserAttributes(((e={})[i]=n,e))}),n.tooltip&&this.addTooltip(a,n.tooltip)},e.prototype.switchButton=function(n,t,e){var i=this,o=(void 0===e&&(e={}),this.currBlock),r=this.createItem(),a=b("<div class='switch-button "+n+"'>"),o=(r.append(a),o.append(r),e.innerIcon&&(e.innerIcon=b(w.IconRepository[e.innerIcon]()),e.innerIcon.addClass("editpdf-icon"),a.html(e.innerIcon)),this.resolveValue(t));o?a.addClass("switch-on"):a.addClass("switch-off"),a.attr("data-value",o),a.click(function(){a.removeClass("switch-on"),a.removeClass("switch-off");var t,e=!("true"===a.attr("data-value"));a.attr("data-value",String(e)),a.addClass(e?"switch-on":"switch-off"),i.canvasObject.setUserAttributes(((t={})[n]=e,t))}),e.tooltip&&this.addTooltip(r,e.tooltip)},e.prototype.actionButton=function(t,e,n){var i=this,o=(void 0===n&&(n={}),this.currBlock),r=this.createItem(),t=b("<div class='action-button "+t+"'>");r.append(t),o.append(r),n.innerIcon&&(n.innerIcon=b(w.IconRepository[n.innerIcon]()),n.innerIcon.addClass("editpdf-icon"),t.html(n.innerIcon)),t.click(function(){e(),i.canvasObject&&i.canvasObject.updateDom()}),n.tooltip&&this.addTooltip(r,n.tooltip)},e.prototype.contextualMenu=function(o,t,e,n){void 0===n&&(n={});var i,r=this,a=this.currBlock,s=this.createItem(),l=o+"_ContextualMenu",c=b("<div class='"+o+"'></div>"),u=(s.attr("id",l),s.addClass("contextual-menu-wrapper"),s.append(c),a.append(s),this.resolveValue(t)),a=this.resolveValue(e),t=b(u[a]),e=(t.addClass("editpdf-icon"),c.append(t),b(w.IconRepository.unfoldArrow())),d=(e.addClass("unfold-arrow-icon"),c.append(e),"");for(i in u)d+="<div data-value='"+i+"'>"+u[i]+"</div>\n";this.afterRenderCallbacks.push(function(){window.tippy("#"+l,{content:d,allowHTML:!0,trigger:"click",theme:"light editpdf-submenu-contextual-menu",interactive:!0,placement:"bottom",arrow:!1,offset:[0,5],onHide:function(){s.removeClass("tippy-active")},onMount:function(i){var t=b(i.popper).find(".tippy-content");s.addClass("tippy-active"),t.hasClass("bootstrapped")||(t.addClass("bootstrapped"),t.addClass("belongs-to-submenu"),t.find("[data-value]").click(function(){var t,e=b(this),n=e.data("value");r.canvasObject.setUserAttributes(((t={})[o]=n,t)),c.find(".editpdf-icon").html(e.html()),i.hide()}))}})}),n.tooltip&&this.addTooltip(s,n.tooltip)},e.prototype.symbolsMenu=function(t,e){void 0===e&&(e={});var n,i=this,o=this.currBlock,r=this.createItem(),a=t+"_ContextualMenu",t=b("<div class='"+t+"'></div>"),o=(r.attr("id",a),r.addClass("contextual-menu-wrapper"),r.addClass("contextual-menu-wrapper--with-rows"),r.append(t),o.append(r),b(w.IconRepository.symbols())),s=(o.addClass("editpdf-icon"),t.append(o),u.SymbolRepository.getAllAsObject()),l=null,c=b("<div></div>");for(n in s)(l?l.children().length:0)%6==0&&(l=b("<div class='symbol-row'></div>"),c.append(l)),l.append("<div data-value='"+n+"'>"+s[n]+"</div>");e.tooltip&&this.addTooltip(r,e.tooltip),this.afterRenderCallbacks.push(function(){window.tippy("#"+a,{content:c.html(),allowHTML:!0,trigger:"click",theme:"light editpdf-submenu-contextual-menu",interactive:!0,placement:"bottom",arrow:!1,offset:[0,5],onHide:function(){r.removeClass("tippy-active")},onMount:function(t){var e,n=b(t.popper).find(".tippy-content");r.addClass("tippy-active"),n.hasClass("bootstrapped")||((e=n.find("[data-value]")).each(function(){var t=b(this);i.addTooltip(b(this),{text:d.Lang.t("tooltip_symbol_"+t.attr("data-value"))})}),n.addClass("bootstrapped"),n.addClass("belongs-to-submenu"),e.click(function(){b(this).data("value");i.menu.onMenuItemClick("symbol",{svg:b(this).html()}),t.hide()}))}})})},e.prototype.colorPalette=function(r,t,e,n){function i(){g=b("<div class='color-row'>"),v.append(g)}var o=this,a=(void 0===n&&(n={}),t=this.resolveValue(t),this),s=this.currBlock,l=this.createItem(),c=r+"_ColorPalette",u=b("<div class='"+r+"'></div>"),s=(l.attr("id",c),l.addClass("color-palette-wrapper"),l.append(u),s.append(l),this.resolveValue(e)),d=w.IconRepository.transparentColorSample(),p=function(t,e){var n=(e=void 0===e?!1:e)?" for-border":"",i=e?"border-color":"background";return"transparent"===t?b("<div class='color-col'><div class='color-sample"+n+"' data-value='"+t+"' "+(e?"":"style='"+i+": "+t+"'")+">"+(e?"":d)+"</div></div>"):"#ffffff"===t.toLowerCase()?b("<div class='color-col color-col-white'><div class='color-sample"+n+"' data-value='"+t+"' style='"+i+": "+t+"'></div></div>"):b("<div class='color-col'><div class='color-sample"+n+"' data-value='"+t+"' style='"+i+": "+t+"'></div></div>")},h=function(t){u.find(".color-sample").detach(),o.triggerInternalEvent("color_palette:change",{eventOriginator:r,newValue:t});var e=u.hasClass("strokeColor");"displayColorSampleAsFillColor"in n&&(e=!n.displayColorSampleAsFillColor),u.prepend(p(t,e).find(".color-sample"))},e=(n.innerIcon?(n.innerIcon=b(w.IconRepository[n.innerIcon]()),n.innerIcon.addClass("editpdf-icon"),u.append(n.innerIcon),h=function(t){var e;u.find("g.color-palette").hide(),("transparent"===t?u.find("g.color-palette.color-palette--transparent"):"#ffffff"===t.toLowerCase()?u.find("g.color-palette.color-palette--white"):((e=u.find("g.color-palette.color-palette--default")).find("rect").css("fill",t),e)).show()}):n.leftIcon&&(n.leftIcon=b(w.IconRepository[n.leftIcon]()),n.leftIcon.addClass("editpdf-icon"),n.leftIcon.addClass("leftside-icon"),l.prepend(n.leftIcon)),s&&h(s),b(w.IconRepository.unfoldArrow())),f=(e.addClass("unfold-arrow-icon"),u.append(e),0),v=b("<div class='color-palette'>"),g=null,m=(i(),!0),y=(t.forEach(function(t){g.append(p(t)),++f%(m?3:6)==0&&(m&&(m=!1,f=0),i())}),n.tooltip&&this.addTooltip(l,n.tooltip),[0,5]);this.afterRenderCallbacks.push(function(){window.tippy("#"+c,{content:v[0].outerHTML,allowHTML:!0,trigger:"click",theme:"light color-palette color-palette-"+r,interactive:!0,placement:"bottom",arrow:!1,offset:y,onHide:function(){l.removeClass("tippy-active")},onMount:function(i){var o=b(i.popper).find(".tippy-content");l.addClass("tippy-active"),n.tooltip_mount_reposition_callback&&n.tooltip_mount_reposition_callback(i),o.hasClass("bootstrapped")||(b(i.popper).find(".tippy-box").css("position","relative"),o.addClass("bootstrapped"),o.addClass("belongs-to-submenu"),o.find("[data-value]").click(function(){var t=b(this),e=t.data("value"),e=(a.canvasObject.setUserAttributes(((n={})[r]=e,n)),t.data("value")),n=(o.find("[data-value]").find(".check-icon").detach(),b(w.IconRepository.check()));n.addClass("check-icon"),t.append(n),a.triggerInternalEvent("submenu:color_palette:change",{newColor:e,dom:t}),h(e),i.hide()}))}})})},Object.defineProperty(e.prototype,"lastItemInCurrentBlock",{get:function(){var t=this.currBlock.children();return t.eq(t.length-1)},enumerable:!1,configurable:!0}),e.prototype.fillColorTooltip=function(){return{text:d.Lang.t("tooltip_fillColor")}},e.prototype.strokeColorTooltip=function(){return{text:d.Lang.t("tooltip_borderColor")}},e.prototype.colorTooltip=function(){return{text:d.Lang.t("tooltip_color")}},e.prototype.opacityTooltip=function(){return{on:".editpdf-icon",text:d.Lang.t("tooltip_opacity")}},e.prototype.strokeTooltip=function(){return{on:".editpdf-icon",text:d.Lang.t("tooltip_stroke")}},e.prototype.rotateLeftTooltip=function(){return{text:d.Lang.t("tooltip_rotateLeft")}},e.prototype.rotateRightTooltip=function(){return{text:d.Lang.t("tooltip_rotateRight")}},e.prototype.getTooltip=function(t){return{text:d.Lang.t("tooltip_"+t)}},e.prototype.applyDrawTooltip=function(){return{text:d.Lang.t("tooltip_applyDraw")}},e.prototype.textAlignTooltip=function(){return{text:d.Lang.t("tooltip_textAlign")}},e.prototype.textBoldTooltip=function(){return{text:d.Lang.t("tooltip_textBold")}},e.prototype.textItalicTooltip=function(){return{text:d.Lang.t("tooltip_textItalic")}},e.prototype.textUnderlineTooltip=function(){return{text:d.Lang.t("tooltip_textUnderline")}},e.prototype.textColorTooltip=function(){return{text:d.Lang.t("tooltip_textColor")}},e.prototype.textBgColorTooltip=function(){return{text:d.Lang.t("tooltip_textBgColor")}},e.prototype.addTooltip=function(t,e){var n=t;return(n=e.on?t.find(e.on):n).is(".wrapper")&&(n=n.children().eq(0)),window.tippy(n[0],{content:e.text,placement:"bottom",arrow:!0,animation:"fade"})},e.prototype.getAvailableFonts=function(){var t,e=this.canvasObject,n=i.AssetsManager.fontsForWritingSystems(e.writingSystems);for(t in n)n[t].text=n[t].human_name;return n},e.prototype.getAvailableFontSizes=function(){return t.Text.getAvailableFontSizes()},e.prototype.getAvailableShapesStrokeValues=function(){for(var t=[],e=0;e<=40;e++)t.push(e);return t},e.prototype.getOpacityCollection=function(){return[["1","100%"],["0.75","75%"],["0.5","50%"],["0.25","25%"],["0","0%"]]},e.prototype.getDefaultAvailableColors=function(){return["transparent","#FFFFFF","#000000","#F44336","#E91E64","#9C28B0","#2196F3","#00BCD4","#4CAF50","#FFEC3A","#FF5722","#795548","#E0E0E0","#9E9E9E","#424242"]},e.prototype.createItem=function(){return b("<div class='wrapper'></div>")},e.prototype.fillSelectWithOptions=function(t,e,o){function n(t,e,n){void 0===n&&(n={});var i=void 0!==o&&String(o)===String(t)?"selected":"",n="enabled"in n&&!1===n.enabled?"disabled":"";r.push("<option "+n+" value='"+t+"' "+i+">"+e+"</option>")}var i=this,r=[];if(Array.isArray(e))e.forEach(function(t){Array.isArray(t)?n(t[0],t[1]):n(i.str_underscore(t),t)});else{if("object"!=typeof e)throw"[Editpdf SubmenuBase] Uknown 'options' type";for(var a in e)n(a,e[a].text,e[a])}t.append(b(r.join("")))},e.prototype.resolveValue=function(t){if(void 0!==t){var e,n,i,o=typeof t;switch(o){case"object":return t;case"string":return this.isLiteralValue(t)?this.removeLiterals(t):(n=i=void 0,(e=t.match(/(.+)\.(.+)/))?"function"==typeof(n=this[e[1]])[i=e[2]]?n[i].call(n):n[i]:(n=this)[i=t].call(n));case"function":return t();default:throw"[Editpdf][SubmenuBase] Do not know how to resolveValue "+o}}},e.prototype.str_underscore=function(t){return String(t).replace(/\s/g,"_")},e.prototype.str_humanize=function(t){return String(t).replace(/_/g," ")},e.prototype.render=function(){var e=this,t=this.compose();this.showRecycleBin&&this.block("recycle_bin",function(t){e.appendRecycleBin(t)}),t.forEach(function(t){return e.submenu.append(t)}),this.afterRenderCallbacks.forEach(function(t){return t()}),this.setSubMenuName()},e.prototype.setSubMenuName=function(){var t=this.constructor.name.replace(/^Submenu/,"");this.submenu.attr("data-name",t)},e.prototype.makeLiteral=function(t){return"!!!"+t+"!!!"},e.prototype.removeLiterals=function(t){t=String(t);return t=(t=t.replace(/^!!!/,"")).replace(/!!!$/,"")},e.prototype.isLiteralValue=function(t){return null!==String(t).match(/!!!.+!!!/)},e.prototype.appendRecycleBin=function(t){var e=this,n=b("\n      <div class=\"wrapper\">\n        <div class='editpdf__submenu__btn recycle-bin'>\n          "+w.IconRepository.recycleBin()+"\n        </div>\n      </div>\n    ");n.click(function(){var t=new CustomEvent("canvas_object:remove_request",{detail:{canvasObject:e.menu.submenuCanvasObject,trigger:"recycle-bin"}});window.dispatchEvent(t)}),t.append(n),this.addTooltip(n.find(".recycle-bin"),{text:d.Lang.t("tooltip_removeLayer")})},Object.defineProperty(e.prototype,"submenu",{get:function(){return this.menu.subMenu},enumerable:!1,configurable:!0}),e.prototype.triggerEvent=function(t,e){void 0===e&&(e={});t=new CustomEvent(t,{detail:e});window.dispatchEvent(t)},e.prototype.onInternalEvent=function(t,e){t in this.internalEventCallbacks||(this.internalEventCallbacks[t]=[]),this.internalEventCallbacks[t].push(e)},e.prototype.triggerInternalEvent=function(t,e){t in this.internalEventCallbacks&&this.internalEventCallbacks[t].forEach(function(t){t(e)})},n.SubmenuBase=e}.call(this,o(1))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,r,a){"use strict";!function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasObject=void 0;var t=a(337),n=a(291),i=(o.prototype.isInteractiveModeEnabled=function(){return!0===this.interactiveMode.enabled},Object.defineProperty(o.prototype,"zoomLevel",{get:function(){return this._zoomLevel},set:function(t){this._zoomLevel=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rotation",{get:function(){return this._rotation},set:function(t){var e=t,e=t=(t=360<=t?360-t:t)<=-360?360+t:t;this.rotateCoords(e=e<0?360+e:e),this._rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isObjectFinished",{get:function(){if(this.isCreatedViaUserInteraction())throw"[Editpdf] You need to override this method in child interactive object";return!0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isFormObject",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isExportable",{get:function(){return!0},enumerable:!1,configurable:!0}),o.prototype.isCreatedViaUserInteraction=function(){return o.isObjectCreatedViaUserInteraction(this.type)},Object.defineProperty(o.prototype,"centerPoint",{get:function(){function t(t){return t*(Math.PI/180)}var e=this.getSize(),n=Math.sin(t(this.rotation)),i=Math.cos(t(this.rotation));return{x:this.coords.x+.5*(e.w*i-e.h*n),y:this.coords.y+.5*(e.w*n+e.h*i)}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"centerPoint_x1",{get:function(){var t=this.centerPoint;return t.x/=this.zoomLevel,t.y/=this.zoomLevel,t},enumerable:!1,configurable:!0}),o.prototype.initControls=function(){this.controls=new t.StandardControls(this),this.initEventsHandlersControls()},o.prototype.initEventsHandlersControls=function(){this.controls.on("drag:end",function(){this.updateZindex()}.bind(this))},Object.defineProperty(o.prototype,"hasControls",{get:function(){return!0},enumerable:!1,configurable:!0}),o.prototype.init=function(){this.hasControls&&this.initControls(),this.setAttributes(this.getDefaultAttributes())},o.prototype.hide=function(){this.dom.addClass("canvas-object--hidden")},o.prototype.show=function(){this.dom.removeClass("canvas-object--hidden")},o.prototype.remove=function(t){void 0===t&&(t=!0),this.pdfPage.removeObject(this),this.markedForDestruction=!0,this.placedInCanvas=!1,t&&this.triggerCustomEvent("canvas_object:removed",{canvasObject:this})},Object.defineProperty(o.prototype,"minWidth",{get:function(){return this._minWidth*this.zoomLevel},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"minHeight",{get:function(){return this._minHeight*this.zoomLevel},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"controlAnchors",{get:function(){return["top","left","right","bottom","top_left","top_right","bottom_left","bottom_right"]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keepAlwaysAspectRatio",{get:function(){return!1},enumerable:!1,configurable:!0}),o.prototype.postInit=function(){},o.prototype.applyZoomAndTranslate=function(t){this.zoomLevel=t,this._updateInternalDims(),this._updateInternalCoords()},o.prototype.activateHighlight=function(){this.controls.refreshGizmo(),this.controls.showGizmo(),this.controls.disableResizing(),this.controls.disableDragging(),this.beingHighlighted=!0},o.prototype.deactivateHighlight=function(){this.controls.hideGizmo(),this.beingHighlighted=!1},o.prototype.clone=function(t){throw"This must be implemented in child class"},o.prototype.moveTo=function(t,e){return this._updateInternalCoords(t,e),this},o.prototype.moveBy=function(t,e){return this.moveTo(this.coords.x+t,this.coords.y+e),this},o.prototype._updateInternalDims=function(t,e){void 0!==t&&void 0!==e&&(this.size_x1.w=t/this.zoomLevel,this.size_x1.h=e/this.zoomLevel),this.size.w=this.size_x1.w*this.zoomLevel,this.size.h=this.size_x1.h*this.zoomLevel},o.prototype._updateInternalCoords=function(t,e,n){void 0===n&&(n=!1),void 0!==t&&(this.coords_x1.x=t/(n?1:this.zoomLevel)),void 0!==e&&(this.coords_x1.y=e/(n?1:this.zoomLevel)),this.coords.x=this.coords_x1.x*this.zoomLevel,this.coords.y=this.coords_x1.y*this.zoomLevel},Object.defineProperty(o.prototype,"dom",{get:function(){return this._dom||this.initDom(),this._dom},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"aspectRatio",{get:function(){return{w:this.size_x1.w/this.size_x1.h,h:this.size_x1.h/this.size_x1.w}},enumerable:!1,configurable:!0}),o.prototype.getMinPermittedWidth=function(){return this.minPermittedWidth*this.zoomLevel},o.prototype.getMinPermittedHeight=function(){return this.minPermittedHeight*this.zoomLevel},o.prototype.getSize=function(){return{w:this.size.w,h:this.size.h}},o.prototype.getSize_x1=function(){return{w:this.size_x1.w,h:this.size_x1.h}},o.prototype.getFullSize=function(){return this.getSize()},o.prototype.setSize_x1=function(t,e){this.size_x1.w=t,this.size_x1.h=e,this._updateInternalDims()},o.prototype.notifyDomAttachment=function(){this.coords.x||(this.coords.x=0),this.coords.y||(this.coords.y=0)},o.prototype.calcCenteredCoords=function(t,e){e={x:e.x,y:e.y};return e.x-=.5*t.w,e.y-=.5*t.h,e},o.prototype.calcNewCoordsThroughOptions=function(t){var e,n={x:t.x,y:t.y};return t.centered&&(e=this.calcCenteredCoords(this.getFullSize(),n),n.x=e.x,n.y=e.y),t.keepInPageBoundaries&&(e=this.pdfPage.getSafePageRect(),n=this.calcSafeLimitCoords(n,e)),n},o.prototype.setSizeInProportionToPageSize=function(t){},o.prototype.setAttributes=function(t){var e;"coords_x1"in(t=void 0===t?{}:t)&&(this.coords_x1=t.coords_x1,this._updateInternalCoords(),t.coords=this.getCoords()),"coords"in t&&(e=this.calcNewCoordsThroughOptions(t.coords),this._updateInternalCoords(e.x,e.y)),t.size?this.setSize(t.size.w,t.size.h):t.size_x1&&(this.size_x1=t.size_x1,this._updateInternalDims(),this.cloned)&&this.setSize(this.size.w,this.size.h),"opacity"in t&&(this.opacity=Number(t.opacity)),"rotation"in t&&(this.rotation=Number(t.rotation)),"zindex"in t&&(this.zindex=Number(t.zindex)),"pdfPage"in t&&(this.pdfPage=t.pdfPage)},o.prototype.getDefaultAttributes=function(){return{size_x1:{w:30,h:30}}},o.prototype.calcSafeLimitCoords=function(t,e){var n,i,o=t.x,t=t.y,r=this.getFullSize();return n=o+r.w,i=t+r.h,e.x1<n&&(o=e.x1-r.w),e.y1<i&&(t=e.y1-r.h),e.x0>o&&(o=e.x0),e.y0>t&&(t=e.y0),{x:o,y:t}},o.prototype.getCoords=function(){return{x:this.coords.x,y:this.coords.y}},o.prototype.getCoords_x1=function(){return{x:this.coords_x1.x,y:this.coords_x1.y}},o.prototype.getViewportCoordsAlt=function(){var t=this.dom[0].getBoundingClientRect();return{x:t.left,y:t.top}},o.prototype.getViewportCoords=function(){var t=this.getCoords(),e=this.pdfPage.img[0].getBoundingClientRect();return{x:e.left+t.x,y:e.top+t.y}},o.prototype.isPresentInDom=function(){return document.body.contains(this.dom[0])},o.prototype.detach=function(){this.bag.domAttachedTo||(this.bag.domAttachedTo=this.dom.parent(),this.dom.detach())},o.prototype.reattach=function(){this.bag.domAttachedTo&&(this.bag.domAttachedTo.append(this.dom),this.bag.domAttachedTo=null)},o.prototype.getAttributes=function(){var t=this.getSize_x1(),e=this.getCoords_x1();return{id:this.id,zoomLevel:this.zoomLevel,coords_x1:e,size_x1:t,zindex:this.zindex,opacity:this.opacity,rotation:this.rotation,pdfPage:this.pdfPage}},o.prototype.setUserAttributes=function(t){this.setAttributes(t=void 0===t?{}:t),this._setUserAttributes(t),this.updateDom()},o.prototype._setUserAttributes=function(t){},o.prototype.initDom=function(){var t=e("<div>");t.addClass(o.CSS_CLASS),t.addClass("editpdf-selectable-text"),t.attr("data-type",this.type),t.attr("id",this.id),this._dom=t},o.prototype.updateDom=function(){this.markedForDestruction||(this.inUpdateDom=!0,this._dom||this.initDom(),this.opacityTarget.css("opacity",this.opacity),this._updateDom(),this.updateDomCoordinates(),this.updateZindex(),this.updateRotation(),this.controls&&this.controls.refreshGizmo(),this.triggerCustomEvent("canvas_object:dom_updated",{canvasObject:this}),this.inUpdateDom=!1)},o.prototype.updateDomCoordinates=function(){var t={x:this.coords.x,y:this.coords.y};this.dom.css({left:t.x,top:t.y})},o.prototype.updateZindex=function(){var t=this.controls&&(this.controls.isDragging||this.isActiveElement)?this.highestSafeZIndex:this.zindex;this.dom.css("z-index",t)},o.prototype.rotateRight=function(){this.rotation+=45},o.prototype.rotateLeft=function(){this.rotation-=45},o.prototype.updateRotation=function(){this.dom.css("transform","scale("+this.transformCssScaleX+", "+this.transformCssScaleY+") translate("+this.translate.x+"px, "+this.translate.y+"px) rotate("+this.rotation+"deg)"),this.dom.css("transform-origin",this.transformOrigin)},o.prototype.rotateCoords=function(t){var e=this.rotation,t=(0,n.CoordUtils.rotatePoint)(t-e,this.getCoords(),this.centerPoint);this._updateInternalCoords(t.x,t.y)},o.prototype.getGizmoSize=function(){return this.getFullSize()},Object.defineProperty(o.prototype,"transformOrigin",{get:function(){return this._transformOrigin},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pivotPoint",{get:function(){switch(this.transformOrigin){case"left top":return{x:this.coords.x,y:this.coords.y};case"center center":throw"No longer implemented"}throw"Not defined pivot point for transform origin '"+this.transformOrigin+"'"},enumerable:!1,configurable:!0}),o.prototype.addCssTransformation=function(t,e,n){t.css("transform",e+"("+n+")"),t.css("transform-origin",this.transformOrigin)},Object.defineProperty(o.prototype,"opacityTarget",{get:function(){return this.dom.find("> :not(.controls)")},enumerable:!1,configurable:!0}),o.prototype.setCoords=function(t,e){this._updateInternalCoords(t,e)},o.prototype.setCoords_x1=function(t,e){this._updateInternalCoords(t,e,!0)},o.prototype.isSelectableArea=function(t){return!0},o.prototype.makeid=function(t){for(var e="a",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*i));return e},o.prototype.getDomSize=function(){return{w:this.dom.width(),h:this.dom.height()}},o.prototype.makeActiveElement=function(){this.isActiveElement||(this.isActiveElement=!0,this.dom.addClass("canvas-object--active-element"),this.controls&&(this.controls.refreshGizmo(),this.controls.showGizmo(),this.controls.enable(),this.controls.enableDragging(),this.controls.enableResizing()),this._makeActiveElement(),this.updateDom())},o.prototype.makeInactiveElement=function(){this.isActiveElement&&(this.dom.removeClass("canvas-object--active-element"),this.isActiveElement=!1,this.controls&&(this.controls.hideGizmo(),this.controls.enable(),this.controls.disableResizing()),this._makeInactiveElement(),this.updateDom())},o.prototype._makeActiveElement=function(){},o.prototype._makeInactiveElement=function(){},o.prototype.triggerCustomEvent=function(t,e){void 0===e&&(e={});var n=new CustomEvent(t,{detail:e});window.dispatchEvent(n),t in this.customEventHandlers&&this.customEventHandlers[t].forEach(function(t){t(e)})},o.prototype.onCustomEvent=function(t,e){t in this.customEventHandlers||(this.customEventHandlers[t]=[]),this.customEventHandlers[t].push(e)},o.prototype.firstTimeActiveElement=function(){},o.isObjectCreatedViaUserInteraction=function(t){switch(t){case"line":case"freehand":return!0}return!1},o.prototype.extractSvg=function(){return null},o.prototype.resizeBy=function(t,e){var n=this.getSize(),t=n.w+t,n=n.h+e;this.setSize(t,n)},o.CSS_CLASS="canvas-object",o);function o(t,e){void 0===e&&(e={}),this.isActiveElement=!1,this.inUpdateDom=!1,this.markedForDestruction=!1,this.cloned=!1,this.cloning=!1,this._transformOrigin="left top",this.translate={x:0,y:0},this.beingHighlighted=!1,this.customEventHandlers={},this.transformCssScaleX=1,this.transformCssScaleY=1,this.interactiveMode={enabled:!1},this.coords={x:0,y:0},this.size={w:0,h:0},this.coords_x1={x:0,y:0},this.size_x1={w:0,h:0},this._zoomLevel=1,this.opacity=1,this._rotation=0,this.bag={},this.placedInCanvas=!1,this.highestSafeZIndex=2e3,this._minWidth=10,this._minHeight=10,this.minPermittedHeight=10,this.minPermittedWidth=10;e=e.id;this.id=e||this.makeid(20),this.pdfPage=t,this.init()}r.CanvasObject=i}.call(this,a(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HRS=e.HandlerRegistry=void 0;o.setWindow=function(t,e){return o.cleanupRoutines.push(function(){return window.removeEventListener(t,e)}),e},o.cleanupRoutine=function(t){t=t();this.cleanupRoutines.push(t)},o.log=function(t,e){e()},o.doCleanup=function(){o.cleanupRoutines.forEach(function(t){try{t()}catch(t){}}),o.cleanupRoutines=[]},o.cleanupRoutines=[];var i=o;function o(){}e.HandlerRegistry=i,e.HRS=i.setWindow},function(t,e,n){"use strict";function i(){}Object.defineProperty(e,"__esModule",{value:!0}),e.IconRepository=void 0,i.fontFamily=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="9.563" height="11.076"><path fill="#47474F" fill-rule="evenodd" d="M4.79 11.076c.302 0 .543-.09.725-.273s.273-.424.273-.725V1.654h2.84c.624 0 .936-.276.936-.827S9.25 0 8.627 0H.936C.312 0 0 .276 0 .827s.312.827.936.827h2.84v8.424c0 .302.09.543.273.725s.43.273.74.273z"/></svg>'},i.fontSize=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="14.405" height="11.076" fill="#47474F" fill-rule="evenodd"><path d="M9.63 11.076c.302 0 .543-.1.725-.273s.273-.424.273-.725V1.654h2.84c.624 0 .936-.276.936-.827S14.093 0 13.47 0h-7.7c-.624 0-.936.276-.936.827s.312.827.936.827h2.84v8.424c0 .302.1.543.273.725s.43.273.74.273zm-6.934-.036c.235 0 .424-.07.567-.206s.214-.32.214-.55V6.328H4.66c.246 0 .43-.052.55-.155s.18-.262.18-.475-.06-.37-.18-.47-.304-.15-.55-.15H.73c-.246 0-.43.05-.55.15s-.18.258-.18.47.06.37.18.475.304.155.55.155h1.184v3.956c0 .23.07.413.214.55s.332.206.567.206z"/></svg>'},i.textBold=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="12"><path fill="#47474F" fill-rule="evenodd" d="M5.81 12C8.377 12 10 10.64 10 8.565c0-1.634-1.2-2.817-2.892-2.905v-.07C8.5 5.404 9.453 4.353 9.453 3.02 9.453 1.148 8.025 0 5.688 0h-4.25C.53 0 0 .53 0 1.466v9.068C0 11.46.53 12 1.437 12H5.81zm-1.2-7.03H2.848V1.996h1.966c1.155 0 1.843.54 1.843 1.448 0 .954-.758 1.528-2.046 1.528zm-1.764 5.05H4.92c1.42 0 2.187-.574 2.187-1.66 0-1.06-.802-1.634-2.25-1.634h-2.01v3.294z"/></svg>'},i.textItalics=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="9" height="12"><path fill="#47474F" fill-rule="evenodd" d="M6.203 12c.436 0 .745-.256.745-.68 0-.415-.3-.672-.736-.672H4.34l2.052-9.296h1.862c.445 0 .745-.265.745-.69C9 .256 8.71 0 8.264 0H2.797c-.436 0-.736.256-.736.663 0 .424.31.69.745.69h1.862l-2.062 9.296H.736c-.436 0-.736.256-.736.672 0 .424.31.68.745.68h5.458z"/></svg>'},i.textUnderline=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="9" height="14"><path fill="#47474F" fill-rule="evenodd" d="M9 7.424c0 2.464-1.727 4.153-4.504 4.153C1.727 11.577 0 9.888 0 7.424V.783C0 .297.3 0 .767 0s.775.297.775.783v6.5c0 1.714 1.1 2.86 2.954 2.86 1.873 0 2.962-1.145 2.962-2.86v-6.5c0-.486.3-.783.767-.783S9 .297 9 .783v6.642zm0 6.08a.48.48 0 0 1-.492.494H.484A.48.48 0 0 1 0 13.506a.48.48 0 0 1 .484-.486h8.023a.48.48 0 0 1 .492.486z"/></svg>'},i.textLeftAlignment=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="17" height="14" fill="#47474F" fill-rule="nonzero"><path d="M.75 1.75h8a.75.75 0 1 0 0-1.5h-8a.75.75 0 1 0 0 1.5zm0 8h11a.75.75 0 1 0 0-1.5h-11a.75.75 0 1 0 0 1.5z"/><path d="M.75 5.75h15a.75.75 0 1 0 0-1.5h-15a.75.75 0 1 0 0 1.5zm0 8h15a.75.75 0 1 0 0-1.5h-15a.75.75 0 1 0 0 1.5z"/></svg>'},i.textCenterAlignment=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="17" height="14" fill="#47474F" fill-rule="nonzero"><path d="M4.75 12.5h8a.75.75 0 1 1 0 1.5h-8a.75.75 0 1 1 0-1.5zm-2-8h11a.75.75 0 1 1 0 1.5h-11a.75.75 0 1 1 0-1.5zm-2 4h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 1 1 0-1.5zm0-8h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 1 1 0-1.5z"/></svg>'},i.textRightAlignment=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="17" height="14" fill="#47474F" fill-rule="nonzero"><path d="M16.25 1.75h-8a.75.75 0 1 1 0-1.5h8a.75.75 0 1 1 0 1.5zm0 8h-11a.75.75 0 1 1 0-1.5h11a.75.75 0 1 1 0 1.5zm0-4h-15a.75.75 0 1 1 0-1.5h15a.75.75 0 1 1 0 1.5zm0 8h-15a.75.75 0 1 1 0-1.5h15a.75.75 0 1 1 0 1.5z"/></svg>'},i.textJustifytAlignment=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="17" height="15" fill="#707078" xmlns:v="https://vecta.io/nano"><path d="M15.75 2.248h-15a.75.75 0 1 1 0-1.5h15a.75.75 0 1 1 0 1.5zm0 4.004h-15a.75.75 0 1 1 0-1.5h15a.75.75 0 1 1 0 1.5zm0 8h-15a.75.75 0 1 1 0-1.5h15a.75.75 0 1 1 0 1.5zm0-4.004h-15a.75.75 0 0 1 0-1.5h15a.75.75 0 0 1 0 1.5z"/></svg>'},i.textFillColor=function(){return'<svg class="color-palette-icon" xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19"> <g class="color-palette--main-icon"> <path fill="rgb(64,70,79)" fill-rule="evenodd" d="M14.7088623 10.75384521C14.5147705 10.9179535 14.2918396 11 14.04006958 11c-.1678772 0-.32522583-.04359436-.47210693-.13076782-.1468811-.08718872-.26229859-.2230835-.34622193-.40769959l-.94421386-2.0615387H6.7381897l-.94418335 2.0615387c-.08395386.1846161-.19934082.32051087-.34622193.40769959C5.30090332 10.95640564 5.13830566 11 4.95993042 11c-.24127197 0-.46160889-.0820465-.66091919-.24615479C4.09967041 10.58973694 4 10.38974 4 10.15383911c0-.1333313.03146362-.2666626.09442139-.3999939L8.43777466.63076782q.14163208-.30768585.43276977-.46923065C9.06460571.05384827 9.27182007 0 9.49212646 0c.2203064 0 .42752076.05384827.62161255.16153717q.2911377.1615448.43276978.46923065l4.35906982 9.1230774c.06295777.1333313.09442139.2666626.09442139.3999939 0 .23590087-.0970459.43589782-.2911377.6000061zM7.43060303 6.86154175h4.1545105L9.50784302 2.29230499l-2.07724 4.56923676z"/> </g> <g class="color-palette color-palette--default"> <rect width="19" height="4" x="0" y="15" fill="rgb(76,175,80)" rx="0" ry="0"/> </g> <g class="color-palette color-palette--transparent"> <path fill="rgb(56,62,69)" fill-rule="evenodd" d="M19 19v-4H0v4h19zM1 16h17v2H1v-2z"/> <rect width="2" height="2" x="3" y="16" fill="rgb(193,194,199)" rx="0" ry="0"/> <rect width="2" height="2" x="7" y="16" fill="rgb(193,194,199)" rx="0" ry="0"/> <rect width="2" height="2" x="11" y="16" fill="rgb(193,194,199)" rx="0" ry="0"/> <rect width="2" height="2" x="15" y="16" fill="rgb(193,194,199)" rx="0" ry="0"/> </g> <g class="color-palette color-palette--white"> <path fill="rgb(56,62,69)" fill-rule="evenodd" d="M19 19v-4H0v4h19zM1 16h17v2H1v-2z"/> </g> </svg>'},i.textBackgroundColor=function(){return'<svg class="color-palette-icon" xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19"> <g class="color-palette--main-icon"> <path fill="rgb(56,62,69)" fill-rule="evenodd" d="M12.79379272 6.31059265L6.3380127 0 5.31982422.99529266l1.71862793 1.6800003-3.71890259 3.6352997c-.4260559.41647338-.4260559 1.08705138 0 1.49645995l3.97164917 3.88235474C7.50061035 11.89411926 7.78225708 12 8.05667114 12c.27438355 0 .55603028-.10588074.7654419-.31059265l3.97167968-3.88235474c.4260254-.40940857.4260254-1.07998657 0-1.49645996zm-8.19610595.74822998l3.45895385-3.38117218L11.515625 7.05882263H4.59768677zM14.55575562 12c-.79434205 0-1.44424439-.63528442-1.44424439-1.41175842 0-.93882752.72210693-1.23529053 1.44424439-2.47058106 0 0 1.44424438 1.53175354 1.44424438 2.47058106C16 11.36471558 15.35009766 12 14.55575562 12z"/> </g> <g class="color-palette color-palette--default"> <rect width="19" height="4" x="0" y="15" fill="rgb(76,175,80)" rx="0" ry="0"/> </g> <g class="color-palette color-palette--transparent"> <path fill="rgb(56,62,69)" fill-rule="evenodd" d="M19 19v-4H0v4h19zM1 16h17v2H1v-2z"/> <rect width="2" height="2" x="3" y="16" fill="rgb(193,194,199)" rx="0" ry="0"/> <rect width="2" height="2" x="7" y="16" fill="rgb(193,194,199)" rx="0" ry="0"/> <rect width="2" height="2" x="11" y="16" fill="rgb(193,194,199)" rx="0" ry="0"/> <rect width="2" height="2" x="15" y="16" fill="rgb(193,194,199)" rx="0" ry="0"/> </g> <g class="color-palette color-palette--white"> <path fill="rgb(56,62,69)" fill-rule="evenodd" d="M19 19v-4H0v4h19zM1 16h17v2H1v-2z"/> </g> </svg>'},i.unfoldArrow=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="4"><path d="M5.736 0c.062 0 .122.02.17.058a.24.24 0 0 1 .034.351l-2.736 3.1c-.01.012-.022.022-.034.032-.112.088-.278.074-.372-.032L.06.41A.24.24 0 0 1 0 .249C0 .112.118 0 .264 0h5.472z" fill="#47474F" fill-rule="evenodd"/></svg>'},i.transparentColorSample=function(){return' <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"> <image id="image0" width="16" height="16" x="0" y="0" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAIAAADAAbR1AAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0T///////8JWPfcAAAA CXBIWXMAAABgAAAAYADwa0LPAAAAB3RJTUUH5AMXCjQcadPMrAAABXVJREFUOMtlkXtQlXUexp/f 7z33l7tA3KQCM4zUxCkNL4M3JM0xUnc31h3HtWwNslSgZBwNYk3FHPGSldlFmRppuuxus221Y94Q TBwL01lvoHA4KHCunPMe3/e8v9+3P9p/mp4/n3nm88fnYf7jgWPBpu5Puvfe6glvDO+O1DHBNDZg XWKdYfGyQjae2WCBBQqV01NYYy40K8yP5SH5qeyCChUuyy7LRmWm8jPvVLazsXwMS3N1uQqcG3Jb Rzdlr7P8itbCkb9oU1CMYsx3nnJud14tSHxwUv4Z1z7XV66lLI/lIVd/Rd9rfN6T1HO0t25wztD3 w3lYiRV4Jud69qys9ZkXM0fuyeDD/BSvG/pyeJ+3vvepvsL+YUu4LtwcqcMMzMBCKqEyWoY7uE3r eCZ38ZM8idvYTfjgBpRcJYXfQT3jqKW7tIXCmI4Stojls1NskbJcKedj+Dn+Exdpc1OHUup71/am uxssLML87KZzi7PU8RZuoQd9jhzHFEelOCEeEHXGW8auWBEykI40c565w1xj/auVrKPiitVl6hH4 2Fzs4M/yk/yqETYyYpf5Jl7LR0u3vC49skG+RkmsPaeDdbYUvvxQc0E1n8zzuRTnxEQxKbAiVBAK avnhOZF26sF13LQn2P9hb03uTv5nYqV9wHavPQvX0Ed92p1obXSPf4l/arBX/NF8THxLz9KLtMFX 50v3z7OwR9ljLFm1qA7nV7yEL+CTjR3GbMOvve6Zq6XcKRqMDVdSPG7gRGJXQk38yrS3U5WUY673 XOscQcwCgMjkyLvaOe8C7x/8fr1CF/pOtpFNYLVowQfI5/h9TJgQ9AX+Rd9QMU2nMjxO02g+tlET 9kJDFPpv9j54EcBztJpepmk0k56geVRGSzCEYXjZGXf72c7Kh1rHtY89zLN5AvMIpyiUi0Ploe9H zkXqtUbta9ykW+izX7NfsyUmHkgqTQjb4q0dts1www1P9KOoPdoQPBQ8H3rS/FB8KKxYTWuwzhvw /cm/mZ2acDr/bLK6Tx3vqkUy4pDgeMFeaT+efSRnfWa+s9qR4DiCLGQhI3Y3Nj1Wc/vK7YcHE4Nq 0DWyEnPYHMxIfzp9ceqSUaGU15MnKs8r85RC8b5oFZd/vPrTsUvlFvmqbJSHQtbQuJEpKMJsLBZ/ V6Nim6VRyVNs1k+tLZY3/q+iANkU0Wfr/zP+E+wIlYcqEIc9WJE6f1Rbym5bmm2hVePtvIsLpVk5 yM+zE+wwdnIISEjchgc+GqB+eDGEQQQgICF+45oDIIwggAA8cGMAHvRjABGEEACBIH9/KGt75Ezu D5dzbmSXZF5k97MMBr6ab+Wldq9DtR+g87KEeqEgBoGj7CUWNl81W8wM8+1YxPwRiUhGgj3k6LId 5CH+rbIYF/AOtdKf5UpqvO68UdbzHOuwdgyeryq6WDQy4azyjfIZrzaihi22p2+R+zNPoVfzLvNf Qgfa0Rk3Pe4+9YHcztEV2bH4tXEPqxPpNNrwgzfZV+3X3R+5J3nKjHij0NiP0chmWcYV45LxvIU9 yMewHO7m37G9fC2v4eCLeCl7QrSYU8UEvUInvQnfQcMJ+9/sDtuT7CDbAcY0fpiVMmAagFkk6Rnj pL7cUO+e1m26j+1nzWw5l1zyW9x1xjXWuX4oafi/vnFCSFVOlVelhxJpFVXRBtbANrMabEU9NqID F3BBjpFFtJSaaD99QQtoKVXLetlMRzEO4zGWvcl2si08lY/i/WqmmuRcywJXgsdDVX1ZfY/079Jm agXRfbJKvkCNosqsMdtEi/xadkOHDp1v45v4KuXfysdKBd/Gt7NVv/ayRRyR3WaVaBBtVEOb6LX4 ufHF6oG83fd33qv+As0MnUmlZj2XAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTAzLTIzVDEwOjUy OjI4KzAwOjAwy1kQfQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wMy0yM1QxMDo1MjoyOCswMDow MLoEqMEAAAAASUVORK5CYII=" /> </svg> '},i.recycleBin=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="18"><path fill="#40464f" fill-rule="evenodd" d="M11.87 18c1.05 0 1.683-.57 1.727-1.626l.53-11.902h1.223c.356 0 .65-.294.65-.65 0-.363-.295-.657-.65-.657h-3.714V1.98C11.636.778 10.82 0 9.5 0H6.482C5.18 0 4.364.778 4.364 1.98v1.185H.65c-.356 0-.65.294-.65.657 0 .355.295.65.65.65h1.232l.53 11.902C2.456 17.43 3.08 18 4.14 18h7.73zM10.256 3.166H5.753V2.06c0-.458.338-.787.833-.787h2.83c.495 0 .842.33.842.787v1.107zM4.564 15.128c.01.355.234.614.538.614.32 0 .555-.285.547-.623l-.33-8.892c-.017-.33-.27-.605-.564-.605-.312 0-.555.26-.547.614l.356 8.892zM8 15.742c-.304 0-.564-.285-.564-.623V6.228c0-.33.26-.605.564-.605s.573.277.573.605l-.01 8.892c0 .337-.26.623-.564.623zm2.36-.623c-.01.337.217.623.538.623.312 0 .53-.26.538-.614l.364-8.892c.01-.346-.243-.614-.555-.614-.295 0-.547.277-.555.605l-.33 8.892z"/></svg>'},i.opacityCheckerboard=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><g fill="#c1c2c7"><path d="M5.333 5.333h5.333v5.333H5.333z"/><path d="M1 0h4.333v5.333H0V1a1 1 0 0 1 1-1zM0 10.667h4.333a1 1 0 0 1 1 1V16H0v-5.333zM10.667 0H16v5.333h-4.333a1 1 0 0 1-1-1V0zm0 10.667H16V15a1 1 0 0 1-1 1h-4.333v-5.333z" fill-rule="evenodd"/></g><path fill="#47474F" fill-rule="evenodd" d="M0 15.2V.8A.8.8 0 0 1 .8 0h14.4a.8.8 0 0 1 .8.8v14.4a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1-.8-.8zM.8.8v14.4h14.4V.8H.8z"/></svg>'},i.strokeWidth=function(){return'<svg xmlns="http://www.w3.org/2000/svg" height="13" width="21" fill="#47474F"><path d="M0 0h21v1H0zm0 4h21v2H0zm0 5h21v4H0z"/></svg>'},i.shapeRect=function(){return'<svg xmlns="http://www.w3.org/2000/svg" height="16" width="20"><path fill="#707078" fill-rule="evenodd" d="M20 16V0H0v16h20zM1 1h18v14H1V1z"/></svg>'},i.shapeLine=function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="16" width="20"><path fill="#707078" id="A" opacity="1" fill-rule="evenodd" d="M.92 15.878L19.788.994c.244-.193.284-.544.088-.784a.57.57 0 0 0-.796-.087L.212 15.006c-.244.193-.284.544-.088.784a.57.57 0 0 0 .796.087z"/></svg>'},i.shapeEllipse=function(){return'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path fill="#707078" fill-rule="evenodd" d="M0 10C0 4.477 4.477 0 10 0s10 4.477 10 10-4.477 10-10 10S0 15.523 0 10zm19 0a9 9 0 1 0-18 0 9 9 0 1 0 18 0z"/></svg>'},i.symbols=function(){return'\n      <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="icons_and_shapes-copy-2" transform="translate(-302.000000, -1092.000000)" fill="#707078">\n                  <g id="smile-grey" transform="translate(302.000000, 1092.000000)">\n                      <path d="M10,0 C15.5228475,0 20,4.4771525 20,10 C20,15.5228475 15.5228475,20 10,20 C4.4771525,20 0,15.5228475 0,10 C0,4.4771525 4.4771525,0 10,0 Z M10,1 C5.02943725,1 1,5.02943725 1,10 C1,14.9705627 5.02943725,19 10,19 C14.9705627,19 19,14.9705627 19,10 C19,5.02943725 14.9705627,1 10,1 Z" id="Oval-Copy-33" fill-rule="nonzero"></path>\n                      <circle id="Oval-Copy-34" cx="6.39175258" cy="8.04123711" r="1"></circle>\n                      <circle id="Oval-Copy-35" cx="13.814433" cy="8.04123711" r="1"></circle>\n                      <path d="M13.814433,11.2448454 C13.5340204,11.2448454 13.306701,11.4721647 13.306701,11.7525773 C13.306701,13.2839348 11.8801334,14.5438144 10.1030928,14.5438144 C8.32605221,14.5438144 6.89948454,13.2839348 6.89948454,11.7525773 C6.89948454,11.4721647 6.6721652,11.2448454 6.39175258,11.2448454 C6.11133996,11.2448454 5.88402062,11.4721647 5.88402062,11.7525773 C5.88402062,13.8643462 7.78019892,15.5592784 10.1030928,15.5592784 C12.4259866,15.5592784 14.3221649,13.8643462 14.3221649,11.7525773 C14.3221649,11.4721647 14.0948456,11.2448454 13.814433,11.2448454 Z" id="Path" fill-rule="nonzero"></path>\n                  </g>\n              </g>\n          </g>\n      </svg>'},i.check=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="9" height="7"><path d="M7.42.49a.72.72 0 0 1 1.094.929l-.076.09L3.4 6.55a.72.72 0 0 1-1.13-.144L.496 4.664a.72.72 0 0 1 .918-1.103l.1.075 1.4 1.37L7.42.49z" fill="#fff" fill-rule="nonzero"/></svg>'},i.freehandCheck=function(){return'<svg style=\'transform: scale(1.6)\' xmlns="http://www.w3.org/2000/svg" width="9" height="7"><path d="M7.42.49a.72.72 0 0 1 1.094.929l-.076.09L3.4 6.55a.72.72 0 0 1-1.13-.144L.496 4.664a.72.72 0 0 1 .918-1.103l.1.075 1.4 1.37L7.42.49z" fill="#4acd86" fill-rule="nonzero"/></svg>'},i.layersPanelRightArrow=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill-rule="evenodd"><path d="M8.572 11.907c2.246 0 4.07-1.94 4.07-4.324 0-.57-.102-1.124-.3-1.622-.102-.26-.027-.555.156-.75.346-.368.93-.238 1.113.245A5.95 5.95 0 0 1 14 7.583c0 3.186-2.43 5.766-5.428 5.766v1.3c0 .324-.366.483-.577.252l-1.893-2.01c-.136-.144-.136-.368 0-.512l1.893-2.01c.2-.223.577-.065.577.26v1.3z" fill="#707078"/></svg>'},i.layersPanelPencil=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="11.37" height="11.37" fill="#707078" fill-rule="evenodd"><path d="M0 9.002v2.368h2.368l6.985-6.985-2.368-2.368L0 9.002zm11.185-6.45a.63.63 0 0 0 0-.891L9.707.185a.63.63 0 0 0-.891 0L7.66 1.34l2.37 2.37 1.156-1.156z"/></svg>'},i.layersPanelTrash=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="11" height="12"><path fill="#707078" fill-rule="evenodd" d="M8.16 12c.722 0 1.157-.38 1.187-1.084l.364-7.935h.84c.245 0 .447-.196.447-.432 0-.242-.203-.438-.447-.438H8v-.8C8 .52 7.44 0 6.538 0H4.456C3.56 0 3 .52 3 1.32v.8H.447C.203 2.11 0 2.307 0 2.55c0 .236.203.432.447.432h.847l.364 7.935c.03.704.46 1.084 1.187 1.084H8.16zm-1.1-9.89H3.955v-.738c0-.306.233-.525.573-.525h1.945c.34 0 .58.22.58.525v.738zm-3.913 7.975c.006.236.16.41.37.41.22 0 .382-.2.376-.415l-.227-5.928c-.012-.22-.185-.404-.388-.404-.215 0-.382.173-.376.41l.245 5.928zm2.362.41c-.21 0-.388-.2-.388-.415V4.152c0-.22.18-.404.388-.404s.394.185.394.404l-.006 5.928c0 .225-.18.415-.388.415zm1.623-.415c-.006.225.15.415.37.415.215 0 .364-.173.37-.41l.25-5.928c.006-.23-.167-.41-.382-.41-.203 0-.376.185-.382.404l-.227 5.928z"/></svg>'},i.layersIcoDragSm=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="7.111" height="15.158" fill="#47474F"><path d="M3.204 15.006L.146 11.83a.53.53 0 0 1 0-.732c.194-.202.5-.202.704 0l2.705 2.8 2.705-2.8c.195-.202.5-.202.704 0a.53.53 0 0 1 0 .732l-3.058 3.176a.49.49 0 0 1-.704 0zM3.908.15l3.058 3.176a.53.53 0 0 1 0 .732c-.194.202-.5.202-.704 0l-2.705-2.8L.85 4.06c-.195.202-.5.202-.704 0a.53.53 0 0 1 0-.732L3.203.15A.49.49 0 0 1 3.555 0a.49.49 0 0 1 .352.15z" fill-rule="evenodd"/><ellipse cx="3.625" cy="7.645" rx="1.847" ry="1.75"/></svg>'},i.layerThumbnailShape=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="26.568" height="24.703" fill="#707078"><path fill-rule="evenodd" d="M14.612 3.89h11.513c.244 0 .443.198.443.443v11.513c0 .244-.198.443-.443.443h-4.557a7.06 7.06 0 0 1 .129 1.328c0 3.906-3.178 7.085-7.085 7.085s-7.085-3.178-7.085-7.085a7.1 7.1 0 0 1 .129-1.328H.443c-.158 0-.305-.085-.384-.222s-.08-.306 0-.443L8.998.222c.08-.136.225-.22.383-.22.166-.017.305.085.384.223l4.404 7.707V4.334c0-.244.198-.443.443-.443zm-5.234-2.56L1.21 15.404h6.675c.1-.3.22-.59.36-.873l.072-.15c.06-.114.122-.225.186-.335.038-.064.076-.128.116-.2.066-.104.132-.207.203-.308.043-.06.088-.117.132-.175a7.05 7.05 0 0 1 .455-.546l.12-.13c.087-.1.18-.175.27-.26l.158-.144c.095-.084.192-.165.292-.243.05-.04.1-.075.15-.113a7.08 7.08 0 0 1 1.097-.671l.194-.094a6.72 6.72 0 0 1 .333-.141c.083-.033.167-.062.252-.092.103-.036.205-.074.3-.105.18-.054.362-.1.546-.14.073-.015.148-.027.222-.04a7.12 7.12 0 0 1 .426-.065c.074-.01.147-.016.22-.023.057-.005.112-.014.17-.017v-.83L9.378 1.332zm11.96 14.072l4.345.001c-.244 0-.443-.198-.443-.443s.198-.443.443-.443v-1.77c-.244 0-.443-.198-.443-.443s.198-.443.443-.443v-1.77c-.244 0-.443-.198-.443-.443s.198-.443.443-.443v-1.77c-.244 0-.443-.198-.443-.443s.198-.443.443-.443v-1.77H15.056v1.77c.244 0 .443.198.443.443s-.198.443-.443.443v1.77c.244 0 .443.198.443.443s-.198.443-.443.443v.457c.057.004.112.012.17.017l.22.023a6.86 6.86 0 0 1 .427.065c.062.01.124.017.185.03.08-.1.196-.15.326-.15.213 0 .382.153.425.352.048.016.094.035.142.052l.252.092c.112.044.223.09.333.14.065.03.13.062.194.093.387.19.754.415 1.098.67l.15.113c.1.078.197.16.292.243.053.047.106.095.158.144a7.14 7.14 0 0 1 .271.261c.04.042.08.087.12.13.16.174.31.356.454.545l.132.177a7.19 7.19 0 0 1 .202.307c.04.063.078.126.116.2a7.17 7.17 0 0 1 .186.335c.025.05.048.1.072.15a7.05 7.05 0 0 1 .359.873zm-6.726 8.413a6.21 6.21 0 0 1-6.199-6.199c0-.577.085-1.132.233-1.662a6.26 6.26 0 0 1 .141-.438l.03-.085c.05-.135.106-.27.167-.4.015-.032.03-.063.046-.094.062-.13.127-.257.197-.38.008-.015.018-.03.027-.043a6.2 6.2 0 0 1 .816-1.102c.024-.026.047-.053.072-.08.1-.094.184-.183.28-.27l.105-.096c.097-.085.196-.167.297-.246.035-.027.072-.054.108-.08.107-.08.216-.157.328-.23.02-.014.043-.026.064-.04a6.21 6.21 0 0 1 1.155-.567c.06-.022.12-.046.18-.066.1-.033.2-.062.3-.09a6.19 6.19 0 0 1 .256-.066c.09-.02.18-.04.27-.057a6.43 6.43 0 0 1 .335-.051c.073-.01.145-.02.218-.027a6.18 6.18 0 0 1 .576-.029 6.18 6.18 0 0 1 .576.029c.073.007.145.018.218.027a6.43 6.43 0 0 1 .335.051c.1.017.18.036.27.057s.17.043.256.066a6.72 6.72 0 0 1 .3.089c.06.02.12.044.18.066.405.15.792.34 1.155.567.02.013.043.025.064.04.112.073.22.15.328.23l.108.08c.1.08.2.16.297.246l.105.096a6.23 6.23 0 0 1 .28.271c.025.026.048.053.072.08.31.334.584.703.816 1.102.008.015.018.03.027.043.07.124.135.25.198.38l.046.094c.06.13.115.263.167.4l.03.085a6.26 6.26 0 0 1 .141.438 6.24 6.24 0 0 1 .231 1.662 6.21 6.21 0 0 1-6.199 6.199z"/><circle cx="17.712" cy="6.991" r=".443"/><circle cx="16.384" cy="5.663" r=".443"/><circle cx="17.712" cy="9.648" r=".443"/><circle cx="23.026" cy="9.648" r=".443"/><circle cx="16.384" cy="8.319" r=".443"/><circle cx="19.04" cy="5.663" r=".443"/><circle cx="20.369" cy="6.991" r=".443"/><circle cx="23.026" cy="6.991" r=".443"/><circle cx="21.697" cy="5.663" r=".443"/><circle cx="19.04" cy="8.319" r=".443"/><circle cx="20.369" cy="9.648" r=".443"/><circle cx="21.697" cy="8.319" r=".443"/><circle cx="24.354" cy="5.663" r=".443"/><circle cx="24.354" cy="8.319" r=".443"/><circle cx="23.026" cy="14.961" r=".443"/><circle cx="19.04" cy="10.976" r=".443"/><circle cx="20.369" cy="12.305" r=".443"/><circle cx="23.026" cy="12.305" r=".443"/><circle cx="21.697" cy="10.976" r=".443"/><circle cx="21.697" cy="13.633" r=".443"/><circle cx="24.354" cy="10.976" r=".443"/><circle cx="24.354" cy="13.633" r=".443"/></svg>'},i.layerThumbnailText=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#707078" fill-rule="nonzero"><path d="M19.45 20c.147 0 .275-.045.385-.136a.42.42 0 0 0 .165-.336.48.48 0 0 0-.055-.218h0l-5.33-11.9c-.05-.12-.13-.218-.247-.3S14.125 7 14 7a.6.6 0 0 0-.605.399h0L8.037 19.3a.45.45 0 0 0-.037.2c0 .145.052.263.156.354a.55.55 0 0 0 .376.136c.232 0 .403-.115.513-.345h0l1.4-3.16h7.108l1.392 3.16a.58.58 0 0 0 .211.254.51.51 0 0 0 .284.091zm-2.327-4.485h-6.247L14 8.5l3.115 7.027zM2.32 4.5H1.5v2.46h.82V4.5zm0 3.28H1.5v2.46h.82V7.78zm0 3.28H1.5v2.46h.82v-2.46zm0 3.28H1.5v2.46h.82v-2.46zm0 3.28H1.5v2.46h.82v-2.46zm0 3.28H1.5v2.46h.82V20.9zm24-16.4h-.82v2.46h.82V4.5zm0 3.28h-.82v2.46h.82V7.78zm0 3.28h-.82v2.46h.82v-2.46zm0 3.28h-.82v2.46h.82v-2.46zm0 3.28h-.82v2.46h.82v-2.46zm0 3.28h-.82v2.46h.82V20.9zM4 0H0v4h4V0zm-.8.8v2.4H.8V.8h2.4zM4 24H0v4h4v-4zm-.8.8v2.4H.8v-2.4h2.4zM28 0h-4v4h4V0zm-.8.8v2.4h-2.4V.8h2.4zM28 24h-4v4h4v-4zm-.8.8v2.4h-2.4v-2.4h2.4zm-22.7.7v.82h2.46v-.82H4.5zm3.28 0v.82h2.46v-.82H7.78zm3.28 0v.82h2.46v-.82h-2.46zm3.28 0v.82h2.46v-.82h-2.46zm3.28 0v.82h2.46v-.82h-2.46zm3.28 0v.82h2.46v-.82H20.9zM4.5 1.5v.82h2.46V1.5H4.5zm3.28 0v.82h2.46V1.5H7.78zm3.28 0v.82h2.46V1.5h-2.46zm3.28 0v.82h2.46V1.5h-2.46zm3.28 0v.82h2.46V1.5h-2.46zm3.28 0v.82h2.46V1.5H20.9z"/></svg>'},i.layerThumbnailImage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path d="M25.2 0A2.8 2.8 0 0 1 28 2.8v22.4a2.8 2.8 0 0 1-2.8 2.8H2.8A2.8 2.8 0 0 1 0 25.2V2.8A2.8 2.8 0 0 1 2.8 0h22.4zm-5.313 10.347l-6.553 6.688 4.362 5.09a.56.56 0 0 1 .01.717l-.07.072a.56.56 0 0 1-.79-.061h0l-6.806-7.94-8.92 9.524v.763a1.68 1.68 0 0 0 1.68 1.68h22.4a1.68 1.68 0 0 0 1.68-1.68v-6.74l-6.993-8.113zM25.2 1.12H2.8A1.68 1.68 0 0 0 1.12 2.8v19.998l8.957-9.563 2.526 2.946 7.338-7.488 6.94 8.05V2.8a1.68 1.68 0 0 0-1.68-1.68zM7.28 4.48a2.8 2.8 0 0 1 0 5.6 2.8 2.8 0 0 1 0-5.6zm0 1.12a1.68 1.68 0 0 0 0 3.36 1.68 1.68 0 1 0 0-3.36z" fill="#707078" fill-rule="nonzero"/></svg>'},i.pageLayoutSinglePage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="18"><path fill="#47474F" fill-rule="evenodd" d="M10.613.163l3.23 3.375c.1.106.157.25.156.4v12.375c0 .932-.723 1.688-1.615 1.688H1.615C.723 18 0 17.244 0 16.312V1.688C0 .756.723 0 1.615 0h8.615c.143-.001.28.058.382.163zm1.772 16.712c.297 0 .538-.252.538-.562V4.5H10.77c-.595 0-1.077-.504-1.077-1.125v-2.25H1.615c-.297 0-.538.252-.538.563v14.625c0 .31.24.563.538.563h10.77z"/></svg>'},i.pageLayoutDoublePage=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="18" fill="#707078" fill-rule="evenodd"><path d="M26.613.163l3.23 3.375a.58.58 0 0 1 .156.4v12.375c0 .932-.723 1.688-1.615 1.688h-10.77C16.723 18 16 17.244 16 16.312V1.688C16 .756 16.723 0 17.615 0h8.615c.143-.001.28.058.382.163zm1.772 16.712c.297 0 .538-.252.538-.562V4.5H26.77c-.595 0-1.077-.504-1.077-1.125v-2.25h-8.077c-.297 0-.538.252-.538.563v14.625c0 .3.24.563.538.563h10.77zM10.613.163l3.23 3.375a.58.58 0 0 1 .156.4v12.375c0 .932-.723 1.688-1.615 1.688H1.615C.723 18 0 17.244 0 16.312V1.688C0 .756.723 0 1.615 0h8.615c.143-.001.28.058.382.163zm1.772 16.712c.297 0 .538-.252.538-.562V4.5H10.77c-.595 0-1.077-.504-1.077-1.125v-2.25H1.615c-.297 0-.538.252-.538.563v14.625c0 .3.24.563.538.563h10.77z"/></svg>'},i.pageLayoutCoverPage=function(){return'<svg class="layout-page-ico-black" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="18" viewBox="0 0 14 18"> <defs> <path id="path-1" fill-rule="evenodd" d="M.00001802 1.6875161c0-.8829391.64909514-1.60749046 1.47599952-1.6813132l.13938297-.00619411L12.38462642 0C13.27678871 0 14 .75552483 14 1.6875161v14.62498557c0 .8829391-.64908714 1.6074824-1.47599068 1.6813043l-.13939221.00620282L1.61540982 18C.72324753 18 0 17.24449293 0 16.31250167L.00001802 1.6875161z"/> <mask id="mask-2" x="0" y="0" maskContentUnits="userSpaceOnUse" maskUnits="userSpaceOnUse"> <rect width="14" height="18" x="0" y="0" fill="black"/> <use fill="white" xlink:href="#path-1"/> </mask> </defs> <g> <use fill="rgb(56,62,69)" xlink:href="#path-1"/> <use fill-opacity="0" stroke="rgb(56,62,69)" stroke-linecap="butt" stroke-linejoin="miter" stroke-width="2" mask="url(#mask-2)" xlink:href="#path-1"/> </g> </svg><svg class="layout-page-ico-white" xmlns="http://www.w3.org/2000/svg" width="14" height="18" viewBox="0 0 14 18"> <path fill="rgb(56,62,69)" fill-rule="evenodd" d="M10.6130371.16313171l3.23077394 3.375c.10083007.10617066.15698242.24984742.15618896.39936829v12.37498474c0 .93200684-.7232666 1.6875-1.61541748 1.6875H1.61535645C.72320557 17.99998474 0 17.24449158 0 16.31248474V1.6875C0 .75550842.72320557.00001526 1.61535645.00001526h8.61541748c.14312744-.0008545.28070068.0578308.38226318.16311645zm1.77154542 16.71185303c.29742432 0 .53845215-.25183105.53845215-.5625V4.5h-2.1538086c-.5947876 0-1.07696533-.50369263-1.07696533-1.125v-2.25h-8.0769043c-.29736328 0-.53845214.25183105-.53845214.5625v14.62498474c0 .31066895.24108886.5625.53845215.5625h10.76922607z"/> </svg>'},i.rotateLeft=function(){return'<svg xmlns="http://www.w3.org/2000/svg" height="17.311" width="15.711"><path fill="#47474F" fill-rule="evenodd" d="M8.71 1.004v.66a7.99 7.99 0 0 1 7 7.93c0 3.64-2.43 6.7-5.77 7.67-.62.18-1.23-.3-1.23-.96v-.02c0-.43.27-.82.68-.94 2.5-.73 4.32-3.02 4.32-5.75 0-2.97-2.16-5.43-5-5.9v1.53c0 .9-1.07 1.34-1.7.72l-2.13-2.08c-.4-.4-.4-1.03 0-1.43L7 .294c.63-.63 1.7-.18 1.7.7zm-8 4.76c.3-.57 1.1-.65 1.56-.2.3.3.38.78.16 1.15q-.3.57-.48 1.17c-.12.42-.5.7-.94.7H1c-.65 0-1.15-.62-.96-1.25a8.42 8.42 0 0 1 .67-1.58zm-.67 6.08c-.2-.63.3-1.25.96-1.25h.02a.97.97 0 0 1 .94.72 6.17 6.17 0 0 0 .48 1.16c.2.38.13.84-.17 1.15-.46.46-1.26.37-1.57-.2-.28-.5-.5-1.04-.66-1.58zm3.83 4.77a7.85 7.85 0 0 0 1.59.66c.62.18 1.24-.32 1.24-.96v-.03c0-.43-.28-.82-.7-.94a6.08 6.08 0 0 1-1.15-.48.97.97 0 0 0-1.16.17l-.03.03c-.45.45-.36 1.24.2 1.55z"/></svg>'},i.rotateRight=function(){return'<svg xmlns="http://www.w3.org/2000/svg" height="17.307" width="15.711"><path fill="#47474F" fill-rule="evenodd" d="M8.7.3l2.13 2.13a.99.99 0 0 1 0 1.42L8.7 5.92A1 1 0 0 1 7 5.21V3.68c-2.84.48-5 2.94-5 5.9a5.98 5.98 0 0 0 4.32 5.75c.4.12.68.5.68.94v.03c0 .64-.6 1.14-1.23.96C2.43 16.3 0 13.23 0 9.6a8 8 0 0 1 7-7.93V1C7 .1 8.08-.33 8.7.3zM15 5.76q.42.765.66 1.6c.2.62-.3 1.24-.96 1.24h-.02c-.43 0-.82-.28-.94-.7a6.17 6.17 0 0 0-.48-1.16.97.97 0 0 1 .17-1.16l.01-.01c.46-.46 1.25-.37 1.56.2zM15 13.42c-.3.57-1.1.66-1.56.2-.3-.3-.38-.78-.17-1.16a6.55 6.55 0 0 0 .48-1.17c.12-.42.5-.7.94-.7h.02c.65 0 1.14.62.96 1.24a8.51 8.51 0 0 1-.67 1.59zM9 16.3c0 .65.62 1.14 1.24.96a7.85 7.85 0 0 0 1.59-.66c.57-.3.66-1.1.2-1.56L12 15a.97.97 0 0 0-1.16-.17c-.37.2-.76.37-1.16.5-.4.12-.7.5-.7.94v.02z"/></svg>'},i.formCheckboxCheckmark=function(){return'<svg width="25px" height="25px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g id="user-registration" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g id="Edit---form---styles" transform="translate(-143.000000, -42.000000)">\n              <g id="Icons---Desktop/form-icon/checkbox_checked-Copy-3" transform="translate(143.000000, 42.000000)">\n                  <path d="M18.7954951,7.70450487 C19.2034535,8.11246328 19.2325934,8.75578935 18.8829148,9.19737171 L18.7954951,9.29549513 L11.7954951,16.2954951 C11.3561553,16.734835 10.6438447,16.734835 10.2045049,16.2954951 C10.1392203,16.2302106 10.0836368,16.1588985 10.0377545,16.0833504 L6.34711789,12.3922415 C5.90777806,11.9529017 5.90777806,11.240591 6.34711788,10.8012512 C6.7550763,10.3932928 7.39840236,10.3641529 7.83998473,10.7138316 L7.93810814,10.8012512 L11.023,13.886 L17.2045049,7.70450487 C17.6438447,7.26516504 18.3561553,7.26516504 18.7954951,7.70450487 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero"></path>\n              </g>\n          </g>\n      </g>\n    </svg>'},e.IconRepository=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TOOL=void 0,(e=e.TOOL||(e.TOOL={})).Pan="Pan",e.ContentEdit="ContentEdit",e.Default="ContentEdit"},,,,,function(t,e,n){"use strict";function s(n){return new Promise(function(e,t){try{e({exception:null,failedReason:null,result:n(),success:!0})}catch(t){e({exception:t,failedReason:"exception",result:null,success:!1})}})}Object.defineProperty(e,"__esModule",{value:!0}),e.Timer=e.FL_Capitalize=e.FL_Lowercase=e.safeExec=e.execTimeout=e.findObjectWithProps=e.queryObjectProp=void 0,e.queryObjectProp=function(t,e,n){if(!(n&&!0===(null==n?void 0:n.ownPropertiesOnly)))throw new Error("Not implemented");for(var i=Object.getOwnPropertyNames(t),o=null,r=null,a=0;a<i.length;a++){var s=i[a];if("object"==typeof t[s])if(Object.getOwnPropertyNames(t[s]).includes(e)){o=s+"."+e,r=t[s][e];break}}return{foundPath:o,value:r}},e.findObjectWithProps=function(n,i,t){if(!(t&&!0===(null==t?void 0:t.ownPropertiesOnly)))throw new Error("Not implemented");if("object"!=typeof n)throw new Error("Not an object");for(var o=Object.getOwnPropertyNames(n),e=0;e<o.length;e++){var r=function(t){t=o[t];if("object"==typeof n[t]&&"[object Object]"===String(n[t])){var e=Object.getOwnPropertyNames(n[t]);if(i.every(function(t){return e.includes(t)}))return{value:n[t]}}}(e);if("object"==typeof r)return r.value}return null},e.execTimeout=function(i,o){var r=new l,a=(r.start(),null);return new Promise(function(e,t){var n=!1;s(o).then(function(t){n=!0,a&&window.clearInterval(a),e(t)}),a=window.setInterval(function(){r.elapsedMilliseconds()>i&&(a&&clearInterval(a),n||e({exception:null,failedReason:"timeout",result:null,success:!1}))})})},e.safeExec=s,e.FL_Lowercase=function(t){return t[0].toLowerCase()+t.slice(1)},e.FL_Capitalize=function(t){return t[0].toUpperCase()+t.slice(1)};i.prototype.start=function(){if(this._start)throw new Error("Already started!");this._start=Date.now()};var l=i;function i(){var t=this;this._start=null,this.elapsedSeconds=function(){if(null===t._start)throw new Error("You must start timer first");return(Date.now()-t._start)/1e3},this.elapsedMilliseconds=function(){if(null===t._start)throw new Error("You must start timer first");return Date.now()-t._start}}e.Timer=l},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e},c=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},u=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},p=(Object.defineProperty(e,"__esModule",{value:!0}),e.DriveDownload=void 0,n(129)),h=n(7),f=n(17),v=l(n(15)),g=d(n(61)),l=(o=p.DriveService,r(m,o),m.prototype.closeWindow=function(){var t=this.tokenClient;if(t)for(var e=Object.getOwnPropertyNames(t),n=0;n<e.length;n++){var i=t[e[n]];if(i&&i.close&&"function"==typeof i.close){i.close(),this.tokenClient=null;break}}this.downloadDialog&&this.downloadDialog.close()},m.prototype.drive=function(){var n,t,e,i,o;1==this.preloadSrc?this.preloadSrc=!1:(t=(n=this).scope,e=this.clientId,this.developerKey,this.appId,o=null,i=window.google.accounts.oauth2.initTokenClient({client_id:e,scope:t,callback:""}),n.tokenClient=i,0||function(){var t=this;i.callback=function(e){return c(t,void 0,void 0,function(){return u(this,function(t){if(n.tokenClient=null,void 0!==e.error)throw e;return o=e.access_token,n.oauthToken=o,n.download(),[2]})})},i.requestAccessToken()}())},m.prototype.download=function(){var n=this;this.downloadDialog&&this.downloadDialog.close(),this.downloadDialog=this.getNewDownloadDialog(),this.downloadDialog.show(),setTimeout(function(){n.api.request("POST","download",{task:n.api.taskId,drive_token:n.oauthToken}).then(function(t){var e=n.downloadDialog.isClosedOrInProcessOfClosing()?n.getNewDownloadDialog():n.downloadDialog;e.show(),e.domRoot.querySelectorAll(".dialog__body").forEach(function(t){return t.innerHTML=n.driveSaved()}),setTimeout(function(){e.close()},5e3)},function(e){var t=n.downloadDialog.isClosedOrInProcessOfClosing()?n.getNewDownloadDialog():n.downloadDialog;t.show(),t.domRoot.querySelectorAll(".dialog__body").forEach(function(t){return t.innerHTML=n.driveError()}),setTimeout(function(){t.close()},5e3),v.configureScope(function(t){t.setExtra("error",e),t.setExtra("data",n.api)}),v.captureMessage("Drive download error")})},1e3)},m.prototype.driveSaving=function(){return'<div style="text-align: center;"><img style="margin-bottom: 24px" src="/img/svg_icons/preload.svg"><p>'+h.Lang.t("Wait a moment, please...")+"</p></div>"},m.prototype.driveSaved=function(){return'<div style="text-align: center;"><p>'+h.Lang.t("Your file has been saved to Drive!")+'</p><img width="100" height="100" src="/img/ok.gif"><p>'+h.Lang.t("Find it into iLovePDF folder")+"</p></div>"},m.prototype.driveError=function(){return'<div style="text-align: center;"><p>'+h.Lang.t("We’re sorry. Something went wrong.")+"</p>"},m);function m(t){var i=o.call(this,t=void 0===t?{}:t)||this;return i.id="gdrive_file_selector",i.getNewDownloadDialog=function(){var t=f.Tools.dialogViewOk({title:h.Lang.t("Save to Drive"),content:i.driveSaving()}),e=document.createElement("template"),n=(e.innerHTML=t,new g.default({canBeClosedByUser:!0,clickAwayClose:!0}));return i.downloadDialog&&i.downloadDialog.close(),(i.downloadDialog=n).setTemplate(e),n.addEventListener("shown",function(){n.domRoot.querySelectorAll('[data-action="close"]').forEach(function(t){return t.addEventListener("click",function(){return n.close()})})}),n},i.api=null,i.oauthToken=null,i.userEmail=null,i.token=null,Object.assign(i,t),i.start(),i}e.DriveDownload=l},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e},c=(Object.defineProperty(e,"__esModule",{value:!0}),e.DropboxDownload=void 0,n(130)),u=l(n(15)),d=n(13),l=(o=c.DropboxService,r(p,o),p);function p(t){var e=o.call(this,t=void 0===t?{}:t)||this;return e.dropbox=function(){e.window=null;var t=e,t=(document.getElementById(t.id).removeEventListener("click",t.init),window.Dropbox.save(t.fileUrl,t.fileName,{success:function(){},progress:function(t){},cancel:function(){},error:function(e){u.configureScope(function(t){t.setExtra("error",e)}),u.captureMessage("Dropbox download error",d.Severity.Error)}}));e.window=t},e.closeWindow=function(){e.window&&(e.window.close(),e.window=null)},e.api=null,e.workerServer=null,e.oauthToken=null,e.userEmail=null,e.modal=null,e.fileUrl=null,e.fileName=null,Object.assign(e,t),e.start(),e}e.DropboxDownload=l},,function(t,b,w){"use strict";!function(c){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},e=(Object.defineProperty(b,"__esModule",{value:!0}),b.Editor=void 0,w(470)),r=w(487),a=w(17),s=w(338),u=w(291),d=w(221),l=w(252),p=w(290),h=w(7),f=t(w(15)),v=w(89),g=w(489),m=w(253);function y(t){var l=this;this.aroundWorkAreaMargin=48,this._operationMode="none",this._prevOperationMode="none",this.disableDefaultBehaviour_panOnSpacebar=!0,this.allowPanning=!0,this.fitViewportOnResize=!1,this.zoomOnMouseWheel=!0,this.activePageNumber=1,this.panningIsBeingPerformed=!1,this.clipboardCanvasObject=null,this.lastCollidablePlacedObject=null,this.objectCreationAutomaticPlacementDirection=null,this.inTransientOpMode=!1,this.lastMouseMovement=null,this.viewportHelper=null,this.bag={},this.interactiveMode={enabled:!1,obj:null,isCursorIn:function(t,e){var n=c(t.target),i=0<n.closest(".editor__content").length,o=c(t.target).is(".editpdf__submenu")||0<c(t.target).closest(".editpdf__submenu").length||n.is(".belongs-to-submenu")||0<n.closest(".belongs-to-submenu").length,r=n.is("#editpdf-menu-toolbar")||0<n.closest("#editpdf-menu-toolbar").length;switch(e){case"workarea":return i||o;case"toolSubmenu":return o;case"drawingArea":return i&&!o;case"mainMenu":return r;default:throw"[Editpdf][InteractiveMode] Unknown query area '"+e+"'"}},callbacks:{mousedown:function(t){var e,n,i,o,r,a,s;l.interactiveMode.enabled&&l.can("interactive_mode:perform")&&(i=l,c(t.target),e=l.interactiveMode.obj,n=l.interactiveMode.obj,o=null,r=!1,(i=new p.Viewport(i.viewport,t).pdfPage)&&(o=new u.CoordUtils(l.viewport).fromWindowToPageCoords(t,i),r=n.pdfPage.pageNumber!=i.pageNumber),a=l.interactiveMode.isCursorIn(t,"toolSubmenu"),s=l.interactiveMode.isCursorIn(t,"mainMenu"),(!i||o.isOutsidePage)&&!(a||s)?n.bag.interactive_finalize=!0:a||s||(r&&(s=a=e,l.interactiveMode.obj=n=l.createInteractiveObject(i,n.type,a),e=l.interactiveMode.obj,a.setInteractiveModeOff(),a.interactiveMode_isObjectEmpty())&&s.remove(),n.bag.interactive_once=!0,l.changeOperationMode("interactive_mode:mousedown"),e.interactiveMode_mousedown(t,{pageCoords:o}),n.interactiveMode.firstInteraction||(n.interactiveMode.firstInteraction=!0,l.triggerEvent("editor:interactive:first_interaction",{canvasObject:n})),!0===n.interactiveMode.noLongerEmpty)||e.interactiveMode_isObjectEmpty()||(n.interactiveMode.noLongerEmpty=!0,l.triggerEvent("editor:interactive:no_longer_empty",{canvasObject:n})))},mouseup:function(t){var e,n,i;l.interactiveMode.enabled&&l.can("interactive_mode:perform")&&l.interactiveMode.obj&&(e=l.interactiveMode.obj,(n=l.interactiveMode.obj).bag.interactive_finalize?(i=e.interactiveMode_isObjectEmpty(),l.finalizeInteractiveMode(),i||l.setActiveCanvasObject(n)):(l.changeOperationMode("interactive_mode"),i=new u.CoordUtils(l.viewport).fromWindowToPageCoords(t,n.pdfPage),!0===e.interactiveMode_mouseup(t,{pageCoords:i})&&(l.finalizeInteractiveMode(),l.setActiveCanvasObject(n)),!0===n.interactiveMode.noLongerEmpty||e.interactiveMode_isObjectEmpty()||(n.interactiveMode.noLongerEmpty=!0,l.triggerEvent("editor:interactive:no_longer_empty",{canvasObject:n}))))},mousemove:function(t){var e,n,i;l.interactiveMode.enabled&&l.can("interactive_mode:perform")&&l.interactiveMode.obj&&["interactive_mode:mousedown","interactive_mode:mousemove"].includes(l.operationMode)&&(e=l.interactiveMode.obj,n=l.interactiveMode.obj,i=new u.CoordUtils(l.viewport).fromWindowToPageCoords(t,e.pdfPage),e.interactiveMode_mousemove(t,{pageCoords:i}),!0===n.interactiveMode.noLongerEmpty||e.interactiveMode_isObjectEmpty()||(n.interactiveMode.noLongerEmpty=!0,l.triggerEvent("editor:interactive:no_longer_empty",{canvasObject:n})))}}},this.setTransientOperationMode=function(t){l.storedOpMode=l.operationMode,l.inTransientOpMode=!0,l.operationMode=t},this.deselectActiveCanvasObjectHandler=function(t){if(t.which===d.MOUSE.LeftClick){var e=l.activeCanvasObject;if(!l.panningIsBeingPerformed){if(e)if(e.controls.isResizing||e.controls.isDragging)return;var n=c(t.target),t=n.is(".editpdf-menu-wrapper")||0<n.closest(".editpdf-menu-wrapper").length,i=n.is(".canvas-object")?n:n.closest(".canvas-object");if(t||0<i.length){t=l.pageStack.getCanvasObjectById(i.attr("id"),i.closest(".editor__page").data("page"));if(t||(f.configureScope(function(t){t.setExtra("canvas_object_id",i.attr("id")),t.setExtra("page_number",i.closest(".editor__page").data("page")),t.setExtra("target_html_class",n.attr("class"))}),f.captureMessage("[Editpdf] deselectActiveCanvasObject, selectableArea not found")),t&&t.isSelectableArea(n))return}l.activeCanvasObject?c(l.lastMouseDownTarget).is(".editpdf-selectable-text")||0<c(l.lastMouseDownTarget).closest(".editpdf-selectable-text").length||((e=l.activeCanvasObject).makeInactiveElement(),l.setActiveCanvasObject(null)):"ShapeSelector"===c(".editpdf__submenu").attr("data-name")&&l.setActiveCanvasObject(null)}}},this.getPageLayoutMode=function(){return l.pageStack.pageLayout},this.scrollToCanvasObject=function(t){var e=t.detail.canvasObject,t=("string"==typeof e&&(e=l.pageStack.getCanvasObjectById(e,parseInt(t.detail.pageNum))),c(e.dom).parent().position().top+c(e.dom).position().top),e=c(e.dom).parent().position().left+c(e.dom).position().left;c("#workArea").animate({scrollTop:t-parseInt((c(".tool__workarea").height()/3).toString()),scrollLeft:e-parseInt((c(".tool__workarea").width()/3).toString())},500)},this.handleRearrangeZindex=function(t){var e=t.detail.pageNum,t=t.detail.order;l.pageStack.orderObjects(t,e)},this.storeClickedDomElemHandler=function(t){l.lastMouseDownTarget=t.target},this.highlightHoveredCanvasObjectHandler=function(t){var e=c(t.currentTarget),n=null;if(e.hasClass("canvas-object"))n=e.attr("id");else{if(!e.hasClass("layer"))throw"[Editpdf] Not handled hover situation";n=e.attr("data-canvas-object-id")}e=l.pageStack.getCanvasObjectById(n);e.controls&&e!==l.activeCanvasObject&&("mouseenter"===t.type?e.activateHighlight():"mouseleave"===t.type&&e.deactivateHighlight())},this.handleDetachedCanvasObject=function(t){t.detail.canvasObject},this.getActivePageNumber=function(){return l.activePageNumber},this.scrollToPage=function(t,e){t=c('.editor__page[data-file="'+l.file.id+'"][data-page="'+t+'"]');c("#workArea").animate({scrollTop:t.position().top},e?500:0)},this.forceLoadingArial(),this.config=t.config,this.pdfRenderer=t.pdfRenderer,y.viewport=this.viewport,this.optionsInstance=t.optionsInstance,this.container=t.container,this.eventHandlers={},this.assetsManager=t.assetsManager,this.file=t.file,this.pageStack=new e.PageStack(t.file,this.viewport,this.pdfRenderer),this.coordUtils=new u.CoordUtils(this.viewport),this.inputManager=d.InputManager.getInstance(),m.HandlerRegistry.cleanupRoutine(function(){return function(){return l.inputManager.cleanup()}}),this.operationMode="none",this.clipboard=new g.EditpdfClipboard(this),this.bootstrap(),this.initKeyboardBindings(),this.initInteractiveMode(),this.config.formsEnabled&&this.initForms(t.forms)}y.prototype.createInteractiveObject=function(t,e,n){void 0===n&&(n=null);t=this.pageStack.createObjectInPage(t,e);return n&&t.setAttributes(n.getInteractiveModeCopyAttrs()),t.setInteractiveModeOn(),this.triggerEvent("editpdf_menu:show_submenu",{canvasObject:t}),this.triggerEvent("canvas_object:created",{canvasObject:t,interactiveMode:!0}),t},y.prototype.finalizeInteractiveMode=function(){var t,e,n;this.interactiveMode.enabled&&(t=this.interactiveMode.obj,e=(n=this.interactiveMode.obj).interactiveMode_isObjectEmpty()&&!n.markedForDestruction,n=!t.markedForDestruction&&!n.interactiveMode_isObjectEmpty(),e&&t.remove(),this.clearInteractiveMode(),n)&&this.triggerEvent("canvas_object:created",{canvasObject:t})},y.prototype.isSinglePagePdf=function(){return 1===this.pageStack.pages.length},y.prototype.isTwoPagePdf=function(){return 2===this.pageStack.pages.length},y.prototype.splitTextInLinesAndCalculatePositions=function(t,e){void 0===e&&(e=null);var n,i=this.splitTextInLines(t).foundLines,e=t.getCoords_x1(),o=(t.getSize_x1(),0),r=t.clone(t);if(this.pageStack.appendToPage(r.pdfPage,r),r.setAttributes({text:i[0]}),r.setCoords(e.x,e.y),r.dom.addClass("replica-text"),r.updateDom(),0===(o=r.getSize_x1().h)){e=t.textElem.find(".contenteditable-wrapper [contenteditable]")[0];if(!e)throw"[Editpdf] Not possible to get the first Child in Text Element";(e=e.firstElementChild||e.firstChild).nodeType===Node.TEXT_NODE?o=v.TextHelper.getExistantTextNodeHeight(e):e.nodeType===Node.ELEMENT_NODE?o=e.getBoundingClientRect().height:f.captureMessage("[Editpdf] Not possible to identify the Node type of the firstChild")}0===o&&f.captureMessage("[Editpdf] Even after falling back method to get the height of a single line. Alt. methods output 0"),n=t.getSize_x1().w,r.remove(!1);i.length;for(var a=[],s=0;s<i.length;s++){var l=(o+0)*s,l=(l+=t.getCoords_x1().y,{text:i[s],coords:{x:t.getCoords_x1().x,y:l},size:{w:n,h:o+0}});l.size.h<=0&&f.captureMessage("[Editpdf] Single line size is equal or lower than 0. ("+o+",0)"),a.push(l)}return a},y.prototype.createReplicaMultilineText=function(t,e){for(var n=this.splitTextInLinesAndCalculatePositions(t,e=void 0===e?null:e),i=[],o=0;o<n.length;o++){var r=n[o],a=t.clone(t);a.setAttributes({text:r.text}),a.setCoords_x1(r.coords.x,r.coords.y),a.dom.addClass("hidden-text"),this.pageStack.appendToPage(a.pdfPage,a),a.updateDom(),i.push(a)}return i},y.prototype.splitTextInLines=function(t,i){void 0===i&&(i=null);var o=this.pageStack.cloneObject(t,{textBackgroundColor:"#f44336",opacity:1});o.unlockWidth(),o.updateDom(),o.zindex=o.zindex+5;var r=0,a=(o.textElem[0],t.getSize_x1()),s="",e=[],l=function(t){e.push(t)},c=function(t){var e=t.replace(/[\u00A0-\u9999<>\&]/gim,function(t){return"&#"+t.charCodeAt(0)+";"});o.contentEditableElem.html(e),o.text=t,s=t},u=function(){for(var t=[],e="",n=0;n<s.length;n++){var i=s[n];" "===i?(t.push(e),e=""):e+=i}return 0<e.length&&t.push(e),t},d=function(){var t=u();return t[t.length-1]},n=[],p=!1,t=t.text;return function t(e,n){for(n(e),e=e.firstChild;e;)t(e,n),e=e.nextSibling}((new DOMParser).parseFromString(t,"text/html"),function(t){var e=String(t.tagName).toLowerCase();if("body"!==e){if(!p)return}else if(p=!0,"body"===e)return;t.nodeType===t.TEXT_NODE?0===n.length?n.push(t.wholeText):n[n.length-1]+=t.wholeText:"div"===e.toLowerCase()&&n.push("")}),n.forEach(function(t){var e=0===t.length;for(c(""),r=0;r<t.length;r++){var n=t[r];c(s+n),Math.round(o.getSize_x1().w)>(i||Math.round(a.w))&&(1===u().length?(n=void 0,n=s[s.length-1],l(s.substring(0,s.length-1)),c(n)):(n=void 0,n=d(),n=s.length-n.length,l(s.substring(0,n)),c(s.substring(n,s.length))))}(0<s.length||e)&&l(s)}),o.remove(!1),n.map(function(t){return t.replace(/\n/g,"")}),{foundLines:e}},y.prototype.forceLoadingArial=function(){h.Lang.loadFont("arial"),["normal","900"].forEach(function(n){["normal","italic"].forEach(function(t){var e=document.createElement("div");e.style.opacity="0",e.style.userSelect="none",e.style.position="fixed",e.style.top="0",e.style.left="0",e.innerHTML="font loading text",e.style.fontFamily="Arial",e.style.fontWeight=n,e.style.fontStyle=t,document.body.appendChild(e),setTimeout(function(){e.remove()},3e3)})})},y.prototype.initForms=function(t){var i=this;!1===t||Array.isArray(t)&&0===t.length||t&&(this.formManager=new r.FormManager(t),this.formManager.render(this),m.HandlerRegistry.cleanupRoutine(function(){function t(t){t.keyCode==d.KEYBOARD.Tab&&t.preventDefault()}return c(document).on("keydown",t),function(){return c(document).off("keydown",t)}}),["Tab","Shift+Tab"].forEach(function(n){i.inputManager.onKeyCombinationPressed(n,function(t){var e;t&&(e=(t=c(document.activeElement).closest(".canvas-object")).attr("data-type"))&&e.match(new RegExp("^form"))&&(e=i.pageStack.getCanvasObjectById(t.attr("id")),"Tab"===n?i.inputManager.isBeingPressed("Shift")||i.formManager.focusOnNextFormObject(e):i.formManager.focusOnPrevFormObject(e))})}))},y.prototype.initInteractiveMode=function(){var s=this;m.HandlerRegistry.cleanupRoutine(function(){function t(t){a=t,s.interactiveMode.callbacks.mousedown.call(s,t)}function e(t){s.interactiveMode.callbacks.mousemove.call(s,t),a=t}function n(t){s.interactiveMode.callbacks.mouseup.call(s,a)}var i=s.interactiveMode.callbacks.mousedown.bind(s),o=s.interactiveMode.callbacks.mouseup.bind(s),r=s.interactiveMode.callbacks.mousemove.bind(s),a=(c(window).on("mousedown",i),c(window).on("mouseup",o),c(window).on("mousemove",r),null);return c(window).on("touchstart",t),c(window).on("touchmove",e),c(window).on("touchend",n),function(){c(window).off("mousedown",i),c(window).off("mouseup",o),c(window).off("mousemove",r),c(window).off("touchstart",t),c(window).off("touchmove",e),c(window).off("touchend",n)}}),window.addEventListener("editor:finalize_interactive_mode",m.HRS("editor:finalize_interactive_mode",function(t){var e=s.interactiveMode.obj;s.finalizeInteractiveMode(),s.setActiveCanvasObject(e)}))},y.prototype.hasUserMadeChanges=function(){return!0},y.prototype.getAllCanvasObjects=function(){return Object.values(this.pageStack.allCanvasObjects)},y.prototype.canvasObjectCount=function(){return Object.keys(this.pageStack.allCanvasObjects).length},y.prototype.getAllExportableCanvasObjects=function(){return this.getAllCanvasObjects().filter(function(t){return t.isExportable})},y.prototype.notifyOfToolSelection=function(t,e){void 0===e&&(e={}),"img"===t&&!e.imgDom||"show_shape_selector_submenu"===t?this.finalizeInteractiveMode():l.CanvasObject.isObjectCreatedViaUserInteraction(t)?this.interactiveMode.enabled&&this.interactiveMode.obj&&this.interactiveMode.obj.type===t?this.triggerEvent("editpdf_menu:show_submenu",{canvasObject:this.interactiveMode.obj}):(this.finalizeInteractiveMode(),this.enableInteractiveMode(t)):(this.finalizeInteractiveMode(),this.createCanvasObjectInActivePage(t,e))},y.prototype.flattenCoords=function(t){return{x:Math.floor(t.x),y:Math.floor(t.y)}},y.prototype.offsetObjectPositionInRelationTo=function(t,e,n){var e=e.getCoords(),i=t.pdfPage,o={x:e.x+40*n.x,y:e.y+40*n.y},i=i.isOffLimits(o,t.getSize());return i.inside||(t=n,0!==(i=i).x&&(t.x*=-1),0!==i.y&&(t.y*=-1),o={x:e.x+40*n.x,y:e.y+40*n.y}),o},y.prototype.resetAutomaticObjectPlacementDirection=function(t){this.objectCreationAutomaticPlacementDirection={x:1,y:1,mode:t}},y.prototype.createCanvasObjectInActivePage=function(t,e){void 0===e&&(e={});var n=this.getVisiblePageAndCenteredCoords(),i=n.pdfPage,n=n.centeredPageCoords,o=this.pageStack.createObject(i,t,e);return this.pageStack.appendToPage(i,o),"text"===t&&o.setSizeInProportionToPageSize(.075),e.coords||(e.coords=o.calcNewCoordsThroughOptions(Object.assign({},n,{centered:!0,keepInPageBoundaries:!0})),o.moveTo(e.coords.x,e.coords.y),this.lastCollidablePlacedObject===this.pageStack.lastPlacedObject&&this.wouldCanvasObjectCollide(o)&&("create"!=this.objectCreationAutomaticPlacementDirection.mode&&this.resetAutomaticObjectPlacementDirection("create"),e.coords=this.offsetObjectPositionInRelationTo(o,this.lastCollidablePlacedObject,this.objectCreationAutomaticPlacementDirection))),o.moveTo(e.coords.x,e.coords.y),this.lastCollidablePlacedObject=o,this.triggerEvent("canvas_object:created",{canvasObject:o}),this.setActiveCanvasObject(o),o.firstTimeActiveElement(),o},y.prototype.addCreatedObjectInPage=function(t,e){void 0===e&&(e={}),this.pageStack.appendToPage(t.pdfPage,t),this.triggerEvent("canvas_object:created",n({canvasObject:t},e)),e.onAdded&&e.onAdded()},y.prototype.cloneObject=function(t,e){t=this.pageStack.cloneObject(t,e=void 0===e?{}:e);return t.updateDom(),this.triggerEvent("canvas_object:created",{canvasObject:t}),this.setActiveCanvasObject(t),this.triggerEvent("editpdf_menu:show_submenu",{canvasObject:t}),t},y.prototype.enableInteractiveMode=function(t){this.setActiveCanvasObject(null),this.interactiveMode.enabled=!0,this.interactiveMode.obj=this.createInteractiveObject(this.activePage,t),this.viewport.addClass("interactive-mode-on"),this.changeOperationMode("interactive_mode")},y.prototype.clearInteractiveMode=function(t){void 0===t&&(t=!1);t=this.interactiveMode.obj;this.viewport.removeClass("interactive-mode-on"),this.interactiveMode.pdfPage=null,this.interactiveMode.obj=null,this.interactiveMode.enabled=!1,this.changeOperationMode("none"),t&&t.setInteractiveModeOff(),null===this.activeCanvasObject&&this.setActiveCanvasObject(null)},y.prototype.getActivePageNeighbor=function(){var t=this.pageStack.pageLayout;return"single"!==t&&("double"===t||"cover"===t&&1<this.activePage.pageNumber)?this.pageStack.getPage(this.activePage.pageNumber+1):null},y.prototype.getVisiblePageAndCenteredCoords=function(t,e){void 0===t&&(t=!1),void 0===e&&(e={});var n=new p.Viewport(this.viewport),i=null,o=null;switch(this.pageStack.pageLayout){case"double":case"cover":var r=this.getActivePageNeighbor(),a=[this.activePage],r=(r&&a.push(r),a.map(function(t){var e=n.visiblePageArea(t,!1);return{pdfPage:t,visibleRect:e.intersection?e:null}}).sort(function(t,e){t=t.visibleRect?t.visibleRect.area:0;return(e.visibleRect?e.visibleRect.area:0)-t})),o=r[0].pdfPage,i=r[0].visibleRect;break;default:o=this.activePage,i=n.visiblePageArea(this.activePage,!1)}var e=i,s={x:e.x0+(e.x1-e.x0)/2,y:e.y0+(e.y1-e.y0)/2},l=(t&&(s.x/=o.dimensions.w,s.y/=o.dimensions.h),t&&(e.x0/=o.dimensions.w,e.x1/=o.dimensions.w,e.y0/=o.dimensions.h,e.y1/=o.dimensions.h),{x:(e={x0:i.viewportRect.x0,x1:i.viewportRect.x1,y0:i.viewportRect.y0,y1:i.viewportRect.y1}).x0+(e.x1-e.x0)/2,y:e.y0+(e.y1-e.y0)/2});return t&&(l.x/=o.dimensions.w,l.y/=o.dimensions.h),t&&(e.x0/=o.dimensions.w,e.x1/=o.dimensions.w,e.y0/=o.dimensions.h,e.y1/=o.dimensions.h,i.viewportRect.x0/=o.dimensions.w,i.viewportRect.x1/=o.dimensions.w,i.viewportRect.y0/=o.dimensions.h,i.viewportRect.y1/=o.dimensions.h),{pdfPage:o,centeredPageCoords:s,centeredViewportCoords:l,info:i}},y.prototype.updateVisiblePageRange=function(){var t=this.pageStack.numPages,e=this.activePageNumber,n=10,i=("single"!=this.pageStack.pageLayout&&(n*=2),a.Tools.keepInNumericBounds(1,t,e-n)),t=a.Tools.keepInNumericBounds(1,t,e+n);this.pageStack.setVisiblePageRange(i,t)},y.prototype.changeOperationMode=function(t){if(!this.inTransientOpMode)return this.storedOpMode=null,this.prevOperationMode=this.operationMode,this.operationMode=t,!0;this.storedOpMode=t},y.prototype.unsetTransientOperationMode=function(){this.inTransientOpMode=!1,this.storedOpMode&&this.changeOperationMode(this.storedOpMode)},y.prototype.clipboard_copyAndPasteAtOnce=function(){this.clipboard_copyObject(!0),this.clipboard_pasteObject(!0)},y.prototype.initKeyboardBindings=function(){var o=this,n=this,i=(["Supr","Backspace"].forEach(function(i){o.inputManager.onKeyPressed(i,function(t){var e=o.activeCanvasObject,n=e&&"text"===e.type&&e.inEditingMode;document.activeElement&&c(document.activeElement).is(":input")||t||!e||n||(t=new CustomEvent("canvas_object:remove_request",{detail:{canvasObject:o.activeCanvasObject,trigger:"keyboard:supr",key:i}}),window.dispatchEvent(t))})}),!1);m.HandlerRegistry.cleanupRoutine(function(){function t(t){(t.ctrlKey||t.metaKey)&&"D"===String.fromCharCode(t.keyCode)&&(t.preventDefault(),i||(i=!0,n.clipboard_copyAndPasteAtOnce()))}function e(t){(t.ctrlKey||t.metaKey)&&"D"===String.fromCharCode(t.keyCode)&&(t.preventDefault(),i=i&&!1)}return document.addEventListener("keydown",t,!0),document.addEventListener("keyup",e,!0),function(){document.removeEventListener("keydown",t,!0),document.removeEventListener("keyup",e,!0)}}),this.inputManager.onKeyPressed("Escape",function(t){t||(t=o.activeCanvasObject)&&(t.makeInactiveElement(),o.setActiveCanvasObject(null))}),this.inputManager.onKeyCombinationPressed("Ctrl+x",function(t){return o.clipboard_cutObject(t)}),this.inputManager.onKeyCombinationPressed("Ctrl+c",function(t){return o.clipboard_copyObject(t)}),this.inputManager.onKeyCombinationPressed("Ctrl+v",function(t){return o.clipboard_pasteObject(t)}),this.inputManager.onKeyCombinationPressed("Cmd+x",function(t){return o.clipboard_cutObject(t)}),this.inputManager.onKeyCombinationPressed("Cmd+c",function(t){return o.clipboard_copyObject(t)}),this.inputManager.onKeyCombinationPressed("Cmd+v",function(t){return o.clipboard_pasteObject(t)}),this.inputManager.onKeyCombinationPressed("F2",function(t){"text"!==o.operationMode&&t&&o.activeCanvasObject&&"text"===o.activeCanvasObject.type&&o.activeCanvasObject.setEditMode()}),this.inputManager.onKeyCombinationPressed("Escape",function(t){"text"!==o.operationMode||t||"text"===o.activeCanvasObject.type&&o.setActiveCanvasObject(null)}),this.inputManager.onKeyPressed("Spacebar",function(t){c(document.activeElement).is(":input")||!1===o.inTransientOpMode&&"hand"===o.operationMode||(t&&o.can("viewport:pan")?o.setTransientOperationMode("hand"):o.unsetTransientOperationMode())})},y.prototype.wouldCanvasObjectCollide=function(e,t){var n=this,i=(void 0===t&&(t="iteration"),e.getViewportCoords()),o=i.x,i=i.y;if(!o||!i)throw"[Editpdf] Bad coords!";if(!["iteration","dom"].includes(t))throw"[Editpdf] Invalid argument (strategy) '"+t+"'";function r(t,e){return t=n.flattenCoords(t),e=n.flattenCoords(e),t.x===e.x&&t.y===e.y}if("iteration"===t)return e.pdfPage.canvasObjects.find(function(t){return r(e.getCoords(),t.getCoords())&&e.id!==t.id});if("dom"===t){e.isPresentInDom()&&e.detach();t=document.elementFromPoint(o,i);if(e.reattach(),t){o=null,i=null;if((t=c(t)).hasClass(l.CanvasObject.CSS_CLASS)?i=(o=t).attr("id"):(o=t.closest("."+l.CanvasObject.CSS_CLASS))&&0<o.length&&(i=o.attr("id")),i){t=this.pageStack.getCanvasObjectById(i),o=e.getCoords(),i=t.getCoords();if(r(o,i))return t}}}return null},y.prototype.debug_matchCoords=function(t,e){t=t.getCoords();e.setCoords(t.x,t.y),e.updateDom()},y.prototype.debug_placeObjectGivenRef=function(t){var t=t.getViewportCoords(),e=t.x,t=t.y;this.debug_placeObject(e,t)},y.prototype.debug_placeObject=function(t,e){var n="debug-placed-object",i=c('<div class="'+n+'"></div>');c("."+n).detach(),i.css({"z-index":3e7,width:"30px",height:"30px","background-color":"red",left:t+"px",top:e+"px",position:"fixed"}),c(document.body).append(i)},y.prototype.setPageLayoutMode=function(t,e){void 0===e&&(e="all");var n=new p.Viewport(this.viewport),i=this.getVisiblePageAndCenteredCoords(!0),o=i.pdfPage;i.centeredViewportCoords;this.pageStack.setPageLayoutMode(t),this.fitViewport(e),this.panTo(o,{x:0,y:-.025,asRatio:!0},{x:0,y:0,asRatio:!0}),this.viewport.scrollLeft(n.scrollDistance.w/2)},y.prototype.bootstrap=function(){var n=this,i=this,t=c(".editor__content")[0],e=c("#sidebar .layers");this.resetAutomaticObjectPlacementDirection("create");m.HandlerRegistry.cleanupRoutine(function(){return window.addEventListener("mousedown",n.storeClickedDomElemHandler,!0),function(){return window.removeEventListener("mousedown",n.storeClickedDomElemHandler,!0)}}),m.HandlerRegistry.cleanupRoutine(function(){return t.addEventListener("mouseup",n.deselectActiveCanvasObjectHandler,!0),function(){return t.removeEventListener("mouseup",n.deselectActiveCanvasObjectHandler,!0)}}),m.HandlerRegistry.cleanupRoutine(function(){return n.viewport.on("mouseenter",".canvas-object",n.highlightHoveredCanvasObjectHandler),n.viewport.on("mouseleave",".canvas-object",n.highlightHoveredCanvasObjectHandler),function(){n.viewport.off("mouseenter",".canvas-object",n.highlightHoveredCanvasObjectHandler),n.viewport.off("mouseleave",".canvas-object",n.highlightHoveredCanvasObjectHandler)}}),m.HandlerRegistry.cleanupRoutine(function(){return e.on("mouseenter",".layer",n.highlightHoveredCanvasObjectHandler),e.on("mouseleave",".layer",n.highlightHoveredCanvasObjectHandler),function(){e.off("mouseenter",".layer",n.highlightHoveredCanvasObjectHandler),e.off("mouseleave",".layer",n.highlightHoveredCanvasObjectHandler)}}),m.HandlerRegistry.cleanupRoutine(function(){function t(t){t.keyCode==d.KEYBOARD.Tab&&t.preventDefault()}return c(document).on("keydown",".canvas-object .text-content",t),c(document).on("keyup",".canvas-object .text-content",t),function(){c(document).off("keydown",".canvas-object .text-content",t),c(document).off("keyup",".canvas-object .text-content",t)}}),m.HandlerRegistry.cleanupRoutine(function(){function t(t){var e;1===Object.keys(i.getAllCanvasObjects()).length&&(e=c(this).closest(".canvas-object").attr("id"),i.pageStack.getCanvasObjectById(e).isEmpty()?(i.optionsInstance.disableProcessBtn(h.Lang.t("processBtn_atLeastOneElem")),c("#processTask").removeClass("pulse")):i.optionsInstance.enableProcessBtn())}return c(document).on("input",'.canvas-object[data-type="text"]:not(.hidden-text) .text-content',t),function(){return c(document).off("input",'.canvas-object[data-type="text"]:not(.hidden-text) .text-content',t)}}),m.HandlerRegistry.cleanupRoutine(function(){function t(){var t=0<c(".tool-editpdf.process-run").length;if(0<n.getAllCanvasObjects().length&&!t)return!0}return window.addEventListener("beforeunload",t),function(){return window.removeEventListener("beforeunload",t)}}),m.HandlerRegistry.cleanupRoutine(function(){return window.addEventListener("editor:canvas_object:scroll_to_view",n.scrollToCanvasObject),window.addEventListener("editor:canvas_object:rearrange_zindex",n.handleRearrangeZindex),function(){window.removeEventListener("editor:canvas_object:scroll_to_view",n.scrollToCanvasObject),window.removeEventListener("editor:canvas_object:rearrange_zindex",n.handleRearrangeZindex)}}),m.HandlerRegistry.cleanupRoutine(function(){function t(t){var e=t.detail.canvasObject;"string"==typeof e&&(e=n.pageStack.getCanvasObjectById(e,parseInt(t.detail.pageNum))),n.setActiveCanvasObject(e)}return window.addEventListener("canvas_object:selected",t),function(){return window.removeEventListener("canvas_object:selected",t)}}),m.HandlerRegistry.cleanupRoutine(function(){function t(t){var e;return!t||!t.target||((e=c(t.target)).is("#workArea")||0<e.closest("#workArea").length?!!(e.is(".editpdf-menu-wrapper")||0<e.closest(".editpdf-menu-wrapper").length)||(t.preventDefault(),!1):void 0)}return document.addEventListener("contextmenu",t,!0),function(){return document.removeEventListener("contextmenu",t,!0)}}),m.HandlerRegistry.cleanupRoutine(function(){function t(t){(t=t.detail.enabled)&&"text"!=n.operationMode?n.changeOperationMode("text"):t||"text"!==n.operationMode||(n.operationMode=n.prevOperationMode)}return window.addEventListener("canvas_object:text_mode",t),function(){return window.removeEventListener("canvas_object:text_mode",t)}}),this.disableDefaultBehaviour_panOnSpacebar&&m.HandlerRegistry.cleanupRoutine(function(){function t(t){n.activeCanvasObject&&"text"===n.activeCanvasObject.type&&!0===n.activeCanvasObject.inEditingMode||c(document.activeElement).is(":input")||t.keyCode===d.KEYBOARD.Spacebar&&t.preventDefault()}return c(window).on("keydown",t),function(){return c(window).off("keydown",t)}}),this.allowPanning&&this.initPanning(),this.fitViewportOnResize&&this.attachViewportResizeHandlers(),this.zoomOnMouseWheel&&this.initWheelZoom(),window.addEventListener("pdf_page:canvas_object:detached",m.HRS("pdf_page:canvas_object:detached",this.handleDetachedCanvasObject)),window.addEventListener("editpdf:menu:ready",m.HRS("editpdf:menu:ready",function(){c("body").addClass("editpdf--ready"),n.setPageLayoutMode(n.config.defaultPageLayoutMode,"width"),n.viewport.scrollTop(0)})),window.addEventListener("editor:add_canvas_object",m.HRS("editor:add_canvas_object",function(t){var e=t.detail.canvasObject,t=t.detail;n.addCreatedObjectInPage(e,t)})),window.addEventListener("canvas_object:remove_request",m.HRS("canvas_object:remove_request",function(t){["keyboard:supr","recycle-bin"].includes(t.detail.trigger)&&(n.finalizeInteractiveMode(),n.setActiveCanvasObject(null))})),window.addEventListener("canvas_object:remove_request:all",m.HRS("canvas_object:remove_request:all",function(t){["keyboard:supr","recycle-bin"].includes(t.detail.trigger)&&n.finalizeInteractiveMode(),n.setActiveCanvasObject(null)}))},Object.defineProperty(y.prototype,"operationMode",{get:function(){return this._operationMode},set:function(t){this.viewport.attr("data-opmode",t),this.viewport.attr("data-opmode-transient",String(this.inTransientOpMode)),this._operationMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"prevOperationMode",{get:function(){return this._prevOperationMode},set:function(t){this._prevOperationMode=t},enumerable:!1,configurable:!0}),y.prototype.attachViewportResizeHandlers=function(){var e=this;m.HandlerRegistry.cleanupRoutine(function(){function t(){return e.fitViewport("width")}return c(window).on("resize",t),function(){return c(window).off("resize",t)}})},y.prototype.initPanning=function(){var e=this;new s.Draggable(this.viewport,{mouseButton:d.MOUSE.LeftClick,filterFn:this.panning_filterFn.bind(this),onDragBegFn:function(t){t=c(t.target);if(0<t.closest(".canvas-object").length||t.is(".canvas-object"))return!1;e.viewport.addClass("dragging")},onDragEndFn:function(t){e.viewport.removeClass("dragging"),e.panningIsBeingPerformed=!1}},function(t){e.panningIsBeingPerformed||(e.panningIsBeingPerformed=!0),e.panViewport({dragX:t.x,dragY:t.y})})},y.prototype.handleFetchStaticTextsOfPage=function(t){var e=this,n=t.detail.pdfPage,t=n.pageNumber;this.assetsManager.getStaticTextsForPage(t).then(function(t){e.pageStack.addStaticTextsTo(n,t)}).catch(function(t){})},y.prototype.panning_filterFn=function(t){if("hand"===this.operationMode){for(var e=c(t.target),n=[".editor__content",".page-canvas"],i=0;i<n.length;i++){var o=n[i];if(e.is(o)||0<e.closest(o).length)return!0}return!1}},y.prototype.updateActivePageNumber=function(t){this.activePageNumber=t,this.updateVisiblePageRange()},Object.defineProperty(y.prototype,"activePage",{get:function(){return this.pageStack.getPage(this.activePageNumber)},enumerable:!1,configurable:!0}),y.prototype.setActiveCanvasObject=function(t){t&&this.triggerEvent("editpdf_menu:deselect_hand_button"),this.activeCanvasObject&&this.activeCanvasObject.makeInactiveElement(),this.activeCanvasObject=t,this.activeCanvasObject&&this.activeCanvasObject.makeActiveElement(),this.triggerEvent("editor:active_canvas_object:change",{canvasObject:t})},y.prototype.clearHandOperationMode=function(){"hand"===this.operationMode&&(this.finalizeInteractiveMode(),this.unsetTransientOperationMode(),this.changeOperationMode("none"))},y.prototype.initWheelZoom=function(){var o=this,e=this.viewport[0];this.viewportHelper=new p.Viewport(this.viewport),m.HandlerRegistry.cleanupRoutine(function(){function t(t){o.lastMouseMovement=t,o.bag.needsMouseRatioUpdate=!0}return e.addEventListener("mousemove",t),function(){return e.removeEventListener("mousemove",t)}}),m.HandlerRegistry.cleanupRoutine(function(){function t(t){var e,n,i;t.ctrlKey&&(t.preventDefault(),o.lastMouseMovement||(o.lastMouseDownTarget=t,o.bag.needsMouseRatioUpdate=!0),(i=o.viewportHelper).updateMouseEvent(null!=(e=o.lastMouseMovement)?e:t),e=t.deltaY<0?1:-1,o.zoom,"pdfPage"==(i.pdfPage?"pdfPage":"workarea"))&&(i.pdfPage,i.pdfPageSize,t=null,o.bag.needsMouseRatioUpdate?(o.bag.mousePos_asRatio=t=i.getPageCoords(!0),o.bag.needsMouseRatioUpdate=!1):t=o.bag.mousePos_asRatio,1==e?o.incrZoom():o.decrZoom(),e=i.getPageCoords(),n=(i=i.pdfPageSize).w*t.x,i=i.h*t.y,t={dragX:Math.round(e.x-n),dragY:Math.round(e.y-i)},o.panViewport(t),o.updateVisiblePageRange())}return e.addEventListener("wheel",t),function(){return e.removeEventListener("wheel",t)}})},y.prototype.zoomTo=function(t,e,n,i){void 0===i&&(i=null),this.setZoom(t),this.panTo(n,e,i)},y.prototype.panTo=function(t,e,n){void 0===n&&(n=null);var i=new p.Viewport(this.viewport);(n=n||{x:.5,y:.5,asRatio:!0}).asRatio&&(n.x*=i.viewportSize.w,n.y*=i.viewportSize.h),e.asRatio&&(e.x*=t.dimensions.w,e.y*=t.dimensions.h),i={x:t.position.x+e.x-n.x,y:t.position.y+e.y-n.y},this.setViewport(i.x,i.y)},y.prototype.zoomToCenterOfViewportOfActivePage=function(t){var e=this.getVisiblePageAndCenteredCoords(!0),n=e.pdfPage,e=e.centeredViewportCoords;this.zoomTo(t,{x:e.x,y:e.y,asRatio:!0},n)},y.prototype.can=function(t){var e,n=null;switch(t){case"viewport:pan":n=this.operationMode in{none:"",interactive_mode:"",hand:""},this.activeCanvasObject&&(e=this.activeCanvasObject.controls.isResizing||this.activeCanvasObject.controls.isDragging,n=n&&!e);break;case"interactive_mode:perform":n="none"===this.operationMode||this.operationMode.startsWith("interactive_mode")}return n},y.prototype.fitViewport=function(t,e){if(void 0===e&&(e=null),!["width","height","all"].includes(t=void 0===t?"width":t))throw"[Editpdf] Unknown fit function "+t;var e=null,n=(new p.Viewport(this.viewport),this.getActivePageNeighbor()),i=[this.activePage],i=(n&&i.push(n),this.aroundWorkAreaMargin);"width"===t?e=(this.viewport.width()-i)/this.pageStack.getPagesContainerWidth(!0):"height"===t?e=this.viewport.height()/(this.pageStack.getPagesContainerHeight(!0)+i):"all"===t&&(n=(this.viewport.width()-i)/this.pageStack.getPagesContainerWidth(!0),t=this.viewport.height()/(this.pageStack.getPagesContainerHeight(!0)+i),e=(n="single"!=this.pageStack.pageLayout&&n<t?(this.viewport.width()-.5*i)/this.pageStack.getPagesContainerWidth(!0):n)<t?n:t),this.setZoom(e)},y.prototype.panViewport=function(t){var e=t,n=this.viewport,i=n.scrollLeft(),n=n.scrollTop(),o={left:null,top:null};t.dragX&&(o.left=i+-1*e.dragX),t.dragY&&(o.top=n+-1*e.dragY),this.setViewport(o.left,o.top)},y.prototype.setViewport=function(t,e){var n=c(this.viewport);t&&n.scrollLeft(t),e&&n.scrollTop(e)},Object.defineProperty(y.prototype,"viewport",{get:function(){if(!this._viewport){if(this._viewport=c("#workArea"),this._viewport.length<=0)throw"[EditPdf] Viewport not found";if(1<this._viewport.length)throw"[EditPdf] Found several viewports"}return this._viewport},enumerable:!1,configurable:!0}),y.prototype.incrZoom=function(){this.setZoom(this.nextZoomInValue)},y.prototype.decrZoom=function(){this.setZoom(this.nextZoomOutValue)},y.prototype.setZoom=function(t){t=a.Tools.keepInNumericBounds(this.config.viewportMinZoom,this.config.viewportMaxZoom,t),this.pageStack.setZoom(t),this.triggerEvent("zoom",{zoom:t})},y.prototype.sanitizeZoomValue=function(t){return a.Tools.keepInNumericBounds(.03,20,t)},Object.defineProperty(y.prototype,"zoom",{get:function(){return this.pageStack.zoom},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"nextZoomOutValue",{get:function(){return a.Tools.keepInNumericBounds(.03,20,this.zoom/1.25)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"nextZoomInValue",{get:function(){return a.Tools.keepInNumericBounds(.03,20,1.25*this.zoom)},enumerable:!1,configurable:!0}),y.prototype.clipboard_cutObject=function(t){"text"===this.operationMode||document.activeElement&&c(document.activeElement).is(":input")||t&&this.activeCanvasObject&&(this.activeCanvasObject.remove(),this.activeCanvasObject.bag.removedByCutAction=!0,this.clipboardCanvasObject=this.activeCanvasObject)},y.prototype.clipboard_copyObject=function(t){"text"===this.operationMode||document.activeElement&&c(document.activeElement).is(":input")||t&&(this.clipboardCanvasObject=this.activeCanvasObject,this.resetAutomaticObjectPlacementDirection("copy"))},y.prototype.getCleanCanvasObjectsForDelivery=function(t){var e=!0,t=t.filter(function(t){if("text"===t.type){if(t.isEmpty())return!1;t.hasInitialTextValue()||(e=!1)}return!0});return t=e?t:t.filter(function(t){return"text"!==t.type||!t.hasInitialTextValue()})},y.prototype.clipboard_pasteObject=function(t){var e,n,i,o,r;"text"===this.operationMode||document.activeElement&&c(document.activeElement).is(":input")||t&&(o=(t=this.clipboardCanvasObject)&&t.bag.removedByCutAction,e=!1,t=t&&t.markedForDestruction&&!o?this.clipboardCanvasObject=null:t)&&(n=t.getCoords(),i=(r=this.getVisiblePageAndCenteredCoords()).pdfPage,r=r.centeredPageCoords,t.pdfPage.pageNumber===i.pageNumber?(o||(e=!0),i=t.pdfPage):((n=r).centered=!0,n.keepInPageBoundaries=!0),o=this.cloneObject(t,{coords:n,pdfPage:i}),e&&("copy"!=this.objectCreationAutomaticPlacementDirection.mode&&this.resetAutomaticObjectPlacementDirection("copy"),r=this.offsetObjectPositionInRelationTo(o,t,this.objectCreationAutomaticPlacementDirection),o.moveTo(r.x,r.y),o.updateDom()),this.clipboardCanvasObject=o)},y.prototype.on=function(t,e){t in this.eventHandlers||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e)},y.prototype.triggerEvent=function(t,e){void 0===e&&(e={});var n=new CustomEvent(t,{detail:e});window.dispatchEvent(n),t in this.eventHandlers&&this.eventHandlers[t].forEach(function(t){return t(e)})},y.viewport=null,b.Editor=y}.call(this,w(1))},function(t,e,n){"use strict";!function(o,r){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.MouseUtils=void 0,t(n(15)));function l(){}l.identifyClickedPage=function(e){var n=e instanceof o.Event?e.originalEvent:e,t=(n||(s.configureScope(function(t){t.setExtra("originalMouseEvent",e),t.setExtra("rawEvent",n),t.setExtra("mouse_event_type",e?e.type:"no_type")}),s.captureMessage("[Editpdf] identifyClickedPage: finding event type")),l.getHomogeneousCoords(n,"client")),i=t.x,t=t.y,i=document.elementFromPoint(i,t),t=null;return(i=r(i)).is(".editor__page"),(t=i.closest(".editor__page")).length<=0?null:t},l.getHomogeneousCoords=function(t,e){var n,i,o=0===t.type.indexOf("touch"),r=!(t instanceof MouseEvent)&&o?t.touches[0]:t;switch(e){case"client":n=r.clientX,i=r.clientY;break;case"page":n=r.pageX,i=r.pageY;break;case"screen":n=r.screenX,i=r.screenY;break;default:throw"[Editpdf] Unknown type of argument"}return{x:n,y:i}},e.MouseUtils=l}.call(this,n(1),n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Viewport=void 0;var i=n(289),o=n(291);function r(t,e){void 0===e&&(e=null),this.dom=t,this.coordUtils=new o.CoordUtils(this.dom),e&&this.updateMouseEvent(e)}r.prototype.updateMouseEvent=function(t){this.mouseEvent=t;var e=i.MouseUtils.identifyClickedPage(this.mouseEvent);if(!e)return null;var n=window.peditor.pageStack,n=(this._pdfPage=n.pages[parseInt(e.data("page"))-1],0===t.type.indexOf("touch"));"pageX"in t||n||(t.pageX=t.page.x,t.pageY=t.page.y)},r.prototype.getViewportCoords=function(t){void 0===t&&(t=!1);var e=this.mouseEvent,e=i.MouseUtils.getHomogeneousCoords(e,"page"),e={x:e.x-this.dom.offset().left,y:e.y-this.dom.offset().top};return t&&(e.x/=this.dom.width(),e.y/=this.dom.height()),e},r.prototype.getWorkareaCoords=function(t){void 0===t&&(t=!1);var e=this.getViewportCoords(),e={x:e.x+this.scrollValue.x,y:e.y+this.scrollValue.y};return t&&(e.x/=this.workareaSize.w,e.y/=this.workareaSize.h),e},r.prototype.getPageCoords=function(t){var e;return void 0===t&&(t=!1),this.pdfPage?(e=this.coordUtils.viewportToPageCoords(this.getViewportCoords(),this.pdfPage),t&&(e.x/=this.pdfPage.dimensions.w,e.y/=this.pdfPage.dimensions.h),e):null},r.prototype.visiblePageArea=function(t,e){void 0===e&&(e=!1);var n=this.viewportSize,i={x0:t.position.x,x1:t.position.x+t.dimensions.w,y0:t.position.y,y1:t.position.y+t.dimensions.h},n={x0:this.scrollValue.x,x1:this.scrollValue.x+n.w,y0:this.scrollValue.y,y1:this.scrollValue.y+n.h,area:0},o=-1*i.x0,r=-1*i.y0,o=(i.x0+=o,i.x1+=o,i.y0+=r,i.y1+=r,n.x0+=o,n.x1+=o,n.y0+=r,n.y1+=r,this._calcViewableArea(i,n));return o.viewportRect=n,e&&(o.x0/=t.dimensions.w,o.x1/=t.dimensions.w,o.y0/=t.dimensions.h,o.y1/=t.dimensions.h,o.viewportRect.x0/=t.dimensions.w,o.viewportRect.x1/=t.dimensions.w,o.viewportRect.y0/=t.dimensions.h,o.viewportRect.y1/=t.dimensions.h),o},r.prototype._calcViewableArea=function(t,e){var n=t,i=e,o={x0:null,x1:null,y0:null,y1:null,area:0,intersection:!0},r=o;return(i.x0>=n.x1||n.x0>=i.x1||n.y0>=i.y1||i.y0>=n.y1)&&(o.intersection=!1),n.x0<=i.x0&&n.x1>=i.x1?(o.x0=e.x0,o.x1=e.x1):n.x0>=i.x0&&n.x1>=i.x1?(o.x0=t.x0,o.x1=e.x1):(n.x0<=i.x0&&n.x1<=i.x1?o.x0=e.x0:o.x0=t.x0,o.x1=t.x1),n.y0<=i.y0&&n.y1>=i.y1?(o.y0=e.y0,o.y1=e.y1):n.y0>=i.y0&&n.y1>=i.y1?(o.y0=t.y0,o.y1=e.y1):(n.y0<=i.y0&&n.y1<=i.y1?o.y0=e.y0:o.y0=t.y0,o.y1=t.y1),r.area=(r.x1-r.x0)*(r.y1-r.y0),o},Object.defineProperty(r.prototype,"viewportSize",{get:function(){this.mouseEvent;return{w:this.dom.width(),h:this.dom.height()}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"workareaSize",{get:function(){return{w:this.dom[0].scrollWidth,h:this.dom[0].scrollHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pdfPageSize",{get:function(){return{w:this.pdfPage.dimensions.w,h:this.pdfPage.dimensions.h}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pdfPage",{get:function(){return this._pdfPage},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scrollValue",{get:function(){return{x:this.dom[0].scrollLeft,y:this.dom[0].scrollTop}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scrollSize",{get:function(){var t=this.scrollDistance;return{w:0<t.w?4:0,h:0<t.h?4:0}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scrollDistance",{get:function(){return{w:this.dom[0].scrollWidth-this.dom[0].clientWidth,h:this.dom[0].scrollHeight-this.dom[0].clientHeight}},enumerable:!1,configurable:!0}),r.prototype.log=function(){this.getWorkareaCoords().x,this.getWorkareaCoords().y,this.getViewportCoords().x,this.getViewportCoords().y;var t=this.getPageCoords();t&&(t.x,t.y)},e.Viewport=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordUtils=void 0;var i=n(289);function o(t){this.viewport=t}o.prototype.pageOriginInViewportCoords=function(t){return{x:t.img.offset().left-this.viewport.offset().left,y:t.img.offset().top-this.viewport.offset().top}},o.prototype.viewportToPageCoords=function(t,e){var n=this.pageOriginInViewportCoords(e),t={x:t.x-n.x,y:t.y-n.y,isOutsidePage:!1};return(t.x<0||t.y<0||t.x>e.dimensions.w||t.y>e.dimensions.h)&&(t.isOutsidePage=!0),t},o.prototype.viewportToPageRatio=function(t,e){t=this.viewportToPageCoords(t,e);return{x:t.x/e.img.width(),y:t.y/e.img.height()}},o.prototype.fromWindowToViewportCoords=function(t){t=i.MouseUtils.getHomogeneousCoords(t.originalEvent,"page");return{x:t.x-this.viewport.offset().left,y:t.y-this.viewport.offset().top}},o.prototype.fromWindowToPageCoords=function(t,e){t=this.fromWindowToViewportCoords(t);return this.viewportToPageCoords(t,e)},o.rotatePoint=function(t,e,n){function i(t){return t*(Math.PI/180)}var o=Math.sin(i(t)),t=Math.cos(i(t)),r=(e.x-=n.x,e.y-=n.y,e.x*t-e.y*o),o=e.x*o+e.y*t;return e.x=r+n.x,e.y=o+n.y,e},e.CoordUtils=o},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.FormBase=e.VALIDATION_ERROR=void 0,n(252)),n=((e.VALIDATION_ERROR||(e.VALIDATION_ERROR={})).Required="required",o=n.CanvasObject,r(a,o),a.prototype.setSize=function(t,e){return this},a.prototype.hasGroupElements=function(){return 0<this.groupElements.length},Object.defineProperty(a.prototype,"siblings",{get:function(){var e=this;return this.groupElements.filter(function(t){return t!==e})},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hasControls",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isFormObject",{get:function(){return!0},enumerable:!1,configurable:!0}),a.prototype.initFormCapabilities=function(t){this.pdfFormField=t.field,this.widgetIndex=t.widgetIndex,this.tabindex=-1,this.calculatedWidgetSizeAndCoords_x1=this.getWidgetSizeAndCoords_x1()},a.prototype.getWidgetSizeAndCoords_x1=function(){var t=this.pdfPage,e=t.pixelMagnification,n=this.pdfFormField.widgetsInformation[this.widgetIndex];return{coords_x1:{x:n.left*e,y:t.originalDimensions.h-n.top*e},size_x1:{w:n.right*e-n.left*e,h:n.top*e-n.bottom*e}}},a.prototype.initDom=function(){o.prototype.initDom.call(this),this.dom.attr("data-form-field-id",this.pdfFormField.fieldId)},a.prototype.getPrevFocusable=function(t){for(var e=0;e<this.inputs.length;e++)if(this.inputs[e]===t&&0<e)return this.inputs[e-1];return null},a.prototype.getNextFocusable=function(t){for(var e=0;e<this.inputs.length;e++)if(this.inputs[e]===t)return this.inputs[e+1];return null},Object.defineProperty(a.prototype,"formId",{get:function(){return this.pdfFormField.fieldId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isExportable",{get:function(){return 0===this.widgetIndex&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isReadOnly",{get:function(){return!0===this.pdfFormField.readOnlyFlag},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isRequired",{get:function(){return this.pdfFormField.mandatoryFlag},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"padding",{get:function(){var t=this.zoomLevel,e=this.size_x1.w,n={top:1,right:6,bottom:3,left:6};return n.right+n.left>.4*this.size_x1.w&&(n.left=(e=.4*e)/2,n.right=e/2),n.top*=t,n.right*=t,n.bottom*=t,n.left*=t,n},enumerable:!1,configurable:!0}),a.prototype.setFlagWithValidationError=function(){this.hasErrorCssClass||(this.dom.addClass("canvas-object--has-validation-errors"),this.hasErrorCssClass=!0)},a.prototype.clearFlagWithValidationError=function(){this.hasErrorCssClass&&(this.dom.removeClass("canvas-object--has-validation-errors"),this.hasErrorCssClass=!1)},a.prototype.notifyListenersOfChange=function(){this.triggerCustomEvent("form:input:change",{canvasObject:this})},a.prototype.didFormValueChanged=function(){return this.initialExportValue!==this.exportValue},a);function a(){var t=null!==o&&o.apply(this,arguments)||this;return t.prevFormObject=null,t.nextFormObject=null,t.calculatedWidgetSizeAndCoords_x1=null,t.groupElements=[],t.hasErrorCssClass=!1,t}e.FormBase=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomString=void 0,e.randomString=function(t,e){void 0===e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXY");for(var n="",i=t=void 0===t?30:t;0<i;--i)n+=e[Math.floor(Math.random()*e.length)];return n}},,,,,,,,,,,,,,,,,function(t,u,d){"use strict";!function(r,a){Object.defineProperty(u,"__esModule",{value:!0}),u.AssetsManager=void 0;var s,t=d(77),e=d(115),i=d(101),l=d(7),n=d(63),o=((o=s=s||{})[o.pageNum=0]="pageNum",o[o.x=1]="x",o[o.y=2]="y",o[o.XWidth=3]="XWidth",o[o.fontName=4]="fontName",o[o.fontSize=5]="fontSize",o[o.textCount=6]="textCount",o[o.text=7]="text",c.getInstance=function(){return c.instance},c.prototype.getStaticTextsForPage=function(t){var n=this,o=this.workerServer+("/v1/pdfrender/text/"+this.taskId+"/"+this.serverFilename+"/"+t+"?token="+window.ilovepdfConfig.token);return new Promise(function(e,i){r.get(o).done(function(t){return e(n.textRequestToObject(t))}).fail(function(t,e,n){return i(n)})})},c.fontsForWritingSystems=function(t,e){void 0===e&&(e=!0);var n,i=null,o={},r=(1===t.length?(i=l.Lang.fontsForWritingSystem(t[0]),"latin"===t[0]&&i.concat(l.Lang.fontsForWritingSystem("indic"))):"latin,indic"===t.join(",")&&(i=l.Lang.fontsForWritingSystem("indic")),i=i||l.Lang.fontsForWritingSystem("unknown"),e&&i.forEach(function(t){l.Lang.loadFont(t)}),a.extend({},l.Lang.getFontsInfo()));for(n in delete r.impact,r)o[n]={enabled:i.includes(n),human_name:r[n]["human-name"]};return o},c.prototype.textRequestToObject=function(t){var i=[],o=this.pointsToPixels;return t.forEach(function(t){var e,n=t[s.text];n.trim().length<=0||(e={x_inPts:Number(t[s.x]),y_inPts:Number(t[s.y]),XWidth_inPts:Number(t[s.XWidth]),fontSize_inPts:Number(t[s.fontSize])},t={x:o(e.x_inPts),y:o(e.y_inPts),XWidth:o(e.XWidth_inPts),fontSize:o(e.fontSize_inPts),pageNum:Number(t[s.pageNum]),textCount:Number(t[s.textCount]),fontName:t[s.fontName],text:n,x_inPts:e.x_inPts,y_inPts:e.y_inPts,XWidth_inPts:e.XWidth_inPts,fontSize_inPts:e.fontSize_inPts},i.push(t))}),i},c.prototype.upload=function(t){if(!t.extractSvg())throw"[Editpdf][AssetsManager] Do not know how to upload CanvasObject type '"+t.type+"'";this.uploadSvg(t),this.numFilesUploaded++},c.prototype.uploadSvg=function(t){for(var e=t.id+".svg",n=t.extractSvg(),i=this.domElementToString(n),o=i.length,r=new Uint8Array(o);o--;)r[o]=i.charCodeAt(o);n=new Blob([r]);t.bag.uploader||(t.bag.uploader={}),(this.uploadedObjects[e]=t).bag.uploader.uploaderName="AssetsManager",t.bag.uploader.filename=e,t.bag.uploader.uploaded=!1,this.uploader.uploader.addFile(n,e)},c.prototype.allFilesHaveBeenAddedToUploader=function(){return this.uploader.files.files.length===this.numFilesUploaded},c.prototype.pointsToPixels=function(t){return t*(1/.75)},Object.defineProperty(c.prototype,"taskId",{get:function(){return this.optsManager.processManager.taskId},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"serverFilename",{get:function(){return this.optsManager.pdfFile.server_filename.replace(".pdf","")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"workerServer",{get:function(){return this.optsManager.workerServer},enumerable:!1,configurable:!0}),c.prototype.domElementToString=function(t){var e=t.cloneNode(!0),t=document.createElement("div");if(t.appendChild(e),n.isIE11())for(;e.getAttribute("xmlns");)e.removeAttribute("xmlns");return t.innerHTML.replace(/<\/svg><\/svg>/g,"</svg>")},Object.defineProperty(c.prototype,"pdfFile",{get:function(){return this.optsManager.pdfFile},enumerable:!1,configurable:!0}),c.prototype.initAssetsUploader=function(){this.files=new t.FileStack,this.uploader=new e.PluploadUpload(this.pluploadInitParams)},c.prototype.changeServer=function(t){},c.prototype.timeout=function(){},c.prototype.checkLimits=function(t,e){return t},c.prototype.fileUploaded=function(t,e){this.files.updateFile(t,e);e=this.files.getFile(t),t=this.uploadedObjects[e.name];t.bag.uploader.server_filename=e.server_filename,t.bag.uploader.uploaded=!0},c.prototype.fileAdded=function(t,e,n){return Promise.resolve()},Object.defineProperty(c.prototype,"pluploadInitParams",{get:function(){var t=window,e=r("<div id='editpdf--assets_manager'></div>"),n=r("<button id='editpdf--assets_manager--btn'></div>");return e.append(n),e.css("display","none"),r("body").append(e),{id:n.attr("id"),container:e.attr("id"),optionsManager:this,config:new i.Config({tool:"editpdf",subtool:"editpdf",config:{editpdf:{mimeTypes:[{title:"svgs",extensions:"svg"}],multiSelection:!1}}}),files:this.files,workerServer:t.ilovepdf.processManager.workerServer,tool:"editpdf",servers:[],token:t.ilovepdf.processManager.token,taskId:t.ilovepdf.processManager.taskId,ignoreFiles:!0}},enumerable:!1,configurable:!0}),c.prototype.fileChanged=function(t){},c.instance=null,c);function c(t){this.numFilesUploaded=0,this.uploadedObjects={},this.optsManager=t,this.initAssetsUploader(),(c.instance=this).limits=t.limits}u.AssetsManager=o}.call(this,d(1),d(1))},function(t,e,n){"use strict";!function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.Viewbar=void 0;function t(t){var o=this;this.cleanupFunctions=[],this.userCallbacks={},this.name=null,this.getPageNumber=function(){var t=o.viewbar;if(t)return t=t.pageSelector,Number(t.input.value);throw new Error("Viewbar is not mounted")},this.setPageNumber=function(t,e){var n=o.viewbar;if(!n)throw new Error("Viewbar is not mounted");n=n.pageSelector;n.input.value=String(t),n.text.innerText=String(e)},this.on=function(t,e){o.userCallbacks[t]=e},this.handler=function(t){var e=t.currentTarget,n=e.dataset.name;if(n in o.userCallbacks)switch(n){case"prev-page":case"next-page":case"unzoom":case"zoom":return(0,o.userCallbacks[n])();case"fit-viewport":return(0,o.userCallbacks[n])(e.dataset.value);case"page-selector":return(0,o.userCallbacks["page-selector"])(e.value);case"zoom-input":return(0,o.userCallbacks["zoom-input"])(e.value);default:throw new Error("Unknown element "+n)}},this._pageLayout="Single",this.setPageLayout=function(t){if(!o.viewbar)throw new Error("Viewbar is not mounted");o._pageLayout=t,o.changePageLayoutActiveElement(t)},this.setFitViewport=function(t){var e=o.viewbar;if(!e)throw new Error("Viewbar is not mounted");e.fitViewportBtn.querySelectorAll("[data-value]").forEach(function(t){return t.style.display="none"}),e.fitViewportBtn.dataset.value=t,e.fitViewportBtn.querySelector("[data-value="+t+"]").style.display=""},this.setZoom=function(t){var e=o.viewbar;if(!e)throw new Error("Viewbar is not mounted");var n,t=t%1!=0?t.toFixed(2):String(t),t=String(Number(t)),i=(t=t,i=o.mountOpts.zoomValueConverter,i=Number(t)/(n=Number(t),i?i(n):n),n=(Number(t)*i*100).toFixed(2),{value:t,displayText:String(Number(n))+"%"});e.zoomInput.dataset.value=i.value,e.zoomInput.value=i.displayText},this.changePageLayoutActiveElement=function(t){var e=o.mountPoint.querySelector(".viewbar__tooltip"),n=e.querySelector("[data-value].viewbar-btn--js-active");n&&n.classList.remove("viewbar-btn--js-active"),e.querySelector("[data-value='"+t+"']").classList.add("viewbar-btn--js-active")},this.name=t}Object.defineProperty(t.prototype,"element",{get:function(){var t;return null==(t=null==this?void 0:this.viewbar)?void 0:t.element},enumerable:!1,configurable:!0}),t.prototype.getCurrentZoomLevel=function(){var t=this.viewbar.zoomInput;return Number(t.dataset.value)},t.prototype.mount=function(t,e){if(void 0===e&&(e={}),this.mountPoint)throw new Error("[Viewbar] Is already mounted!");this.mountOpts=e,this.mountPoint=t,this.viewbar=this.createNewViewbar(),this.mountPoint.appendChild(this.viewbar.element),this.viewbar.element.querySelectorAll(".tooltip").forEach(function(t){t.ownerDocument.defaultView.tootip.init(t)}),this.initChangeLayout()},t.prototype.isMounted=function(){return!!this.mountPoint},t.prototype.unmount=function(){if(this.attached&&this.detach(),!this.mountPoint)throw new Error("[Viewbar] Cannot unmount if not mounted!");this.mountPoint.removeChild(this.viewbar.element),this.viewbar=null,this.mountPoint=null},t.prototype.attach=function(){var i=this;if(this.attached)throw new Error("[Viewbar] Already attached!");if(!this.mountPoint)throw new Error("[Viewbar] You have to mount first");this.attached=!0;this.mountPoint;function t(t,e,n){e.addEventListener(t,n),i.cleanupFunctions.push(function(){return e.removeEventListener(t,n)})}var e=this.viewbar;t("click",e.fitViewportBtn,this.handler),t("click",e.nextPageBtn,this.handler),t("click",e.prevPageBtn,this.handler),t("click",e.zoomInBtn,this.handler),t("click",e.zoomOutBtn,this.handler),t("change",e.zoomInput,this.handler),t("change",e.pageSelector.input,this.handler)},t.prototype.detach=function(){if(!this.attached)throw new Error("[Viewbar] Cannot detach unless it was previously attached!");this.attached=!1,this.cleanupFunctions.forEach(function(t){return t()}),this.cleanupFunctions=[],this.userCallbacks={}},t.prototype.createNewViewbar=function(){var t="editpdf",t=o((t=t,this.mountOpts,'\n        <div class="viewbar font-graphik">\n            <button data-title="'+e("tooltip_navPageUp")+'" class="tooltip viewbar-prev-page viewbar-btn" data-name=\'prev-page\'>\n                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.2367 13.8721C8.95805 14.1633 8.49608 14.1735 8.20485 13.8949C7.91362 13.6162 7.90341 13.1542 8.18206 12.863L11.6827 9.20428C11.9701 8.90391 12.4499 8.90391 12.7373 9.20428L16.2379 12.863C16.5166 13.1542 16.5064 13.6162 16.2152 13.8949C15.9239 14.1735 15.4619 14.1633 15.1833 13.8721L12.21 10.7645L9.2367 13.8721Z" fill="#F5F5FA"/></svg>\n            </button>\n            <button data-title="'+e("tooltip_navPageDown")+'" class="tooltip viewbar-next-page viewbar-btn" data-name=\'next-page\'>\n                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7633 10.1279C15.0419 9.8367 15.5039 9.8265 15.7952 10.1051C16.0864 10.3838 16.0966 10.8458 15.8179 11.137L12.3173 14.7957C12.0299 15.0961 11.5501 15.0961 11.2627 14.7957L7.76206 11.137C7.48341 10.8458 7.49362 10.3838 7.78485 10.1051C8.07608 9.8265 8.53805 9.8367 8.8167 10.1279L11.79 13.2355L14.7633 10.1279Z" fill="#F5F5FA"/></svg>\n            </button>\n            \n            <div class="viewbar__item viewbar__item--gap-sm font-graphik">\n                <input type=\'text\' class="viewbar-input" data-name=\'page-selector\' style="width: 65px" />\n                <span>/</span>\n                <span data-name=\'num-pages\'></span>\n            </div>\n            <div class="viewbar-divisor viewbar-divisor--both"></div>\n            <div class="viewbar__item">\n                <button id="'+t+'-unzoom" data-title="'+e("tooltip_zoomOut")+'" class="tooltip viewbar-btn" data-name=\'unzoom\'>\n                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M15.5 11.5C15.7761 11.5 16 11.7612 16 12.0833C16 12.3697 15.8231 12.6079 15.5899 12.6573L15.5 12.6667H8.5C8.22386 12.6667 8 12.4055 8 12.0833C8 11.797 8.17688 11.5588 8.41012 11.5094L8.5 11.5H15.5Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M21.5 12C21.5 17.2467 17.2467 21.5 12 21.5C6.75329 21.5 2.5 17.2467 2.5 12C2.5 6.75329 6.75329 2.5 12 2.5C17.2467 2.5 21.5 6.75329 21.5 12ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z" fill="currentColor"/> </svg>\n                </button>\n                <button id="'+t+'-zoom" data-title="'+e("tooltip_zoomIn")+'" class="tooltip viewbar-btn" data-name=\'zoom\'>\n                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.4903 8.41012C12.4409 8.17688 12.2027 8 11.9163 8C11.5942 8 11.333 8.22386 11.333 8.5V11.5H8.5L8.41012 11.5094C8.17688 11.5588 8 11.797 8 12.0833C8 12.4055 8.22386 12.6667 8.5 12.6667H11.333V15.5L11.3424 15.5899C11.3918 15.8231 11.63 16 11.9163 16C12.2385 16 12.4997 15.7761 12.4997 15.5V12.6667H15.5L15.5899 12.6573C15.8231 12.6079 16 12.3697 16 12.0833C16 11.7612 15.7761 11.5 15.5 11.5H12.4997V8.5L12.4903 8.41012Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M21.5 12C21.5 17.2467 17.2467 21.5 12 21.5C6.75329 21.5 2.5 17.2467 2.5 12C2.5 6.75329 6.75329 2.5 12 2.5C17.2467 2.5 21.5 6.75329 21.5 12ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z" fill="currentColor"/></svg>\n                </button>\n            </div>\n            <input type="text" id="editpdf-zoom-input" class="viewbar-input font-graphik" data-name="zoom-input" style="width: 85px" />\n            <div class="viewbar-fit-viewport" data-name=\'fit-viewport\' data-value="FitWidth">\n                <button data-title="'+e("tooltip_fitViewportWidth")+'" class="tooltip viewbar-btn" data-value="FitWidth">\n                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.7 12.4545H9.29999V11.5455H14.7V12.4545Z" fill="white"/>\n                        <path d="M18.9632 11.557C19.279 11.7539 19.279 12.2461 18.9632 12.443L15.4105 14.658C15.0948 14.8549 14.7 14.6088 14.7 14.215V9.78502C14.7 9.39124 15.0948 9.14514 15.4105 9.34202L18.9632 11.557Z" fill="white"/>\n                        <path d="M5.03683 12.4429C4.72104 12.246 4.72104 11.7538 5.03683 11.5569L8.58946 9.34192C8.90525 9.14504 9.29999 9.39115 9.29999 9.78492V14.2149C9.29999 14.6087 8.90525 14.8548 8.58946 14.6579L5.03683 12.4429Z" fill="white"/>\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M3.45 7C3.69853 7 3.9 7.20351 3.9 7.45455L3.9 16.5455C3.9 16.7965 3.69853 17 3.45 17C3.20147 17 3 16.7965 3 16.5455L3 7.45455C3 7.20351 3.20147 7 3.45 7Z" fill="white"/>\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M20.55 7C20.7985 7 21 7.20351 21 7.45455V16.5455C21 16.7965 20.7985 17 20.55 17C20.3015 17 20.1 16.7965 20.1 16.5455V7.45455C20.1 7.20351 20.3015 7 20.55 7Z" fill="white"/>\n                    </svg>\n                </button>\n                <button data-title="'+e("tooltip_fitViewportAll")+'" class="tooltip viewbar-btn" data-value="FitPage" style="display: none">\n                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M12.4545 9.30001L12.4545 14.7H11.5455L11.5455 9.30001H12.4545Z" fill="white"/>\n                        <path d="M11.557 5.03683C11.7539 4.72104 12.2461 4.72104 12.443 5.03683L14.658 8.58946C14.8549 8.90525 14.6088 9.29999 14.215 9.29999H9.78502C9.39124 9.29999 9.14513 8.90525 9.34202 8.58946L11.557 5.03683Z" fill="white"/>\n                        <path d="M12.4429 18.9632C12.246 19.279 11.7538 19.279 11.5569 18.9632L9.34192 15.4105C9.14504 15.0947 9.39115 14.7 9.78492 14.7H14.2149C14.6087 14.7 14.8548 15.0947 14.6579 15.4105L12.4429 18.9632Z" fill="white"/>\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M7 20.55C7 20.3015 7.20351 20.1 7.45455 20.1H16.5455C16.7965 20.1 17 20.3015 17 20.55C17 20.7985 16.7965 21 16.5455 21H7.45455C7.20351 21 7 20.7985 7 20.55Z" fill="white"/>\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M7 3.45C7 3.20147 7.20351 3 7.45455 3H16.5455C16.7965 3 17 3.20147 17 3.45C17 3.69853 16.7965 3.9 16.5455 3.9H7.45455C7.20351 3.9 7 3.69853 7 3.45Z" fill="white"/>\n                    </svg>\n                </button>\n            </div>\n            <div class="viewbar-page-layout viewbar__tooltip-parent" data-name=\'page-layout\'>\n                <button class="viewbar-btn">\n                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 20H18C18.2761 20 18.5 19.7761 18.5 19.5V8.32843C18.5 8.19582 18.4473 8.06864 18.3536 7.97487L14.5251 4.14645C14.4314 4.05268 14.3042 4 14.1716 4H6C5.72386 4 5.5 4.22386 5.5 4.5V19.5C5.5 19.7761 5.72386 20 6 20ZM6 2.5C4.89543 2.5 4 3.39543 4 4.5V19.5C4 20.6046 4.89543 21.5 6 21.5H18C19.1046 21.5 20 20.6046 20 19.5V8.32843C20 7.79799 19.7893 7.28929 19.4142 6.91421L15.5858 3.08579C15.2107 2.71071 14.702 2.5 14.1716 2.5H6Z" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.4707 13C15.4707 13.153 15.4568 13.297 15.4383 13.441L16.4145 14.1835C16.5024 14.251 16.5255 14.3725 16.47 14.4715L15.5447 16.0285C15.4892 16.1275 15.3689 16.168 15.2625 16.1275L14.1106 15.6775C13.87 15.853 13.611 16.006 13.3288 16.1185L13.153 17.311C13.1391 17.419 13.0419 17.5 12.9263 17.5H11.0758C10.9601 17.5 10.863 17.419 10.8491 17.311L10.6733 16.1185C10.3911 16.006 10.132 15.8575 9.89146 15.6775L8.73952 16.1275C8.63775 16.1635 8.51284 16.1275 8.45732 16.0285L7.53207 14.4715C7.47656 14.3725 7.49969 14.251 7.58759 14.1835L8.56373 13.441C8.54522 13.297 8.53134 13.1485 8.53134 13C8.53134 12.8515 8.54522 12.703 8.56373 12.559L7.58759 11.8165C7.49969 11.749 7.47193 11.6275 7.53207 11.5285L8.45732 9.9715C8.51284 9.8725 8.63312 9.832 8.73952 9.8725L9.89146 10.3225C10.132 10.147 10.3911 9.994 10.6733 9.8815L10.8491 8.689C10.863 8.581 10.9601 8.5 11.0758 8.5H12.9263C13.0419 8.5 13.1391 8.581 13.153 8.689L13.3288 9.8815C13.611 9.994 13.87 10.1425 14.1106 10.3225L15.2625 9.8725C15.3643 9.8365 15.4892 9.8725 15.5447 9.9715L16.47 11.5285C16.5255 11.6275 16.5024 11.749 16.4145 11.8165L15.4383 12.559C15.4568 12.703 15.4707 12.847 15.4707 13ZM10.3817 13.0001C10.3817 13.8686 11.108 14.5751 12.0009 14.5751C12.8938 14.5751 13.6201 13.8686 13.6201 13.0001C13.6201 12.1316 12.8938 11.4251 12.0009 11.4251C11.108 11.4251 10.3817 12.1316 10.3817 13.0001Z" fill="currentColor"/></svg>\n                </button>\n                <div class="viewbar__tooltip" style="display: flex">\n                    <button data-title="'+e("tooltip_layoutSinglePage")+'" class="tooltip editpdf-viewbar-btn" data-value="Single"><svg width="30" height="32" viewBox="0 0 30 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.6131 7.16314L21.8438 10.5381C21.9446 10.6443 22.0008 10.788 22 10.9375V23.3125C22 24.2445 21.2768 25 20.3846 25H9.61538C8.72322 25 8 24.2445 8 23.3125V8.68752C8 7.75552 8.72322 7.00002 9.61538 7.00002H18.2308C18.3739 6.99917 18.5115 7.05785 18.6131 7.16314ZM20.3846 23.875C20.682 23.875 20.9231 23.6232 20.9231 23.3125V11.5H18.7692C18.1745 11.5 17.6923 10.9963 17.6923 10.375V8.12502H9.61538C9.31798 8.12502 9.07692 8.37684 9.07692 8.68752V23.3125C9.07692 23.6232 9.31798 23.875 9.61538 23.875H20.3846Z" fill="#F5F5FA"/></svg></button>\n                    <button data-title="'+e("tooltip_layoutDoublePage")+'" class="tooltip editpdf-viewbar-btn" data-value="Double"><svg width="46" height="32" viewBox="0 0 46 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M34.6131 7.16314L37.8438 10.5381C37.9446 10.6443 38.0008 10.788 38 10.9375V23.3125C38 24.2445 37.2768 25 36.3846 25H25.6154C24.7232 25 24 24.2445 24 23.3125V8.68752C24 7.75552 24.7232 7.00002 25.6154 7.00002H34.2308C34.3739 6.99917 34.5115 7.05785 34.6131 7.16314ZM36.3846 23.875C36.682 23.875 36.9231 23.6232 36.9231 23.3125V11.5H34.7692C34.1745 11.5 33.6923 10.9963 33.6923 10.375V8.12502H25.6154C25.318 8.12502 25.0769 8.37684 25.0769 8.68752V23.3125C25.0769 23.6232 25.318 23.875 25.6154 23.875H36.3846Z" fill="#F5F5FA"/><path fill-rule="evenodd" clip-rule="evenodd" d="M18.6131 7.16314L21.8438 10.5381C21.9446 10.6443 22.0008 10.788 22 10.9375V23.3125C22 24.2445 21.2768 25 20.3846 25H9.61538C8.72322 25 8 24.2445 8 23.3125V8.68752C8 7.75552 8.72322 7.00002 9.61538 7.00002H18.2308C18.3739 6.99917 18.5115 7.05785 18.6131 7.16314ZM20.3846 23.875C20.682 23.875 20.9231 23.6232 20.9231 23.3125V11.5H18.7692C18.1745 11.5 17.6923 10.9963 17.6923 10.375V8.12502H9.61538C9.31798 8.12502 9.07692 8.37684 9.07692 8.68752V23.3125C9.07692 23.6232 9.31798 23.875 9.61538 23.875H20.3846Z" fill="#F5F5FA"/></svg></button>\n                    <button data-title="'+e("tooltip_layoutCoverPage")+'" class="tooltip editpdf-viewbar-btn" data-value="Cover"><svg width="46" height="32" viewBox="0 0 46 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M34.6131 7.16314L37.8438 10.5381C37.9446 10.6443 38.0008 10.788 38 10.9375V23.3125C38 24.2445 37.2768 25 36.3846 25H25.6154C24.7232 25 24 24.2445 24 23.3125V8.68752C24 7.75552 24.7232 7.00002 25.6154 7.00002H34.2308C34.3739 6.99917 34.5115 7.05785 34.6131 7.16314ZM36.3846 23.875C36.682 23.875 36.9231 23.6232 36.9231 23.3125V11.5H34.7692C34.1745 11.5 33.6923 10.9963 33.6923 10.375V8.12502H25.6154C25.318 8.12502 25.0769 8.37684 25.0769 8.68752V23.3125C25.0769 23.6232 25.318 23.875 25.6154 23.875H36.3846Z" fill="#F5F5FA"/><path d="M8.50002 8.68752C8.50002 8.05151 8.96132 7.55961 9.51047 7.50517L9.62651 7.50001L20.3846 7.5C20.9803 7.5 21.5 8.01085 21.5 8.68752V23.3125C21.5 23.9485 21.0387 24.4404 20.4895 24.4948L20.3735 24.5L9.61541 24.5C9.01973 24.5 8.5 23.9891 8.5 23.3125L8.50002 8.68752Z" fill="#F5F5FA" stroke="#F5F5FA"/></svg></button>\n                </div>\n            </div>\n        </div>\n        '))[0];function e(t){var e=window;if(!("iloveLang"in e))throw new Error("iloveLang not found in window");if(t in e.iloveLang)return e.iloveLang[t];throw new Error("translation key '"+t+"' not found in object iloveLang")}var n=t.querySelector("[data-name='page-selector']"),i=n.parentElement.querySelector("[data-name='num-pages']");return{element:t,prevPageBtn:t.querySelector(".viewbar-prev-page"),nextPageBtn:t.querySelector(".viewbar-next-page"),zoomInBtn:t.querySelector("#editpdf-unzoom"),zoomOutBtn:t.querySelector("#editpdf-zoom"),zoomInput:t.querySelector("[data-name='zoom-input']"),fitViewportBtn:t.querySelector(".viewbar-fit-viewport"),pageLayoutBtn:t.querySelector(".viewbar-page-layout"),pageSelector:{input:n,text:i}}},t.prototype.initChangeLayout=function(){var o=this,r=this.mountPoint.querySelector(".viewbar__tooltip-parent[data-name='page-layout']");r.addEventListener("click",function(t){var t=t.target,e="viewbar__tooltip-parent--jsactive",n=(t.classList.contains("viewbar__tooltip")||t.closest(".viewbar__tooltip")||(r.classList.contains(e)?r.classList.remove(e):r.classList.add(e)),t.closest("[data-value]")),i=null;t.hasAttribute("data-value")?i=t:n&&(i=n),i&&(t=i.getAttribute("data-value"),o.setPageLayout(t),(n=o.userCallbacks["page-layout"])&&n(t),r.classList.remove(e))}),this.changePageLayoutActiveElement(this._pageLayout)},e.Viewbar=t}.call(this,n(1))},,,,function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},p=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},h=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.TrueEditIntegration=void 0,n(344)),f=n(348),s=n(352),l=n(255),c=r(n(15)),u=n(260),v=n(7);function d(t){var c=this,e=t.thumbnailsPanel,t=t.toolMenu;this.attached=!1,this.trueEdit=null,this.cleanupCalls=[],this.file=null,this._changesMade=!1,this.je_numAttempts=1,this._renderThumbnailPages=null,this._jumpToThumbnail=null,this.annotationChangedCallback=function(){},this.onAnnotationChanged=function(t){c.annotationChangedCallback=t},this.onUserMadeChanges=function(t){c._onUserMadeChangesCallback=t},this.boxEditorOnChange_callback=function(s){return p(c,void 0,void 0,function(){var e,n,i,o,r,a;return h(this,function(t){switch(t.label){case 0:if(n=s.evtType,s.ref,s.annotations,e=s.textAttributes,s.element,a=s.contentEditElement,"start"===n)return[2];if("end"===n)return!1===this.trueEdit.definitiveConfig.enableHotkeys&&this.trueEdit.disableHotkeys(),[2];if("contentEditAvailable"===n)return a.addEventListener("keydown",function(t){"Delete"===t.key&&(t.stopPropagation(),t.preventDefault())},!0),[2];if(!e)return[2];if(0===e.fontColors.length||0===e.fontNames.length)return[2];if(n=function(t){return t?"true":"false"},(i=this.textOptionsMenu)||(i=this.textOptionsMenu=new f.TextOptionsMenu,this._toolMenu.toggleShowSubmenu(!0,i)),!e)throw new Error("[Box Editor] Text attributes not found");if(o=null,e.textAlign)switch(r=e.textAlign){case"Start":case"Left":o="left";break;case"Center":o="center";break;case"End":case"Right":o="right";break;case"Justify":o="justify";break;default:throw new Error("Impossible to figure out Text Align: "+r)}return a=e.fontNames[0].fontName,[4,function(){return Promise.resolve(0<Object.values(i.blocks).length)}()];case 1:return t.sent()||(i=i||(this.textOptionsMenu=new f.TextOptionsMenu),this._toolMenu.toggleShowSubmenu(!0,i),this.initTextOptionsMenu(this.textOptionsMenu,e))||this._toolMenu.toggleShowSubmenu(!1),e.fontColor,e.fontSize,i.blocks[f.TextOption.Bold].set(n(e.bold)),i.blocks[f.TextOption.Italic].set(n(e.italic)),i.blocks[f.TextOption.Underline].set(n(e.underline)),i.blocks[f.TextOption.FontSize].set(e.fontSize),o&&i.blocks[f.TextOption.TextAlign].set(o),i.blocks[f.TextOption.TextColor].set(e.fontColor),i.blocks[f.TextOption.Font].set(a),i.blocks[f.TextOption.Bold].toggleLock(!1),i.blocks[f.TextOption.Italic].toggleLock(!1),i.blocks[f.TextOption.Underline].toggleLock(!1),[2]}})})},this.thumbnailsPanel_pageClick=function(){function t(t){var e;c.attached&&(e=t.target,t.currentTarget,t=null,e.dataset.page?t=Number(e.dataset.page):(e=e.closest("[data-page]"))&&(t=Number(e.dataset.page)),t)&&n.setCurrentPage(t,!1,void 0)}var e=c.thumbnailsPanel,n=c.trueEdit;c.cleanupCalls.push(function(){return e.removeEventListener("click",t)}),e.addEventListener("click",t)},this.thumbnailsPanel_trackActivePage=function(){function t(t){var e=i.querySelector(".preview__page.active"),n=i.querySelector('[data-page="'+t+'"]');e&&e.classList.remove("active"),n&&n.classList.add("active"),o&&(window.clearInterval(o),o=null),o=window.setTimeout(function(){c.trueEdit.viewBar.setPageNumber(t,c.trueEdit.getPageCount()),a(t),r&&(window.clearInterval(o),r=null)},50)}var i=c.thumbnailsPanel,e=c.trueEdit,o=null,r=null,a=function(t){c._renderThumbnailPages&&c._renderThumbnailPages(t),c._jumpToThumbnail(t,!0)};t(e.getCurrentPage()),e.addEventListener("pageNumberUpdated",t)},this.getCurrentPageNumber=function(){return c.trueEdit.getCurrentPage()},this.init_MainMenu_ToolClick=function(){var r=c._toolMenu;r.addEventListener("onToolClick",function(t,e,n){var i=c.trueEdit,o=r.isToolSelected(e);r.toggleSelectTool(e,!o),o?i.selectTool(l.TOOL.Default):i.selectTool(e)})},this.getSelectedAnnotation=function(){return c.trueEdit.instance.Core.annotationManager.getSelectedAnnotations()[0]},this.getSelectedAnnotationList=function(){return c.trueEdit.instance.Core.annotationManager.getSelectedAnnotations()},this.getActiveTextProps=function(o){return p(c,void 0,void 0,function(){var e,n,i;return h(this,function(t){switch(t.label){case 0:if(e=this.trueEdit.instance.Core.documentViewer.getContentEditManager(),!o)return[2,null];if(n=u.queryObjectProp(o,"contentEditBoxId",{ownPropertiesOnly:!0}),i=n.value,n.foundPath)return[4,e.getContentBoxAttributes(i)];throw new Error("'contentEditBoxId' not found in any object");case 1:return[2,t.sent()]}})})},this.waitForEffectToTakePlace=function(s,l,i){return p(c,void 0,void 0,function(){var e,o,n,r,a=this;return h(this,function(t){switch(t.label){case 0:return e=Date.now(),o=function(){return(Date.now()-e)/1e3},[4,this.getActiveTextProps(s)];case 1:return(n=t.sent())?(r=n[l],[4,i()]):[2,!1];case 2:return t.sent(),[2,new Promise(function(n,t){var i=window.setInterval(function(){return p(a,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,this.getActiveTextProps(s)];case 1:return(e=t.sent())||n(!1),e=e[l],5<o()?(window.clearInterval(i),n(!1)):r!==e&&(window.clearInterval(i),window.setTimeout(function(){n(!0)},500)),[2]}})})},50)})]}})})},this.initTextOptionsMenu=function(u,d){return p(c,void 0,void 0,function(){var e,i,o,r,a,s,l,n,c=this;return h(this,function(t){if(e=(n=this).getSelectedAnnotationList,i=n.waitForEffectToTakePlace,o=function(){return f.TextOptionsMenu.globalId===u.id},r=this.trueEdit.instance,a=this.trueEdit.getContentBoxEditor())return s=e(),l=s[0],function(r,a,s){return p(this,void 0,void 0,function(){var e,n,i,o;return h(this,function(t){if(r.instance,o=function(t){return t?"true":"false"},!(e=s))return[2,!1];if(0===e.fontColors.length||0===e.fontNames.length)return[2,!1];if(n=null,e.textAlign)switch(i=e.textAlign){case"Start":case"Left":n="left";break;case"Center":n="center";break;case"End":case"Right":n="right";break;case"Justify":n="justify";break;default:throw new Error("Impossible to figure out Text Align: "+i)}return a.blocks[f.TextOption.Bold].set(o(e.bold)),a.blocks[f.TextOption.Italic].set(o(e.italic)),a.blocks[f.TextOption.Underline].set(o(e.underline)),a.blocks[f.TextOption.FontSize].set(e.fontSize),n&&a.blocks[f.TextOption.TextAlign].set(n),a.blocks[f.TextOption.TextColor].set(e.fontColor),(o=e.fontName)?a.blocks[f.TextOption.Font].set(o):a.blocks[f.TextOption.Font].set(e.fontNames[0].fontName),[2,!0]})})}(this.trueEdit,u,d)?(u.setAllTooltips(((n={})[f.TextOption.Bold]=v.Lang.t("tooltip_textBold"),n[f.TextOption.Italic]=v.Lang.t("tooltip_textItalic"),n[f.TextOption.Underline]=v.Lang.t("tooltip_textUnderline"),n[f.TextOption.TextAlign]=v.Lang.t("tooltip_textAlign"),n[f.TextOption.TextColor]=v.Lang.t("tooltip_textColor"),n[f.TextOption.RemoveAnnotation]=v.Lang.t("tooltip_removeLayer"),n)),u.onChange(f.TextOption.Bold,function(t){return p(c,void 0,void 0,function(){var e,n=this;return h(this,function(t){switch(t.label){case 0:return o()?a.isActive()?(r.Core.ContentEdit.toggleBoldContents(s[0]),this.changesMade=!0,[2]):(u.blocks[f.TextOption.Bold].toggleLock(!0),[4,i(l,"bold",function(){return p(n,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,r.Core.ContentEdit.toggleBoldContents(s[0])];case 1:return t.sent(),[2]}})})})]):[2,!1];case 1:return(e=t.sent(),o())?(e&&null!=(e=u.blocks[f.TextOption.Bold])&&e.toggleLock(!1),this.changesMade=!0,[2]):[2,!1]}})})}),u.onChange(f.TextOption.Italic,function(t){return p(c,void 0,void 0,function(){var e,n=this;return h(this,function(t){switch(t.label){case 0:return o()?a.isActive()?(r.Core.ContentEdit.toggleItalicContents(s[0]),this.changesMade=!0,[2]):(u.blocks[f.TextOption.Italic].toggleLock(!0),[4,i(l,"italic",function(){return p(n,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,r.Core.ContentEdit.toggleItalicContents(s[0])];case 1:return t.sent(),[2]}})})})]):[2,!1];case 1:return(e=t.sent(),o())?(e&&null!=(e=u.blocks[f.TextOption.Italic])&&e.toggleLock(!1),this.changesMade=!0,[2]):[2,!1]}})})}),u.onChange(f.TextOption.Underline,function(t){return p(c,void 0,void 0,function(){var e,n=this;return h(this,function(t){switch(t.label){case 0:return o()?a.isActive()?(r.Core.ContentEdit.toggleUnderlineContents(s[0]),this.changesMade=!0,[2]):(u.blocks[f.TextOption.Underline].toggleLock(!0),[4,i(l,"underline",function(){return p(n,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,r.Core.ContentEdit.toggleUnderlineContents(s[0])];case 1:return t.sent(),[2]}})})})]):[2,!1];case 1:return(e=t.sent(),o())?(e&&null!=(e=u.blocks[f.TextOption.Underline])&&e.toggleLock(!1),this.changesMade=!0,[2]):[2,!1]}})})}),u.onChange(f.TextOption.Font,function(i){return p(c,void 0,void 0,function(){var e,n;return h(this,function(t){return this.changesMade=!0,n=this.trueEdit,e=n.instance,n=n.activeAnnotations,e.Core.ContentEdit.setContentFont(n[0],i),[2]})})}),u.onChange(f.TextOption.FontSize,function(i){return p(c,void 0,void 0,function(){var e,n;return h(this,function(t){switch(t.label){case 0:return this.changesMade=!0,n=this.trueEdit,e=n.instance,n=n.activeAnnotations,[4,e.Core.ContentEdit.setContentFontSize(n[0],i)];case 1:return t.sent(),[2]}})})}),u.onChange(f.TextOption.TextAlign,function(i){return p(c,void 0,void 0,function(){var e,n;return h(this,function(t){switch(t.label){case 0:return this.changesMade=!0,n=this.trueEdit,e=n.instance,n=n.activeAnnotations,[4,e.Core.ContentEdit.alignContents(n[0],i)];case 1:return t.sent(),[2]}})})}),u.onChange(f.TextOption.TextColor,function(i){return p(c,void 0,void 0,function(){var e,n;return h(this,function(t){switch(t.label){case 0:return this.changesMade=!0,n=this.trueEdit,e=n.instance,n=n.activeAnnotations,[4,e.Core.ContentEdit.setTextColor(n[0],i)];case 1:return t.sent(),[2]}})})}),this.textOptionsMenu.onChange(f.TextOption.RemoveAnnotation,function(t){return p(c,void 0,void 0,function(){var e,n,i,o;return h(this,function(t){return this.changesMade=!0,e=this.trueEdit,n=e.instance,i=e.activeAnnotations,(o=n.Core.annotationManager).deselectAnnotations(i),setTimeout(function(){o.deleteAnnotations(i)},100),[2]})})}),[2,!0]):[2,!1];throw new Error("ContentBoxEditor missing")})})},this._toolMenu=new s.ToolMenu(t.element,t.subElement),this.thumbnailsPanel=e}Object.defineProperty(d.prototype,"changesMade",{get:function(){return this._changesMade},set:function(t){var e=this._changesMade;this._changesMade=t,!1===e&&!0===t&&this._onUserMadeChangesCallback&&this._onUserMadeChangesCallback()},enumerable:!1,configurable:!0}),d.prototype.getTrueEditInstance=function(){return p(this,void 0,void 0,function(){var e,n,i;return h(this,function(t){if(0==="311f6ed".length)throw new Error("Resource version ID cannot be empty");if(0,e=this.trueEdit,!this.trueEdit){for(i in a.TrueEdit.setResourceId("311f6ed"),n=window.trueEdit_translations)n[i]=n[i].replace(/\<br\>/g,"\n");e=new a.TrueEdit("ILOVEPDF S.L.:OEM:iLovePDF::B+:AMS(20241231):0D57B7D31F1784D0D33352185F716F2C2292ECA0ED5C156968A76C928959BEF5C7",n),this.trueEdit=e}return[2,{trueEdit:e,webviewerPublicPath:"/trueedit_libpdf/311f6ed"}]})})},d.prototype.openFile=function(r,a){return p(this,void 0,void 0,function(){var e,n,i,o=this;return h(this,function(t){switch(t.label){case 0:if(!this.trueEdit)throw new Error("Missing TrueEdit");if(e=this.trueEdit,this.file===r)return[2,!0];n=!0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.openFileInstance(r,a)];case 2:return t.sent(),this.file=r,this._changesMade=!1,[3,4];case 3:return i=t.sent(),n=!1,c.captureException(i,function(t){return t.setExtra("msg","[TrueEdit] Error opening file"),t.setExtra("file_originalFilename",a),t.setExtra("sameFileOpened",o.trueEdit.isSameFile(r)?"true":"false"),t}),e.log("error","Error opening file",i),[3,4];case 4:return[2,n]}})})},d.prototype.closeFile=function(){return p(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:if(this.trueEdit)return[4,this.trueEdit.closeFile()];throw new Error("Missing TrueEdit");case 1:return t.sent(),this.changesMade=!1,this.file=null,[2]}})})},d.prototype.downloadFile=function(){return p(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:if(this.trueEdit)return[4,this.trueEdit.download()];throw new Error("Missing TrueEdit");case 1:return t.sent(),[2]}})})},d.prototype.getFileBlob=function(){return p(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.trueEdit.getFileBlob()];case 1:return[2,t.sent()]}})})},d.prototype.setContext=function(t){var e=t.zoom,n=t.pageNumber,t=t.pageLayout;if(!this.trueEdit)throw new Error("Missing TrueEdit");var i=this.trueEdit;t!==i.getPageLayoutMode()&&(i.changePageLayoutMode(t),i.viewBar.setPageLayout(t)),i.setCurrentPage(n,!1,void 0),i.zoomTo(e)},d.prototype.getContext=function(){var t;if(this.trueEdit)return{zoom:(t=this.trueEdit).getZoom(),pageNumber:t.getCurrentPage(),pageLayout:t.getPageLayoutMode()};throw new Error("Missing TrueEdit")},d.prototype.hasChanges=function(){return this.changesMade},d.prototype.attach=function(){var l,e=this;if(!this.attached){if(this.attached=!0,this.trueEdit)return l=this._toolMenu,this.trueEdit.switchToToolMode("trueEdit"),this.init_MainMenu_ToolClick(),this.thumbnailsPanel_trackActivePage(),this.thumbnailsPanel_pageClick(),this.trueEdit.addEventListener("annotationChanged",function(t,e,n){}),this.trueEdit.addEventListener("annotationSelected",function(s,t){return p(e,void 0,void 0,function(){var n,i,o,r,a;return h(this,function(t){switch(t.label){case 0:if(s[0],n=this.trueEdit.instance,a=this.getSelectedAnnotationList(),a.length,this.changesMade=!0,!(1===a.length))return l.toggleShowSubmenu(!1),[2];if(a=a[0],!("text"===a.getContentEditType()))return[2];if(null!=(a=this.trueEdit.getContentBoxEditor())&&a.isActive())return[2];if(!(a=n.Core.annotationManager.getSelectedAnnotations()[0]).isContentEditPlaceholder())return[2];if(r=n.Core.documentViewer.getContentEditManager(),a=u.queryObjectProp(a,"contentEditBoxId",{ownPropertiesOnly:!0}),i=a.value,a.foundPath)return[4,r.getContentBoxAttributes(i)];throw new Error("'contentEditBoxId' not found in any object");case 1:return(o=t.sent(),null!=(a=this.trueEdit.getContentBoxEditor())&&a.isActive())?[2]:(this.textOptionsMenu=new f.TextOptionsMenu,[4,n.Core.ContentEdit.getContentEditingFonts()]);case 2:return r=t.sent(),this.textOptionsMenu.setOptionConstructionValues({fonts:(e={},r.forEach(function(t){return e[t]=t}),e)}),l.toggleShowSubmenu(!0,this.textOptionsMenu),this.initTextOptionsMenu(this.textOptionsMenu,o)||l.toggleShowSubmenu(!1),[2]}var e})})}),this.trueEdit.getContentBoxEditor().onChange(this.boxEditorOnChange_callback),this.trueEdit.attach(),document.body.classList.contains("rtl")?(this.trueEdit.getWindow().document.querySelector("html").setAttribute("dir","rtl"),this.trueEdit.getWindow().document.body.classList.add("rtl")):(this.trueEdit.getWindow().document.querySelector("html").removeAttribute("dir"),this.trueEdit.getWindow().document.body.classList.remove("rtl")),this;throw new Error("Missing TrueEdit")}},d.prototype.toggleShow=function(t){this.trueEdit.toggleShow(t)},Object.defineProperty(d.prototype,"toolMenuInterface",{get:function(){var t=this;return{draw:function(){return t._toolMenu.draw()},attach:function(){return t._toolMenu.attach()},detach:function(){return t._toolMenu.detach()},undraw:function(){return t._toolMenu.undraw()}}},enumerable:!1,configurable:!0}),d.prototype.detach=function(){if(this.attached){var t;if(this.attached=!1,this.trueEdit)return t=this.trueEdit,this._toolMenu,t.detach(),this.cleanupCalls.forEach(function(t){return t()}),this.cleanupCalls=[],this;throw new Error("Missing TrueEdit")}},d.prototype.mount=function(o,r){return p(this,void 0,void 0,function(){var e,n,i;return h(this,function(t){switch(t.label){case 0:return[4,this.getTrueEditInstance()];case 1:if(n=t.sent(),e=n.trueEdit,n=n.webviewerPublicPath,this.trueEdit=e,this._toolMenu.draw(),e.isMounted())return[2,!0];this._renderThumbnailPages=r.renderThumbnailPages,this._jumpToThumbnail=r.jumpToThumbnail,e._jumpToThumbnail=this._jumpToThumbnail,t.label=2;case 2:return t.trys.push([2,4,,5]),[4,e.mount(o,n)];case 3:return t.sent(),[3,5];case 4:return i=t.sent(),c.captureException(i,function(t){return t.setExtra("msg","Trying to mount trueEdit but was impossible"),t.setExtra("exception",i),t}),[2,!1];case 5:return[2,!0]}})})},d.prototype.destroy=function(){return p(this,void 0,void 0,function(){var e,n;return h(this,function(t){switch(t.label){case 0:if(this.trueEdit)return e=(n=this)._toolMenu,n=n.trueEdit,e.undraw(),[4,n.closeFile()];throw new Error("Missing TrueEdit");case 1:return t.sent(),n.detach(),n.destroy(),[2,this]}})})},d.prototype.deselectAllAnnotations=function(){return p(this,void 0,void 0,function(){var e,n;return h(this,function(t){return n=this.trueEdit.instance,e=n.Core.annotationManager,n=n.Core.annotationManager.getSelectedAnnotations(),e.deselectAnnotations(n),[2]})})},e.TrueEditIntegration=d},,,,,,,,,,,,,,,,,,,,,,function(t,l,c){"use strict";!function(r){var i,e,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(l,"__esModule",{value:!0}),l.StandardControls=void 0,c(338)),s=c(221),n=c(473),m=c(291),y=c(290),b=c(288),w=c(289),n=(e=n.BasicControls,t(o,e),o.prototype.fetchControlsDom=function(){return r(this.getGizmoTemplate())},o.prototype.initControls=function(){e.prototype.initControls.call(this),this.hasResizingCapabilities()&&this.initAnchorResizing(),this.hideGizmo()},o.prototype.hasResizingCapabilities=function(){return!0},o.prototype.refreshGizmo=function(t){t=(t=void 0===t?null:t)||this.canvasObj.getGizmoSize(),this.setGizmoSize(t.w,t.h)},o.prototype.setGizmoSize=function(t,e){function n(t){return String(t)+"px"}var i=this.padding,t=t+2*i+2,e=e+2*i+2,o=t+10,r=e+10,a=(this.controlsDom.css({width:n(o),height:n(r)}),-(i+1+5)),i=-(i+1+5),a=(this.controlsDom.css({top:n(a),left:n(i)}),this.controlsDom.find(".surface-rect")),i=(a.attr("x",5),a.attr("y",5),a.attr("width",t),a.attr("height",e),a.css("stroke-width",String(1)),this.controlsDom.find(".anchor_top").attr("x",o/2-5),this.controlsDom.find(".anchor_top").attr("y",0),this.controlsDom.find(".anchor_top_left").attr("x",0),this.controlsDom.find(".anchor_top_left").attr("y",0),this.controlsDom.find(".anchor_top_right").attr("x",o-10),this.controlsDom.find(".anchor_top_right").attr("y",0),this.controlsDom.find(".anchor_left").attr("x",0),this.controlsDom.find(".anchor_left").attr("y",r/2-5),this.controlsDom.find(".anchor_right").attr("x",o-10),this.controlsDom.find(".anchor_right").attr("y",r/2-5),r-10);this.controlsDom.find(".anchor_bottom").attr("x",o/2-5),this.controlsDom.find(".anchor_bottom").attr("y",i),this.controlsDom.find(".anchor_bottom_left").attr("x",0),this.controlsDom.find(".anchor_bottom_left").attr("y",i),this.controlsDom.find(".anchor_bottom_right").attr("x",o-10),this.controlsDom.find(".anchor_bottom_right").attr("y",i)},o.prototype.enable=function(){return e.prototype.enable.call(this),this.enableResizing(),this},o.prototype.disable=function(){return e.prototype.disable.call(this),this.disableResizing(),this},o.prototype.showGizmo=function(t){return this.applyDomVisibilityProps(t=void 0===t?{}:t,!0,"visible"),this},o.prototype.hideGizmo=function(t){return this.applyDomVisibilityProps(t=void 0===t?{}:t,!1,"visible"),this},o.prototype.applyDomVisibilityProps=function(t,e,n){var i={container:e,anchors:e,rect:e,anchor:null};if(t.only){for(var o in i)i[o]=!e;i[t.only]=e}else if(t.except){for(var o in i)i[o]=e;i[t.except]=!e}else for(var o in i)i[o]=e;for(o in["anchors","rect"].some(function(t){return!0===i[t]})&&(i.container=!0),i.container?this.controlsDom.addClass("visible"):this.controlsDom.removeClass("visible"),i.anchor=i.anchors,delete i.anchors,i){var r=this.controlsDom.find("."+("rect"===o?"surface-rect":o));!0===i[o]?r.addClass(n):r.removeClass(n)}},o.prototype.enableResizing=function(){this.isResizingEnabled=!0,this.controlsDom.find(".anchor").addClass("enabled"),this.changeCursorTo(null)},o.prototype.disableResizing=function(){this.isResizingEnabled=!1,this.controlsDom.find(".anchor").removeClass("enabled"),this.changeCursorTo(null)},o.prototype.getGizmoTemplate=function(){return'\n    <svg id="'+this.domId+'" class=\'controls\' focusable="false">\n      <rect class="surface-rect" x="0" y="0"></rect>\n      <rect class="anchor anchor_top"          width="9" height="9" stroke-width="1" rx="2" ry="2"></rect>\n      <rect class="anchor anchor_top_left"     width="9" height="9" stroke-width="1" rx="2" ry="2"></rect>\n      <rect class="anchor anchor_top_right"    width="9" height="9" stroke-width="1" rx="2" ry="2"></rect>\n      <rect class="anchor anchor_right"        width="9" height="9" stroke-width="1" rx="2" ry="2"></rect>\n      <rect class="anchor anchor_left"         width="9" height="9" stroke-width="1" rx="2" ry="2"></rect>\n      <rect class="anchor anchor_bottom"       width="9" height="9" stroke-width="1" rx="2" ry="2"></rect>\n      <rect class="anchor anchor_bottom_left"  width="9" height="9" stroke-width="1" rx="2" ry="2"></rect>\n      <rect class="anchor anchor_bottom_right" width="9" height="9" stroke-width="1" rx="2" ry="2"></rect>\n    </svg>\n    '},o.prototype.reset=function(){},o.prototype.saveObjectState=function(){var t=this.canvasObj.getCoords(),e=this.canvasObj.getSize();this.savedState={coords:t,size:e}},o.prototype.clearSavedObjectState=function(){this.savedState=null},o.prototype.initAnchorResizing=function(){var i=this,t=this.controlsDom.find(".anchor"),o=this.canvasObj.controlAnchors;t.each(function(){var e=this,n=r(this),t=i.getAnchorName(n);-1===r.inArray(t,o)?n.remove():(n.mouseover(function(){var t=i.getAnchorName(n),e=n.attr("class").match(/cursor[^\s;]+/g),t="cursor-"+i.getAnchorCursor(t);e?t!=(e=e[0])&&(n.removeClass(e),n.addClass(t)):n.addClass(t)}),new a.Draggable(n,{mouseButton:s.MOUSE.LeftClick,onDragBegFn:function(t){i.saveObjectState()},onDragEndFn:function(t){i.isResizing&&(i.triggerEvent("resize:end",{anchor:n,stateBeforeDrag:i.savedState}),i.isResizing=!1,i.clearSavedObjectState()),e.inFrame=!1}},function(t){i.isResizing||(i.isResizing=!0,i.avoidTriggeringClickEvent=!0,i.triggerEvent("resize:begin")),i.doResize(n,t)}))})},o.prototype.getAnchorName=function(t){t=t.attr("class").split(/anchor_([^\s]+)\s?/)[1];if(t)return t;throw"Anchor name not found"},o.prototype.doResize=function(t,e){this.inFrame=!0,isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0);var n,i,o,r,a,s,l,c,u,d,p,h,f,v,g=new y.Viewport(b.Editor.viewport,e.mouseEvent).getPageCoords();null===g||g.isOutsidePage||(g=w.MouseUtils.getHomogeneousCoords(e.mouseEvent,"screen"),a=w.MouseUtils.getHomogeneousCoords(e.startingMouseEvent,"screen"),n=this.getAnchorName(t),n=this.getAnchorCoordFrame(n),v=this.canvasObj.keepAlwaysAspectRatio||this.inputManager.isBeingPressed("Shift")&&0!==n.x&&0!==n.y,p=null,f=this.canvasObj.getSize(),g={x:g.x,y:g.y},a={x:a.x,y:a.y},i=this.canvasObj.pivotPoint,h=-1*(o=this.canvasObj.rotation),r=m.CoordUtils.rotatePoint,0!=o&&(g=r(h,g,i),a=r(h,a,i)),s=this.savedState.size.w+(g.x-a.x)*n.x,g=this.savedState.size.h+(g.y-a.y)*n.y,a={w:s-f.w,h:g-f.h},s={x:0,y:0},v?f.w>f.h?(l=this.canvasObj.getMinPermittedWidth(),c=l*this.canvasObj.aspectRatio.h):(c=this.canvasObj.getMinPermittedHeight(),l=c*this.canvasObj.aspectRatio.w):(l=this.canvasObj.getMinPermittedWidth(),c=this.canvasObj.getMinPermittedHeight()),g=this.canvasObj.getSize().w<=l,u=this.canvasObj.getSize().h<=c,v&&(d=(f.w+a.w)*this.canvasObj.aspectRatio.h,a.h=d-f.h),(p={w:(d=a).w+(f=f).w,h:d.h+f.h}).w<l&&(d.w=l-f.w),p.h<c&&(d.h=c-f.h),-1===n.x&&(s.x=-1*a.w),-1===n.y&&(s.y=-1*a.h),f=p=null,(g||u)&&((f={x:(p=t.offset()).left,y:p.top}).x+=8,f.y+=8,0!=o)&&(f=r(h,f,i)),t=w.MouseUtils.getHomogeneousCoords(e.mouseEvent,"page"),0!=o&&(t=r(h,t,i)),g&&(1===n.x&&t.x<f.x||-1===n.x&&t.x>f.x)&&(a.w=0),u&&(1===n.y&&t.y<f.y||-1===n.y&&t.y>f.y)&&(a.h=0),!v||!g&&!u||0<a.w&&0<a.h||(a.w=0,a.h=0),this.canvasObj.resizeBy(a.w,a.h),e=(p=this.canvasObj.getCoords()).x,h=p.y,t=1===n.x?0:n.x,f=1===n.y?0:n.y,v={x:e+a.w*t,y:p.y+a.h*f},g={x:(v=0!=o?r(o,v,i):v).x-e,y:v.y-h},s.x=g.x,s.y=g.y,this.canvasObj.moveBy(s.x,s.y),this.canvasObj.updateDom(),this.inFrame=!1)},o.prototype.getAnchorCursor=function(t){var t=this.getAnchorCoordFrame(t),e=Math.round(this.canvasObj.rotation/45)+t.id;switch(8<e&&(e-=8),e){case 1:case 5:return"ns-resize";case 2:case 6:return"nesw-resize";case 4:case 8:return"nwse-resize";case 7:case 3:return"ew-resize";default:throw"No cursor for "+e}},o.prototype.getAnchorCoordFrame=function(t){switch(t){case"top":return{id:1,x:0,y:-1,name:"top"};case"top_right":return{id:2,x:1,y:-1,name:"top_right"};case"right":return{id:3,x:1,y:0,name:"right"};case"bottom_right":return{id:4,x:1,y:1,name:"bottom_right"};case"bottom":return{id:5,x:0,y:1,name:"bottom"};case"bottom_left":return{id:6,x:-1,y:1,name:"bottom_left"};case"left":return{id:7,x:-1,y:0,name:"left"};case"top_left":return{id:8,x:-1,y:-1,name:"top_left"};default:throw"[Editpdf][Controls] Unknown anchor '"+t+"'"}},o);function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.isResizing=!1,t.isResizingEnabled=!1,t.savedState={},t}l.StandardControls=n}.call(this,c(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Draggable=void 0;var i=n(253),r=n(221),a=n(289);function o(t,e,n){var o=this;this.onMouseDown=function(t){var e;if(!o.filterFn||o.filterFn(t))return o.drag.state||t.which!=o.triggeringMouseButton&&0!==t.type.indexOf("touch")||(t.preventDefault(),e=a.MouseUtils.getHomogeneousCoords(t,"page"),o.drag.x=e.x,o.drag.y=e.y,o.drag.state=!0,o.drag.startingMouseEvent=t,o.onDragBegFn&&!1===o.onDragBegFn(t)&&o.endDrag(t)),!1},this.onMouseUp=function(t){o.drag.state&&o.endDrag(t)},this.onMouseMove=function(t){var e,n;o.drag.state&&(n={x:0,y:0,startingMouseEvent:null,mouseEvent:null},e=a.MouseUtils.getHomogeneousCoords(t,"page"),n.x=e.x-o.drag.x,n.y=e.y-o.drag.y,n.startingMouseEvent=o.drag.startingMouseEvent,n.mouseEvent=t,n=o.callback(n,o._defaultCallback.bind(o)),o.drag.x=e.x,o.drag.y=e.y,!1===n)&&o.endDrag(t)},e=e||{},this.elem=t[0],this.jelem=t,this.drag={x:0,y:0,state:!1,startingMouseEvent:null},this.triggeringMouseButton=e.mouseButton||r.MOUSE.LeftClick,this.filterFn=e.filterFn||null,this.onDragBegFn=e.onDragBegFn||null,this.onDragEndFn=e.onDragEndFn||null,i.HandlerRegistry.cleanupRoutine(function(){o.elem.addEventListener("mousedown",o.onMouseDown),window.addEventListener("mouseup",o.onMouseUp),window.addEventListener("mousemove",o.onMouseMove);function t(t){i=t,o.onMouseDown(t)}function e(t){i=t,o.onMouseMove(t)}function n(t){o.onMouseUp(i),i=null}var i=null;return o.elem.addEventListener("touchstart",t),window.addEventListener("touchmove",e),window.addEventListener("touchend",n),function(){o.elem.removeEventListener("mousedown",o.onMouseDown),window.removeEventListener("mouseup",o.onMouseUp),window.removeEventListener("mousemove",o.onMouseMove),o.elem.removeEventListener("touchstart",t),window.removeEventListener("touchmove",e),window.removeEventListener("touchend",n)}}),n=n||this._defaultCallback,this.callback=n}o.prototype.endDrag=function(t){this.drag.state&&(this.drag.state=!1,this.drag.startingMouseEvent=null,this.onDragEndFn)&&this.onDragEndFn(t)},o.prototype._defaultCallback=function(t){var e=this.jelem,n=e;if(!e.hasClass("app-object")){e=e.closest(".app-object");if(e.length<=0)throw"Closest .app-object not found";n=e}var e=parseInt(n.css("top").replace("px","")),i=parseInt(n.css("left").replace("px",""));n.css({left:i+t.x+"px",top:e+t.y+"px"})},e.Draggable=o},function(t,s,l){"use strict";!function(e){var i,n,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(s,"__esModule",{value:!0}),s.Shape=void 0,l(252)),r=l(475),o=(n=o.CanvasObject,t(a,n),Object.defineProperty(a.prototype,"type",{get:function(){return"shape"},enumerable:!1,configurable:!0}),a.prototype.init=function(){n.prototype.init.call(this),this.svgInstance=r.SVG()},a.prototype.resizeDrawingSurface=function(t,e){this.svgInstance.size(t,e)},a.prototype.notifyDomAttachment=function(){n.prototype.notifyDomAttachment.call(this),this.svgInstance.addTo("#"+this.id)},Object.defineProperty(a.prototype,"draw",{get:function(){return this.svgInstance},enumerable:!1,configurable:!0}),a.prototype._updateDom=function(){},a.prototype.fillOpacity=function(t){return t?(this._fillOpacity=t,this):this._fillOpacity},a.prototype.fill=function(t){return t?(this._fill=t,this):this._fill},a.prototype.stroke=function(t){return t?(this._stroke=t,this):this._stroke},a.prototype.strokeWidth_x1=function(t){return t?(this._strokeWidth_x1=t,this):this._strokeWidth_x1},a.prototype.strokeWidth=function(t){return this.strokeWidth_x1(t/this.zoomLevel)},Object.defineProperty(a.prototype,"zoomedStrokeWidth",{get:function(){return this.strokeWidth()*this.zoomLevel},enumerable:!1,configurable:!0}),a.prototype.getFullSize=function(){var t=this.getSize();return{w:t.w,h:t.h}},a.prototype.getDefaultAttributes=function(){return Object.assign({},n.prototype.getDefaultAttributes.call(this),{strokeWidth:0})},a.prototype.setAttributes=function(t){n.prototype.setAttributes.call(this,t=void 0===t?{}:t),"strokeWidth"in t&&(this._strokeWidth_x1=t.strokeWidth),"strokeColor"in t&&(this._stroke=t.strokeColor),"fillColor"in t&&(this._fill=t.fillColor)},Object.defineProperty(a.prototype,"fillColor",{get:function(){return this.fill()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"strokeColor",{get:function(){return this.stroke()},enumerable:!1,configurable:!0}),a.prototype.getAttributes=function(){return Object.assign({},n.prototype.getAttributes.call(this),{strokeWidth:this._strokeWidth_x1,strokeColor:this._stroke,fillColor:this._fill})},a.prototype.extractSvg=function(){var t=e(this.svgInstance.node.outerHTML);return t.find(".do-not-export").detach(),"transparent"===this.fillColor&&t.find(this.type).attr("fill-opacity","0"),t[0]},a);function a(t,e){t=n.call(this,t,e=void 0===e?{}:e)||this,t._fillOpacity=1,e=t.type;return t.shape||(t.shape=t.draw[e](100,100)),t}s.Shape=o}.call(this,l(1))},function(t,e,n){"use strict";!function(r){function t(){}Object.defineProperty(e,"__esModule",{value:!0}),e.UploaderStatus=void 0,t.set=function(t){var e=this;this.uploadInterval&&(clearInterval(this.uploadInterval),this.uploadInterval=null),this.uploadInterval=setInterval(function(){var n=0,i=0,o=0;r.each(t.files,function(t,e){100==e.percent&&i++,o++,n+=e.percent}),r(".uploading__bar--small .uploading__bar__completed").css("width",n/o+"%"),0<o&&(r(".uploading__bar--small").show(),r(".uploading__status__percent").show()),i==o&&(window.setTimeout(function(){r(".uploading__bar--small").hide()},1e3),clearInterval(e.uploadInterval))},100)},t.uploadInterval=null,e.UploaderStatus=t}.call(this,n(1))},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadContext=void 0,n(47)),s=n(342),n=(o=a.ContextBase,r(l,o),l.prototype.getInitialState=function(){return new s.DownloadState},l.prototype.setTransferMsg=function(t){this.transferMsg=t},l.prototype.popTransferMsg=function(){var t;return this.transferMsg?(t=this.transferMsg,this.transferMsg=null,t):null},l);function l(t){var e=o.call(this,t)||this;return e.contentName="DownloadContext",e.registerDialogClosedCallback=function(t){e._dialogClosedCallback=t},e.getTaskDetailsFromCaller=function(){var t=e.ctxParams.opts;if("client-server"!==t.downloadMode)throw new Error("This function should only be called when 'downloadMode' equals 'client-server'");return t.lazyGetTaskDetails()},(e.ctxParams=t).dialog&&t.dialog.addEventListener("closed",function(){e._dialogClosedCallback&&e._dialogClosedCallback()}),e}e.DownloadContext=n},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=this&&this.__assign||function(){return(u=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},d=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},p=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},l=(Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadState=void 0,n(21)),h=n(8),f=n(343),v=n(100),g=s(n(15));c=l.StateBase,o(m,c),m.prototype.changeScreen=function(t){c.prototype.changeScreen.call(this,t)},m.prototype.init=function(){var c;return d(this,void 0,void 0,function(){var e,i,n,o,r,a,s,l=this;return p(this,function(t){switch(t.label){case 0:return(e=this.ctx.ctxParams,i=e.opts.downloadMode,n=null,o=Object.assign({},window.ilovepdfConfig),this.ctx.registerDialogClosedCallback(function(){l.downloadHelperEndCallbacks.forEach(function(t){return t()})}),"client"!==i)?[3,1]:(a=e.opts,n=new f.DownloadHelper(u(u({},a),{registerEndCallback:function(t){l.downloadHelperEndCallbacks.push(t)},internalCallbacks:{onLinkScreenOpen:function(){return l.changeScreen("link")},onDeleteScreenOpen:function(){return l.changeScreen("delete")}},mountPoint:this.domRoot,downloadPageUrl:null})),this.clearLoadingScreen(),[3,8]);case 1:if("server"!==i)return[3,7];if(s=e.task,r=s.workerServer,s=s.taskId,o=Object.assign(o,{workerServer:r,taskId:s}),r=null!=(c=null==(c=null===window||void 0===window?void 0:window.ilovepdfConfig)?void 0:c.downloadUrl)?c:"/download",a=e.opts,!(n=new f.DownloadHelper(u(u({},a),{registerEndCallback:function(t){l.downloadHelperEndCallbacks.push(t)},internalCallbacks:{onLinkScreenOpen:function(){return l.changeScreen("link")},onDeleteScreenOpen:function(){return l.changeScreen("delete")}},mountPoint:this.domRoot,downloadPageUrl:window.location.origin+r+"/"+e.task.taskId+"/"+e.task.workerId}))).needsQrLib())return[3,6];t.label=2;case 2:return t.trys.push([2,5,,6]),[4,function(e){return d(this,void 0,void 0,function(){var n;return p(this,function(t){return document.querySelector("script[src='"+e+"']")?[2,Promise.resolve()]:((n=document.createElement("script")).type="text/javascript",n.src=e,[2,new Promise(function(t,e){n.addEventListener("error",function(t){return e(t)}),n.addEventListener("load",function(){return t()}),document.body.appendChild(n)})])})})}("/js/qrcode.min.js")];case 3:return t.sent(),[4,new Promise(function(t,e){setTimeout(function(){window.QRCode||g.captureMessage("Script was laoded but QRCode is not present"),t()},50)})];case 4:return t.sent(),[3,6];case 5:return t.sent(),g.captureMessage("Script was NOT laoded but QRCode is not present"),[3,6];case 6:return[3,8];case 7:if("client-server"!==i)throw new Error("Not implemented downloadMode '"+i+"'");a=e.opts,n=new f.DownloadHelper(u(u({},a),{registerEndCallback:function(t){l.downloadHelperEndCallbacks.push(t)},internalCallbacks:{onLinkScreenOpen:function(){return l.changeScreen("link")},onDeleteScreenOpen:function(){return l.changeScreen("delete")}},mountPoint:this.domRoot,downloadPageUrl:null,onServerFeaturesNeeded:function(n){return d(l,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:if("client-server"!==i)throw new Error("Download mode should be 'client-server'");return this.showLoadingScreen(),[4,this.ctx.getTaskDetailsFromCaller()];case 1:return"success"in(e=t.sent())&&!e.success?(g.captureMessage("[DownloadState] Error (probably) trying to upload file",function(t){return e.response&&(t.setExtra("ResponseBody",e.responseText),t.setExtra("ResponseCode",e.response.status)),t}),window.Toastr.error(v.Lang.t("Upload error"),v.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-right"}),this.dispatchEvent(new h.IloveEvent("end")),[2]):(this.ctx.ctxParams.opts.downloadMode="server",this.ctx.ctxParams.task=e,this.ctx.setTransferMsg(n),this.ctx.changeState(new m),[4,this.ctx.render(this.domRoot,{clearDom:!0})]);case 2:return t.sent(),[2]}})})}})),t.label=8;case 8:return n.init(o),s=this.ctx.popTransferMsg(),[4,n.bootstrap(s)];case 9:return t.sent(),this.initScreenBackButtons(),this.clearLoadingScreen(),[2]}})})},m.prototype.initScreenBackButtons=function(){var e=this;this.domRoot.querySelectorAll(".dialog__back").forEach(function(t){t.style.display="block",t.addEventListener("click",function(){e.changeScreen("default")})})},m.prototype.getTemplateParameters=function(t){return d(this,void 0,void 0,function(){var e,n;return p(this,function(t){if(e=this.ctx.ctxParams,n={tool:e.tool,subtool:e.subtool,dialogMode:"1"},"client-server"===e.opts.downloadMode)n.taskId="-1",n.workerId="-1";else if("server"===e.opts.downloadMode){if(!e.task)throw new Error("Missing task");n.taskId=e.task.taskId,n.workerId=e.task.workerId}return[2,{cache:!1,queryParams:n}]})})};var c,s=m;function m(){var t=null!==c&&c.apply(this,arguments)||this;return t.name="DownloadState",t.LAYOUT_TEMPLATE_NAME="download",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.init()},t.downloadHelperEndCallbacks=[],t}e.DownloadState=s},function(t,E,S){"use strict";!function(h){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},e=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},s=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},d=(Object.defineProperty(E,"__esModule",{value:!0}),E.DownloadHelper=void 0,S(285)),p=S(286),f=S(7),v=S(17),l=S(48),c=S(59),r=S(101),a=S(77),u=S(74),g=n(S(61)),m=S(75),y=S(34),b=S(16),w=n(S(65)),_=t(S(15));function x(t){var i=this;this.ids={sharelink:"",delete:"",gdrive_file_selector:"",dropbox_file_selector:""},this.scopeElementIds=function(n){Object.keys(i.ids).forEach(function(t){var e=n.querySelector("#"+t);e&&(e.setAttribute("id",e="scoped_"+t),i.ids[t]=e)})},this.defaultDownloadFn=function(){var t=i.behaviourOpts.downloadMode;switch(t){case"client":throw new Error("No default function for client mode");case"server":return void i.downloadFromServer()}throw new Error("Unknown mode download '"+t+"'")},this.downloadFromServer=function(){if(!i.isServerSideDownload())throw new Error("Cannot download from server unless is a server-side download");window.location=h(".downloader__btn").attr("href")},this.isServerSideDownload=function(){return"server"===i.behaviourOpts.downloadMode},this.afterDeletedDefaultCallback=function(){window.location.href=window.location.pathname},this.endCountDown=function(){clearInterval(i.countDownInterval),i.behaviourOpts.mountPoint.querySelector("[data-screen='delete'] .dialog__body").innerHTML="EXPIRED"},this.behaviourOpts=t,this.scopeElementIds(this.behaviourOpts.mountPoint)}x.prototype.init=function(t){if(!window.Cookies)throw new Error("Cookies lib not found in global scope");if(this.taskId=null,this.startServer=null,this.workerServer=null,this.api=null,this.token=null,this.tool=null,this.subtool=null,this.realTool=null,this.taskData=null,this.drive=null,this.dropbox=null,this.countDownInterval=null,this.autoDownInterval=null,this.level="user",this.allFileLimits=null,this.files=new a.FileStack,Object.assign(this,t),"server"===this.behaviourOpts.downloadMode&&!this.taskId)throw new Error("Task ID is missing")},x.prototype.needsQrLib=function(){return"server"===this.behaviourOpts.downloadMode&&!!!window.QRCode},x.prototype.initQr=function(){var t=this.behaviourOpts.mountPoint,e=window.QRCode;if(!e)throw new Error("QRCode lib is not present");var n=t.querySelector(".downloader__btn").getAttribute("href"),t=(0!==n.indexOf("http")&&(n="https:"+n),t.querySelector("#qrcode"));if(!t)throw new Error("QRCode Html Element not found");var i=null;null==i?new e(t,{text:n,width:250,height:250,colorDark:"#383E45",colorLight:"#ffffff",correctLevel:e.CorrectLevel.M}):i.makeCode(n)},x.prototype.setVariableUserLevel=function(){if(!this.isServerSideDownload())throw new Error("Can only call this function if it is a server-side download");var t=window.ilovepdfConfig.fp,e="fp",n=("upscaleimage"==this.tool&&(e="fpu"),!1);try{for(var i=0;i<t;i++){var o=w.default.get(e+i);1==n?w.default.remove(e+i):null==o&&(n=!0,w.default.set(e+i,i.toString(),{expires:window.ilovepdfConfig.fpt}))}}catch(t){}},x.prototype.initChained=function(t){var e=this.behaviourOpts,n=(this.addSeeMoreListener(),h(".chained__list__link")),i=n.length;if(0!=i){"_blank"===e.chained.linkTarget&&n.each(function(t,e){e.setAttribute("target","_blank")}),this.dataChain=t,this.numFiles=t.output_filenumber,this.sizeFiles=t.output_filesize,this.limits=new c.Limits({files:this.files,fileLimits:this.fileLimits,allFileLimits:this.allFileLimits,tool:null,subtool:null}),this.limits.files=this.files;for(var o=this.numFiles;0<o;o--)this.files.addFile(new a.File({size:Math.floor(this.sizeFiles/this.numFiles)}));this.checkChainedLimits(),this.checkChainedExtensions(),this.checkHiddenTools(),this.checkSeeMore(),this.setChainedUpgradeEvents(),h(".chained").css("visibility","visible")}},x.prototype.addSeeMoreListener=function(){var t=document.querySelector(".chained__more > button");null!=t&&t.addEventListener("click",function(){t.classList.add("hidden"),document.querySelectorAll(".chained__list > li").forEach(function(t){return t.classList.remove("hidden")})})},x.prototype.checkHiddenTools=function(){for(var t=document.querySelectorAll(".chained__list > li.hidden"),e=document.querySelectorAll(".chained__list > li:not(.hidden)").length,n=0;n<t.length&&e<6;)t[n].classList.remove("hidden"),e++,n++},x.prototype.checkSeeMore=function(){var t;0===document.querySelectorAll(".chained__list > li.hidden").length&&(t=document.querySelector(".chained__more > button"))&&t.classList.add("hidden")},x.prototype.setChainedUpgradeEvents=function(){var n,i=this,o=new g.default;o.addEventListener("closed",function(){b.UserModel.isPremium()&&(i.cleanChainedEvents(),i.checkChainedLimits(),i.setChainedUpgradeEvents())}),h(".upgrade").on("click",function(t){t.preventDefault();var t=h(t.target),e=((t=t.hasClass("upgrade")?t:t.closest(".upgrade")).attr("data-limit"),t.attr("data-tool"));if(!e)throw new Error("Tool is missing");i.limits.concreteTool=i.limits.tool=i.limits.subtool=e,n=function(){return new u.PremiumContext({tool:e,limits:i.limits,triggerReason:i.limits.err})},o.setContentBuilder(n).show()})},x.prototype.cleanChainedEvents=function(){h(".upgrade").off("click")},x.prototype.checkChainedLimits=function(){var s=this;h(".chained__list__link").removeAttr("data-limit").removeClass("upgrade").removeClass("nextLevelNeeded"),h(".chained__list__link").each(function(t,e){var n=h(e).attr("data-tool");if(y.Tooltip&&y.Tooltip.setContent(h(e)[0],h(e).attr("title")),!n)throw new Error("Tool is missing");s.limits.tool=s.limits.subtool=s.limits.concreteTool=n;var i,o,r,a=s.limits.checkFileLimits(s.files.getFileSizeNotIgnored(),s.files.countNotIgnored(),s.files.getFilePagesNotIgnored());a&&(r=s.limits.getNextLimit(a,n),i=r.name,r.currentValue,0!=r.nextLevel?(r=s.limits.setLimit(a),h(e).addClass("upgrade").addClass("nextLevelNeeded").attr("data-limit",a),h(".nextLevelNeeded").on("click",function(){var t=a==c.REASON.ERROR_SIZE?"filesize-exceeded":"filenumber-exceeded";window.ev("send","event","limits",t,"download"),window.ev("event","limit",{reason:i,tool:n})}),o=s.limits.getCurrentLimitsLevel(),o=s.limits.getLevelLimit(s.limits.concreteTool,i,o),o=s.limits.limitErrorText(s.limits.makeErrorData(i,o,s.limits.getCurrentLimitsLevel(),r.nextLimit,r.nextLevelLimit)),h(e).attr("data-limit-msg",o),r=f.Lang.t("File size exceeded"),"files"==i&&(r=f.Lang.t("File number exceeded")),o="<strong>"+h(e).attr("title")+"</strong><hr>"+r+". "+o,h(e)[0]._tippy&&h(e)[0]._tippy.setContent(o)):h(e.parentElement).remove())})},x.prototype.checkChainedExtensions=function(){var i=this,o=this;h(".chained__list__link").each(function(t,e){var n=h(e).attr("data-tool");"output_extensions"in o.dataChain||(o.dataChain.output_extensions=[],h.each(o.dataChain.files,function(t,e){var n;"server_filename"in e&&(n=e.server_filename.split(".").pop(),o.dataChain.output_extensions.push(n)),"name"in e&&(n=e.name.split(".").pop(),o.dataChain.output_extensions.push(n))})),"string"==typeof o.dataChain.output_extensions&&(o.dataChain.output_extensions=JSON.parse(o.dataChain.output_extensions)),0==i.checkHasValidExtensions(n,o.dataChain.output_extensions)&&h(e.parentElement).remove()})},x.prototype.checkHasValidExtensions=function(t,e){t=t.replace("convert","");t=new r.Config({tool:t,config:window.configData}).getConfig("mimeTypes")[0];if("extensions"in t){var n=t.extensions.split(",");try{h.each(e,function(t,e){if(!n.includes(e))throw!1})}catch(t){return t}}return!0},x.prototype.bootstrap=function(o){return e(this,void 0,void 0,function(){var e,n,i;return s(this,function(t){switch(t.label){case 0:if("server"===(e=this.behaviourOpts.downloadMode)){try{this.userCookie=w.default.getJSON(this.taskId)}catch(t){}null!=this.userCookie&&(this.setVariableUserLevel(),w.default.remove(this.taskId)),this.userCookie&&this.userCookie.server&&(this.workerServer=this.userCookie.server,0==this.workerServer.indexOf("//"))&&(this.workerServer="https:"+this.workerServer)}switch(e){case"client":return[3,1];case"server":return[3,2];case"client-server":return[3,6]}return[3,7];case 1:return this.bootstrapClientSide({lazyServerFeatures:!1}),[3,8];case 2:return t.trys.push([2,4,,5]),[4,this.bootstrapServerSide()];case 3:return t.sent(),[3,5];case 4:throw n=t.sent(),_.captureException(n,function(t){return t.setExtra("downloadDialog","true"),t.setExtra("downloadMode",e),t}),n;case 5:return[3,8];case 6:return this.bootstrapClientSide({lazyServerFeatures:!0}),[3,8];case 7:throw new Error("Unknown mode '"+e+"'");case 8:if(o){if(n=o.clickedElemSelector,i=this.behaviourOpts.mountPoint,!(i=i.querySelector(n)))throw new Error("Prev clicked elem not found '"+n+"'");i.click()}return[2]}})})},x.prototype.bootstrapClientSide=function(t){var n=this,t=t.lazyServerFeatures,e=this.behaviourOpts.mountPoint,i=this.behaviourOpts.downloadMode,o=h(e),r=o.find(".downloader__btn"),a=o.find(".downloader__extra__btn--black"),s=o.find("#autoCopy"),l=o.find("#"+this.ids.sharelink),c=o.find("#"+this.ids.gdrive_file_selector),o=o.find("#"+this.ids.dropbox_file_selector),t=!t,u=e.querySelector(".chained"),e=e.querySelector("#"+this.ids.delete);if(r.on("click",function(t){var e=r.hasClass("active");t.preventDefault(),e&&n.behaviourOpts.callbacks.onDownload(n.defaultDownloadFn,{autoDownload:!1,downloadMode:i})}),t)u&&h(u).hide(),e&&h(e).hide(),a.hide(),s.hide(),l.hide(),c.hide(),o.hide(),r.addClass("active");else{if("client-server"!==this.behaviourOpts.downloadMode)throw new Error("!");var d=this.behaviourOpts,p=function(t){d.onServerFeaturesNeeded({clickedElemSelector:t})},t=(h(e).on("click",function(){n.behaviourOpts.callbacks.onDeleted(n.afterDeletedDefaultCallback,{success:!1,downloadMode:i,downloadPage:n.getDownloadLinkPage()})}),s.on("click",function(){return p("#autoCopy")}),l.on("click",function(){return p("#"+n.ids.sharelink)}),c.on("click",function(){return p("#"+n.ids.gdrive_file_selector)}),o.on("click",function(){return p("#"+n.ids.dropbox_file_selector)}),h(".chained__list__link"));0<t.length&&t.each(function(t,e){e.addEventListener("click",function(t){t.preventDefault(),p(".chained__list__link[data-tool='"+e.dataset.tool+"']")})}),h(".chained").css("visibility","visible"),this.addSeeMoreListener()}},x.prototype.bootstrapServerSide=function(){var a;return e(this,void 0,void 0,function(){var i,e,n,o,r;return s(this,function(t){return i=this,e=[],n=h(".downloader__extra__btn--black"),h(".downloader__btn").on("click",function(t){h(".downloader__btn").hasClass("active")||t.preventDefault()}),o="",this.behaviourOpts.showBackBtn&&(this.userCookie&&this.userCookie.server&&(o=null!=(a=this.userCookie.toolUrl.split("?")[0])?a:"",n.attr("href",o)),0<o.length)&&n.css("display","flex"),i.api=new l.Api({taskId:i.taskId,tool:null,workerServer:i.workerServer,token:i.token}),this.userCookie?(this.userCookie.status=this.userCookie.status_message,this.showDownload(this.userCookie),"TaskSuccessWithWarnings"===this.userCookie.status&&(r=new Promise(function(e,n){i.api.getTask().then(function(t){i.showDownload(t),e()},function(t){i.showDownload({status:"TaskDeleted"}),n(t)})}),e.push(r))):(r=new Promise(function(e,n){i.api.getTask().then(function(t){i.showDownload(t),e()},function(t){i.showDownload({status:"TaskDeleted"}),n(t)})}),e.push(r)),this.initActions(),[2,Promise.all(e)]})})},x.prototype.initActions=function(){var t=this;h("#autoCopy").on("click",function(){t.copyLink()})},x.prototype.showDownload=function(t){var e,n=this,i=this,o=(i.taskData=t,this.behaviourOpts),r=o.downloadMessages,a=o.mountPoint,s=o.downloadMode,o=o.registerEndCallback,l=t.status,c=this.ids,u=h(".downloader__btn"),a=h(a);"TaskDeleted"==l?(h(".chained").remove(),a.find("h1.title2").html(r[l]),(e=u).attr("href","/"+("en-US"!=window.lang?window.lang:"")),e.html(v.Tools.svgHome()+" "+f.Lang.t("Back to homepage")),e.addClass("active"),h("#"+c.sharelink+", #"+c.delete+", #"+c.gdrive_file_selector+", #"+c.dropbox_file_selector).hide()):"TaskError"==l?(a.find("h1.title2").html(r[l]),u.hide(),h(".chained").remove(),h("#"+c.sharelink+", #"+c.delete+", #"+c.gdrive_file_selector+", #"+c.dropbox_file_selector).hide()):(u.attr("href",i.api.getLink("download")+"/"+i.taskId),this.autoDownInterval=setTimeout(function(){return n.behaviourOpts.callbacks.onDownload(i.defaultDownloadFn,{autoDownload:!0,downloadMode:s})},5e3),a.find("h1.title2").html(r[l]),u.addClass("active").on("click",function(t){t.preventDefault(),clearTimeout(i.autoDownInterval),u.hasClass("active")&&i.behaviourOpts.callbacks.onDownload(i.defaultDownloadFn,{autoDownload:!1,downloadMode:s})}),i.callDownloadActions(t.tool,t),this.initChained(t),i.initLink(),i.initDelete(),i.drive=new d.DriveDownload({id:c.gdrive_file_selector,api:i.api}),o(function(){return i.drive.closeWindow()}),t.download_filename,e=window.location.protocol,(a=i.api.getLink("download")+"/"+i.taskId).match(/^http/)||(a=e+a),i.dropbox=new p.DropboxDownload({id:this.ids.dropbox_file_selector,workerServer:t.server,api:i.api,taskId:i.taskId,fileUrl:a,fileName:t.download_filename}),o(function(){return i.dropbox.closeWindow()}),h("#btnDelete").on("click",function(){i.stopCountDown(),i.api.deleteTask().then(function(){i.behaviourOpts.callbacks.onDeleted(i.afterDeletedDefaultCallback,{success:!0,downloadMode:s,downloadPage:i.getDownloadLinkPage()})},function(t){i.behaviourOpts.callbacks.onDeleted(i.afterDeletedDefaultCallback,{success:!1,downloadMode:s,downloadPage:i.getDownloadLinkPage()})})}),h("body").on("click",function(){clearTimeout(i.autoDownInterval)}),"TaskSuccessWithWarnings"===l&&h.each(t.files,function(t,e){var n;"RepairedFile"==e.status&&(h(".downloader__warning").show(),h(".repaired").show(),"filename"in e)&&(n='<li class="damaged__file">\n                                <span class="damaged__file__name">'+e.filename+'</span>\n                                <span class="damaged__file__info tooltip tooltip--top">'+f.Lang.t("Repaired File")+"</span>\n                            </li>",h(".repaired__list").append(n)),"DamagedFile"==e.status&&(h(".downloader__warning").show(),h(".damaged").show(),"filename"in e)&&(n='<li class="damaged__file">\n                                <span class="damaged__file__name">'+e.filename+'</span>\n                                <span class="damaged__file__info tooltip tooltip--top">'+f.Lang.t("Damaged/Corrupted File")+"</span>\n                            </li>",h(".damaged__list").append(n)),"ConformanceDowngraded"==e.status&&(h(".downloader__warning").show(),h(".conformance").show(),"filename"in e)&&(n='<li class="damaged__file">\n                                <span class="damaged__file__name">'+e.filename+'</span>\n                                <span class="damaged__file__info tooltip tooltip--top">'+f.Lang.t("Downgraded Conformance")+"</span>\n                            </li>",h(".conformance__list").append(n))}),"warnings"in t&&h.each(t.warnings,function(t,e){var n;"RepairedFile"==e.error&&(h(".downloader__warning").show(),h(".repaired").show(),"filename"in e)&&(n='<li class="damaged__file">\n                                <span class="damaged__file__name">'+e.filename+'</span>\n                                <span class="damaged__file__info tooltip tooltip--top">'+f.Lang.t("Repaired File")+"</span>\n                            </li>",h(".repaired__list").append(n)),"DamagedFile"==e.error&&(h(".downloader__warning").show(),h(".damaged").show(),"filename"in e)&&(n='<li class="damaged__file">\n                                <span class="damaged__file__name">'+e.filename+'</span>\n                                <span class="damaged__file__info tooltip tooltip--top">'+f.Lang.t("Damaged/Corrupted File")+"</span>\n                            </li>",h(".damaged__list").append(n)),"ConformanceDowngraded"==e.error&&(h(".downloader__warning").show(),h(".conformance").show(),"filename"in e)&&(n='<li class="damaged__file">\n                                <span class="damaged__file__name">'+e.filename+'</span>\n                                <span class="damaged__file__info tooltip tooltip--top">'+f.Lang.t("Downgraded Conformance")+"</span>\n                            </li>",h(".conformance__list").append(n))}),i.initCountdown())},x.prototype.callDownloadActions=function(t,e){null!=t&&(t="action"+t.camelCase().ucFirst())in this&&this[t](e)},x.prototype.initLink=function(){var t=this,e=window.QRCode;e&&this.initQr(),h("#"+this.ids.sharelink).addClass("active").on("click",function(){t.downloadLinkInput.value=t.getDownloadLinkPage(),t.behaviourOpts.internalCallbacks.onLinkScreenOpen()}),h("#linkModal").on("hide.bs.modal",function(){m.Banner.preventClickAds()})},x.prototype.getDownloadLinkPage=function(){if("server"!==this.behaviourOpts.downloadMode)return null;var t=this.behaviourOpts.downloadPageUrl;if(t)return t;throw new Error("download link page should not be empty for server mode!")},Object.defineProperty(x.prototype,"downloadLinkInput",{get:function(){return document.getElementById("dlink")},enumerable:!1,configurable:!0}),x.prototype.initDelete=function(){var t=this;h("#"+this.ids.delete).addClass("active").on("click",function(){t.downloadLinkInput.value=t.getDownloadLinkPage(),t.behaviourOpts.internalCallbacks.onDeleteScreenOpen()})},x.prototype.initCountdown=function(){var r=this.taskData.process_start?-1!==this.taskData.process_start.indexOf("GMT")?new Date(this.taskData.process_start).getTime()+72e5:new Date(this.taskData.process_start.replace(/-/g,"/")+" GMT+000").getTime()+72e5:(new Date).getTime()+72e5,a=this,t=this.behaviourOpts.mountPoint,s=h(t);this.countDownInterval=setInterval(function(){var t=(new Date).getTime(),t=r-t,e=(Math.floor(t/864e5),Math.floor(t%864e5/36e5)),n=Math.floor(t%36e5/6e4),i=Math.floor(t%6e4/1e3),o=s.find(".countdown__item__time");h(o[0]).html(e.toString()),h(o[1]).html(n.toString()),h(o[2]).html(i.toString()),t<0&&a.endCountDown()},1e3)},x.prototype.stopCountDown=function(){clearInterval(this.countDownInterval)},x.prototype.hideChained=function(){setTimeout(function(){h(".chained").html()},5e3)},x.prototype.actionCompressimage=function(t){this.showFileSize(t,"Compress Image","Image","#4D90FE")},x.prototype.actionCompress=function(t){this.showFileSize(t,"Compress PDF","PDF")},x.prototype.showFileSize=function(t,e,n,i){var o,r,a,s,l,c,u,d;void 0===i&&(i="#e4312c"),0<h(".downloader__info__content svg").length||(r=o=0,"filesize"in t?(o=parseInt(t.filesize),r=parseInt(t.output_filesize)):h.each(t.files,function(t,e){o+=parseInt(e.filesize),r+=parseInt(e.output_filesize)}),o<r?(h(".downloader__info").hide(),h(".downloader__warning").html(f.Lang.t("alreadyCompressed")).show(),clearTimeout(this.autoDownInterval)):(t=100-parseInt((100*r/o).toString()),a=v.Tools.bytesToSize(o),s=v.Tools.bytesToSize(r),h(".downloader__info").html('<div class="downloader__info__content">'+f.Lang.t("Your ${fileType} is now ${percent}% smaller!",{fileType:f.Lang.t(n),percent:t})+"<p><strong>"+a+" "+v.Tools.svgArrowRight(8,12)+" "+s+"</strong></p></div>"),n=window,a=document,n.MSInputMethodContext&&a.documentMode||(s='<svg width="100" height="100" viewBox="0 0 42 42" class="donut" id="donut"><circle class="donut-hole" cx="21" cy="21" r="15.91549430918954" fill="transparent"></circle><circle class="donut-ring" cx="21" cy="21" r="15.91549430918954" fill="transparent" stroke="#d2d3d4" stroke-width="3"></circle><circle class="donut-segment" id="donut-segment" cx="21" cy="21" r="15.91549430918954" fill="transparent" stroke="'+i+'"  stroke-width="3" stroke-dasharray="0 100" stroke-dashoffset="25"></circle><g class="chart-text"><text x="50%" y="50%" class="chart-number">0%</text><text x="50%" y="50%" class="chart-label">'+f.Lang.t("Saved")+"</text></g></svg>",h(".downloader__info").prepend(s),l=t,c=h("#donut-segment"),u=h(".chart-number"),d=0,window.timer=window.setInterval(function(){l<=d&&(window.clearInterval(window.timer),c.css("stroke-dasharray",l+" "+(100-l))),u.html(d+"%"),d++},10))))},x.prototype.copyLink=function(){var t=this.downloadLinkInput;t.select(),document.execCommand("Copy")},E.DownloadHelper=x}.call(this,S(1))},function(t,e,n){"use strict";function s(t){var e=null==(e=t.UI.getToolMode())?void 0:e.name;return[t.Core.Tools.ToolNames.CONTENT_EDIT.toString(),t.Core.Tools.ToolNames.ADD_PARAGRAPH.toString(),t.Core.Tools.ToolNames.ADD_IMAGE_CONTENT.toString()].includes(e)}function r(t){var e=window.isNaN(t),t=window.isNaN(Number(t));return e||t}var d,p=this&&this.__assign||function(){return(p=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},h=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},f=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},l=(this&&this.__spreadArrays,this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}),v=(Object.defineProperty(e,"__esModule",{value:!0}),e.TrueEdit=void 0,a(n(15))),g=n(13),c=l(n(345)),u=n(255),m=n(311),y=n(17),b=n(346),w=["header","pageNavOverlay","textEditingPanel","textEditingPanelResizeBar","contextMenuPopup","annotationCommentButton","annotationStyleEditButton","linkButton","fileAttachmentDownload","annotationDeleteButton","annotationContentEditButton","annotationGroupButton","linkAnnotationPopup","linkAnnotationUnlinkButton","linkUri","annotationPopup"],_=Number("10%".replace("%","").trim())/100,x=Number("4000%".replace("%","").trim())/100,E={enableHotkeys:!1};function S(t,e){var a=this,t=(this.licenseKey=t,this.translations=e,this.mounted=!1,this.cleanupFunctions=[],this.originalFilename=null,this.viewBar=null,this.attached=!1,this.viewbar_setEventHandlers=function(o){var e=a.instance;o.on("fit-viewport",function(t){"FitPage"===t?(e.UI.setFitMode(e.UI.FitMode.FitPage),o.setFitViewport("FitWidth")):"FitWidth"===t&&(e.UI.setFitMode(e.UI.FitMode.FitWidth),o.setFitViewport("FitPage"))}),o.on("page-layout",function(t){a.changePageLayoutMode(t),o.setPageLayout(t);t=t.toLowerCase();window.ev("send","event","editpdf","page-layout",t),window.ev("event","editpdf",{"page-layout":t})}),o.on("prev-page",function(){var t=a.getCurrentPage()-1;a.setCurrentPage(t,!0,"prev")}),o.on("next-page",function(){var t=a.getCurrentPage()+1;a.setCurrentPage(t,!0,"next")}),o.on("unzoom",function(){var t=a.getZoom(),t=y.Tools.keepInNumericBounds(_,x,t/1.25);a.zoomTo(t)}),o.on("zoom",function(){var t=a.getZoom(),t=y.Tools.keepInNumericBounds(_,x,1.25*t);a.zoomTo(t)}),o.on("zoom-input",function(t){t=t.replace("%","").trim(),r(t)||a.zoomTo(Number(t)/100*2),o.setZoom(a.getZoom())}),o.on("page-selector",function(t){t=t.trim();function e(){o.setPageNumber(n,i)}var n=a.getCurrentPage(),i=a.instance.Core.documentViewer.getPageCount();r(t)||(t=parseInt(t),r(t))||i<t||t<=0?e():(a.setCurrentPage(t,!1,void 0),a._jumpToThumbnail(t,!1))})},this.eventCallbacks={},this.renderedPages={},this.activeAnnotations=null,this.disableHotkeys=function(){for(var t="A".charCodeAt(0),e="Z".charCodeAt(0),n=[],i=t;i<=e;i++)a.instance.UI.hotkeys.off(String.fromCharCode(i)),n.push(String.fromCharCode(i));for(var t="a".charCodeAt(0),o="z".charCodeAt(0),i=t;i<=o;i++)a.instance.UI.hotkeys.off(String.fromCharCode(i)),n.push(String.fromCharCode(i))},this.handleFileOpened=function(){a.handleSdkFileDialogs()},this.getSdkDialogElementIfExists=function(t){var e=a.getIframeDocument().body;if(!e)throw new Error(".app node not found");var n=a.translations["option.contentEdit.digitalSign.title"],n=(a.translations["message.passwordRequired"],n.replace(/'/g,"\\'"));if("digitallySigned"===t)return e.querySelector(".Modal[aria-label='"+n+"']");if("password"===t)return e.querySelector(".Modal.PasswordModal");throw new Error("Unknown dialog '"+t+"'")},this.handleSdkFileDialogs=function(){var t=a.getIframeDocument().body;if(!t)throw new Error(".app node not found");function n(t){return!!a.getSdkDialogElementIfExists(t)}var e,i=null,o=(n("digitallySigned")?i="digitallySigned":n("password")&&(i="password"),!1);i?a.handleDialogOpening(i):(e=new MutationObserver(function(t,e){i||(t.length,n("digitallySigned")?i="digitallySigned":n("password")&&(i="password"),i&&(e.disconnect(),o=!1,a.handleDialogOpening(i)),0)}),o=!0,e.observe(t,{attributes:!1,childList:!0,subtree:!0}),setTimeout(function(){o&&e.disconnect()},15e3))},this.getDialogs=function(t){var e=a.instance.UI.iframeWindow.document.querySelector(".App");if(t){if("opened"===t)return e.querySelectorAll(".Modal.open");if("closed"===t)return e.querySelectorAll(".Modal.closed");throw new Error("Unknown dialog status "+t)}return e.querySelectorAll(".Modal")},this.handleDialogOpening=function(t,e){function i(t){return!!a.getSdkDialogElementIfExists(t)}var o=a.instance,n=a.getIframeDocument().body,r=(o.Core.Tools.ToolNames.CONTENT_EDIT.toString(),{attributes:!1,childList:!0,subtree:!0});"digitallySigned"===t?new MutationObserver(function(t,e){var n=o.UI.getToolMode();null==n||!n.name||null!=n&&n.name;i("digitallySigned")||(e.disconnect(),setTimeout(function(){s(o)?o.UI.setToolMode("AnnotationEdit"):window._global_editpdf_toggleActiveEditorType()},100))}).observe(n,r):"password"===t&&new MutationObserver(function(t,e){0===a.getDialogs("opened").length&&(e.disconnect(),null!=(e=o.UI.getToolMode())&&e.name&&null!=e&&e.name,setTimeout(function(){i("password")?a.handleDialogOpening("password"):setTimeout(function(){s(o)?o.UI.setToolMode("AnnotationEdit"):window._global_editpdf_toggleActiveEditorType()},100)},100))}).observe(n,r)},this.getContextBoxEditor=function(){return a.contentEditorRef},this.inContextBoxEditorMode=function(){return null!==a.contentEditorRef},this.contentEditorRef=null,this.watchContentEditorRefTextAttrsChangesInterval=null,this._onContextBoxEditStarted=function(t){t=t.editor;a.contentEditorRef=t,a.watchContentEditorRefTextAttrsChangesInterval=window.setInterval(function(){},50)},this._onContextBoxEditEnded=function(){a.watchContentEditorRefTextAttrsChangesInterval&&window.clearInterval(a.watchContentEditorRefTextAttrsChangesInterval),a.watchContentEditorRefTextAttrsChangesInterval=null,a.contentEditorRef=null},this.onPageNumberUpdated=function(e){var t;(null!=(t=a.eventCallbacks.pageNumberUpdated)?t:[]).forEach(function(t){return t(e)})},this.onAnnotationChanged=function(e,n,i){var t;(null!=(t=a.eventCallbacks.annotationChanged)?t:[]).forEach(function(t){return t(e,n,i)})},window);if(this._WebViewer=c.default,void 0===t.WebViewer)throw new Error("Webviewer is missing in global scope")}(d=d||{}).enableOriginalUI="backdoor_trueedit_enableOriginalUI",S.setResourceId=function(t){this._resourceId=t},S.prototype.loadTranslationTextsIntoIframe=function(){var t=this.instance.UI.iframeWindow,e=window;t.iloveLang=e.iloveLang},S.prototype.getContentBoxEditor=function(){return this.contentBoxEditor},S.prototype.getIframeDocument=function(){return this.instance.UI.iframeWindow.document},S.prototype.bootstrapWebViewerSDK=function(){return h(this,void 0,void 0,function(){return f(this,function(t){return[2]})})},Object.defineProperty(S.prototype,"WebViewer",{get:function(){return this._WebViewer},enumerable:!1,configurable:!0}),S.prototype.mount=function(l,c,u){return void 0===u&&(u={}),h(this,void 0,void 0,function(){var e,n,i,o,r,a,s=this;return f(this,function(t){switch(t.label){case 0:return e=(n=this).WebViewer,n=n.licenseKey,this.definitiveConfig=p(p({},E),u),[4,this.bootstrapWebViewerSDK()];case 1:if(t.sent(),this.mounted)throw new Error("TrueEdit already mounted!");return a=(i=S._resourceId)?"/dist/css/trueedit."+i+".css":"/dist/css/trueedit.css",i=i?"/dist/js/trueedit."+i+".js":"/dist/js/trueedit.js",r=w,!0===window[d.enableOriginalUI]&&(r=[]),o=this,[4,e({path:c,fullAPI:!0,licenseKey:n,preloadWorker:e.WorkerTypes.CONTENT_EDIT,disabledElements:r,css:a,config:i},l)];case 2:if(o.instance=t.sent(),this.instance.Core.setCustomFontURL("/js/trueedit/"),this.contentBoxEditor&&(this.contentBoxEditor.detach(),this.contentBoxEditor=null),this.contentBoxEditor=new b.ContentBoxEditor(this.instance),r=function(){return!!s.instance.UI.iframeWindow.tootip},a=this.instance.UI.iframeWindow.document.querySelector(".DocumentContainer"),this.instance.UI.iframeWindow.document.querySelector(".App").style.position="relative",this.loadTranslationTextsIntoIframe(),this.viewBar||(this.viewBar=new m.Viewbar("TrueEdit")),r())return this.viewBar.isMounted()||(this.viewBar.mount(a,{zoomValueConverter:function(t){return 2*t}}),this.viewBar.element.style.position="absolute",this.viewBar.element.style.bottom="24px",this.viewBar.element.style.left="50%",this.viewBar.element.style.transform="translate3d( -50%, 0, 0 )"),this.instance.UI.disableFeatures([this.instance.UI.Feature.Initials,this.instance.UI.Feature.SavedSignaturesTab]),this.instance.UI.enableFeatures([this.instance.UI.Feature.ContentEdit]),this.viewerElement=l,this.mounted=!0,[4,this.init(this.instance)];throw v.captureMessage("trueedit.js Javascript library not downloaded by Apryse SDK",g.Severity.Fatal),new Error("trueedit.js Javascript library not downloaded by Apryse SDK");case 3:return t.sent(),[2,this]}})})},S.prototype.destroy=function(){var t=this.viewerElement;return this.instance.UI.dispose(),t.innerHTML="",this.viewBar.unmount(),this},S.prototype.isMounted=function(){return this.mounted},S.prototype.getWindow=function(){return this.instance.UI.iframeWindow},S.prototype.getAppContainer=function(){return this.instance.UI.iframeWindow.document.querySelector(".App")},S.prototype.isPageRendered=function(t){return String(t)in this.renderedPages},S.prototype.addEventListener=function(t,e,n){var i=this;void 0===n&&(n={});var o,r,a,n=this.instance.Core,s=n.documentViewer,l=n.annotationManager;t in this.eventCallbacks||(this.eventCallbacks[t]=[],"pageNumberUpdated"===t?(s.addEventListener("pageNumberUpdated",this.onPageNumberUpdated),this.cleanupFunctions.push(function(){return s.removeEventListener("pageNumberUpdated",i.onPageNumberUpdated)})):"annotationChanged"===t?(s.addEventListener("annotationsLoaded",o=function(){l.addEventListener("annotationChanged",function(t,e,n){t[0];i.onAnnotationChanged(t,e,n)}),i.cleanupFunctions.push(function(){return l.removeEventListener("annotationChanged",i.onAnnotationChanged)})}),this.cleanupFunctions.push(function(){return s.removeEventListener("annotationsLoaded",o)})):"annotationSelected"===t?(l.addEventListener("annotationSelected",r=function(e,n){var t;"selected"===n?i.activeAnnotations=e:"deselected"===n&&(i.activeAnnotations=null),(null!=(t=i.eventCallbacks.annotationSelected)?t:[]).forEach(function(t){return t(e,n)})}),this.cleanupFunctions.push(function(){return l.removeEventListener("annotationSelected",r)})):"contentEditSelectionChange"===t&&(l.addEventListener("contentEditSelectionChange",a=function(){var t;(null!=(t=i.eventCallbacks.annotationSelected)?t:[]).forEach(function(t){return t()})}),this.cleanupFunctions.push(function(){return l.removeEventListener("contentEditSelectionChange",a)}))),this.eventCallbacks[t].push(e)},S.prototype.openFileURL=function(t){return h(this,void 0,void 0,function(){return f(this,function(t){if(this.instance)return[2];throw new Error("Instance not available")})})},S.prototype.download=function(){return h(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.instance.UI.downloadPdf()];case 1:return t.sent(),[2]}})})},S.prototype.getFileBlob=function(){return h(this,void 0,void 0,function(){var e,n,i;return f(this,function(t){switch(t.label){case 0:return e=this.instance.Core.documentViewer,n=e.getAnnotationManager(),e=e.getDocument(),[4,n.exportAnnotations()];case 1:return n=t.sent(),[4,e.getFileData({xfdfString:n})];case 2:return i=t.sent(),i=new Uint8Array(i),[2,new Blob([i],{type:"application/pdf"})]}})})},S.prototype.selectTool=function(t){var e=this.instance;switch(t){case u.TOOL.Pan:return void e.UI.setToolMode(e.Core.Tools.ToolNames.PAN);case u.TOOL.ContentEdit:return void e.UI.setToolMode(e.Core.Tools.ToolNames.CONTENT_EDIT)}throw new Error("Unhandled tool "+t)},S.prototype.setTrueEditTool=function(){var t=this.instance;t.UI.setToolMode(t.Core.Tools.ToolNames.CONTENT_EDIT)},S.prototype.activeToolIs=function(t){var e=this.instance,n=e.UI.getToolMode();switch(t){case u.TOOL.Pan:return(null==n?void 0:n.name)===e.Core.Tools.ToolNames.PAN.toString();case u.TOOL.ContentEdit:return(null==n?void 0:n.name)===e.Core.Tools.ToolNames.CONTENT_EDIT.toString()}throw new Error("Unhandled tool "+t)},S.prototype.isSameFile=function(t){return this.openedFile===t},S.prototype.openFileInstance=function(u,d){return h(this,void 0,void 0,function(){var s,e,l,c,n=this;return f(this,function(t){switch(t.label){case 0:if(this.openedFile===u)throw new Error("Opening same file again!");return s=this.instance,[4,u.arrayBuffer()];case 1:return e=t.sent(),l=s.Core.documentViewer,c=new Blob([e],{type:"application/pdf"}),[2,new Promise(function(r,a){return h(n,void 0,void 0,function(){var e,n,i,o=this;return f(this,function(t){switch(t.label){case 0:return e=function(){l.removeEventListener("documentLoaded",e),o.openedFile=u,o.originalFilename=d,o.definitiveConfig.enableHotkeys,o.handleFileOpened(),r()},l.addEventListener("documentLoaded",e),i=(n=s.UI).loadDocument,[4,c];case 1:return i.apply(n,[t.sent(),{filename:u.name,onError:function(t){l.removeEventListener("documentLoaded",e),a(t)}}]),[2]}})})})]}})})},S.prototype.closeFile=function(){return h(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return(e=this.instance,this.openedFile)?[4,e.UI.closeDocument()]:[2];case 1:return t.sent(),this.openedFile=null,this.originalFilename=null,[2]}})})},S.prototype.init=function(i){return h(this,void 0,void 0,function(){var e,n;return f(this,function(t){return this.switchToToolMode("trueEdit"),e=this.getAppContainer(),i.Core.documentViewer.getAnnotationManager(),i.UI.setTranslations(i.UI.getCurrentLanguage(),this.translations),i.UI.setMinZoomLevel("10%"),i.UI.setMaxZoomLevel("4000%"),(n=i.Core.documentViewer.getContentEditManager()).addEventListener("contentBoxEditStarted",this._onContextBoxEditStarted),n.addEventListener("contentBoxEditEnded",this._onContextBoxEditEnded),e.addEventListener("keydown",function(t){"Escape"===t.key&&(t.stopPropagation(),t.preventDefault())},!0),[2]})})},S.prototype.log=function(t){for(var e=1;e<arguments.length;e++)e-1,0},S.prototype.attach=function(){var t=this;if(this.attached)throw new Error("TrueEdit already attached");this.attached=!0;var e=this.instance.Core.documentViewer;function n(){t.viewBar.setZoom(e.getZoomLevel())}e.addEventListener("zoomUpdated",n),t.cleanupFunctions.push(function(){return e.removeEventListener("zoomUpdated",n)}),this.viewbar_setEventHandlers(this.viewBar),this.viewBar.attach(),this.contentBoxEditor.attach()},S.prototype.detach=function(){if(!1===this.attached)throw new Error("Cannot detach TrueEdit because was not attached in the first place");return this.attached=!1,this.cleanupFunctions.forEach(function(t){return t()}),this.eventCallbacks={},this.viewBar.detach(),this.contentBoxEditor.detach(),this},S.prototype.toggleShow=function(t){t?this.viewerElement.classList.add("editpdf-editortype-workarea--show"):this.viewerElement.classList.remove("editpdf-editortype-workarea--show")},S.prototype.switchToToolMode=function(t){var e=this.instance;if("trueEdit"!==t)throw new Error("Not implemented tool "+t);e.UI.setToolMode(e.Core.Tools.ToolNames.CONTENT_EDIT),e.Core.documentViewer.getContentEditManager().startContentEditMode()},S.prototype.changePageLayoutMode=function(t){var e=this.instance;if("Single"===t)e.UI.setLayoutMode(e.UI.LayoutMode.Continuous);else if("Double"===t)e.UI.setLayoutMode(e.UI.LayoutMode.FacingContinuous);else{if("Cover"!==t)throw new Error("Not implemented Page Layout mode "+t);e.UI.setLayoutMode(e.UI.LayoutMode.FacingCoverContinuous)}},S.prototype.getPageLayoutMode=function(){var t=this.instance,e=this.instance.UI.getLayoutMode();if(e===t.UI.LayoutMode.Continuous)return"Single";if(e===t.UI.LayoutMode.FacingContinuous)return"Double";if(e===t.UI.LayoutMode.FacingCoverContinuous)return"Cover";throw new Error("Out of range page Layout "+e)},S.prototype.zoomTo=function(t){this.instance.Core.documentViewer.zoomTo(t)},S.prototype.getZoom=function(){return this.instance.UI.getZoomLevel()},S.prototype.getCurrentPage=function(){return this.instance.Core.documentViewer.getCurrentPage()},S.prototype.getPageCount=function(){return this.instance.Core.documentViewer.getPageCount()},S.prototype.setCurrentPage=function(t,e,n){t=function(t,e,n){if("Single"===t)return n;if(!e)return n;var i=n%2==0,o=!i;if("Double"===t){if("next"===e)return o?n+2:n+1;if("prev"===e)return o?n-2:n-1}else if("Cover"===t){if("next"===e)return i?n+1:n+2;if("prev"===e)return i?n-2:n-1}throw new Error("Unknown page layout '"+t+"'")}(this.getPageLayoutMode(),n,t);n=this.instance.Core.documentViewer.getPageCount(),n=y.Tools.keepInNumericBounds(1,n,t);return this.instance.Core.documentViewer.setCurrentPage(n,e)},S._resourceId=null,e.TrueEdit=S},function(t,e,n){function o(t){var e;return(r[t]||(e=r[t]={i:t,l:!1,exports:{}},i[t].call(e.exports,e,e.exports,o),e.l=!0,e)).exports}var i,r;window,t.exports=(i=[function(t,e){var n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){n(2),t.exports=n(6)},function(e,n,i){!function(u,d){var t;function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=function(){"use strict";function t(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}function n(){}function r(t){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function o(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,r._immediateFn(function(){var t,e=1===n._state?i.onFulfilled:i.onRejected;if(null!==e){try{t=e(n._value)}catch(t){return void s(i.promise,t)}a(i.promise,t)}else(1===n._state?a:s)(i.promise,n._value)})):n._deferreds.push(i)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==p(e)||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,l(t);if("function"==typeof n)return c((i=n,o=e,function(){i.apply(o,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){s(t,e)}var i,o}function s(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)o(t,t._deferreds[e]);t._deferreds=null}function c(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,s(e,t))})}catch(t){n||(n=!0,s(e,t))}}var e=setTimeout,i=(r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(i,t){var e=new this.constructor(n);return o(this,new function(t,e,n){this.onFulfilled="function"==typeof i?i:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(0,t,e)),e},r.prototype.finally=t,r.all=function(e){return new r(function(o,r){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(e);if(0===a.length)return o([]);for(var s=a.length,t=0;a.length>t;t++)!function e(n,t){try{if(t&&("object"==p(t)||"function"==typeof t)){var i=t.then;if("function"==typeof i)return i.call(t,function(t){e(n,t)},r)}a[n]=t,0==--s&&o(a)}catch(n){r(n)}}(t,a[t])})},r.resolve=function(e){return e&&"object"==p(e)&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(n){return new r(function(t,e){e(n)})},r.race=function(o){return new r(function(t,e){for(var n=0,i=o.length;n<i;n++)o[n].then(t,e)})},r._immediateFn="function"==typeof u?function(t){u(t)}:function(t){e(t,0)},r._unhandledRejectionFn=function(t){void 0!==console&&console},function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==d)return d;throw Error("unable to locate global object")}());"Promise"in i?i.Promise.prototype.finally||(i.Promise.prototype.finally=t):i.Promise=r},"object"==p(n)&&void 0!==e?t():void 0!==(t="function"==typeof(t=t)?t.call(n,i,n,e):t)&&(e.exports=t)}.call(this,i(3).setImmediate,i(0))},function(t,o,r){!function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}o.setTimeout=function(){return new i(n.call(setTimeout,e,arguments),clearTimeout)},o.setInterval=function(){return new i(n.call(setInterval,e,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(e,this._id)},o.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},o.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},o._unrefActive=o.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(4),o.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,o.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}.call(this,r(0))},function(t,e,n){!function(t,h){!function(n){"use strict";var i,e,o,t,r,a,s,l,c,u;function d(t){delete a[t]}function p(t){if(s)setTimeout(p,0,t);else{var e=a[t];if(e){s=!0;try{var n=e.callback,i=e.args;switch(i.length){case 0:n();break;case 1:n(i[0]);break;case 2:n(i[0],i[1]);break;case 3:n(i[0],i[1],i[2]);break;default:n.apply(void 0,i)}}finally{d(t),s=!1}}}}n.setImmediate||(r=1,s=!(a={}),l=n.document,c=(c=Object.getPrototypeOf&&Object.getPrototypeOf(n))&&c.setTimeout?c:n,u="[object process]"==={}.toString.call(n.process)?function(t){h.nextTick(function(){p(t)})}:function(){var t,e;if(n.postMessage&&!n.importScripts)return t=!0,e=n.onmessage,n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}()?(o="setImmediate$"+Math.random()+"$",t=function(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},n.addEventListener?n.addEventListener("message",t,!1):n.attachEvent("onmessage",t),function(t){n.postMessage(o+t,"*")}):n.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){p(t.data)},function(t){e.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,function(t){var e=l.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):function(t){setTimeout(p,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];return a[r]={callback:t,args:e},u(r),r++},c.clearImmediate=d)}("undefined"==typeof self?void 0===t?this:t:self)}.call(this,n(0),n(5))},function(t,e){var n,i,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return(n=setTimeout)(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}var s,l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length)&&p()}function p(){if(!c){var t=a(d);c=!0;for(var e=l.length;e;){for(s=l,l=[];++u<e;)s&&s[u].run();u=-1,e=l.length}s=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===r||!i)&&clearTimeout)return(i=clearTimeout)(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function f(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new h(t,e)),1!==l.length||c||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=f,t.addListener=f,t.once=f,t.off=f,t.removeListener=f,t.removeAllListeners=f,t.emit=f,t.prependListener=f,t.prependOnceListener=f,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e,n){"use strict";n.r(e),n.d(e,"getInstance",function(){return C});function i(t,e){return"string"!=typeof t||!e||(e=e.substr(0,e.lastIndexOf("/")),/^(\/|%2F|[a-z0-9-]+:)/i.test(t))?t:e+"/"+t}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n,i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=function(t){if("object"!==a(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);e=e.call(t,"string");if("object"!==a(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(o.key),"symbol"===a(n)?n:String(n)),o)}}function o(t){var n="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return r(t,arguments,u(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,t)}(t)}function r(t,e,n){return(r=l()?Reflect.construct.bind():function(t,e,n){var i=[null],e=(i.push.apply(i,e),new(Function.bind.apply(t,i)));return n&&c(e,n.prototype),e}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=0,n=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t);n=r,i=l();var n,i,o=function(){var t,e=u(n),e=(t=i?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(!t||"object"!==a(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=e))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t};function r(){var t=this,e=r;if(t instanceof e)return o.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return s((e=r).prototype,[{key:"connectedCallback",value:function(){var e=this.attachShadow({mode:"open"}),n=this.getAttribute("path");window.isApryseWebViewerWebComponent=!0,window.webViewerPath=n,this.id=this.getAttribute("id")||function t(){var e,n,i=localStorage.getItem("wv_instanceIds");return(i=i?i.split(","):[]).length&&i[d]?(e=i[d],d++,e):(n=Math.random().toString(36).slice(-6),-1===i.findIndex(function(t){return t===n})?(i.push(n),localStorage.setItem("wv_instanceIds",i),d++,n):t())}()||"default",fetch("".concat(n,"/ui/index-wc.html")).then(function(t){return t.text()}).then(function(t){e.innerHTML=t,function t(e,n){if(!0==("SCRIPT"===e.tagName))e.parentNode.replaceChild(function(t,e){var n=document.createElement("script");n.text=t.innerHTML;for(var i=-1,o=t.attributes;++i<o.length;){var r=o[i];"src"===r.name?n.setAttribute("src","".concat(e).concat(r.value)):n.setAttribute(r.name,r.value)}return n.async=!1,n}(e,n),e);else for(var i=-1,o=e.childNodes;++i<o.length;)t(o[i],n)}(e,n),window.dispatchEvent(new Event("webviewerloaded"))})}}]),Object.defineProperty(e,"prototype",{writable:!1}),r}(o(HTMLElement));try{customElements.define("apryse-webviewer",n)}catch(t){}function p(a,s){return new Promise(function(e,t){var n,i=document.createElement("apryse-webviewer"),o=(i.setAttribute("id","wc-".concat(s.id)),a.l=a.l||a.licenseKey,a.azureWorkaround=a.azureWorkaround||a.enableAzureWorkaround,a.annotationAdmin=a.annotationAdmin||a.isAdminUser,a.enableReadOnlyMode=a.enableReadOnlyMode||a.isReadOnly,a.showLocalFilePicker=a.showLocalFilePicker||a.enableFilePicker,a.useSharedWorker=a.workerTransportPromise?"true":"false",a.path=a.path||"/lib",a.workerTransportPromise&&(window.apryseWorkerTransportPromise=a.workerTransportPromise),a.l&&(window.apryse_l=btoa(a.l)),["disableLogs","highContrastMode"]);for(n in["autoCreate","autoFocusNoteOnAnnotationSelection","enableOptimizedWorkers","enableAnnotations","preloadPDFWorker","useDownloader"].forEach(function(t){void 0===(null==a?void 0:a[t])&&(a[t]=!0)}),a)void 0!==(null==a?void 0:a[n])&&null!==(null==a?void 0:a[n])&&(o.includes(n)&&!1===a[n]?i.removeAttribute(n):a.encryption?i.setAttribute("auto_load",!1):"licenseKey"!==n&&"l"!==n&&i.setAttribute(n,a[n]));i.setAttribute("webviewerjsversion","10.9.0");function r(t){"requestl"===t.data&&t.source&&t.source.postMessage({type:"responsel",value:a.l||a.licenseKey},"*")}s.appendChild(i),i.addEventListener("ready",function(){var t;null!=(t=i.instance)&&t.UI&&(i.instance.UI.dispose=function(){return new Promise(function(t){window.removeEventListener("message",r),i.instance.Core.documentViewer.closeDocument().then(function(){t()})})}),e(i.instance)}),window.addEventListener("message",r,!1)})}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(t,e,n){return i=function(t){if("object"!==h(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);e=e.call(t,"string");if("object"!==h(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),(e="symbol"===h(i)?i:String(i))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t;var i}window.WebViewerWebComponent=p;function m(){for(var t=1;t<arguments.length;t++)for(var e=Object.keys(arguments[t]),n=0;n<e.length;n++)arguments[0][e[n]]=arguments[t][e[n]];return arguments[0]}function y(t){var e=[];return t.forEach(function(t){e.push(t)}),e}function b(u,d){return new Promise(function(s,l){u.l=u.l||u.licenseKey,u.azureWorkaround=u.azureWorkaround||u.enableAzureWorkaround,u.annotationAdmin=u.annotationAdmin||u.isAdminUser,u.enableReadOnlyMode=u.enableReadOnlyMode||u.isReadOnly,u.showLocalFilePicker=u.showLocalFilePicker||u.enableFilePicker,d.addEventListener("ready",function t(){d.removeEventListener("ready",t);try{var e=d.querySelector("iframe").contentWindow;if(void 0===e.Core.Tools)throw new Error("Viewer isn't instantiated correctly. It could be caused by the 'path' option in the WebViewer constructor not being defined correctly. The 'path' option should be relative to the HTML file you're loading the script on and the lib folder needs to be publicly accessible.");var n,i=c.getInstance(),o={iframeWindow:e,dispose:c.dispose.bind(c)},r=m({},i,g({},i.UI_NAMESPACE_KEY,v(v({},i[i.UI_NAMESPACE_KEY]),o))),a=(c.setCompleteInstance(r),Promise.resolve());u.documentXFDFRetriever&&(a=r[i.CORE_NAMESPACE_KEY].documentViewer.setDocumentXFDFRetriever(u.documentXFDFRetriever)),u.additionalTranslations&&(n=u.additionalTranslations,r[i.UI_NAMESPACE_KEY].setTranslations(n.language,n.translations)),a.then(function(){s(r)})}catch(t){if("config"in u&&""!==u.config)return s();l("Viewer is on a different domain, the promise from WebViewer function is rejected and API functions will not work because of cross domain permissions. See https://docs.apryse.com/documentation/web/guides/wv-inside/#loading-webviewer-from-another-domain for more information.")}});var c=new _.WebViewer(u,d)})}function w(t){for(var e=y(E),n=0;n<e.length;n++){var i=e[n];if(i.iframe===t)return i}return null}var _={},x=0,E=("undefined"==typeof console&&(window.console={log:function(){},warn:function(){},error:function(){}}),window.PDFNet,new Map),S=new Map,O={licenseKey:void 0,enableAzureWorkaround:!(_.WebViewer=function(n,e){var i=this;if(S.get(e))throw new Error("Two instances of WebViewer were created on the same HTML element. Please create a new element for each instance of WebViewer");S.set(e,!0),e.addEventListener("ready",function t(){E.get(e).instance=i.getCompleteInstance(),e.removeEventListener("ready",t)}),this._validateOptions(n);var t=n.webviewerServerURL||n.pdftronServer,t=(n.fullAPI&&t&&(n.forceClientSideInit,n.forceClientSideInit=!0),this.options=m({},_.WebViewer.Options,n),this.options.path.length-1),o=(0<t&&"/"!==this.options.path[t]&&(this.options.path+="/"),this.options.uiPath=this.options.path+this.options.uiPath,this.element=e,this.element.style.overflow="hidden",this);this.messageHandler=function(t){var e;"requestl"===t.data&&t.source&&t.source.postMessage({type:"responsel",value:n.l||n.licenseKey},"*"),"requestConfig"===t.data.type&&t.data.id===o.id&&t.source&&(e=n.config?o._correctRelativePath(n.config):"",t.source.postMessage({type:"responseConfig",value:e},"*"))},window.addEventListener("message",this.messageHandler,!1),this.options.autoCreate&&this.create()}),isAdminUser:!1,isReadOnly:!1},C=(_.WebViewer.prototype={version:"10.9.0",create:function(){var t;this.options.initialDoc&&(t=this._correctRelativePath(this.options.initialDoc),t=encodeURIComponent(JSON.stringify(t)),this.options.initialDoc=t),this._create()},_create:function(){this.id=++x,void 0===this._trigger&&(this._trigger=function(t,e){t=function(e,n){var i;try{i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0})}catch(t){(i=document.createEvent("Event")).initEvent(e,!0,!0),i.detail=n}return i}(t,e);this.element.dispatchEvent(t)});var t=this.options.type.replace(" ","").split(",");t.length<1&&(t[0]="html5"),this._createViewer(t)},_validateOptions:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){e[n];0 in m({},O,_.WebViewer.Options)}t.webviewerServerURL||t.pdftronServer;t.enableRedaction&&t.fullAPI},_notSupportedMobile:function(){var t=document.createElement("div");t.id="webviewer-browser-unsupported",t.textContent="PDF document viewing is not supported by this browser.",this.element.appendChild(t)},_createViewer:function(t){var e,n=this;if(n.selectedType=null,this.isMobileDevice()){if(this.options.documentType&&"xod"!==this.options.documentType&&!this._testWebAssembly())return void this._notSupportedMobile();if(t=Array("html5Mobile"),n.selectedType="html5Mobile",this.options.mobileRedirect)return e=this.options.uiPath+this._getHTML5OptionsURL(),void(window.location=e)}for(var i,o,r=!1,a=!1,s=0;s<t.length;s++){if("html5mobile"===t[s].toLowerCase()){if(this.options.documentType&&"xod"!==this.options.documentType&&!this._testWebAssembly())continue;if(r=!0,n._testHTML5()){if(this.options.mobileRedirect)return n.selectedType="html5Mobile",e=this.options.uiPath+this._getHTML5OptionsURL(),void(window.location=e);if(this.options.xdomainProxyUrl||n.isSameOrigin(decodeURIComponent(n.options.initialDoc))||n._testCORS()){n.selectedType="html5Mobile";break}a=!0}}if("html5"===t[s].toLowerCase()&&(r=!0,n._testHTML5())){var l=n.isSameOrigin(decodeURIComponent(n.options.initialDoc));if(this.options.xdomainProxyUrl||l||n._testCORS()){n.selectedType="html5";break}a=!0}}"html5"===n.selectedType?n._createHTML5():"html5Mobile"===n.selectedType?n._createHTML5Mobile():(a?i="This browser does not support cross origin requests. Please configure xdomain to support CORS.":r&&(i="Please use an HTML5 compatible browser."),i&&((o=document.createElement("div")).id="webviewer-browser-unsupported",o.textContent=i,n.element.appendChild(o)))},_viewerLoaded:function(t){this._trigger("ready");try{var e,n,i=t.contentWindow;i.postMessage({type:"viewerLoaded"},"*"),void 0!==this.options.encryption&&(e=decodeURIComponent(this.options.initialDoc),this.options.initialDoc&&(e=JSON.parse(e)),n={decrypt:i.Core.Encryption.decrypt,decryptOptions:this.options.encryption,documentId:this.options.documentId,extension:"xod"},this.getInstance().UI.loadDocument(e,n))}catch(t){}},_getHTML5OptionsURL:function(){var t,e,n=this.options,i=n.webviewerServerURL||n.pdftronServer,o="";return n.initialDoc&&(o+="#d=".concat(n.initialDoc)),void 0===n.backendType&&(n.backendType=n.pdfBackend),n.documentType&&"xod"===n.documentType&&(t=n.documentType),n.preloadWorker&&"xod"===n.preloadWorker&&(t=n.preloadWorker),(t=n.extension?n.extension:t)&&(o+="&extension=".concat(t)),n.documentType&&"xod"!==n.documentType&&(e=n.documentType),(e=n.preloadWorker&&"xod"!==n.preloadWorker?n.preloadWorker:e)&&(o+="&preloadWorker=".concat(e)),n.backendType&&(o+="&pdf=".concat(n.backendType,"&office=").concat(n.backendType,"&legacyOffice=").concat(n.backendType)),n.filename&&(o+="&filename=".concat(n.filename)),void 0!==n.streaming&&(o+="&streaming=".concat(n.streaming)),n.externalPath&&(t=this._correctRelativePath(n.externalPath),t=encodeURIComponent(t),o+="&p=".concat(t)),n.encryption&&(o+="&auto_load=false"),n.enableAnnotations&&(o+="&a=1"),n.disabledElements&&(e=encodeURIComponent(n.disabledElements.join(",")),o+="&disabledElements=".concat(e)),n.serverUrl&&(t=this._correctRelativePath(n.serverUrl),t=encodeURIComponent(t),o+="&server_url=".concat(t)),n.serverUrlHeaders&&(o+="&serverUrlHeaders=".concat(JSON.stringify(n.serverUrlHeaders))),n.documentId&&(o+="&did=".concat(n.documentId)),n.css&&(e=this._correctRelativePath(n.css),e=encodeURIComponent(e),o+="&css=".concat(e)),n.disableI18n&&(o+="&disableI18n=1"),n.enableOfflineMode&&(o+="&offline=1"),n.startOffline&&(o+="&startOffline=1"),(n.enableReadOnlyMode||n.isReadOnly)&&(o+="&readonly=1"),n.hideAnnotationPanel&&(o+="&hideAnnotationPanel=1"),n.disableToolGroupReordering&&(o+="&disableToolGroupReordering=1"),void 0!==n.annotationUser&&(o+="&user=".concat(n.annotationUser)),void 0===n.annotationAdmin&&void 0===n.isAdminUser||(o+="&admin=".concat(n.annotationAdmin||n.isAdminUser?1:0)),void 0!==n.custom&&(o+="&custom=".concat(encodeURIComponent(n.custom))),void 0===n.showLocalFilePicker&&void 0===n.enableFilePicker||(o+="&filepicker=".concat(n.showLocalFilePicker||n.enableFilePicker?1:0)),void 0!==n.fullAPI&&(o+="&pdfnet=".concat(n.fullAPI?1:0)),void 0!==n.enableRedaction&&(o+="&enableRedaction=".concat(n.enableRedaction?1:0)),void 0!==n.disableVirtualDisplayMode&&(o+="&disableVirtualDisplayMode=".concat(n.disableVirtualDisplayMode?1:0)),void 0!==n.hideDetachedReplies&&(o+="&hideDetachedReplies=".concat(n.hideDetachedReplies?1:0)),void 0!==n.enableMeasurement&&(o+="&enableMeasurement=".concat(n.enableMeasurement?1:0)),void 0!==n.showToolbarControl&&(o+="&toolbar=".concat(n.showToolbarControl?"true":"false")),void 0!==n.notesInLeftPanel&&(o+="&notesInLeftPanel=".concat(n.notesInLeftPanel?1:0)),void 0!==n.autoExpandOutlines&&(o+="&autoExpandOutlines=".concat(n.autoExpandOutlines?1:0)),void 0!==n.enableAnnotationNumbering&&(o+="&enableAnnotationNumbering=".concat(n.enableAnnotationNumbering?1:0)),void 0!==n.enableOfficeEditing&&(o+="&enableOfficeEditing=".concat(n.enableOfficeEditing?1:0)),void 0!==n.xdomainProxyUrl&&(t="string"==typeof n.xdomainProxyUrl?{url:n.xdomainProxyUrl}:n.xdomainProxyUrl,o+="&xdomain_urls=".concat(encodeURIComponent(JSON.stringify(t)))),(n.azureWorkaround||n.enableAzureWorkaround)&&(o+="&azureWorkaround=1"),n.enableOptimizedWorkers||(o+="&enableOptimizedWorkers=0"),n.useDownloader||(o+="&useDownloader=0"),n.disableWebsockets&&(o+="&disableWebsockets=1"),n.disableStreaming&&(o+="&disableStreaming=1"),n.forceClientSideInit&&(o+="&forceClientSideInit=1"),n.loadAsPDF&&(o+="&loadAsPDF=1"),void 0!==n.workerTransportPromise&&(o+="&useSharedWorker=".concat(n.workerTransportPromise?"true":"false")),void 0!==i&&i&&(o+="&webviewerServerURL=".concat(encodeURIComponent(i))),n.fallbackToClientSide&&(o+="&fallbackToClientSide=1"),void 0!==n.singleServerMode&&(o+="&singleServerMode=".concat(n.singleServerMode?"true":"false")),void 0!==n.accessibleMode&&(o+="&accessibleMode=".concat(n.accessibleMode?1:0)),n.disableLogs&&(o+="&disableLogs=1"),n.enableViewStateAnnotations&&(o+="&enableViewStateAnnotations=1"),n.disableFlattenedAnnotations&&(o+="&disableFlattenedAnnotations=1"),n.highContrastMode&&(o+="&highContrastMode=1"),void 0!==n.selectAnnotationOnCreation&&(o+="&selectAnnotationOnCreation=".concat(n.selectAnnotationOnCreation?1:0)),void 0!==n.autoFocusNoteOnAnnotationSelection&&(o+="&autoFocusNoteOnAnnotationSelection=".concat(n.autoFocusNoteOnAnnotationSelection?1:0)),n.disableIndexedDB&&(o+="&disableIndexedDB=1"),n.disableMultiViewerComparison&&(o+="&disableMultiViewerComparison=1"),n.showInvalidBookmarks&&(o+="&showInvalidBookmarks=1"),n.disableObjectURLBlobs&&(o+="&disableObjectURLBlobs=".concat(n.disableObjectURLBlobs)),0<(o=(o+="&id=".concat(this.id))+"&basePath=".concat(encodeURIComponent(window.location.pathname))).length&&"&"===o[0]&&(o="#".concat(o.slice(1))),o+="&webViewerJSVersion=".concat(this.version),n.ui&&!n.enableOfficeEditing&&(o+="&ui=".concat(n.ui)),o},setInstanceData:function(t){E.set(this.element,{iframe:t,l:this.options.l||this.options.licenseKey,workerTransportPromise:this.options.workerTransportPromise})},_createHTML5:function(){var n=this,t=this.options.uiPath+this._getHTML5OptionsURL(),e=document.createElement("iframe");this.setInstanceData(e),e.id="webviewer-".concat(this.id),e.src=t,e.title="webviewer",e.frameBorder=0,e.width="100%",e.height="100%",e.setAttribute("allowfullscreen",!0),e.setAttribute("webkitallowfullscreen",!0),e.setAttribute("mozallowfullscreen",!0),this.iframe=e,this.options.backgroundColor&&e.setAttribute("data-bgcolor",this.options.backgroundColor),this.options.assetPath&&e.setAttribute("data-assetpath",encodeURIComponent(this.options.assetPath)),this.element.appendChild(e),window.addEventListener("message",function t(e){if("viewerLoaded"===e.data.type&&e.data.id===n.id)try{n.instance=n.iframe.contentWindow.instance}catch(t){}finally{window.removeEventListener("message",t),n._viewerLoaded(n.iframe)}})},_createHTML5Mobile:function(){var n=this,t=this.options.uiPath+this._getHTML5OptionsURL(),e=document.createElement("iframe");this.setInstanceData(e),e.id="webviewer-".concat(this.id),e.src=t,e.frameborder=0,this.options.assetPath&&e.setAttribute("data-assetpath",encodeURIComponent(this.options.assetPath)),e.style.width="100%",e.style.height="100%",this.iframe=e,this.element.appendChild(e),window.addEventListener("message",function t(e){if("viewerLoaded"===e.data.type&&e.data.id===n.id)try{n.instance=n.iframe.contentWindow.instance}catch(t){}finally{window.removeEventListener("message",t),n._viewerLoaded(n.iframe)}})},dispose:function(){var e=this;return new Promise(function(t){E.delete(e.element),S.delete(e.element),window.removeEventListener("message",e.messageHandler),e.iframe=null,e.instance.Core.documentViewer.unmount().then(function(){t()})})},getInstance:function(){return this.instance},setCompleteInstance:function(t){this.completeInstance=t},getCompleteInstance:function(){return this.completeInstance},_correctRelativePath:function(t){var e=window.location.pathname;return Array.isArray(t)?t.map(function(t){return i(t,e)}):i(t,e)},_testHTML5:function(){try{var t=document.createElement("canvas");return t&&t.getContext("2d")}catch(t){return!1}},_testWebAssembly:function(){return!(!window.WebAssembly||!window.WebAssembly.validate)},_testCORS:function(){return"XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest},isIE:function(){var t=navigator.userAgent.toLowerCase(),t=/(msie) ([\w.]+)/.exec(t)||/(trident)(?:.*? rv:([\w.]+)|)/.exec(t);return t&&parseInt(t[2],10)},isMobileDevice:function(){return!this.isIE()&&(0===this.scrollbarWidth()&&navigator.userAgent.match(/Edge/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Touch/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/Silk/i))},scrollbarWidth:function(){var t=document.createElement("div"),e=(t.style.cssText="width:100px;height:100px;overflow:scroll !important;position:absolute;top:-9999px",document.body.appendChild(t),t.offsetWidth-t.clientWidth);return document.body.removeChild(t),e},isSameOrigin:function(t){var e=window.location,n=document.createElement("a"),t=(n.href=t,""===n.host&&(n.href=n.href),window.location.port),i=n.port;return"http:"===n.protocol?(i=i||"80",t=t||"80"):"https:"===n.protocol&&(i=i||"443",t=t||"443"),n.hostname===e.hostname&&n.protocol===e.protocol&&i===t}},_.WebViewer.Options={initialDoc:void 0,annotationAdmin:void 0,isAdminUser:void 0,annotationUser:void 0,assetPath:void 0,autoCreate:!0,autoFocusNoteOnAnnotationSelection:!0,azureWorkaround:!1,additionalTranslations:void 0,enableAzureWorkaround:!1,enableOptimizedWorkers:!0,backgroundColor:void 0,backendType:void 0,css:void 0,config:void 0,custom:void 0,documentId:void 0,documentType:void 0,preloadWorker:void 0,extension:void 0,enableAnnotations:!0,filename:void 0,disableI18n:!1,disabledElements:void 0,disableWebsockets:!1,enableOfflineMode:!1,enableReadOnlyMode:!1,isReadOnly:!1,enableRedaction:!1,disableVirtualDisplayMode:!1,enableMeasurement:!1,encryption:void 0,externalPath:void 0,hideAnnotationPanel:!1,disableToolGroupReordering:!1,uiPath:"./ui/index.html",l:void 0,licenseKey:void 0,mobileRedirect:!1,path:"",pdfBackend:void 0,webviewerServerURL:void 0,fallbackToClientSide:!1,singleServerMode:!1,fullAPI:!1,preloadPDFWorker:!0,serverUrl:void 0,serverUrlHeaders:void 0,showLocalFilePicker:!1,enableFilePicker:!1,showToolbarControl:void 0,startOffline:!1,streaming:void 0,type:"html5",useDownloader:!0,workerTransportPromise:void 0,xdomainProxyUrl:void 0,ui:void 0,forceClientSideInit:!1,loadAsPDF:!1,accessibleMode:void 0,disableLogs:!1,enableViewStateAnnotations:!1,highContrastMode:!1,selectAnnotationOnCreation:!1,notesInLeftPanel:!1,autoExpandOutlines:!1,enableAnnotationNumbering:!1,enableOfficeEditing:!1,documentXFDFRetriever:void 0,disableMultiViewerComparison:void 0,showInvalidBookmarks:!0,disableObjectURLBlobs:!1,disableFlattenedAnnotations:!1,disableStreaming:!1},b.l=function(t){t=w(t);return t&&t.l},b.workerTransportPromise=function(t){t=w(t);return t&&t.workerTransportPromise},b.WorkerTypes={ALL:"all",OFFICE:"office",LEGACY_OFFICE:"legacyOffice",PDF:"pdf",CONTENT_EDIT:"contentEdit",OFFICE_EDITOR:"officeEditor"},b.BackendTypes={ASM:"asm",WASM:"ems",JS_WORKER:"jsworker",THREADED_WASM:"wasm-threads"},function(t){var e=y(E);if(!e.length||!e.filter(function(t){return t.instance}).length)return null;if(1<e.length&&!t)throw new Error("More than one instance of WebViewer was found, and no element was passed into getInstance(). Please specify which instance you want to get.");return(t?E.get(t)||{}:e[0]||{}).instance});b.getInstance=C,(window.WebViewer=b).WebComponent=p,e.default=b.Iframe=b}],r={},o.m=i,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=1))},function(t,o,e){"use strict";var r=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},a=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},s=(Object.defineProperty(o,"__esModule",{value:!0}),o.ContentBoxEditor=o.textAttributesAreEqual=void 0,e(260)),l=e(347),u=["autofit","bold","fontColor","fontNames","fontSize","italic","leading","strike","textAlign","underline","valign"],c="ilovepdf-content-box",d=function(t,e){if(e in t)return t[e];for(var n=0,i=Object.values(t).filter(Boolean).filter(function(t){return"object"==typeof t});n<i.length;n++){var o=i[n],o=d(o,e);if(o)return o}};o.textAttributesAreEqual=function(t,e){if(!t)throw new Error("Text attribute obj 1 is missing");if(!e)throw new Error("Text attribute obj 2 is missing");for(var n=0;n<u.length;n++){var i=u[n];if(!(i in t))throw new Error("Text attribute key '"+i+"' is missing");if(!(i in e))throw new Error("Text attribute key '"+i+"' is missing");if(Array.isArray(t)){if(t[i].length!==e[i].length)return!1;for(var o=0;o<t[i].length;o++)for(var r=t[i][o],a=t[i][o],s=Object.keys(r),l=0;l<s.length;l++){var c=s[l];if(r[c]!==a[c])return!1}}else if(t[i]!==e[i])return!1}return!0};function n(t){var i=this;this.ref=null,this._attached=!1,this.attach=function(){var t;!0!==i._attached&&(i._attached=!0,(t=i.instance.Core.documentViewer.getContentEditManager()).addEventListener("contentBoxEditStarted",i._contentBoxEditStarted),t.addEventListener("contentBoxEditEnded",i._contentBoxEditEnded))},this.detach=function(){var t;!1!==i._attached&&(i._attached=!1,t=i.instance.Core.documentViewer.getContentEditManager(),i._contentBoxEditEnded(),t.removeEventListener("contentBoxEditStarted",i._contentBoxEditStarted),t.removeEventListener("contentBoxEditEnded",i._contentBoxEditEnded))},this.annotationId=null,this._contentBoxEditStarted=function(t){i._contentBoxEditEnded();var e=d(t,"contentEditBoxId"),n=i.instance.UI.iframeWindow.document.getElementById(e);if(!n)throw new Error("ContentBox not found with ID '"+e+"'");n.classList.add(c);try{if(i.ref=t,i.callback({evtType:"start",element:n,ref:t}),i.annotationId=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n];if("editor"!==i){i=t[i];if("object"==typeof i&&"string"==typeof i.Id)return 0===i.Id.length?null:i.Id}}return null}(i.ref),null===i.annotationId)throw new Error("[BoxEditor] AnnotationId not found")}catch(t){throw i._contentBoxEditEnded(),t}l.waitFor(function(){return r(i,void 0,void 0,function(){return a(this,function(t){return[2,!!n.querySelector("[contenteditable]")]})})},{}).then(function(t){if(t.success()){t=n.querySelector("[contenteditable]");if(!t)throw new Error("Content Editable should be here but not present");i.callback({evtType:"contentEditAvailable",contentEditElement:t})}}),i.interval=window.setInterval(function(){return r(i,void 0,void 0,function(){var e,n,i;return a(this,function(t){return this.callback&&(this.ref?(e=this.ref,e=e.editor,n=this.instance,1<(n=n.Core.annotationManager.getSelectedAnnotations()).length||((i=n[0])?i.Id===this.annotationId&&(i=s.findObjectWithProps(e,["bold","fontNames","italic"],{ownPropertiesOnly:!0}),null===this.lastTextAttributes||!o.textAttributesAreEqual(i,this.lastTextAttributes))&&(this.lastTextAttributes,i)&&(this.lastTextAttributes=i,this.callback({evtType:"change",textAttributes:i,annotations:n})):this._contentBoxEditEnded())):this._contentBoxEditEnded()),[2]})})},50)},this._contentBoxEditEnded=function(){i.interval&&window.clearInterval(i.interval),i.callback({evtType:"end",ref:null,element:null}),i.annotationId=null,i.interval=null,i.lastTextAttributes=null,i.ref=null},this.instance=t}n.elementIsContentBox=function(t){return!!t.classList.contains(c)||!!t.closest("."+c)},n.prototype.onChange=function(t){this.callback=t},n.prototype.isActive=function(){return null!==this.ref},n.getContentBoxes=function(t){return t.UI.iframeWindow.document.body.querySelectorAll("."+c)},n.getActiveContentBox=function(t){t=t.UI.iframeWindow.document.activeElement;if(t&&("true"===t.getAttribute("contenteditable")&&!!t.closest("."+c)))return t;return null},o.ContentBoxEditor=n},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},h=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},o=(Object.defineProperty(e,"__esModule",{value:!0}),e.lockSleepUntil=e.waitFor=e.Lock=void 0,r.prototype.getLockId=function(){return this._id},r.prototype.isLocked=function(){return!0===this._locked},r.prototype.lock=function(){return"keep-first"===this.policy&&!0===this._locked?null:(this._locked=!0,this._id++,this._id)},r.prototype.unlock=function(){this._locked=!1},r.prototype.idMatches=function(t){return this._id===t},r);function r(t){this._locked=!1,this._id=0,this.policy=t}e.Lock=o;a.prototype.success=function(){return"success"===this.status};var f=a;function a(t){this.status=t}function v(n){return i(this,void 0,void 0,function(){return h(this,function(t){return[2,new Promise(function(t,e){return setTimeout(t,n)})]})})}e.waitFor=function(a,s){var l;return i(this,void 0,void 0,function(){var e,n,i,o,r;return h(this,function(t){switch(t.label){case 0:e=0,n=null!=(l=s.pollInterval)?l:100,i=null!=(l=s.timeout)?l:15e3,o=Date.now(),t.label=1;case 1:t.trys.push([1,6,,7]),t.label=2;case 2:return[4,a()];case 3:return t.sent()?[2,new f("success")]:s.attempts&&s.attempts>e?[2,new f("success")]:(r=Date.now(),i<r-o?[2,new f("timeout")]:(e++,[4,v(n)]));case 4:return t.sent(),[3,2];case 5:return[3,7];case 6:return t.sent(),[2,new f("exception")];case 7:throw new Error("Never gets here")}})})},e.lockSleepUntil=function(u,d){var p;return i(this,void 0,void 0,function(){var e,n,i,o,r,a,s,l,c;return h(this,function(t){switch(t.label){case 0:if(e=d.lock,n=e.lock(),i=null!=(p=null==d?void 0:d.pollInterval)?p:100,o=(null!=(p=null==d?void 0:d.timeout)?p:5e3)+i,r=null!=(p=null==d?void 0:d.attempts)?p:null,null!=d&&d.timeout&&i>=d.timeout)throw new Error("pollInterval cannot be equal or bigger than timeout");a=Date.now(),s=0,l=null,t.label=1;case 1:t.trys.push([1,,6,7]),t.label=2;case 2:return c=Date.now(),c=c-a,e&&!e.idMatches(n)?(l=new f("lock-ownership-lost"),[3,5]):o<=c?[2,new f("timeout")]:null!=r&&r<s?[2,new f("attempts")]:[4,u()];case 3:return t.sent()?(e&&!e.idMatches(n)?l=new f("lock-ownership-lost"):l=new f("success"),[3,5]):(s++,[4,v(i)]);case 4:return t.sent(),[3,2];case 5:if(l)return[3,7];throw new Error("Should never get here!");case 6:return e&&e.unlock(),[7];case 7:return[2,l]}})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextOptionsMenu=e.TextOption=void 0;var c,i=n(293),o=n(349),r=[4,6,8,10,12,14,18,24,36,48,64,72],a=["#FFFFFF","#000000","#F44336","#E91E64","#9C28B0","#2196F3","#00BCD4","#4CAF50","#FFEC3A","#FF5722","#795548","#E0E0E0","#9E9E9E","#424242"];(n=c=e.TextOption||(e.TextOption={})).Font="Font",n.FontSize="FontSize",n.Bold="Bold",n.Italic="Italic",n.Underline="Underline",n.TextColor="TextColor",n.TextAlign="TextAlign",n.RemoveAnnotation="RemoveAnnotation";function s(){var l=this;this._drawn=!1,this.blocks={},this.fonts={},this.getTippy=function(t){t=l.getOwnerWindow(t);if(t.tippy)return t.tippy;throw new Error("tippy global object not found in window object")},this.setAllTooltips=function(t){var e,n,i,o=l.getTippy;for(e in t){var r=t[e];switch(e){case c.Bold:case c.Italic:case c.Underline:case c.TextAlign:case c.TextColor:case c.RemoveAnnotation:var a=o((s=l.blocks[e]).tooltipTarget);n=s.tooltipTarget,a(n,{content:{text:r}.text,placement:"bottom",arrow:!0,animation:"fade"});break;default:throw new Error("No tooltip translation for "+e)}}for(i in l.blocks)var s=i[i]},this.id=i.randomString(),s.globalId=this.id}s.prototype.setFonts=function(t){return this.fonts=t,this},s.prototype.setOptionConstructionValues=function(t){null!=t&&t.fonts&&(this.fonts=t.fonts)},s.prototype.draw=function(t){var n=this;!0!==this._drawn&&(this.blocks={},this.element=t,this._drawn=!0,[[c.Font,function(){return o.FontOption(n.fonts)}],[c.FontSize,function(){return o.FontSizeOption(r)}],[c.Bold,o.BoldOption],[c.Italic,o.ItalicOption],[c.Underline,o.UnderlineOption],[c.TextAlign,function(){return o.TextAlignOption(n.element)}],[c.TextColor,function(){return o.TextColorOption(n.element,a)}],[c.RemoveAnnotation,o.RemoveAnnotationOption]].forEach(function(t){var e=t[0],t=(0,t[1])();n.blocks[e]=t,n.element.appendChild(t.dom)}))},s.prototype.getOwnerWindow=function(t){return t.ownerDocument.defaultView},s.prototype.onChange=function(t,e){this.blocks[t].onChange(e)},s.prototype.setProp=function(t,e){this.blocks[t].set(e)},s.prototype.getProp=function(t){return this.blocks[t].get()},s.prototype.undraw=function(){!1!==this._drawn&&(this.element.innerHTML="",this.blocks={},this._drawn=!1)},e.TextOptionsMenu=s},function(t,e,n){"use strict";!function(h){Object.defineProperty(e,"__esModule",{value:!0}),e.RemoveAnnotationOption=e.TextAlignOption=e.TextColorOption=e.UnderlineOption=e.ItalicOption=e.BoldOption=e.FontSizeOption=e.FontOption=void 0;function l(t,a){function e(t){for(var e in l.innerHTML="",t){var n=document.createElement("option");n.value=e,n.innerHTML=t[e],l.appendChild(n)}}function s(e){var t=l.querySelectorAll("option");t.length!==u.length&&t.forEach(function(t){u.includes(t.value)||e!==t.value&&t.parentElement.removeChild(t)})}var n,l=document.createElement("select"),c=(l.dataset.triggerChange="true",null!=(n=null==a?void 0:a.unknownValueFormatter)?n:void 0),u=(e(t),l.dataset.initialValues=Object.keys(t).join(";"),l.dataset.initialValues.split(";")),i=void 0;return l.addEventListener("change",function(t){var e=l.value;c&&s(e),i&&i(e)}),{element:l,get:function(){return l.value},set:function(t){if(t!==l.value){if(!u.includes(t)){if(!(void 0!==c))throw new Error("Unknown option "+t);if(!l.querySelector("option[value='"+t+"']")){s(t);var e=document.createElement("option");if(e.value=t,e.innerHTML=c(t),a.sort){for(var n=l.querySelectorAll("option[value]"),i=!1,o=0;o<n.length;o++){var r=n[o];if(a.sort(e.value,r.value)<0){l.insertBefore(e,r),i=!0;break}}i||l.appendChild(e)}else l.prepend(e)}}l.value=t}},onChange:function(t){i=t},setCollection:e,toggleLock:function(t){l.disabled=t}}}function s(t){function e(t,e){o||("true"===t?(i.classList.add("switch-on"),i.classList.remove("switch-off")):(i.classList.add("switch-off"),i.classList.remove("switch-on")),e&&a&&a(t))}function n(){return i.classList.contains("switch-on")?"true":"false"}var i=document.createElement("div"),o=!1,r=(i.classList.add("switch-button"),i.classList.add("switch-off"),document.createElement("div"));r.innerHTML=t;(t=r.children[0]).classList.add("editpdf-icon"),i.appendChild(t);var a=void 0;return i.addEventListener("click",function(){e("true"===n()?"false":"true",!0)}),{element:i,set:function(t){e(t,!1)},get:n,onChange:function(t){a=t},setCollection:function(t){},toggleLock:function(t){o=t}}}function c(t,e){var n,i=document.createElement("div"),o=document.createElement("div");return i.classList.add("editpdf__menu__block"),o.classList.add("wrapper"),i.appendChild(o),e&&((n=document.createElement("div")).innerHTML=e,(e=n.children[0]).classList.add("editpdf-icon"),o.appendChild(e)),o.appendChild(t),i}function f(t){function o(){a=h("<div class='color-row'>")[0],e.append(a)}var r=v.IconRepository.transparentColorSample(),e=document.createElement("div"),a=(e.classList.add("color-palette"),null),s=(o(),!0),l=0,c=2;return t.includes("transparent")&&(c=3),t.forEach(function(t){a.append((e=(i=void 0===i?!1:i)?" for-border":"",n=i?"border-color":"background",("transparent"===(t=t)?h("<div class='color-col'><div class='color-sample"+e+"' data-value='"+t+"' "+(i?"":"style='"+n+": "+t+"'")+">"+(i?"":r)+"</div></div>"):"#ffffff"===t.toLowerCase()?h("<div class='color-col color-col-white'><div class='color-sample"+e+"' data-value='"+t+"' style='"+n+": "+t+"'></div></div>"):h("<div class='color-col'><div class='color-sample"+e+"' data-value='"+t+"' style='"+n+": "+t+"'></div></div>"))[0]));var e,n,i=s?c:6;++l%i==0&&(s&&(s=!1,l=0),o())}),e}var v=n(254),g=n(350),m=n(351),y={left:v.IconRepository.textLeftAlignment(),center:v.IconRepository.textCenterAlignment(),right:v.IconRepository.textRightAlignment(),justify:v.IconRepository.textJustifytAlignment()},u='<svg xmlns="http://www.w3.org/2000/svg" width="9.563" height="11.076" class="leftside-icon"><path fill="#47474F" fill-rule="evenodd" d="M4.79 11.076c.302 0 .543-.09.725-.273s.273-.424.273-.725V1.654h2.84c.624 0 .936-.276.936-.827S9.25 0 8.627 0H.936C.312 0 0 .276 0 .827s.312.827.936.827h2.84v8.424c0 .302.09.543.273.725s.43.273.74.273z"></path></svg>',d='<svg xmlns="http://www.w3.org/2000/svg" width="14.405" height="11.076" fill="#47474F" fill-rule="evenodd" class="leftside-icon"><path d="M9.63 11.076c.302 0 .543-.1.725-.273s.273-.424.273-.725V1.654h2.84c.624 0 .936-.276.936-.827S14.093 0 13.47 0h-7.7c-.624 0-.936.276-.936.827s.312.827.936.827h2.84v8.424c0 .302.1.543.273.725s.43.273.74.273zm-6.934-.036c.235 0 .424-.07.567-.206s.214-.32.214-.55V6.328H4.66c.246 0 .43-.052.55-.155s.18-.262.18-.475-.06-.37-.18-.47-.304-.15-.55-.15H.73c-.246 0-.43.05-.55.15s-.18.258-.18.47.06.37.18.475.304.155.55.155h1.184v3.956c0 .23.07.413.214.55s.332.206.567.206z"></path></svg>',p='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="12"><path fill="#47474F" fill-rule="evenodd" d="M5.81 12C8.377 12 10 10.64 10 8.565c0-1.634-1.2-2.817-2.892-2.905v-.07C8.5 5.404 9.453 4.353 9.453 3.02 9.453 1.148 8.025 0 5.688 0h-4.25C.53 0 0 .53 0 1.466v9.068C0 11.46.53 12 1.437 12H5.81zm-1.2-7.03H2.848V1.996h1.966c1.155 0 1.843.54 1.843 1.448 0 .954-.758 1.528-2.046 1.528zm-1.764 5.05H4.92c1.42 0 2.187-.574 2.187-1.66 0-1.06-.802-1.634-2.25-1.634h-2.01v3.294z"></path></svg>',b='<svg xmlns="http://www.w3.org/2000/svg" width="9" height="12" class="editpdf-icon"> <path fill="#47474F" fill-rule="evenodd" d="M6.203 12c.436 0 .745-.256.745-.68 0-.415-.3-.672-.736-.672H4.34l2.052-9.296h1.862c.445 0 .745-.265.745-.69C9 .256 8.71 0 8.264 0H2.797c-.436 0-.736.256-.736.663 0 .424.31.69.745.69h1.862l-2.062 9.296H.736c-.436 0-.736.256-.736.672 0 .424.31.68.745.68h5.458z"></path></svg>',w='<svg xmlns="http://www.w3.org/2000/svg" width="9" height="14" class="editpdf-icon"><path fill="#47474F" fill-rule="evenodd" d="M9 7.424c0 2.464-1.727 4.153-4.504 4.153C1.727 11.577 0 9.888 0 7.424V.783C0 .297.3 0 .767 0s.775.297.775.783v6.5c0 1.714 1.1 2.86 2.954 2.86 1.873 0 2.962-1.145 2.962-2.86v-6.5c0-.486.3-.783.767-.783S9 .297 9 .783v6.642zm0 6.08a.48.48 0 0 1-.492.494H.484A.48.48 0 0 1 0 13.506a.48.48 0 0 1 .484-.486h8.023a.48.48 0 0 1 .492.486z"></path></svg>';e.FontOption=function(t){var t=l(t,{unknownValueFormatter:function(t){return t}}),e=t.element,n=t.set,i=t.get,o=t.onChange,r=t.setCollection,t=t.toggleLock,a=c(e,u);return{tooltipTarget:a,dom:a,setCollection:r,element:e,set:n,get:i,onChange:o,toggleLock:t}},e.FontSizeOption=function(t){var e={},t=(t.forEach(function(t){return e[String(t)]=String(t)}),l(e,{unknownValueFormatter:function(t){return t},sort:function(t,e){return Number(t)-Number(e)}})),n=t.element,i=t.set,o=t.get,r=t.onChange,a=t.setCollection,t=t.toggleLock,s=c(n,d);return{tooltipTarget:s,dom:s,setCollection:a,element:n,set:i,get:o,onChange:r,toggleLock:t}},e.BoldOption=function(){var t=s(p),e=t.element,n=t.get,i=t.set,o=t.onChange,r=t.setCollection,t=t.toggleLock,a=c(e);return{tooltipTarget:a,dom:a,setCollection:r,element:e,set:i,get:n,onChange:o,toggleLock:t}},e.ItalicOption=function(){var t=s(b),e=t.element,n=t.get,i=t.set,o=t.onChange,r=t.setCollection,t=t.toggleLock,a=c(e);return{tooltipTarget:a,dom:a,setCollection:r,element:e,set:i,get:n,onChange:o,toggleLock:t}},e.UnderlineOption=function(){var t=s(w),e=t.element,n=t.get,i=t.set,o=t.onChange,r=t.setCollection,t=t.toggleLock,a=c(e);return{tooltipTarget:a,dom:a,setCollection:r,element:e,set:i,get:n,onChange:o,toggleLock:t}},e.TextColorOption=function(t,e){function n(t){var e=h(s.querySelector(".color-palette-icon"));e.find("g.color-palette").hide(),("transparent"===t?e.find("g.color-palette.color-palette--transparent"):"#ffffff"===t.toLowerCase()?e.find("g.color-palette.color-palette--white"):((e=e.find("g.color-palette.color-palette--default")).find("rect").css("fill",t),e)).show()}function i(t){var e,n=h(v.IconRepository.check())[0];p&&((e=p.querySelector(".check-icon"))&&e.parentElement.removeChild(e),p.querySelector("[data-value]").appendChild(n))}function o(){return d}function r(t){p?t!==d&&(i(),n(d=t)):(n(t),d=t)}var a=document.createElement("div"),s=document.createElement("div"),l=(a.classList.add("editpdf__menu__block"),s.classList.add("wrapper","contextual-menu-wrapper"),a.appendChild(s),!1),c=void 0,u=h(v.IconRepository.unfoldArrow())[0],d=(u.classList.add("unfold-arrow-icon"),s.innerHTML="<div>"+v.IconRepository.textFillColor()+m.getOuterHTML(u,!1)+"</div>",""),p=null;t.appendChild(a),g.createContextMenu(s,m.getOuterHTML(f(e),!1),function(t){var e=t.content,n=t.hidePopover;p=e,0<d.length&&i(),e.querySelectorAll("[data-value]").forEach(function(t){t.addEventListener("click",function(){r(t.dataset.value),n(),c&&c(t.dataset.value)})})},{cssClasses:["color-palette","light"],onShow:function(){return!l}});return{tooltipTarget:s,dom:document.createElement("div"),setCollection:function(t){},element:document.createElement("div"),set:r,get:o,onChange:function(t){c=t},toggleLock:function(t){return l=t}}},e.TextAlignOption=function(t){var e,n=y,i=document.createElement("div"),o=document.createElement("div"),r=(i.classList.add("editpdf__menu__block"),o.classList.add("wrapper","contextual-menu-wrapper","textAlignment_ContextualMenu"),!1),a=(i.appendChild(o),void 0),s=h(v.IconRepository.unfoldArrow())[0],l=(s.classList.add("unfold-arrow-icon"),function(t){var e=o.querySelector("svg");m.setOuterHTML(e,t)}),c=(o.innerHTML="<div>"+n.left+m.getOuterHTML(s,!1)+"</div>","");for(e in n)c+="<div data-value='"+e+"'>"+n[e]+"</div>\n";t.appendChild(i);function u(t){if(!p){var e=document.createElement("div"),e=(e.innerHTML=c,e.querySelector("[data-value="+t+"]"));if(e)return l(e.innerHTML),void(d=t);throw new Error("Element "+t+" not found")}if(t!==d){e=p.querySelector("[data-value="+t+"]");if(!e)throw new Error("Element "+t+" not found");l(e.innerHTML),d=t}}var d="left",p=null;g.createContextMenu(o,c,function(t){for(var e=t.content,n=t.hidePopover,i=(p=e).querySelectorAll("[data-value]"),o=0;o<i.length;o++)!function(t){var e=i[t];e.addEventListener("click",function(){var t=e.dataset.value;u(t),n(),a&&a(t)})}(o)},{cssClasses:["editpdf-submenu-contextual-menu","light"],onShow:function(){return!r}});return{tooltipTarget:o,dom:document.createElement("div"),element:document.createElement("div"),setCollection:function(t){},set:u,get:function(){return d},onChange:function(t){a=t},toggleLock:function(t){return r=t}}};e.RemoveAnnotationOption=function(){var t,e=document.createElement("div"),n=document.createElement("div"),i=(e.classList.add("editpdf__menu__block"),!1),o=(o="<div class='editpdf__submenu__btn recycle-bin'>"+v.IconRepository.recycleBin()+"</div>",(t=document.createElement("div")).innerHTML=o,t.children[0]),r=void 0;o.addEventListener("click",function(t){i||r&&r("")}),n.appendChild(o),e.appendChild(n);return{tooltipTarget:e,dom:e,setCollection:function(t){},element:o,set:function(t){},get:function(){return""},onChange:function(t){r=t},toggleLock:function(t){return i=t}}}}.call(this,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createContextMenu=void 0;var a=n(293);e.createContextMenu=function(n,t,i,e){void 0===e&&(e={});var o=n.getAttribute("id");if(o||(o=a.randomString(),n.setAttribute("id",o)),!n.ownerDocument.contains(n))throw new Error("Element not found on DOM!");var r=[];null!=e&&e.cssClasses&&e.cssClasses.forEach(function(t){return r.push(t)}),n.ownerDocument.defaultView.tippy("#"+o,{content:t,allowHTML:!0,trigger:"click",theme:r.join(" "),interactive:!0,placement:"bottom",arrow:!1,offset:[0,5],onHide:function(){n.classList.remove("tippy-active")},onShow:function(t){return!e.onShow||e.onShow(t)},onMount:function(t){var e=t.popper.querySelector(".tippy-content");n.classList.add("tippy-active"),e.classList.contains("bootstrapped")||(e.classList.add("bootstrapped"),e.classList.add("belongs-to-submenu"),i({hidePopover:function(){return t.hide()},content:e}))}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setOuterHTML=e.getOuterHTML=void 0,e.getOuterHTML=function(t,e){var n=document.createElement("div");if(n.appendChild(t),e&&1<n.children.length)throw new Error("More than one children not allowed");return n.innerHTML},e.setOuterHTML=function(t,e){if(!t.parentElement)throw new Error("Necessary to have parentElement in order to make setOuterHTML to work");t.parentElement.innerHTML=e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToolMenu=void 0;function o(t,e){void 0===e&&(e={});var n=document.createElement("div");return null!=e&&e.outerHTML?n.outerHTML=t:n.innerHTML=t,n.removeChild(n.firstChild)}var r=n(7),a=n(255),s='<svg xmlns="http://www.w3.org/2000/svg" width="15.959" height="19.44"><path fill="#707078" fill-rule="evenodd" d="M12.213 19.44H7.37c-1.35 0-2.6-.677-3.263-1.774l-3.94-6.23c-.34-.462-.102-.795.115-.983s.74-.353 1.237-.324c.51.033.98.248 1.298.593l1.208 1.27c.093.097.246.134.384.09s.23-.155.23-.28l.007-8.732C4.65 2.474 5.162 2 5.793 2c.617 0 1.12.462 1.145 1.038l.001 6.78c0 .08.036.155.1.2s.153.087.244.086h.001c.09.001.18-.03.244-.085s.1-.13.102-.21V1.075C7.63.48 8.143 0 8.775 0H8.8c.63 0 1.155.476 1.155 1.072V9.8c0 .165.155.298.346.298s.346-.134.346-.298v-7.61c0-.596.503-1.08 1.134-1.08s1.138.484 1.138 1.08V9.8c0 .165.155.298.346.298s.346-.134.346-.298V5.325c0-.596.525-1.062 1.157-1.062h.033c.63 0 1.144.472 1.145 1.066l-.002 10.64c-.002 1.916-1.68 3.47-3.74 3.47z"/></svg>',l=function(t){return t.ownerDocument.defaultView};function i(t,e){var o=this;this._attached=!1,this.toolClickHandlers=[],this.drawnTools=[],this.children=[],this.setTooltip=function(t,e){var n=null,i=null;if(t===a.TOOL.Pan&&(n=function(t){t=l(t);if(t.tippy)return t.tippy;throw new Error("tippy global object not found in window object")}(e),i=r.Lang.t("tooltip_pan")),!i)throw new Error("Translation for tool "+t+" not handled");if(!n)throw new Error("Tippy not found for global window associated to tool elem '"+t+"'");n(e,{content:i,placement:"bottom",arrow:!0,animation:"fade"})},this.toolClickedHandler=function(e){var n=e.currentTarget,i=n.querySelector("[data-tool]").dataset.tool;o.toolClickHandlers.forEach(function(t){return t(e,i,n)})},this.element=t,this.submenuElement=e}i.prototype.toggleShowSubmenu=function(t,e){var n=this.submenuElement.closest(".editpdf-submenu-wrapper");if(t){if(!e)throw new Error("Submenu parameter is missing");this.submenu&&this.toggleShowSubmenu(!1),(this.submenu=e).draw(this.submenuElement),n.classList.remove("submenu-hidden")}else this.submenu&&(n.classList.add("submenu-hidden"),(e||this.submenu).undraw())},i.prototype.draw=function(){var n=this,i=this.element,t=[[a.TOOL.Pan,s]],e=o('<div class="editpdf__menu__block" data-empty-block="true"></div>');this.children.push(e),i.appendChild(e),t.forEach(function(t){t=t[0];n.drawnTools.includes(t)||n.drawnTools.push(t)});return t.forEach(function(t){var e=t[0],t=t[1];!i.querySelector('[data-tool="'+e+'"]')&&(t=o(('\n        <div class="editpdf__menu__block">\n            <div class="item">\n                <div class="wrapper" data-tool='+e+">\n                    "+t+"\n                </div>\n            </div>\n        </div>\n        ").trim()),n.children.push(t),i.appendChild(t),n.setTooltip(e,t),e===a.TOOL.Pan)&&(t=o('<div class="editpdf__menu__block editpdf__menu__block--text" data-empty-block="true"></div>'),n.children.push(t),i.appendChild(t))}),this},i.prototype.addEventListener=function(t,e,n){void 0===n&&(n={}),"onToolClick"===t&&this.toolClickHandlers.push(e)},i.prototype.isToolSelected=function(t){return this.element.querySelector('[data-tool="'+t+'"]').closest(".item").classList.contains("item__selected")},i.prototype.toggleSelectTool=function(t,e){t=this.element.querySelector('[data-tool="'+t+'"]').closest(".item");e?t.classList.add("item__selected"):t.classList.remove("item__selected")},i.prototype.attach=function(){if(!this._attached){this._attached=!0;for(var t=this.element,e=this.drawnTools,n=0;n<e.length;n++){var i=e[n];t.querySelector('[data-tool="'+i+'"]').closest(".item").addEventListener("click",this.toolClickedHandler)}}return this},i.prototype.detach=function(){if(this._attached){this._attached=!1;for(var t=this.element,e=this.drawnTools,n=0;n<e.length;n++){var i=e[n],i=t.querySelector('[data-tool="'+i+'"]');i&&i.closest(".item").removeEventListener("click",this.toolClickedHandler)}return this.toolClickHandlers=[],this}},i.prototype.undraw=function(){this.element;return this.children.forEach(function(t){t.parentElement&&t.parentElement.removeChild(t)}),this.toggleShowSubmenu(!1),this},e.ToolMenu=i},,,,,,,,,,,,,,,function(t,f,v){"use strict";!function(i){var o,e,t=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},s=(Object.defineProperty(f,"__esModule",{value:!0}),f.Text=void 0,v(252)),l=v(7),c=v(310),u=v(17),d=n(v(15)),p=v(221),n=(e=s.CanvasObject,t(h,e),Object.defineProperty(h.prototype,"type",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"currLimit_x1",{get:function(){return this._currLimit_x1},set:function(t){this._currLimit_x1=t},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"hiddenText",{get:function(){return this._hiddenText},set:function(t){this._hiddenText=t},enumerable:!1,configurable:!0}),h.prototype.setEditMode=function(){this.canSwapToEditMode&&!1===this.inEditingMode&&(this.hiddenText=this.createHiddenText(),window.Sentry.addBreadcrumb({message:"["+this.txtType+" - "+this.id+"] Creating hidden text from setting editMode to true"}),this.updateHiddenTextSize(),this.currLimit_x1=this.updatePageLimits(),this.inEditingMode=!0,this.textElem.addClass("in-edition-mode"),this.controls.disable().hideGizmo({except:"rect"}),this.controls.refreshGizmo(),this.contentEditableElem.focus(),this.setTextCursorAtEndOfString(),this.triggerCustomEvent("canvas_object:text_mode",{enabled:!0}),this.updateBackgroundColor(),this.textElem.css("text-align","left")),this.canSwapToEditMode=!0},h.prototype.hasTextBackgroundColor=function(){return"transparent"!=this.textBackgroundColor},h.prototype.getGizmoSize=function(){var t;return this.inEditingMode&&this.hiddenText?((t=this.hiddenText.getSize_x1()).w*=this.zoomLevel,t.h*=this.zoomLevel,t):e.prototype.getGizmoSize.call(this)},h.prototype.createHiddenText=function(){var t=this.clone(this);return t.dom.addClass("hidden-text"),t.isHiddenText=!0,t.textFillColor="transparent",this.pdfPage.addObject(t),t.controls.disable(),t.updateDom(),t},h.prototype.updatePageLimits=function(){var t=this.calcPageLimit();return this.setSize_x1(t,null),t},h.prototype.calcPageLimit=function(){var t=this.getCoords_x1();return this.pdfPage.originalDimensions.w-t.x},h.prototype.init=function(){var n=this,t=(e.prototype.init.call(this),this.makeParentContainerWide(),this.controls);this.isHiddenText||(t.on("fullClick",function(t){t.which===p.MOUSE.LeftClick&&n.setEditMode()}),this.controls.on("resize:end",function(t){n._updateInternalCoords(void 0,t.stateBeforeDrag.coords.y),n.textElem.height(""),n.controls.refreshGizmo(),n.canSwapToEditMode=!0,n.lockWidth(),n.updateDom()}),this.controls.on("drag:end",function(){n.canSwapToEditMode=!0}),this.contentEditableElem.on("compositionend ",function(t){t=t.originalEvent.data;0<t.length&&n.setWritingSystems(n.contentEditableElem.text()+t)}),this.contentEditableElem.on("keypress",function(t){var e;n.isActiveElement?(e=String.fromCharCode(t.keyCode),e=n.contentEditableElem.text()+e,n.setWritingSystems(e)):(t.preventDefault(),i(t.target).blur(),d.captureMessage("Editpdf: Somehow Text is not activeElement but contentEditableElem is focused. Blurring Text"))}),this.contentEditableElem.on("input",function(t){n.inEditingMode&&(t="deleteContentBackward"===t.originalEvent.inputType,n.triggerCustomEvent("canvas_object:text:input",{canvasObject:n,text:n.contentEditableElem.text()}),/Edge/.test(navigator.userAgent)||n.moveTextUpIfOverflowsAtTheBottomOfPage(t),n.updateAura())}))},h.prototype.moveTextUpIfOverflowsAtTheBottomOfPage=function(t){var e=this.pdfPage.img.closest(".page-canvas")[0],e=e.scrollHeight-e.clientHeight;0<e&&!t&&(e+=+this.zoomLevel,this.hiddenText&&(this.hiddenText.moveBy(0,-1*e),this.hiddenText.updateDomCoordinates()),this.moveBy(0,-1*e),this.updateDomCoordinates())},Object.defineProperty(h.prototype,"txtType",{get:function(){return this.isHiddenText?"Hidden text":"Normal text"},enumerable:!1,configurable:!0}),h.prototype.updateHiddenTextSize=function(){var t=this,e="["+this.txtType+" - "+this.id+"] updateHiddenTextSize; ",e=(this.hiddenText||(e+="Hidden text instance not found; "),this.hiddenText.textElem||(e+="Hidden text is empty; "),this.hiddenText.textElem&&this.hiddenText.textElem.length<=0&&(e+="Hidden text is empty 2; "),this.textElem||(e+="Root text is empty; "),window.Sentry.addBreadcrumb({message:e}),null);try{e=this.hiddenText.contentEditableElem[0],this.hiddenText.text=this.contentEditableElem.html()}catch(t){throw window.Sentry.addBreadcrumb({message:"Inside custom catch of updateHiddenTextSize"}),"Inside custom catch of updateHiddenTextSize"}e.innerHTML=this.hiddenText.text;function n(){return t.hiddenText.getSize_x1().w>=i}var i=this.currLimit_x1||this.calcPageLimit();(n()||(this.hiddenText.unlockWidth(),n()))&&this.hiddenText.setSize_x1(i,null)},h.prototype.updateAura=function(){this.updateHiddenTextSize(),this.controls.refreshGizmo()},h.prototype.setWritingSystems=function(t,e){void 0===e&&(e=!0);var n=this.writingSystems,t=l.Lang.detectWritingSystems(t),n=(this.writingSystems=t,n.join(",")!==t.join(","));return n&&(this.reassignFontFamilyIfNecessary(),e)&&this.triggerCustomEvent("canvas_object:text:writing_system_change",{canvasObject:this}),n},h.prototype.reassignFontFamilyIfNecessary=function(){var t=c.AssetsManager.fontsForWritingSystems(this.writingSystems);if(this.fontFamily||(this.fontFamily="arial"),!1===t[this.fontFamily].enabled){for(var e in this.fontFamily=null,t)if(!0===t[e].enabled){this.fontFamily=e;break}if(null===this.fontFamily)throw"[Editpdf][Text CanvasObject] Was not possible to find an enabled font for the current writing systems"}},h.prototype.postInit=function(){e.prototype.postInit.call(this)},h.prototype.initDom=function(){var n=this;e.prototype.initDom.call(this),this.textElem=i("<div class='text-content' spellcheck='false'><div class='contenteditable-wrapper'><div contenteditable='true'></div></div></div>"),this.contentEditableElem=this.textElem.find("[contenteditable]"),this.contentEditableElem.attr("tabindex","-1"),this.dom.append(this.textElem),this.contentEditableElem.on("keydown",function(){n.isDirty=!0}),this.contentEditableElem.on("paste",function(t){t.preventDefault();var e=!t.originalEvent.clipboardData,t=e?window.clipboardData.getData("Text"):t.originalEvent.clipboardData.getData("text/plain");t=t.replace(/\r\n/g,"\n"),e?document.execCommand("paste",!1,t):document.execCommand("insertText",!1,t),n.setWritingSystems(t),n.triggerCustomEvent("canvas_object:text:input",{canvasObject:n,text:t})})},h.prototype.getSize=function(){var t=this.textElem[0].getBoundingClientRect();return{w:t.width,h:t.height}},h.prototype.getSize_x1=function(){return{w:this.textElem.width(),h:this.textElem.height()}},h.prototype.setSize=function(t,e){return t&&(t/=this.zoomLevel,this.textElem.width(t)),e&&(e/=this.zoomLevel,this.textElem.height(e)),this},h.prototype.setSize_x1=function(t,e){return t&&this.textElem.width(t),e&&this.textElem.height(e),this},h.prototype.unlockWidth=function(){this.textElem.width(""),this.currLimit_x1=void 0,this.lockedWidth=!1},h.prototype.lockWidth=function(){this.setSize(this.getSize().w,null),this.lockedWidth=!0},h.prototype.updateBackgroundColor=function(){this.inEditingMode&&this.hiddenText?this.textElem.css("background","transparent"):this.textElem.css("background",this.textBackgroundColor)},h.prototype._updateDom=function(){var t=this.contentEditableElem;this.updateBackgroundColor(),t.css("fontFamily",this.fontFamily),this.isDirty&&(this.text=this.contentEditableElem.html(),this.isDirty=!1),this.isBold?t.css("font-weight","800"):t.css("font-weight","400"),this.isItalics?t.css("font-style","italic"):t.css("font-style","normal"),this.isUnderline?t.css("text-decoration","underline"):t.css("text-decoration","none"),t.css("font-size",this.fontSize+"px"),t.css("text-align",this.textAlignment),t.css("color",this.textFillColor),this.inEditingMode?this.textElem.css("text-align","left"):this.textElem.css("text-align",this.textAlignment),t.css("line-height",String(this.lineHeight*this.fontSize)+"px"),t.html(this.text)},h.prototype.applyZoomAndTranslate=function(t){e.prototype.applyZoomAndTranslate.call(this,t),this.updateTransformOnTextElem()},h.prototype._setUserAttributes=function(t){e.prototype._setUserAttributes.call(this,t),"textFillColor"in t&&(h.currentDefaultFillTextColor=t.textFillColor),"textBackgroundColor"in t&&(h.currentDefaultBackgroundColor=t.textBackgroundColor),this.inEditingMode&&this.hiddenText?(this.hiddenText.setAttributes(this.getTextOnlyAttributes()),this.hiddenText.textFillColor="transparent",this.hiddenText.updateDom(),this.updateAura()):this.inEditingMode||this.hiddenText||(this.hiddenText=this.createHiddenText(),window.Sentry.addBreadcrumb({message:"["+this.txtType+" - "+this.id+"] Creating hidden text from activeElement in nonEditing mode"}),this.currLimit_x1=this.updatePageLimits(),this.updateHiddenTextSize(),this.hiddenText.textFillColor="transparent",this.hiddenText.setAttributes(this.getTextOnlyAttributes()),this.trimToFit(),this.updateAura(),this.hiddenText.remove(!1),this.hiddenText=null,window.Sentry.addBreadcrumb({message:"["+this.txtType+" - "+this.id+"] Setting hiddenText to null from activeElement in nonEditing mode"}))},h.prototype.makeParentContainerWide=function(){this.dom.width("100000px")},h.prototype.updateTransformOnTextElem=function(){var t="translateX("+this.translateX+"px) scale("+this.zoomLevel+")";this.textElem.css("transform",t),this.textElem.css("transform-origin","inherit")},h.prototype.onEditingModeOff=function(){this.textElem.removeClass("in-edition-mode"),this.trimToFit(),this.hiddenText.remove(!1),window.Sentry.addBreadcrumb({message:"["+this.txtType+" - "+this.id+"] setting hiddenText to null from onEditingModeOff"}),this.hiddenText=null,this.textElem.css("text-align",this.textAlignment)},h.prototype.doesOverflowOccurs=function(){var t=this.calcPageLimit();return this.unlockWidth(),this.getSize_x1().w>=t},h.prototype._makeActiveElement=function(){},h.prototype.trimToFit=function(){if(this.doesOverflowOccurs()){if(!this.hiddenText)throw"[Editpdf] Hidden text missing";this.updateHiddenTextSize(),this.setSize_x1(this.hiddenText.getSize_x1().w,null)}},h.prototype._makeInactiveElement=function(){this.canSwapToEditMode=!1,this.clearTextSelection();var t=!0===this.inEditingMode;this.inEditingMode=!1,t&&(this.onEditingModeOff(),this.triggerCustomEvent("canvas_object:text_mode",{enabled:!1})),this.isEmpty()&&this.remove()},h.prototype.isEmpty=function(){return""===i.trim(this.contentEditableElem.text())},h.prototype.clearTextSelection=function(){var t;window.getSelection?0<(t=window.getSelection()).rangeCount&&0<t.getRangeAt(0).getClientRects().length&&t.removeAllRanges():document.selection&&document.selection.empty()},h.prototype.selectAllText=function(){this.contentEditableElem.focus(),window.document.execCommand("selectAll",!1,null)},h.prototype.firstTimeActiveElement=function(){this.canSwapToEditMode=!0,this.setEditMode(),this.selectAllText()},h.prototype.isSelectableArea=function(t){return t.is(".text-content")||0<t.closest(".text-content").length||t.is(".controls")||0<t.closest(".controls").length},h.prototype.setAttributes=function(t){e.prototype.setAttributes.call(this,t=void 0===t?{}:t),"fontFamily"in t&&(this.fontFamily=t.fontFamily),"fontSize"in t&&(this.fontSize=t.fontSize),"isBold"in t&&(this.isBold=t.isBold),"isItalics"in t&&(this.isItalics=t.isItalics),"isUnderline"in t&&(this.isUnderline=t.isUnderline),"textAlignment"in t&&(this.textAlignment=t.textAlignment),"textFillColor"in t&&(this.textFillColor=t.textFillColor),"textBackgroundColor"in t&&(this.textBackgroundColor=t.textBackgroundColor),"text"in t&&(this.text=t.text)},h.prototype.getDefaultAttributes=function(){return Object.assign({},e.prototype.getDefaultAttributes.call(this),{textFillColor:h.currentDefaultFillTextColor,textBackgroundColor:h.currentDefaultBackgroundColor})},h.prototype.setSizeInProportionToPageSize=function(n){function t(t){var e=n*i[t],t=s[t]/a[t];l=e/t,r.fontSize=u.Tools.getClosestNumber(l,h.getAvailableFontSizes()),r.updateDom(),r.unlockWidth()}var e=this.pdfPage,i={w:Number(e.originalDimensions_inPoints.w),h:Number(e.originalDimensions_inPoints.h)},o=i.w>i.h?"w":"h",r=this.createHiddenText(),a=(r.fontSize=1,r.updateDom(),{w:r.contentEditableElem.width(),h:r.contentEditableElem.height()}),s=(r.fontSize=2,r.updateDom(),{w:r.contentEditableElem.width(),h:r.contentEditableElem.height()}),l=null,c=(t(o),r.textElem[0].getBoundingClientRect());(c.width>e.dimensions.w||c.height>e.dimensions.h)&&t("w"==o?"h":"w"),this.fontSize=r.fontSize,r.remove(!1)},h.getAvailableFontSizes=function(){return[4,6,8,10,12,14,18,24,36,48,64,72,96,144,192,200]},h.prototype.getAttributes=function(){return Object.assign({},e.prototype.getAttributes.call(this),this.getTextOnlyAttributes())},h.prototype.getTextOnlyAttributes=function(){return{text:this.text,textAlignment:this.textAlignment,textFillColor:this.textFillColor,textBackgroundColor:this.textBackgroundColor,fontFamily:this.fontFamily,fontSize:this.fontSize,isBold:this.isBold,isItalics:this.isItalics,isUnderline:this.isUnderline}},h.prototype.clone=function(t){var e=new h(t.pdfPage),n=(e.cloned=!0,e.cloning=!0,e.zoomLevel=t.zoomLevel,t.getAttributes());return n.size_x1.h=null,e.setAttributes(n),e.lockedWidth=t.lockedWidth,e.cloning=!1,e.updateTransformOnTextElem(),e},Object.defineProperty(h.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily=t},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=Number(t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"isBold",{get:function(){return this._isBold},set:function(t){this._isBold=t},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"isItalics",{get:function(){return this._isItalics},set:function(t){this._isItalics=t},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"isUnderline",{get:function(){return this._isUnderline},set:function(t){this._isUnderline=t},enumerable:!1,configurable:!0}),h.prototype.setTextCursorAtEndOfString=function(){var t,e;document.createRange?((t=document.createRange()).selectNodeContents(this.contentEditableElem[0]),t.collapse(!1),(e=window.getSelection()).removeAllRanges(),e.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(this.contentEditableElem[0]),t.collapse(!1),t.select())},Object.defineProperty(h.prototype,"innerElem",{get:function(){return this.textElem},enumerable:!1,configurable:!0}),h.getInitialTextValue=function(){return l.Lang.t("canvasObject_yourTextHere")},h.prototype.hasInitialTextValue=function(){var t=h.getInitialTextValue();return this.contentEditableElem.text().match(new RegExp("^"+t+"\\s\\d+$","g"))},h.currentDefaultFillTextColor="#000000",h.currentDefaultBackgroundColor="transparent",h);function h(){var t=null!==e&&e.apply(this,arguments)||this;return t.inEditingMode=!1,t._fontSize=18,t._fontFamily="arial",t.isDirty=!1,t.canSwapToEditMode=!1,t._isBold=!1,t._isItalics=!1,t._isUnderline=!1,t.textAlignment="left",t.lockedWidth=!1,t.writingSystems=["latin"],t.letterSpacing=0,t.lineHeight=1.2,t._hiddenText=null,t.translateX=0,t._currLimit_x1=void 0,t.isHiddenText=!1,t}f.Text=n}.call(this,v(1))},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0,n(339)),s=n(478),l=n(221),n=(o=a.Shape,r(c,o),Object.defineProperty(c.prototype,"type",{get:function(){return"line"},enumerable:!1,configurable:!0}),c.prototype._makeInactiveElement=function(){},c.prototype.init=function(){o.prototype.init.call(this),this.initLine(),this.controls=new s.LineControls(this)},c.prototype.initControls=function(){},c.prototype.initLine=function(){this._line=this.shape=this.draw.line(0,0,0,0),this.shadowLine=this.draw.line(0,0,0,0),this.shadowLine.addClass("shadow-line"),this.shadowLine.addClass("do-not-export")},c.prototype.convertToLocalCoords=function(t,e){var n=t.x,i=t.y;t.x=0,t.y=0,e.x-=n,e.y-=i,e.x<0&&(n=Math.abs(e.x),e.x=0,t.x=n),e.y<0&&(i=Math.abs(e.y),e.y=0,t.y=i)},Object.defineProperty(c.prototype,"baseMargin",{get:function(){var t=20*this.zoomLevel;return Math.floor(this.zoomedStrokeWidth/2+t)},enumerable:!1,configurable:!0}),c.prototype.computeEffectivePointCoords=function(){function t(t){return{x:t.x,y:t.y}}var e=this.baseMargin,n=t(this.startingPoint),i=t(this.terminalPoint);return this.convertToLocalCoords(n,i),n.x+=e,n.y+=e,i.x+=e,i.y+=e,[n,i]},c.prototype.updateLine=function(t,e){function n(t){return{x:t.x,y:t.y}}void 0===e&&(e=null),null===(t=void 0===t?null:t)&&null===e&&(t=this.startingPoint,e=this.terminalPoint);this.startingPoint=n(t),this.terminalPoint=n(e);var i=this.startingPoint,o=this.terminalPoint,r=(this.line,this.draw,this.baseMargin),a=this.computeEffectivePointCoords(),a=(this.cachedEffectivePointCoords.startingPoint=a[0],this.cachedEffectivePointCoords.terminalPoint=a[1],this.calcSizeFromPoints(t,e)),t=(a.w+=2*r,a.h+=2*r,this._updateInternalDims(a.w,a.h),Math.min(i.x,o.x)-r),e=Math.min(i.y,o.y)-r;this._updateInternalCoords(t,e)},c.prototype.moveBy=function(t,e){return this.startingPoint.x+=t,this.startingPoint.y+=e,this.terminalPoint.x+=t,this.terminalPoint.y+=e,this.updateLine(this.startingPoint,this.terminalPoint),this},c.prototype.moveTo=function(t,e){var n=this.getCoords(),t=t-n.x,e=e-n.y,n={x:this.startingPoint.x+t,y:this.startingPoint.y+e},t={x:this.terminalPoint.x+t,y:this.terminalPoint.y+e};return this.updateLine(n,t),this},c.prototype.setSize=function(t,e){return this},c.prototype.calcSizeFromPoints=function(t,e){var n=(t.x<e.x?t:e).x,i=(t.x>e.x?t:e).x,o=(t.y<e.y?t:e).y;return{w:i-n,h:(t.y>e.y?t:e).y-o}},c.prototype.getSize=function(){return this.size},c.prototype._updateDom=function(){o.prototype._updateDom.call(this),this.updateLine();var t=this.line,e=this.draw,n=this.cachedEffectivePointCoords.startingPoint,i=this.cachedEffectivePointCoords.terminalPoint;n&&i&&(t.plot(n.x,n.y,i.x,i.y),e.size(this.size.w,this.size.h),t.stroke({color:this.stroke(),width:this.zoomedStrokeWidth,linecap:this.lineCap}),this.shadowLine.plot(n.x,n.y,i.x,i.y),e=this.zoomedStrokeWidth<8?8:this.zoomedStrokeWidth,this.shadowLine.stroke({color:"red",width:e,linecap:this.lineCap}),this.shadowLine.attr({"stroke-opacity":"0"}))},c.prototype.isSelectableArea=function(t){return"line"===t[0].tagName||t.is(".anchor")},c.prototype.applyZoomAndTranslate=function(t){function e(t){return{x:t.x,y:t.y}}var n=this.zoomLevel,i=(this.zoomLevel=t,e(this.startingPoint)),o=e(this.terminalPoint),t=t/n;i.x*=t,i.y*=t,o.x*=t,o.y*=t,this.updateLine(i,o)},c.prototype.interactiveMode_mousedown=function(t,e){void 0===e&&(e={}),!this.interactiveMode.enabled||t.which!==l.MOUSE.LeftClick&&0!==t.type.indexOf("touch")||(e={x:(t=e.pageCoords).x+1,y:t.y+1},this.updateLine(t,e),this.updateDom(),this.startingPointWasSet=!0)},c.prototype.interactiveMode_mousemove=function(t,e){void 0===e&&(e={}),!this.interactiveMode.enabled||t.which!==l.MOUSE.LeftClick&&0!==t.type.indexOf("touch")||this.startingPointWasSet&&(this.updateLine(this.startingPoint,e.pageCoords),this.updateDom())},c.prototype.interactiveMode_mouseup=function(t,e){if(void 0===e&&(e={}),this.interactiveMode.enabled&&(t.which===l.MOUSE.LeftClick||0===t.type.indexOf("touch"))&&this.startingPointWasSet)return this.terminalPoint=e.pageCoords,this.readyToRefreshGizmo=!0},c.prototype.interactiveMode_isObjectEmpty=function(){return!1===this.startingPointWasSet},c.prototype.getInteractiveModeCopyAttrs=function(){return{strokeWidth:this._strokeWidth_x1,strokeColor:this._stroke,fillColor:this._fill}},Object.defineProperty(c.prototype,"isObjectFinished",{get:function(){return this._isObjectFinished},set:function(t){this._isObjectFinished=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"startingPoint",{get:function(){return this._startingPoint},set:function(t){this._startingPoint=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"terminalPoint",{get:function(){return this._terminalPoint},set:function(t){this._terminalPoint=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"line",{get:function(){return this._line},enumerable:!1,configurable:!0}),c.prototype.getDefaultAttributes=function(){return Object.assign({},o.prototype.getDefaultAttributes.call(this),{size_x1:{w:0,h:0},strokeWidth:c.currentDefaultStrokeWidth,strokeColor:c.currentDefaultStrokeColor})},c.prototype.setInteractiveModeOn=function(){this.interactiveMode.enabled=!0},c.prototype.setInteractiveModeOff=function(){this.interactiveMode.enabled=!1,this.terminalPoint&&(this.isObjectFinished=!0,this.triggerCustomEvent("canvas_object:interactive_object_finished",{canvasObject:this}))},c.prototype.getAttributes=function(){return Object.assign({},o.prototype.getAttributes.call(this),{startingPoint:{x:this.startingPoint.x,y:this.startingPoint.y},terminalPoint:{x:this.terminalPoint.x,y:this.terminalPoint.y}})},c.prototype.setAttributes=function(t){o.prototype.setAttributes.call(this,t=void 0===t?{}:t),"startingPoint"in t&&(this.startingPoint=t.startingPoint),"terminalPoint"in t&&(this.terminalPoint=t.terminalPoint),"strokeWidth"in t&&(c.currentDefaultStrokeWidth=t.strokeWidth),"strokeColor"in t&&(c.currentDefaultStrokeColor=t.strokeColor)},c.createFromAttributes=function(t){var e=new c(t.pdfPage,{id:t.id});return e.zoomLevel=t.zoomLevel,e.isObjectFinished=!0,e.readyToRefreshGizmo=!0,e.setAttributes(t),e},c.prototype.clone=function(t){var e=new c(t.pdfPage),t=(e.cloned=!0,e.cloning=!0,e.zoomLevel=t.zoomLevel,e.readyToRefreshGizmo=!0,e.isObjectFinished=!0,t.getAttributes());return e.setAttributes(t),e.cloning=!1,e},c.currentDefaultStrokeWidth=4,c.currentDefaultStrokeColor="#000000",c);function c(){var t=null!==o&&o.apply(this,arguments)||this;return t._startingPoint={x:0,y:0},t._terminalPoint={x:0,y:0},t.startingPointWasSet=!1,t.readyToRefreshGizmo=!1,t.lineCap="butt",t._isObjectFinished=!1,t.cachedEffectivePointCoords={startingPoint:null,terminalPoint:null},t}e.Line=n},function(t,a,s){"use strict";!function(e){var i,n,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(a,"__esModule",{value:!0}),a.SvgObject=void 0,s(252)),o=(n=o.CanvasObject,t(r,n),Object.defineProperty(r.prototype,"svg",{get:function(){return this._svg},set:function(t){this._svg=t},enumerable:!1,configurable:!0}),r.prototype.init=function(){n.prototype.init.call(this)},r.prototype.setSvgElement=function(t){"string"==typeof t&&(t=e(t)[0]),this.svg=t},r.prototype.setAttributes=function(t){n.prototype.setAttributes.call(this,t=void 0===t?{}:t),"svg"in t&&(this.svg=this.setSvgElement(t.svg))},r.prototype._updateDom=function(){var t=this.svg;t.setAttribute("width",this.size.w),t.setAttribute("height",this.size.h),this.viewBox&&t.setAttribute("viewBox",this.viewBox)},r.prototype.setViewBox=function(t,e,n,i){this.viewBox=t+" "+e+" "+n+" "+i},r.prototype.scaleSvg=function(t){this.svg;this._updateInternalCoords(this.coords.x*t,this.coords.y*t),this._updateInternalDims(this.size.w*t,this.size.h*t)},r.prototype.setSize=function(t,e){var n=this.svg.getAttribute("viewBox"),i=(n=n?n:"0 0 "+(i=this.getSize()).w+" "+i.h).split(" ").map(function(t){return parseFloat(t)});return(i={x:i[0],y:i[1],w:i[2],h:i[3]}).w=t,i.h=e,this._updateInternalDims(i.w,i.h),this},r.prototype.applyZoomAndTranslate=function(t){var e=t/this.zoomLevel;this.zoomLevel=t,this.scaleSvg(e)},r.prototype.extractSvg=function(){return this.svg},r);function r(){return null!==n&&n.apply(this,arguments)||this}a.SvgObject=o}.call(this,s(1))},function(t,n,s){"use strict";!function(i){var o,r,t=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),e=(Object.defineProperty(n,"__esModule",{value:!0}),n.FormTextbox=void 0,s(292)),t=(r=e.FormBase,t(a,r),Object.defineProperty(a.prototype,"type",{get:function(){return"formtextbox"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hasControls",{get:function(){return!1},enumerable:!1,configurable:!0}),a.prototype.getSize=function(){return{w:this.dom.width(),h:this.dom.height()}},a.prototype.initDom=function(){var t,e=this,n=this;this.fontSize=this.pdfFormField.fontSize*this.pdfPage.pixelMagnification*a.fontSizeLowerConstant,r.prototype.initDom.call(this),this.setCoords_x1(this.calculatedWidgetSizeAndCoords_x1.coords_x1.x,this.calculatedWidgetSizeAndCoords_x1.coords_x1.y),this.setSize_x1(this.calculatedWidgetSizeAndCoords_x1.size_x1.w,this.calculatedWidgetSizeAndCoords_x1.size_x1.h),this.isMultiline?(this.inputText=i("<textarea></textarea>"),this.inputText.css("overflow","hidden"),this.inputText.css("resize","none"),this.pdfFormField.scrollFlag&&(this.inputText.focusin(function(){e.inputText.css("overflow-y","auto")}),this.inputText.focusout(function(){e.inputText.css("overflow","hidden")}))):(t=this.pdfFormField.passwordFlag?"password":"text",this.inputText=i("<input type='"+t+"'>")),this.inputText.css("text-align",this.pdfFormField.textAlignment),this.pdfFormField.readOnlyFlag&&this.inputText.prop("readonly",!0),this.inputText.attr("spellcheck",String(!!this.pdfFormField.spellCheckFlag)),this.dom.append(this.inputText),this.inputText.attr("tabindex",this.tabindex),void 0!==this.pdfFormField.maxTextLen&&0<this.pdfFormField.maxTextLen&&this.inputText.attr("maxlength",String(this.pdfFormField.maxTextLen)),this.inputText.on("input",function(t){n.cachedValue=n.inputText.val()}),this.inputText.on("keydown",function(t){n.isOneCharInput()&&(n.isPrintableCharEvent(t)&&(n.cachedValue="",n.inputText.val("")),t.originalEvent.key.match(/^[0-9]$/g)?n.queuedFocus="next":[a.backspaceKeycode,a.suprKeycode].includes(t.originalEvent.keyCode)&&(n.queuedFocus="prev"))}),this.inputText.on("keyup",function(t){var e;n.queuedFocus&&(e=null,e="next"===n.queuedFocus?n.nextFormObject:n.prevFormObject,n.queuedFocus=null,e)&&"formtextbox"===e.type&&e.isOneCharInput()&&n.triggerCustomEvent("form_manager:input:focus_change_request",{canvasObject:this,newFocus:e})}),this.inputText[0].addEventListener("compositionend",function(t){n.isOneCharInput()&&t.data&&(e.cachedValue=t.data[0],e.inputText.val(t.data[0]))}),this.determineFormAttrName()},a.prototype.determineFormAttrName=function(){var t=this.formId.toLowerCase(),e=null;t.match(/phone/g)?e="phone":t.match(/email/g)?e="email":t.match(/number/g)?e="number":t.match(/name/g)&&(e="name"),e&&this.inputText.attr("name",e)},a.prototype.isPrintableCharEvent=function(t){var t=t.originalEvent,e=t.keyCode,e=47<e&&e<58||64<e&&e<91||95<e&&e<112||185<e&&e<193||218<e&&e<223;return e=t.ctrlKey&&"Control"!==t.key||t.altKey&&"Alt"!==t.key||t.metaKey&&"Meta"!==t?!1:e},a.prototype._updateDom=function(){var t=this.inputText,e=(t.addClass("text-content"),this.padding);this.inputText.css("width",this.size.w),this.inputText.css("height",this.size.h),this.inputText.css("border-radius",5*this.zoomLevel+"px"),t.css("fontSize",this.fontSize*this.zoomLevel),t.css("fontFamily",this.fontFamily),t.css("padding",e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px"),t.html(this.text)},Object.defineProperty(a.prototype,"inputs",{get:function(){return this.inputText},enumerable:!1,configurable:!0}),a.prototype.initInputValue=function(){this._cachedValue=this.pdfFormField.textValue,this.inputText.val(this.pdfFormField.textValue)},a.prototype.getInputValue=function(){return this.inputText.val()},a.prototype.validate=function(){var t={};return!this.isRequired||this.cachedValue&&0<this.cachedValue.trim().length||(t[e.VALIDATION_ERROR.Required]=!0),0<Object.keys(t).length?this.setFlagWithValidationError():this.clearFlagWithValidationError(),t},Object.defineProperty(a.prototype,"cachedValue",{get:function(){return this._cachedValue},set:function(t){this._cachedValue=t,this.notifyListenersOfChange(),this._updateSiblings()},enumerable:!1,configurable:!0}),a.prototype._updateSiblings=function(){var e=this;this.siblings.forEach(function(t){t._cachedValue=e._cachedValue,t.inputText.val(e._cachedValue),t.notifyListenersOfChange()})},Object.defineProperty(a.prototype,"exportValue",{get:function(){return this.cachedValue},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"initialExportValue",{get:function(){return this.pdfFormField.textValue},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isMultiline",{get:function(){return!!this.pdfFormField.multilineFlag},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxTextLength",{get:function(){return this.pdfFormField.maxTextLen},enumerable:!1,configurable:!0}),a.prototype.isOneCharInput=function(){return!this.isMultiline&&1===this.maxTextLength},a.prototype.isTextFull=function(){return this.cachedValue.length>=this.pdfFormField.maxTextLen},a.prototype.isTextEmpty=function(){return 0===this.cachedValue.length},a.backspaceKeycode=8,a.suprKeycode=46,a.fontSizeLowerConstant=.9,a);function a(){var t=null!==r&&r.apply(this,arguments)||this;return t.fontSize=16,t.fontFamily="Verdana",t._cachedValue=void 0,t.queuedFocus=null,t}n.FormTextbox=t}.call(this,s(1))},,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},l=(Object.defineProperty(e,"__esModule",{value:!0}),e.IlovepdfTool=void 0,n(149)),c=n(468),u=n(507),s=s(n(65)),s=(window.Cookies||(window.Cookies=s.default),o=l.IloveTool,r(d,o),d.prototype.getOptionsManager=function(){var t=a({},this.getToolOptions());return new c.EditpdfOptionsManager(t)},d.prototype.getToolOptions=function(){return{processManager:this.processManager,tool:this.tool,subtool:this.subtool,toolText:this.toolText,startServer:this.startServer,workerServer:this.workerServer,defaultOptions:this.defaultOptions,files:this.files,screenSize:this.screenSize,pdfViewer:this.pdfViewer,config:this.config,fileLimits:this.fileLimits,allFileLimits:this.allFileLimits,level:this.level,levelTemp:this.levelTemp,userToken:this.userToken}},d.prototype.initProcessManager=function(){this.processManager=new u.EditpdfProcess({callbacks:{goProblem:this.callback_process_goProblem,fatalError:this.callback_process_fatalError},onFileReadyToDownload:this.onFileReadyToDownload,taskId:this.taskId,tool:this.tool,site:this.site,subtool:this.subtool,options:{},startServer:this.startServer,workerServer:this.workerServer,files:this.files,userToken:this.userToken,token:this.token,userId:this.userId,downloadUrl:this.downloadUrl})},d.prototype.initUploader=function(){o.prototype.initUploader.call(this),this.uploadManager.plupload.getUploadProcessParams=this.uploadManager.plupload.getUploadParams},d);function d(t){var i=o.call(this,t=void 0===t?{}:t)||this;return i.onFileReadyToDownload=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=i.optionsManager).onFileReadyToDownload.apply(t,e)},i.callback_process_goProblem=function(t){return i.optionsManager.callback_process_goProblem(t=void 0===t?null:t)},i.callback_process_fatalError=function(t,e,n){return i.optionsManager.callback_process_fatalError(t=void 0===t?null:t,e=void 0===e?null:e,n=void 0===n?null:n)},i.configData=n(117),window.configData=i.configData,i.init(),i}e.IlovepdfTool=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e),function(t){i(467),i(168),i(106);var e=i(184),n=i(386);i(118),i(125),t.Sortable=e.a,window.site="ilovepdf",window.ilovepdf=new n.IlovepdfTool(window.ilovepdfConfig),window.userModel=window.ilovepdfConfig.user}.call(this,i(31))},function(t,e,n){},function(t,q,G){"use strict";!function(p){function a(t){var e=window.isNaN(t),t=window.isNaN(Number(t));return e||t}var i,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),e=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return s(e,t),e},v=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},g=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},l=(Object.defineProperty(q,"__esModule",{value:!0}),q.EditpdfOptionsManager=void 0,G(98)),c=G(469),u=G(288),d=G(499),h=G(500),f=G(310),m=G(501),y=G(7),b=G(17),w=G(340),_=e(G(15)),F=G(13),R=G(502),z=G(503),x=G(253),E=G(504),B=G(311),S=n(G(61)),O=G(341),C=G(505),k=G(260),N=G(74),U=G(59),P=G(506),T=G(16),H=G(315),V=G(41);function j(t){return"ar"===window.lang?t.replace("start","right").replace("end","left"):t.replace("start","left").replace("end","right")}function A(){return new S.default({dialogName:"becomePremium"}).setContentBuilder(function(){return new N.PremiumContext({tool:"editpdf",triggerReason:U.REASON.ERROR_FEATURE,limits:null})})}function M(){var t=new S.default({canBeClosedByUser:!1,clickAwayClose:!1,enableCloseBtn:!1,escapeKeyClose:!1}),e='\n    <div class="dialog__body">\n        <h1 class="title2">'+y.Lang.t("problem_heading")+'</h1>\n        <img id="problemImage" src="/img/error/files.svg" style="height: 200px; margin: 10px">\n        <div class="problems">\n            <div class="problems__item problems__item--ServerError" style="display: flex;">\n                <div class="problems__item__content">\n                    <h4 class="problems__item__title" style="display:block">\n                        '+y.Lang.t("problem_ServerError_title")+"\n                    </h4>\n                    <p>"+y.Lang.t("problem_ServerError_desc")+'</p>\n                </div>\n            </div>\n        </div>\n        <div class="problem-retry">\n            <a href="#" id="retry" class="btn btn--red btn--inline reload-btn">\n                <svg aria-hidden="true" width="14" height="14" role="img" xmlns="http://www.w3.org/2000/svg"\n                    viewBox="0 0 512 512">\n                    <path fill="currentColor"\n                        d="M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"\n                        class=""></path>\n                </svg>\n                <span>'+y.Lang.t("problem_actionBtn")+"</span>\n            </a>\n        </div>\n    </div>\n    ",n=document.createElement("template");return n.innerHTML=e,t.setTemplate(n,function(t){t.querySelector(".reload-btn").addEventListener("click",function(t){t.preventDefault(),window.location.reload()})}),t}var W=["msTransitionEnd","oTransitionEnd","transitionEnd","webkitTransitionEnd"];function L(n){return v(this,void 0,void 0,function(){return g(this,function(t){return[2,new Promise(function(t,e){return setTimeout(t,n)})]})})}I=l.OptionsManager,t(D,I),Object.defineProperty(D.prototype,"numCanvasObjectsPlaced",{get:function(){return this._numCanvasObjectsPlaced},set:function(t){this._numCanvasObjectsPlaced=t},enumerable:!1,configurable:!0}),D.prototype.openDownloadDialog_ctx=function(n,o,r,a){return v(this,void 0,void 0,function(){var i,e=this;return g(this,function(t){return(i=new S.default({canBeClosedByUser:!0,clickAwayClose:!0})).setContentBuilder(function(){return new O.DownloadContext({dialog:i,tool:"editpdf",subtool:"editpdf",task:{taskId:n,workerId:o,workerServer:r},opts:{callbacks:{onDeleted:function(t,e){e.success;var n=e.downloadMode,e=e.downloadPage;"server"===n?window.location.href=e:(i.close(),window.Toastr.clear(),window.Toastr.info(y.Lang.t("TaskDeleted"),y.Lang.t("Deleted"),{timeOut:5e3,positionClass:j("toast-top-start")}))},onDownload:function(t,e){e.autoDownload||t()}},downloadMessages:window.downloadMessages,showBackBtn:!1,downloadMode:"server",chained:{linkTarget:"_blank"}}})}),a&&(i.addEventListener("shown",function(){e.toggleNonInteractiveWall(!1)}),i.addEventListener("closed",function(){e.checkForProcessButtonAvailability(),e.toggleNonInteractiveWall(!1)})),[2,i]})})},D.prototype.updateServerFilenameOfCanvasObjects=function(){var t=this;this.editor.getAllExportableCanvasObjects().forEach(function(e){e.bag.uploader&&(t.options.elements.find(function(t){return t.canvas_obj_id===e.id}).server_filename=e.bag.uploader.server_filename)})},D.prototype.timeout=function(){},D.prototype.addButtonTask=function(){I.prototype.addButtonTask.call(this),p("#processTask").attr("tabindex","-1"),this.disableProcessBtn(y.Lang.t("processBtn_atLeastOneElem"))},D.prototype.checkProcessPulse=function(){var t=this.formManager,t=!t||0===t.validate().length;(0<this.numCanvasObjectsPlaced||t)&&!this.pulseDoneOnce&&(I.prototype.checkProcessPulse.call(this),this.pulseDoneOnce=!0)},D.prototype.populateFileStack=function(t){var n=this.processManager.files,i=[];t.files.forEach(function(e){n.files.find(function(t){return t.id===e.id})||i.push(e)}),i.forEach(function(t){return n.files.push(t)})},D.prototype.uploadCanvasObjects=function(t){var e=this;t.forEach(function(t){void 0===t.bag.uploader&&e.assetsManager.upload(t)})},D.prototype.beforeProcess_sendGoogleAnalyticsEvents=function(){for(var t=this.editor.getAllCanvasObjects().filter(function(t){return!t.isFormObject}).reduce(function(t,e){return e.type in t||(t[e.type]=0),t[e.type]++,t},{}),e=0,n=Object.entries(t);e<n.length;e++){var i=n[e],o=i[0],i=i[1];window.ev("sendOnce","event","editpdf","element-type",o,i),window.ev("eventOnce","editpdf",{"element-type":o,quantity:i})}},D.prototype.onBeforeProcessReject=function(t){this.toggleNonInteractiveWall(!1),t&&"no-elements"===t.reason?(this.disableProcessBtn(y.Lang.t("processBtn_atLeastOneElem")),p("#processTask").removeClass("pulse")):I.prototype.onBeforeProcessReject.call(this,t)},D.prototype.processTask=function(){var e=this,t=this.activeEditorType,o=this.trueEditIntegration;if(null===this.editorSwapTransition&&!0!==this._canUsePremiumFeatures&&!T.UserModel.isPremium()&&this.userPlayedWithTrueEdit){if(P.ToolPremiumUsageCounter.limitReached("editpdf"))return this._canUsePremiumFeatures=!1,window.ev("sendOnce","event","limits","feature-exceeded","editpdf"),window.ev("eventOnce","limit",{reason:"feature",tool:"editpdf"}),A().show(),void this.enableProcessBtn();P.ToolPremiumUsageCounter.increment("editpdf",{once:!0}),this._canUsePremiumFeatures=!0}if("Editpdf"===t){var n=this.editor;if(this.transitionBackToEditpdfAtLeastOnceWithChanges&&n&&0===this.editor.canvasObjectCount()){n=this.getPdfFile();if(!n)throw new Error("No PDF File loaded");if(n.server_filename)return this.toggleNonInteractiveWall(!0),void this.processManager.api.copyTask({keepInputFile:!0,taskId:this.processManager.taskId,files:[n]}).then(function(t){e.defaultProcessDownloadFileCallback(e.processManager.getUrls())}).catch(function(t){M().show()}).finally(function(){e.toggleNonInteractiveWall(!1)});throw new Error("Server filename is blank")}I.prototype.processTask.call(this)}else{if("TrueEdit"!==t)throw new Error("Unknown editor "+t);p('<img class=\'process__loading-img\' src="/img/svg_icons/preload.svg" style="width: 24px;">'),p("#processTask");this.disableProcessBtn(y.Lang.t("uploading")),o.deselectAllAnnotations(),o.getFileBlob().then(function(c){return v(e,void 0,void 0,function(){var i,e=this;return g(this,function(t){return this.checkForProcessButtonAvailability(),p("#processTask").removeClass("pulse"),(i=new S.default({canBeClosedByUser:!0,clickAwayClose:!0})).setContentBuilder(function(){return new O.DownloadContext({dialog:i,tool:"editpdf",subtool:"editpdf",opts:{callbacks:{onDeleted:function(t,e){e.success;var n=e.downloadMode,e=e.downloadPage;"server"===n?window.location.href=e:(i.close(),window.Toastr.clear(),window.Toastr.info(y.Lang.t("TaskDeleted"),y.Lang.t("Deleted"),{timeOut:5e3,positionClass:j("toast-top-start")}))},onDownload:function(t,e){var n=e.autoDownload,e=e.downloadMode;n||("client-server"===e?o.downloadFile():t())}},downloadMessages:window.downloadMessages,showBackBtn:!1,downloadMode:"client-server",chained:{linkTarget:"_blank"},lazyGetTaskDetails:function(){return v(e,void 0,void 0,function(){var e,n,i,o,r,a,s,l;return g(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.processManager.api.oneStep_copyTask({file:c,filename:this._originalFilename,download:!1})];case 1:return e=t.sent(),[3,3];case 2:throw l=t.sent(),M().show(),l;case 3:return n="2"===String(null!=(l=null==e?void 0:e.status)?l:"")[0],i="Response"===e.constructor.name,[4,e.text()];case 4:return o=t.sent(),s=JSON.parse(o),r=s.taskId,a=s.workerId,s.path,s=this.processManager.api.workerServer,[2,{success:n,taskId:r,workerId:a,workerServer:s,response:i?e:null,responseText:o}]}})})}}})}),i.addEventListener("shown",function(){e.toggleNonInteractiveWall(!1)}),i.addEventListener("closed",function(){e.checkForProcessButtonAvailability(),e.toggleNonInteractiveWall(!1)}),window.ev("sendOnce","event","user","process","trueedit"),window.ev("eventOnce","process",{tool:"trueedit"}),i.show(),[2]})})})}},D.prototype.beforeProcess=function(){var r,a=this,s=this,l=(this.toggleNonInteractiveWall(!0),this.editor.activeCanvasObject&&this.editor.setActiveCanvasObject(null),clearInterval(this.keepalive_interval),this.keepalive_interval=void 0,this.editor.getCleanCanvasObjectsForDelivery(this.editor.getAllExportableCanvasObjects()));return l.length<=0?(this.initPollToKeepAliveFiles(),Promise.reject({reason:"no-elements"})):(r=[],l.forEach(function(t){var e,n,i,o;"text"===t.type&&(e=t).hasTextBackgroundColor()&&(n=a.editor.pageStack.createObject(e.pdfPage,"rect",{append:!0}),i=e.getSize_x1(),o=e.getCoords_x1(),n.setSize_x1(i.w,i.h),n.setCoords_x1(o.x,o.y),n.setAttributes({fillColor:e.textBackgroundColor,strokeColor:"transparent"}),n.hide(),n.zindex=t.zindex-1,n.updateDom(),n.bag.options_temporary=!0,r.push(n))}),r.forEach(function(t){return l.push(t)}),clearInterval(this.keepalive_interval),this.keepalive_interval=void 0,new Promise(function(i,o){return v(a,void 0,void 0,function(){var e,n=this;return g(this,function(t){switch(t.label){case 0:return e={},T.UserModel.isLoggedIn()&&(e.custom_int=String(T.UserModel.get().id)),[4,this.processManager.api.resetTask(e)];case 1:return t.sent(),this.processManager.api.touchTask(this.processManager.taskId).catch(function(t){[window.ilovepdf.uploadManager.plupload].concat(s.editpdfUploaders.map(function(t){return t.uploader})).forEach(function(t){return t.reUploadAllFiles()})}).then(function(){n.processManager.files;n.beforeProcess_sendGoogleAnalyticsEvents();var t=l.filter(function(t){return!("text"===t.type||t.isFormObject)}),e=(n.uploadCanvasObjects(t),0);I.prototype.beforeProcess.call(n).then(function(){n.fillOptions(l);var t=setInterval(function(){e++,a.editpdfUploaders.every(function(t){return t.allFilesHaveBeenAddedToUploader()})?(n.mergeFilestacksOfAllUploaders(),clearInterval(t),i()):10<=e&&(clearInterval(t),n.initPollToKeepAliveFiles(),r.forEach(function(t){return t.remove(!1)}),o())},100)})}),[2]}})})}))},D.prototype.mergeFilestacksOfAllUploaders=function(){var e=this;this.editpdfUploaders.forEach(function(t){e.populateFileStack(t.files)})},D.prototype.fillOptions=function(t){this.options={};for(var e,i,o=this.options,r=(this.options.clean_after=0,o.tool=this.tool,o.elements=[],this),a=0;a<t.length;a++)!function(){var n=t[a];if(n.isFormObject)return"formElements"in o||(o.formElements=[]),e=new m.CanvasObjectExporter(n),o.formElements.push(e.export());"text"===n.type?r.editor.splitTextInLinesAndCalculatePositions(n).forEach(function(t){var e=n.clone(n),e=new m.CanvasObjectExporter(e),t=(e.overridden_text=t.text,e.overridden_coords_x1=t.coords,e.overridden_size_x1=t.size,e.export());t.background_color="transparent",o.elements.push(t)}):(e=new m.CanvasObjectExporter(n),i=e.export(),o.elements.push(i))}()},Object.defineProperty(D.prototype,"editpdfUploaders",{get:function(){var t=[];return this.imageUploader&&this.imageUploader.uploader&&t.push(this.imageUploader),this.assetsManager&&this.assetsManager.uploader&&t.push(this.assetsManager),t},enumerable:!1,configurable:!0}),D.prototype.startPanels=function(){I.prototype.startPanels.call(this),this.initTogglePreview()},D.prototype.startPanelsParent=function(){I.prototype.startPanels.call(this)},D.prototype.fileAdded=function(i,t,e){var o=this,r=(void 0===e&&(e=!1),this);window.ilovepdf.uploadManager.plupload;return w.UploaderStatus.set(this.files),new Promise(function(t,n){p(".sidetools").hide(),"chained"==i.origin?(o.toggleNonInteractiveWall(!0),r.fileFromChainedAction(i).then(function(){o.makeWorkarea(),t()}).catch(function(e){_.captureException(e,function(t){return t.setExtra("exception",e),t.setExtra("msg","Error initializing chained/cloud action"),t.setExtra("fileOrigin",i.origin),t}),n()}).finally(function(){o.toggleNonInteractiveWall(!1)})):(o.makeWorkarea(),t())})},D.prototype.getApiUrlFromWorkerIdentifier=function(t){switch(V.Settings.mode()){case"development":return"//apidev"+t+".ilovepdf.com";case"staging":return"//apistaging"+t+".ilovepdf.com";case"production":return"//api"+t+".ilovepdf.com"}},D.prototype.fileFromChainedAction=function(o){var r,t,e,n,a=this;if("chained"===o.origin)return r=this,t=(e=new URL(window.location.href)).searchParams.get("w"),e=e.searchParams.get("t"),n=this.getApiUrlFromWorkerIdentifier(t)+"/v1/download/"+e,new Promise(function(i,t){fetch(n).then(function(n){return v(a,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return[4,n.blob()];case 1:return e=t.sent(),e=new File([e],o.name),this.files.files[0].file=e,this.processManager.api.query("get","pdfrender/"+this.processManager.taskId+"/"+o.server_filename.substring(0,o.server_filename.length-4)).then(function(t){r.fileUploaded(o.id,t),i()}),[2]}})})}).catch(function(t){throw t})})},D.prototype.fileUploaded=function(t,e){function n(){D.fileUploaded_storeState={fileId:t,file:o,response:e},e.pages=e.pdf_page_number,o||(_.configureScope(function(t){t.setExtra("fileUploadedResponse",e)}),_.captureMessage("[Editpdf] File uploaded from Dropbox in IE11 not found")),o.reUploaded?i.files.updateFile(t,e):(I.prototype.fileUploaded.call(i,t,e),i.abortIfFileUploadHasErrors(t)?(i.isPdfFile(o)&&(i._fileUploaded_Timestamp=Date.now()),i.emptyThumbnailsPanel(),i.emptyEditpdfWorkarea(),p(".tool__sidebar__inactive").fadeOut(),p(".tool__sidebar").css("overflow-y","auto"),p(".sidetools").hide(),i.onPdfReadyToBeRendered(o,e)):p(".sidetools").show())}var i=this,o=this.files.getFile(t),r=(null===this._originalFilename&&(this._originalFilename=o.name),["drive","dropbox"].includes(o.origin));r?(this.toggleNonInteractiveWall(!0),this.fileFromCloud(o).then(function(){n()}).catch(function(t){M().show()}).finally(function(){i.toggleNonInteractiveWall(!1)})):n()},D.prototype.abortIfFileUploadHasErrors=function(t){t=this.files.getFile(t);return 1==t.password?(this.fileAddError(t.id,!0,y.Lang.t("ProtectedFile")),p(".wait").hide(),!1):!!t.pdf_pages||(this.fileAddError(t.id,!0,"DamagedFile"),p(".wait").hide(),!1)},D.prototype.disableFileUploading=function(){x.HandlerRegistry.cleanupRoutine(function(){function t(t){t.preventDefault(),t.stopPropagation()}function e(t){t.preventDefault(),t.stopPropagation()}function n(t){t.preventDefault(),t.stopPropagation()}return document.body.addEventListener("dragenter",t,!0),document.body.addEventListener("dragleave",e,!0),document.body.addEventListener("drop",n,!0),function(){document.body.removeEventListener("dragenter",t,!0),document.body.removeEventListener("dragleave",e,!0),document.body.removeEventListener("drop",n,!0)}}),p(".tool__workarea").off("dndHoverStart").off("dndHoverEnd")},D.prototype.onPdfReadyToBeRendered=function(t,e){var n=this,i=(this._pdfReadyToBeRenderedAtLeastOnce=!0,this.pdfFile=t,x.HandlerRegistry.cleanupRoutine(function(){return n.pdfRenderer=new z.PdfRenderer(t,{taskId:n.processManager.taskId,renderServer:n.workerServer,config:n.editorConfig}),function(){}}),this.pdfRenderer);this.assetsManager||(this.assetsManager=new f.AssetsManager(this)),this.disableFileUploading();var o;p(".editpdf__menu").removeClass("hidden"),this.addEditorPages(t),this.initHandlersForProcessButtonAvailability(),this.addPreviewPages(t);this.addPreviewActions(t),i.renderPreviewPages(1,this.editorConfig.firstRender_pages_rendered_num),this._workareaIsEmpty=!1,this.initEditor(t,e.pdf_forms,i),this.initlayersPanel(),this.initMenu(),this.initPageActiveTracker(),this.initViewbar(),this.initImageUploader(),this.initPollToKeepAliveFiles(),this.viewbar.setZoom(this.editor.zoom),this.viewbar.setPageNumber(this.editor.getActivePageNumber(),this.getPdfPageCount()),this._firstRun&&(this._firstRun=!1,e=this.editor.getActivePageNumber(),this.jumpToThumbnail(e,!1),this.jumpToPage(e,!1,{forceJump:!0,sameMarginAsTrueEdit:!0}),this.toggleThumbnailsSidebarScrollEventHandlers(!0),C.EditpdfBreakpoints.init(),o=p(".tool__preview__toggle"),C.EditpdfBreakpoints.onBreakpointChange(function(t,e){var n=!o.hasClass("closed");1===e?n&&o.click():1!==t||n||o.click()},{callNow:!0}),this.viewbar.setFitViewport("FitPage"),this.editor.setPageLayoutMode("single")),setTimeout(this.renderThumbnailPagesInActiveRange,50)},D.prototype.focusOnNextFormInputWithError=function(){var t,e,n,i=p(".canvas-object.canvas-object--has-validation-errors");0!==i.length&&(n=null,n=0===(t=p(".canvas-object--has-validation-errors.canvas-object--error-last-focused").eq(0)).length||-1===(e=i.index(t))?i.eq(0):(e=(e+1)%i.length,i.eq(e)),t.removeClass("canvas-object--error-last-focused"),n.addClass("canvas-object--error-last-focused"),n.find(":input").eq(0).focus())},D.prototype.initHandlersForProcessButtonAvailability=function(){var e=this,n=this;window.addEventListener("editpdf:form:init",x.HRS("editpdf:form:init",function(t){e.formManager=t.detail.formManager;t=e.formManager,t.validate(!0),e.checkForProcessButtonAvailability(),p("body").addClass("editpdf--has-forms"),t.onFieldChange(function(t){e.checkForProcessButtonAvailability()}),t=p("#processTaskWrapper");t.length,t.on("click",function(){p(this);0<parseInt(p("body").attr("data-editpdf-form-errors-count"))&&(p(".editor__content").addClass("show-form-contour-error"),n.focusOnNextFormInputWithError())})})),window.addEventListener("canvas_object:created",x.HRS("canvas_object:created",function(t){t=t.detail.canvasObject;if(t.isCreatedViaUserInteraction()){if(!t.createdByParent)return}else if(!t.isObjectFinished)return;t.placedInCanvas||(t.placedInCanvas=!0,e.numCanvasObjectsPlaced++),e.checkForProcessButtonAvailability()})),window.addEventListener("canvas_object:removed",x.HRS("canvas_object:removed",function(t){t=t.detail.canvasObject;1<=e.numCanvasObjectsPlaced&&e.numCanvasObjectsPlaced--,t.placedInCanvas=!1,e.checkForProcessButtonAvailability()})),window.addEventListener("editor:interactive:no_longer_empty",x.HRS("editor:interactive:no_longer_empty",function(t){t=t.detail.canvasObject;t.markedForDestruction||(t.placedInCanvas=!0,e.numCanvasObjectsPlaced++,e.checkForProcessButtonAvailability())}))},D.prototype.initImageUploader=function(){this.imageUploader?this.imageUploader.setMenu(this.editpdfMenu):this.imageUploader=new h.ImageUploader(this.editpdfMenu)},D.prototype.initlayersPanel=function(){var t=p(".option__panel");this.layersPanel=new d.LayersPanel(t)},D.prototype.initPageActiveTracker=function(){var e,n=this,i=p(".tool__workarea");x.HandlerRegistry.cleanupRoutine(function(){function t(){e&&window.clearTimeout(e),e=window.setTimeout(n.setViewportPageActive,100)}return i.on("scroll",t),function(){return i.off("scroll",t)}})},D.prototype.initMenu=function(){var t=this;x.HandlerRegistry.cleanupRoutine(function(){return t.editpdfMenu=new c.EditpdfMenu({files:t.files,editor:t.editor,layersPanel:t.layersPanel}),function(){t.editpdfMenu.hideSubMenu(),t.editpdfMenu.cleanup(),t.editpdfMenu=null}})},D.prototype.initViewbar=function(){var i=this,o=this.getPdfPageCount,e=p("#editpdf-viewbar-mountpoint")[0],r=(this.viewbar||(this.viewbar=new B.Viewbar("Editpdf"),this.viewbar_refreshPosition=function(){var t=document.getElementById("workArea"),t=t.clientWidth/2+document.querySelector(".tool__preview").clientWidth+"px";e.style["ar"===window.lang?"right":"left"]=t,setTimeout(function(){e.classList.remove("ohidden")},1e3)},window.addEventListener("resize",this.viewbar_refreshPosition),window.addEventListener("zoom",function(t){i.viewbar_refreshPosition(),i.viewbar.isMounted()&&r.setZoom(t.detail.zoom)})),this.viewbar);r.mount(e),this.viewbar_refreshPosition(),r.on("fit-viewport",function(t){"FitPage"===t?(i.editor.fitViewport("all"),r.setFitViewport("FitWidth")):"FitWidth"===t&&(i.editor.fitViewport("width"),r.setFitViewport("FitPage"))}),r.on("page-layout",function(t){r.setPageLayout(t);t=t.toLowerCase();i.editor.setPageLayoutMode(t),window.ev("send","event","editpdf","page-layout",t),window.ev("event","editpdf",{"page-layout":t})}),r.on("prev-page",function(){i.jumpToPageBy(-1,!0)}),r.on("next-page",function(){i.jumpToPageBy(1,!0)}),r.on("unzoom",function(){i.editor.zoomToCenterOfViewportOfActivePage(i.editor.nextZoomOutValue)}),r.on("zoom",function(){i.editor.zoomToCenterOfViewportOfActivePage(i.editor.nextZoomInValue)}),r.on("zoom-input",function(t){t=t.replace("%","").trim(),a(t)?r.setZoom(i.editor.zoom):(t=i.editor.sanitizeZoomValue(Number(t)/100),i.editor.zoomToCenterOfViewportOfActivePage(t))}),r.on("page-selector",function(t){t=t.trim();function e(){r.setPageNumber(n,o())}var n=i.editor.getActivePageNumber();a(t)||(t=parseInt(t),a(t))||t>o()||t<=0?e():(i.jumpToPage(t,!1,{forceJump:!0}),i.jumpToThumbnail(i.editor.getActivePageNumber(),!1))}),r.attach()},D.prototype.initEditor=function(t,e,n){var i=this;return x.HandlerRegistry.cleanupRoutine(function(){if(!i._pdf_rendered_once)return i._pdf_rendered_once=!0,i.editor=new u.Editor({config:i.editorConfig,optionsInstance:i,file:t,container:p(".editor__content").eq(0),assetsManager:i.assetsManager,forms:e,pdfRenderer:n}),window.peditor=i.editor,function(){i._pdf_rendered_once=null,window.peditor=null,i.editor=null}}),this.editor},D.prototype.initPollToKeepAliveFiles=function(){var t,e=this;this.keepalive_interval||(t=this.editorConfig.filesKeepAliveInterval_ms,x.HandlerRegistry.log("Creating interval for touching task",function(){e.keepalive_interval=setInterval(function(){e.processManager.api.touchTask(e.processManager.taskId).then(function(t){},function(t){clearInterval(e.keepalive_interval),e.keepalive_interval=void 0,e.allUploaders.forEach(function(t){return t.reUploadAllFiles()})})},t)}))},Object.defineProperty(D.prototype,"allUploaders",{get:function(){return[window.ilovepdf.uploadManager.plupload].concat(this.editpdfUploaders.map(function(t){return t.uploader}))},enumerable:!1,configurable:!0}),D.prototype.initTogglePreview=function(){var e,n=this;this.togglePreview_done||(this.togglePreview_done=!0,e=document.querySelector(".tool__preview"),p(".tool__preview__toggle").on("click",function(){p(".editpdf-menu-wrapper").toggleClass("unfolded"),p(".editpdf-submenu-wrapper").toggleClass("unfolded"),p(".tool__preview").toggleClass("closed"),p(".tool__preview__toggle").toggleClass("closed")}),W.forEach(function(t){e.addEventListener(t,function(){return null==n?void 0:n.viewbar_refreshPosition()})}))},D.prototype.addEditorPages=function(o){x.HandlerRegistry.cleanupRoutine(function(){for(var t=0;t<parseInt(o.pages);t++){o.pdf_pages[t].split("x");var e=t+1,n="",i=(1===e?n=" first-page":e%2==0&&(n=" even"),'<img class="pdf_img" id="page_'+o.id+"_"+e+'">'),n='<div class="editor__page'+n+" file_"+o.id+'" data-file="'+o.id+'" data-page="'+e+'"><div class="page-canvas">'+i+"</div></div>";p(".editor__content").append(n),p(".editor__content").append('<div class="page-canvas-break"></div>')}return function(){p(".editor__content").html("")}})},D.prototype.addPreviewPages=function(t){var e=p(".tool__preview__pages"),n=e[0];if(String(n.dataset.pageCount)===String(t.pages))return!0;n.dataset.pageCount=String(t.pages);for(var i=0;i<parseInt(t.pages);i++){var o=t.pdf_pages[i].split("x"),r=i+1,o=94*parseFloat(o[1])/parseFloat(o[0]);e.append('<div class="preview__page file_'+t.id+'" data-file="'+t.id+'" data-page="'+r+'"><img id="preview_'+t.id+"_"+r+'" width="94" height="'+o+'"><div>'+r+"</div></div>")}},D.prototype.addPreviewActions=function(t){function e(t){p(".preview__page").removeClass("active"),p(t.currentTarget).parent().addClass("active"),p(t.currentTarget).parent().attr("data-file"),t=p(t.currentTarget).parent().attr("data-page"),t=Number(t),n.jumpToPage(t,!1,{forceJump:!0})}var n=this,i=".preview__page.file_"+t.id+" img";x.HandlerRegistry.cleanupRoutine(function(){return p(i).on("click",e),function(){return p(i).off("click",e)}})},D.prototype.changeServer=function(e){I.prototype.changeServer.call(this,e),this.pdfRenderer&&(this.pdfRenderer.renderServer=e),this.editpdfUploaders.map(function(t){return t.uploader}).forEach(function(t){t.workerServer=e,t.uploader.setOption("url",e+"/"+t.apiVersion+"/upload")})},D.prototype.processTask_andGetLink=function(t){return v(this,void 0,void 0,function(){var i=this;return g(this,function(t){return[2,new Promise(function(e,t){var n=!1;try{i.onFileReadyToDownload=function(t){t=t.fileUrl;i.onFileReadyToDownload=i.defaultProcessDownloadFileCallback,e({fileUrl:t})},i.processTask(),n=!0}finally{n||(i.onFileReadyToDownload=i.defaultProcessDownloadFileCallback,t())}})]})})},D.prototype.swapToTrueEdit=function(f){var c;return v(this,void 0,void 0,function(){var h,e,n,i,o,r,a,s,l=this;return g(this,function(t){switch(t.label){case 0:if(h=!f,"TrueEdit"===this.activeEditorType)return[2];if(this._swappedToTrueEditAtLeastOnce=!0,this.editorSwapTransition={from:"Editpdf",to:"TrueEdit"},window.ev("send","event","editpdf","swap","trueedit"),window.ev("event","editpdf",{swap:"trueedit"}),i=this.editor,e=function(p){return v(l,void 0,void 0,function(){var e,n,i,o,r,a,s,l,c,u,d=this;return g(this,function(t){switch(t.label){case 0:if(e=(n=this).editorTypesMountPoints,n=n.toggleShowEditorType,s=document.querySelector(".tool__preview"),!this.trueEditIntegration){if(null===(r=H.TrueEditIntegration))throw new Error("TrueEditIntegration object not loaded!");if(!(o=document.getElementById("editpdf-menu-toolbar")))throw new Error("TrueEdit ToolMenu not found!");if(!(i=document.querySelector('.editpdf__submenu[data-editor="TrueEdit"]')))throw new Error("TrueEdit Submenu not found!");o=o.querySelector("#trueedit-menu-section"),this.trueEditIntegration=new r({thumbnailsPanel:s,toolMenu:{element:o,subElement:i}})}return r=this.trueEditIntegration,a=null,[4,r.mount(e.trueEdit,{jumpToThumbnail:this.jumpToThumbnail,renderThumbnailPages:function(t){var e=d.numPagesInThumbnailsSidebar(),n=Math.round(e/1.5),e=Math.round(1.3*e),i=t-n,o=t-e;a&&(clearTimeout(a),a=null),a=setTimeout(function(){d.pdfRenderer.renderPreviewPages(i,o)},100)}})];case 1:if(t.sent())return h?[4,r.openFile(p,this._originalFilename)]:[3,3];throw new Error("TrueEdit mount was not possible");case 2:if(!t.sent())throw new Error("Error opening TrueEdit File");t.label=3;case 3:return r.onUserMadeChanges(function(){d.userPlayedWithTrueEdit=!0,d.destroyEditpdf(),d.enableProcessBtn()}),s=f?null:this.editor.pageStack.pageLayout,l=f?null:k.FL_Capitalize(s),c=f?null:2*this.editor.zoom,u=f?null:this.editor.activePageNumber,[4,this.editpdfDetachForTrueEdit()];case 4:return t.sent(),this.trueEditIntegration.attach(),n({editpdf:!1,trueEdit:!0}),h&&r.setContext({zoom:c,pageNumber:u,pageLayout:l}),r._renderThumbnailPages(u),[2]}})})},this.editor.finalizeInteractiveMode(),a=this.getPdfFile())return n=(n=null)!=(c=a)&&c.getNative?null==(c=a)?void 0:c.getNative():a.file,f?(e(null),[2]):0<i.canvasObjectCount()?(a={},T.UserModel.isLoggedIn()&&(a.custom_int=String(T.UserModel.get().id)),[4,this.processManager.api.resetTask(a)]):[3,7];throw new Error("PDF File not found in the stack");case 1:return i=t.sent(),i.status.toString()[0],r=(o=JSON).parse,[4,i.text()];case 2:return r.apply(o,[t.sent()]),[4,this.processTask_andGetLink({keepInputFiles:!0})];case 3:if(a=t.sent(),void 0!==a.fileUrl)return this.activeEditorType="TrueEdit",[4,fetch(a.fileUrl)];throw new Error("Error swapping to TrueEdit. ProcessTask_andGetLink 'fileUrl' is missing");case 4:return[4,t.sent().blob()];case 5:return s=t.sent(),this._pdf_rendered_once=!1,s=new File([s],n.name),E.EditorStateSaver.save(this.editor),[4,e(s)];case 6:return t.sent(),[3,9];case 7:return this.activeEditorType="TrueEdit",E.EditorStateSaver.save(this.editor),[4,e(n)];case 8:t.sent(),t.label=9;case 9:return[2]}})})},D.prototype.emptyThumbnailsPanel=function(){var t=p(".tool__preview__pages")[0];t.innerHTML="",t.removeAttribute("data-page-count")},D.prototype.swapToEditpdf=function(){var h;return v(this,void 0,void 0,function(){var i,e,o,r,n,a,s,l,c,u,d,p=this;return g(this,function(t){switch(t.label){case 0:return"Editpdf"===this.activeEditorType?[2]:(this.activeEditorType="Editpdf",this._swappedToEditpdfAtLeastOnce=!0,this.editorSwapTransition={from:"TrueEdit",to:"Editpdf"},window.ev("send","event","editpdf","swap","editpdf"),window.ev("event","editpdf",{swap:"editpdf"}),i=(n=this).toggleShowEditorType,e=n.trueEditIntegration,n.emptyEditpdfWorkarea,o=e.getContext(),r=function(t){p.editor.setZoom(o.zoom/2),p.jumpToPage(o.pageNumber,!1,{forceJump:!0,sameMarginAsTrueEdit:!0});var e=p.editor.pageStack.pageLayout,e=e[0].toLowerCase()+e.slice(1),n=o.pageLayout[0].toLowerCase()+o.pageLayout.slice(1);e!==n&&(p.editor.setPageLayoutMode(n),p.viewbar.setPageLayout(k.FL_Capitalize(n)))},[4,e.getFileBlob()]);case 1:if(n=t.sent(),!(s=this.getPdfFile()))throw new Error("More than one PDF file in the stack [2]!");for(a=(a=null)!=(h=s)&&h.getNative?null==(h=s)?void 0:h.getNative():s.file,e.detach(),this._pdf_rendered_once=!1,s=new File([n],a.name),l=window.ilovepdf.uploadManager.plupload,this.uploadingFilesFromTrueEdit_to_Editpdf=!0,c=this._fileUploaded_Timestamp,Date.now(),u=this.files.files.length-1;0<=u;u--)d=this.files.files[u],this.isPdfFile(d)&&(d=this.files.files.splice(u,1)[0],l.uploader.removeFile(d),0);return l.uploader.addFile(s),[2,new Promise(function(e,n){return v(p,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:return c!==this._fileUploaded_Timestamp&&!1===this._workareaIsEmpty?(i({editpdf:!0,trueEdit:!1}),r(!0),!1===this.transitionBackToEditpdfAtLeastOnceWithChanges&&(this.transitionBackToEditpdfAtLeastOnceWithChanges=!0,this.checkForProcessButtonAvailability()),[2,e()]):this.process_goProblem||this.process_fatalError?[2,n()]:this._fatalError?(this._fatalError_err,[2,n()]):this._invalidUpload?(this._invalidUpload_err,[2,n()]):[4,L(100)];case 1:return t.sent(),[3,0];case 2:return[2]}})})})];case 2:return this.onPdfReadyToBeRendered(D.fileUploaded_storeState.file,D.fileUploaded_storeState.response),e.detach(),[4,e.closeFile()];case 3:t.sent(),i({editpdf:!0,trueEdit:!1}),r(!1),E.EditorStateSaver.load(this.editor),this.editor.getAllCanvasObjects().forEach(function(t){t.applyZoomAndTranslate(p.editor.zoom),t.updateDom()}),t.label=4;case 4:return[2]}})})},D.prototype.editpdfDetachForTrueEdit=function(){return v(this,void 0,void 0,function(){var e;return g(this,function(t){return x.HandlerRegistry.doCleanup(),(e=this.viewbar).detach(),e.unmount(),[2]})})},D.prototype.destroyEditpdf=function(){return v(this,void 0,void 0,function(){return g(this,function(t){return[2]})})},D.fileUploaded_storeState=null;var I,e=D;function D(t){var d=I.call(this,t=void 0===t?{}:t)||this,t=(d.activeEditorType="Editpdf",d._numCanvasObjectsPlaced=0,d.pulseDoneOnce=!1,d.formManager=null,d._workareaIsEmpty=!1,d.editorSwapTransition=null,d.defaultProcessDownloadFileCallback=function(o){return v(d,void 0,void 0,function(){var e,n,i;return g(this,function(t){switch(t.label){case 0:if(i=o.fileUrl,e=null,e=0===i.indexOf("//")?new URL("https:"+i):new URL(i),null===(i=e.pathname.match(/download\/(.+)$/)))throw new Error("Task ID was not possible to extract from download link");return i=i[1],e="//"+e.host,n=e.split(".")[0].replace(/^\D+/g,""),[4,this.openDownloadDialog_ctx(i,n,e,!0)];case 1:return i=t.sent(),window.ev("sendOnce","event","user","process","editpdf"),window.ev("eventOnce","process",{tool:"editpdf"}),i.show(),[2]}})})},d.onFileReadyToDownload=d.defaultProcessDownloadFileCallback,d.onEditorSwapButtonClick=function(t){return v(d,void 0,void 0,function(){return g(this,function(t){return this._toggleActiveEditorType(),[2]})})},d._toggleActiveEditorType=function(s){return void 0===s&&(s={}),v(d,void 0,void 0,function(){var e,n,i,o,r,a;return g(this,function(t){switch(t.label){case 0:if(a=null!=(a=s.skipContext)&&a,r=this.toggleNonInteractiveWall,(e=this.editorSwapCheckbox).disabled)return[2];e.disabled=!0,n=!1,i=this.activeEditorType,o="Editpdf"===this.activeEditorType?"TrueEdit":"Editpdf",e.checked="TrueEdit"===o,r(!0),t.label=1;case 1:return t.trys.push([1,8,9,10]),"Editpdf"!==this.activeEditorType?[3,4]:[4,this.swapToTrueEdit(a)];case 2:return t.sent(),[4,L(100)];case 3:return t.sent(),[3,7];case 4:return"TrueEdit"!==this.activeEditorType?[3,7]:[4,this.swapToEditpdf()];case 5:return t.sent(),[4,L(100)];case 6:t.sent(),t.label=7;case 7:return n=!0,[3,10];case 8:return r=t.sent(),_.captureException(r,function(t){return t.setExtra("msg","While transitioning editors"),t.setExtra("transitionTo",o),t}),[3,10];case 9:return n||(this.activeEditorType=i,e.checked="TrueEdit"===this.activeEditorType,M().show()),this.editorSwapCleanup(),[7];case 10:return[2]}})})},d.editorSwapCleanup=function(){d.uploadingFilesFromTrueEdit_to_Editpdf=!1,d.editorSwapTransition=null,d.editorSwapCheckbox.disabled=!1,d._invalidUpload_err=null,d._fatalError_err=null,d._invalidUpload=!1,d._fatalError=!1,d.process_goProblem=!1,d.process_goProblem_err=null,d.process_fatalError=!1,d.process_fatalError_args=null,d.checkForProcessButtonAvailability(),d.toggleNonInteractiveWall(!1)},d.toggleNonInteractiveWall=function(t){var e,n=0<p(".non-interactive-wall").length;t?(n||p("body").append("<div class='non-interactive-wall'>"),0===(e=p(".non-interactive-wall")).find(".loading-icon").length&&e.append("<img class='loading-icon' src=\"/img/svg_icons/preload.svg\" />"),setTimeout(function(){e.addClass("non-interactive-wall--loading")},1)):n&&((t=p(".non-interactive-wall")).find(".loading-icon"),t.removeClass("non-interactive-wall--loading"),setTimeout(function(){p(".non-interactive-wall").detach(),d.viewbar_refreshPosition()},500))},d._canUsePremiumFeatures=!1,d.fileFromCloud=function(o){var t,n;if(["drive","dropbox"].includes(o.origin))return t=d.processManager.api.taskId,n=d.processManager.api.workerServer+"/v1/download/"+t,new Promise(function(i,e){d.processManager.api.copyTask({taskId:t,keepInputFile:!0,files:d.files.files}).then(function(t){fetch(n).then(function(n){return v(d,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return[4,n.blob()];case 1:return e=t.sent(),e=new File([e],o.name),this.files.files[0].file=e,i(),[2]}})})}).catch(function(t){_.captureException(t,function(t){return t.setExtra("cloudProvider",o.origin),t.setExtra("msg","[Editpdf] Failed downloading file from task (fileFromCloud)"),t.setExtra("prevAction","copyTask success"),t}),e(t)})}).catch(function(t){_.captureException(t,function(t){return t.setExtra("cloudProvider",o.origin),t.setExtra("msg","[Editpdf] Failed calling copyTask for Cloud file"),t}),e(t)})})},d._originalFilename=null,d._fileUploaded_Timestamp=null,d.numPagesInThumbnailsSidebar=function(){var t=document.querySelector(".tool__preview__pages");return Math.ceil(t.clientHeight/document.querySelector(".preview__page").getBoundingClientRect().height)+2},d.renderThumbnailPagesInActiveRange_timeout=null,d.renderThumbnailPagesInActiveRange=function(){var i=d.pdfRenderer;i&&!d._amidJump&&(d.renderThumbnailPagesInActiveRange_timeout&&(clearTimeout(d.renderThumbnailPagesInActiveRange_timeout),d.renderThumbnailPagesInActiveRange_timeout=null),d.renderThumbnailPagesInActiveRange_timeout=setTimeout(function(){var t=document.querySelector(".tool__preview__pages"),e=d.numPagesInThumbnailsSidebar(),t=Math.round(t.scrollTop/(document.querySelector(".preview__page").getBoundingClientRect().height+12)),n=t-Math.round(e/1.5),t=t+Math.round(1.3*e);i.renderPreviewPages(n,t)},100))},d.getProblemDialog=M,d.becomePremiumDialog=A,d.getThumbnailsSidebar=function(){return document.querySelector(".tool__preview__pages")},d.thumbnailsSidebar_scrollEventHandlers_attached=!1,d.toggleThumbnailsSidebarScrollEventHandlers=function(t){var e=d.getThumbnailsSidebar();t?d.thumbnailsSidebar_scrollEventHandlers_attached||(e.addEventListener("scroll",d.renderThumbnailPagesInActiveRange),d.thumbnailsSidebar_scrollEventHandlers_attached=!0):(d.thumbnailsSidebar_scrollEventHandlers_attached=!1,e.removeEventListener("scroll",d.renderThumbnailPagesInActiveRange))},d._firstRun=!0,d._pdfReadyToBeRenderedAtLeastOnce=!1,d.checkForProcessButtonAvailability=function(){var t=d.formManager,e=!0,n=void 0;"Editpdf"===d.activeEditorType?t?(e=0===(t=t.validate()).length,t=t.filter(function(t){return"required"in t.errors}).length,e||(n=y.Lang.t("forms_required_fields_pending_"+(1<t?"plural":"singular"),{num_fields:t})),p("body").attr("data-editpdf-form-errors-count",String(t))):d.transitionBackToEditpdfAtLeastOnceWithChanges?e=!0:0===d.numCanvasObjectsPlaced&&(n=y.Lang.t("processBtn_atLeastOneElem"),e=!1):(n=y.Lang.t("processBtn_trueEdit_makeOneChange"),e=d.trueEditIntegration.changesMade),e?(d.enableProcessBtn(),d.checkProcessPulse()):(d.disableProcessBtn(n),p("#processTask").removeClass("pulse"))},d.getThumbnailPage=function(t,e){return e=e||d.getActivePage().fileId,document.querySelector(".preview__page[data-file='"+e+"'][data-page='"+t+"']")},d.getActivePage=function(){var t=p(".preview__page.active"),t=(t=0==t.length?p(".preview__page").first():t)[0];return{element:t[0],fileId:t.getAttribute("data-file"),pageNumber:Number(t.getAttribute("data-page"))}},d.getFile=function(t){return d.files.getFile(t)},d.getDocumentInfo=function(t){return{pagesCount:parseInt(t.pages)}},d.viewbar=null,d.viewbar_refreshPosition=null,d.getPdfPageCount=function(){var t=d.getActivePage(),t=d.getFile(t.fileId);return d.getDocumentInfo(t).pagesCount},d._amidJump=!1,d.jumpToPage=function(t,e,n){void 0===n&&(n={});d.editor.getActivePageNumber();var i=document.getElementById("workArea"),o=p(i),i=n.forceJump,r=n.direction,n=(n.sameMarginAsTrueEdit,t=function(t,e,n){if("single"===t)return n;if(!e)return n;var i=n%2==0,o=!i;if("double"===t){if("next"===e)return o?n+2:n+1;if("prev"===e)return o?n-2:n-1}else if("cover"===t){if("next"===e)return i?n+1:n+2;if("prev"===e)return i?n-2:n-1}throw new Error("Unknown page layout '"+t+"'")}(d.editor.getPageLayoutMode(),r,t),b.Tools.keepInNumericBounds(1,d.getPdfPageCount(),t)),r=d.getActivePage(),t=d.getFile(r.fileId),r=document.querySelector('.editor__page[data-file="'+t.id+'"][data-page="'+n+'"]'),t=(p(r),r.querySelector(".page-canvas"));if(p("#workArea").is(":animated")&&!0!==i)return!1;o.stop(),d.editor.updateActivePageNumber(n);var a=40+t.offsetTop-5;if(!e)return o.scrollTop(a),!(d._amidJump=!1);d._amidJump=!0;new Promise(function(t,e){o.animate({scrollTop:a},500,void 0,t)}).finally(function(){d._amidJump=!1});return!0},d.jumpToThumbnail=function(t,e){var n=d.getThumbnailsSidebar(),i=document.querySelector("header.header"),o=d.getPdfFile(),o=n.querySelector(".preview__page[data-file='"+o.id+"'][data-page='"+t+"']"),t=p(n),n=p(o),o=(t.is(":animated")&&t.stop(),t.scrollTop()+n.offset().top-(i.clientHeight+10));return e?t.animate({scrollTop:o},500):t.scrollTop(o),!0},d.jumpToPageBy=function(t,e,n){void 0===n&&(n={});var i=d.editor.getActivePageNumber(),o=0<t?"next":"prev";return d.jumpToPage(i+t,e,r(r({},n),{direction:o}))},d.togglePreview_done=!1,d.setViewportPageActive=function(){var t,e,a=0,s=null,l=p(".tool__workarea").scrollTop(),c=p(".tool__workarea").height(),u=l+c;p(".editor__page").each(function(t,e){var n,i=p(e).offset().top,o=p(e).outerHeight(),r=i+o;i<c&&0<r&&(n=i<(n=0)&&c<r?c:i<0&&0<r&&r<c?r:i<c&&c<r?c-i:0<i&&i<c&&r<c?o:0,Math.min(r,u),Math.max(i,l),0<n)&&a<n&&(a=n,s=e)}),null!=s&&(e=p(s).attr("data-file"),t=p(s).attr("data-page"),e=p('.preview__page[data-file="'+e+'"][data-page="'+t+'"]'),p(".preview__page").removeClass("active"),e.addClass("active"),d.editor.updateActivePageNumber(parseInt(t)),d.viewbar.setPageNumber(Number(t),d.getPdfPageCount()),d.jumpToThumbnail(Number(t),!0))},d.previousSuccessfulProcess=!1,d.transitionBackToEditpdfAtLeastOnceWithChanges=!1,d.isPdfFile=function(e){return!(!e.type||"application/pdf"!==e.type)||["server_filename","filename","name"].some(function(t){return t in e&&!!e[t].match(/\.pdf$/)})},d.getPdfFile=function(){var t=d.files.files.filter(d.isPdfFile);if(0===t.length)return null;if(1<t.length)throw new Error("More than one PDF file in the stack [1]!");return t[0]},d.userPlayedWithTrueEdit=!1,d._swappedToTrueEditAtLeastOnce=!1,d.emptyEditpdfWorkarea=function(){p(".editor__content")[0].innerHTML="",d._workareaIsEmpty=!0},d._invalidUpload_err=null,d._invalidUpload=!1,d.invalidUpload=function(t,e){d._invalidUpload_err=[t,e=void 0===e?null:e],d._invalidUpload=!0,d.revertActionAfterError({type:"upload",subtype:"invalidUpload",error:t,extra:e})||I.prototype.invalidUpload.call(d,t,e)},d._fatalError_err=null,d._fatalError=!1,d.fatalError=function(t){d._fatalError_err=t,d._fatalError=!0;var e=d.revertActionAfterError({type:"upload",subtype:"fatalError",error:t});e||I.prototype.fatalError.call(d,t)},d.process_goProblem=!1,d.process_goProblem_err=null,d.callback_process_goProblem=function(t){void 0===t&&(t=null),d.process_goProblem=!0,d.process_goProblem_err=t;var e=d.processManager.api.workerServer.replace(/^\/\//,"");return window.ev("sendOnce","event","processing-error","editpdf",e),window.ev("eventOnce","processing_error",{tool:"editpdf"}),!d.revertActionAfterError({type:"process",subtype:"goProblem",error:t})},d.process_fatalError=!1,d.process_fatalError_args=null,d.callback_process_fatalError=function(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),d.process_fatalError=!0,d.process_fatalError_args={error:t,fileName:e,extra:n};var i=d.processManager.api.workerServer.replace(/^\/\//,"");return window.ev("sendOnce","event","processing-error","editpdf",i),window.ev("eventOnce","processing_error",{tool:"editpdf"}),!d.revertActionAfterError({type:"process",subtype:"fatalError",error:t,filename:e,extra:n})},d.revertActionAfterError=function(t){var e,n=d.editorSwapTransition,i=(d.uploadingFilesFromTrueEdit_to_Editpdf,null!==n),o=d.activeEditorType,r=null===d._originalFilename;if(!r){if(i&&(o=n.from+"->"+n.to),!["Editpdf","TrueEdit","Editpdf->TrueEdit","TrueEdit->Editpdf"].includes(o))throw new Error("[RevertActionAfterError] Invalid Situation '"+o+"'");switch(o){case"Editpdf":if("upload"===t.type)throw _.captureMessage("[Editpdf] Cannot upload new file after first time (SentryMsg)",function(t){return t.setExtra("_firstRun",d._firstRun?"true":"false"),t.setExtra("filesNum",d.files.files.length),1<=d.files.files.length&&(t.setExtra("fileNameName0",d.files.files[0].name),t.setExtra("fileNameType0",d.files.files[0].type)),t.setExtra("_swappedToTrueEditAtLeastOnce",d._swappedToTrueEditAtLeastOnce?"true":"false"),t.setExtra("_swappedToEditpdfAtLeastOnce",d._swappedToEditpdfAtLeastOnce?"true":"false"),t.setExtra("_pdfReadyToBeRenderedAtLeastOnce",d._pdfReadyToBeRenderedAtLeastOnce?"true":"false"),t}),new Error("[Editpdf] Cannot upload new file after first time");if("process"===t.type)return d.toggleNonInteractiveWall(!1),setTimeout(d.checkForProcessButtonAvailability,100),M().show(),!0;break;case"TrueEdit":if("upload"===t.type)throw new Error("TrueEdit 'upload' does not exist (/run endpoint is used instead in DownloadState)");if("process"===t.type)throw new Error("TrueEdit 'process' does not exist");break;case"Editpdf->TrueEdit":if("upload"===t.type)throw new Error("\"Editpdf->TrueEdit 'upload' does not exist");if("process"===t.type)return d.toggleNonInteractiveWall(!1),setTimeout(d.checkForProcessButtonAvailability,100),(e=document.getElementById("div-swap-editor").querySelector("input")).checked=!1,e.disabled=!1,M().show(),!0;break;case"TrueEdit->Editpdf":if("process"===t.type)throw new Error("[TrueEdit->Editpdf] 'Process' does not exist");return d.activeEditorType="TrueEdit",d.trueEditIntegration.attach(),M().show(),!0}}return!1},d.uploadingFilesFromTrueEdit_to_Editpdf=!1,d._swappedToEditpdfAtLeastOnce=!1,d.trueEdit_toggleShow=function(t){document.getElementById("trueedit-menu-toolbar");var e=document.querySelector("#trueedit-menu-section"),n=d.layersPanel;t?(d.trueEditIntegration.toggleShow(!0),d.trueEditIntegration.toolMenuInterface.draw(),d.trueEditIntegration.toolMenuInterface.attach(),n.toggleEditor("TrueEdit",!0),e.classList.remove("hidden")):(d.trueEditIntegration.toggleShow(!1),e.classList.add("hidden"),d.trueEditIntegration.toolMenuInterface.detach(),n.toggleEditor("TrueEdit",!1),d.trueEditIntegration.toolMenuInterface.undraw())},d.editpdf_toggleShow=function(t){var e=document.getElementById("editpdf-menu-toolbar"),n=d.layersPanel;t?(d.editorTypesMountPoints.editPdf.style.display="",e.querySelectorAll('[data-editor="Editpdf"]').forEach(function(t){return t.classList.remove("hidden")}),n.toggleEditor("Editpdf",!0)):(d.editorTypesMountPoints.editPdf.style.display="none",e.querySelectorAll('[data-editor="Editpdf"]').forEach(function(t){return t.classList.add("hidden")}),n.toggleEditor("Editpdf",!1),n.clearPanel())},d.toggleShowEditorType=function(t){var e=t.editpdf,t=t.trueEdit,n=d.trueEdit_toggleShow,i=d.editpdf_toggleShow;e||i(!1),t||n(!1),e&&i(!0),t&&n(!0)},d.editorConfig=new R.EditorConfig({}),window.pdfinfo=!0,window.pdfforms=d.editorConfig.formsEnabled,window.pdfresetforms=d.editorConfig.emptyFormInputs,window._tefps);if(t)return P.ToolPremiumUsageCounter.configTool("editpdf",t),d.processManager.afterFilesLoaded=function(t,e){d.updateServerFilenameOfCanvasObjects();for(var n=0;n<d.options.elements.length;n++)!["image","svg"].includes(d.options.elements[n].type)||d.options.elements[n].server_filename&&0!==String(d.options.elements[n].server_filename).length||(_.captureMessage("This image has no server_filename!",F.Severity.Debug),delete d.options.elements[n]),d.options.elements[n]&&delete d.options.elements[n].canvas_obj_id;return d.processBlock=!1,d.options.elements=d.options.elements.filter(function(t){return void 0!==t}),d.options},d.editorSwapButton=document.querySelector('[data-action="swap-editor"]'),d.editorSwapCheckbox=d.editorSwapButton.querySelector("input"),d.editorSwapCheckbox.addEventListener("change",d.onEditorSwapButtonClick),d.editorTypesMountPoints={editPdf:document.querySelector('.tool__workarea [data-editor-type="editpdf"]'),trueEdit:document.querySelector('.tool__workarea [data-editor-type="trueedit"]')},window._global_editpdf_toggleActiveEditorType=d._toggleActiveEditorType,d;throw new Error("Missing _tefps")}q.EditpdfOptionsManager=e}.call(this,G(1))},function(t,h,f){"use strict";!function(i){Object.defineProperty(h,"__esModule",{value:!0}),h.EditpdfMenu=void 0;f(288);var o=f(490),r=f(492),a=f(493),s=f(494),l=f(495),c=f(496),n=f(7),t=f(34),u=(f(290),f(497)),d=f(498),p=f(253);function e(t){void 0===t&&(t={}),this.submenuCanvasObject=null,this.submenuInstance=null,this.handBtn=null,this.tippyMenuInstances={},this.toolsUnderShapeMenu=["line","rect","ellipse","symbol"],Object.assign(this,t),this.workArea=i("#workArea"),this.menu=i("#editpdf-menu-toolbar"),this.menuWrapper=this.menu.closest(".editpdf-menu-wrapper"),this.subMenu=i('.editpdf__submenu[data-editor="Editpdf"]'),this.initMenuActions(),this.setEventListeners(),this.initTooltips(),this.initHandTool(),this.triggerCustomEvent("editpdf:menu:ready",{menu:this})}e.prototype.cleanup=function(){},e.prototype.initFitViewportButtons=function(){},e.prototype.initHandTool=function(){function t(){e.handBtn.hasClass("hand--active")?e.disableHandTool():e.enableHandTool()}var e=this;this.handBtn=this.menu.find("[data-operation-mode='hand']");p.HandlerRegistry.cleanupRoutine(function(){return e.handBtn.on("click",t),function(){return e.handBtn.off("click",t)}})},e.prototype.enableHandTool=function(){this.handBtn.addClass("hand--active"),this.editor.unsetTransientOperationMode(),this.editor.changeOperationMode("hand"),this.editor.setActiveCanvasObject(null)},e.prototype.disableHandTool=function(){this.handBtn.removeClass("hand--active"),this.editor.clearHandOperationMode()},e.prototype.initTooltips=function(){this.addTooltip(this.menu.find('.item[data-tool="text"]'),{text:n.Lang.t("tooltip_addText")}),this.addTooltip(this.menu.find('.item[data-tool="img"]'),{text:n.Lang.t("tooltip_addImage")}),this.addTooltip(this.menu.find('[data-operation-mode="hand"]'),{text:n.Lang.t("tooltip_pan")}),this.addTooltip(this.menu.find('.item[data-tool="freehand"]:not(.item__main)'),{text:n.Lang.t("tooltip_addFreehand")}),this.addTooltip(this.menu.find('[data-menu-action="show_shape_selector_submenu"]'),{text:n.Lang.t("tooltip_addShape")})},e.prototype.addTooltipToMenu=function(t,e){switch(t){case"line":return this.addTooltip(e.find('[data-tool="line"]'),{text:n.Lang.t("tooltip_addLine"),placement:"top"});case"rect":return this.addTooltip(e.find('[data-tool="rect"]'),{text:n.Lang.t("tooltip_addRect"),placement:"top"});case"ellipse":return this.addTooltip(e.find('[data-tool="ellipse"]'),{text:n.Lang.t("tooltip_addEllipse"),placement:"top"})}throw"[Editpdf][Menu] Unknown shape "+t},e.prototype.addTooltip=function(t,e){var n="mouseenter",i="bottom";return e.trigger&&(n=e.trigger),e.placement&&(i=e.placement),window.tippy(t[0],{content:e.text,placement:i,arrow:!0,animation:"fade",trigger:n}),t[0]._tippy},e.prototype.setEventListeners=function(){var n=this;this.editor.on("editor:active_canvas_object:change",function(t){t=t.canvasObject;t?(n.updateSubmenuOptions(t),n.showSubMenu(),t.type,n.deselectActiveTool(),n.selectTool(t.type,!0)):(n.deselectActiveTool(),n.hideSubMenu())}),window.addEventListener("editpdf_menu:show_submenu",p.HRS("editpdf_menu:show_submenu",function(t){t=t.detail.canvasObject;n.updateSubmenuOptions(t),n.showSubMenu(),n.selectTool(t.type)})),window.addEventListener("canvas_object:text:writing_system_change",p.HRS("canvas_object:text:writing_system_change",function(t){t.detail.canvasObject;n.isSubmenuOpened()&&n.submenuCanvasObject&&"text"===n.submenuCanvasObject.type&&n.submenuInstance.updateFontFamily()})),window.addEventListener("editpdf_menu:deselect_hand_button",p.HRS("editpdf_menu:deselect_hand_button",function(t){n.disableHandTool()})),window.addEventListener("editor:interactive:first_interaction",p.HRS("editor:interactive:first_interaction",function(t){var e=t.detail.canvasObject,e=n.submenuInstance.canvasObject.id===e.id;n.submenuInstance&&e&&n.submenuInstance.triggerInternalEvent("interactive:first_interaction",t.detail)})),window.addEventListener("editor:interactive:no_longer_empty",p.HRS("editor:interactive:no_longer_empty",function(t){var e=t.detail.canvasObject,e=n.submenuInstance.canvasObject.id===e.id;n.submenuInstance&&e&&n.submenuInstance.triggerInternalEvent("interactive:no_longer_empty",t.detail)}))},e.prototype.initMenuActions=function(){var e=this,n=this.menu.find(".item[data-tool]");p.HandlerRegistry.cleanupRoutine(function(){function t(t){t=i(t.currentTarget).attr("data-tool"),e.onMenuItemClick(t)}return n.on("click",t),function(){return n.off("click",t)}}),this.initShapeSelectorBtn()},e.prototype.initShapeSelectorBtn=function(){var e=this,n=this.menu.find('[data-menu-action="show_shape_selector_submenu"]');p.HandlerRegistry.cleanupRoutine(function(){function t(t){e.onMenuItemClick("show_shape_selector_submenu"),e.updateSubmenuOptions("shape_selector"),e.showSubMenu()}return n.on("click",t),function(){return n.off("click",t)}})},e.prototype.enableShapeTooltip=function(){t.Tooltip.enable(this.menu.find("#shape-selector .items-container"))},e.prototype.disableShapeTooltip=function(){t.Tooltip.disable(this.menu.find("#shape-selector .items-container"))},e.prototype.onMenuItemClick=function(t,e){void 0===e&&(e={}),this.disableHandTool(),this.deselectActiveTool(),this.hideSubMenu(),this.selectTool(t),this.editor.notifyOfToolSelection(t,e)},e.prototype.isSubmenuOpened=function(){return!this.subMenu.closest(".editpdf-submenu-wrapper").hasClass("submenu-hidden")},e.prototype.selectTool=function(t,e){void 0===e&&(e=!1),this.editor.currentTool=t;var n=this.menu.find("[data-tool='"+t+"']");n.length<=0&&(n=this.menu.find('[data-menu-action="'+t+'"]')),"img"===t&&!e||((n=n.length<=0&&this.toolsUnderShapeMenu.includes(t)?this.menu.find('[data-menu-action="show_shape_selector_submenu"]'):n).addClass("item__selected"),n.closest(".editpdf__menu__block").addClass("active"))},e.prototype.deselectActiveTool=function(){this.editor.currentTool="none",this.menu.find(".item").removeClass("item__selected"),this.menu.find(".editpdf__menu__block").removeClass("active")},e.prototype.showSubMenu=function(){this.subMenu.closest(".editpdf-submenu-wrapper").removeClass("submenu-hidden"),this.workArea.addClass("submenu-opened")},e.prototype.hideSubMenu=function(){this.subMenu.attr("data-name",""),this.subMenu.closest(".editpdf-submenu-wrapper").addClass("submenu-hidden"),this.workArea.removeClass("submenu-opened"),this.submenuCanvasObject=null,this.submenuInstance=null},e.prototype.updateSubmenuOptions=function(t){this.subMenu.empty();var e=null,n=null;if("object"==typeof t&&t.type)n=t.type,this.submenuCanvasObject=e=t;else{if("string"!=typeof t)throw"[Editpdf] Invalid param type";n=t,this.submenuCanvasObject=null}var i=null;switch(n){case"img":i=new o.SubmenuImg(e,this);break;case"rect":i=new r.SubmenuRect(e,this);break;case"ellipse":i=new a.SubmenuEllipse(e,this);break;case"text":i=new s.SubmenuText(e,this);break;case"line":i=new l.SubmenuLine(e,this);break;case"freehand":i=new c.SubmenuFreehand(e,this);break;case"shape_selector":i=new u.SubmenuShapeSelector(null,this);break;case"symbol":i=new d.SubmenuSymbol(e,this);break;default:throw"[Editpdf SubmenuBase] Not handled Submenu for Canvas Object type "+e.type}i.render(),this.submenuInstance=i},e.prototype.getTemplate=function(t){if("block"===t)return i("<div class='editpdf__menu__block'></div>")},e.prototype.triggerCustomEvent=function(t,e){void 0===e&&(e={});t=new CustomEvent(t,{detail:e});window.dispatchEvent(t)},h.EditpdfMenu=e}.call(this,f(1))},function(t,i,_){"use strict";!function(o){Object.defineProperty(i,"__esModule",{value:!0}),i.PageStack=void 0;var s=_(471),e=_(289),r=_(367),a=_(474),l=_(476),c=_(477),u=_(368),d=_(479),p=_(481),h=_(370),f=_(482),v=_(483),g=_(484),m=_(485),y=_(486),b=_(288),w=_(290),t=_(253);function n(t,e,n){var i=this;this.VALID_PAGE_LAYOUTS=["single","double","cover"],this.pages=[],this.pagesContainer=null,this.groupPagesContainer=null,this.canvasObjectsCreationCount=0,this.allCanvasObjects={},this._zoom=1,this.pageLayout=null,this.handleRemoveCanvasObjectRequest=function(t){t=t.detail.canvasObject;"string"==typeof t&&(t=i.getCanvasObjectById(t)),i.removeObject(t)},this.handleRemoveCanvasObjectRequestAll=function(t){for(var e in i.allCanvasObjects){e=i.allCanvasObjects[e];i.removeObject(e)}},this.handleDetachedObjectFromPdfPage=function(t){t=t.detail.canvasObject;i.allCanvasObjects[t.id]=void 0,delete i.allCanvasObjects[t.id]},this.file=t,this.viewport=e,this.pdfRenderer=n,this.initPages(),this.initEventHandlers(),this.pagesContainer=o(".editor"),this.groupPagesContainer=o(".editor__content"),null===this.pageLayout&&this.setPageLayoutMode("single"),this.adjustPagesContainerWidth()}n.prototype.initPages=function(){var t=null,e=null,n=null,i=this.file.pdf_page_number<5?this.file.pdf_page_number:5;this.visiblePageRange=[1,i];for(var o=1;o<=this.file.pdf_page_number;o++){var r=this.file.pdf_pages[o-1].split("x"),r=new s.PdfPage({domId:"page_"+this.file.id+"_"+o,originalDimensions_inPoints:{w:r[0],h:r[1]},pixelMagnification:2,pageNumber:o,pdfRenderer:this.pdfRenderer});t?r.dimensions.w>t.dimensions.w&&(e=t,t=r):e=t=r,(!n||r.dimensions.h>n.dimensions.h)&&(n=r),this.pages.push(r),r.scale(1),r.updateDomPageContainer(),this.pageInVisibleRange(r)&&r.updateDom()}this._largestWidthPage=t,this._secondLargestWidthPage=e,this._largestHeightPage=n},Object.defineProperty(n.prototype,"largestWidthPage",{get:function(){return this._largestWidthPage},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"secondLargestWidthPage",{get:function(){return this._secondLargestWidthPage},enumerable:!1,configurable:!0}),n.prototype.addStaticTextsTo=function(e,t){t.forEach(function(t){return e.addStaticText(t)})},n.prototype.setPageLayoutMode=function(t){if(!this.VALID_PAGE_LAYOUTS.includes(t))throw"Unknown page layout mode "+t;this.pageLayout=t,this.pagesContainer.attr("data-page-layout",t)},n.prototype.getCanvasObjectById=function(t,e){return(e=void 0===e?null:e)?this.getPage(e).findObjectById(t):this.allCanvasObjects[t]},n.prototype.getCanvasObjectsByFormId=function(t){var e,n,i=[];for(e in this.allCanvasObjects)this.allCanvasObjects[e].isFormObject&&(n=this.allCanvasObjects[e]).formId===t&&i.push(n);return i},n.prototype.initEventHandlers=function(){window.addEventListener("canvas_object:remove_request",t.HRS("canvas_object:remove_request",this.handleRemoveCanvasObjectRequest)),window.addEventListener("canvas_object:remove_request:all",t.HRS("canvas_object:remove_request:all",this.handleRemoveCanvasObjectRequestAll)),window.addEventListener("pdf_page:canvas_object:detached",t.HRS("pdf_page:canvas_object:detached",this.handleDetachedObjectFromPdfPage))},n.prototype.identifyPage=function(t){t=e.MouseUtils.identifyClickedPage(t);return t?this.pages[parseInt(t.data("page"))-1]:null},n.prototype.getPage=function(t){return this.pages[t-1]},n.prototype.setZoom=function(e){var n=this;this.pages.forEach(function(t){t.scale(e),t.updateDomPageContainer(),n.pageInVisibleRange(t)&&t.updateDom()}),this._zoom=e,this.adjustPagesContainerWidth()},n.prototype.adjustPagesContainerWidth=function(){var t=this.getPagesContainerWidth(),e=(new w.Viewport(b.Editor.viewport),null),n=o("#ad"),i=n.find(".adsbygoogle"),i=(n.width(""),e=i.is(":visible")&&i.width()>t?i.width()+s.PdfPage.aroundSpacingAt(1):t,n.width(e),"single"===this.pageLayout?0:.5*this._largestWidthPage.pageDimensionsAt(this._zoom).w),n=(this.pagesContainer.css("width",e+i+"px"),this.groupPagesContainer.css("width",t+"px"),o(".editor__page.first-page"));"cover"===this.pageLayout?(e=this._largestWidthPage.editorPage.getBoundingClientRect().width+this._secondLargestWidthPage.editorPage.getBoundingClientRect().width,i=o(".editor__content")[0].getBoundingClientRect().width,n[0].style.transform="translateX(-"+(i-e)/2+"px)"):n[0].style.transform=""},n.prototype.getPagesContainerWidth=function(t){var e=this.pageLayout,n=this._largestWidthPage,i=this._secondLargestWidthPage,o=(t=void 0===t?!1:t)?1:this._zoom,r=0;if(!this.VALID_PAGE_LAYOUTS.includes(e))throw"Unknown page layout mode "+e;function a(t){var t=t.pageDimensionsAt(o),e=2*s.PdfPage.aroundSpacingAt(o);return t.w+e}switch(e){case"single":r=a(n);break;case"double":case"cover":r=a(n)+a(i)+80}return r},n.prototype.getPagesContainerHeight=function(t){var e=this.pageLayout,n=this._largestHeightPage,t=(t=void 0===t?!1:t)?1:this._zoom;if(this.VALID_PAGE_LAYOUTS.includes(e))return n=(n=n).pageDimensionsAt(t),t=2*s.PdfPage.aroundSpacingAt(t),n.h+t;throw"Unknown page layout mode "+e},n.prototype.setVisiblePageRange=function(t,e){if(t<=0)throw"[PdfPage] 'from' should be at least 1";if(e>this.numPages)throw"[PdfPage] There are no more than "+this.numPages+" pages";t=[t,e];t[0]===this.visiblePageRange[0]&&t[1]===this.visiblePageRange[1]||(this.visiblePageRange=t,this.updateDomForPageRange(this.visiblePageRange[0],this.visiblePageRange[1]))},n.prototype.updateDomForPageRange=function(t,e){for(var n=t-1;n<e;n++)this.pages[n].updateDom()},n.prototype.pageInVisibleRange=function(t){var e=this.visiblePageRange[0],n=this.visiblePageRange[1];return e<=t.pageNumber&&n>=t.pageNumber},n.prototype.getVisiblePages=function(){for(var t=this.visiblePageRange,e=t[0],n=t[1],i=[],o=e;o<=n;o++)i.push(this.getPage(o));return i},n.prototype.appendToPage=function(t,e){t.addObject(e),this.lastPlacedObject=e,this.allCanvasObjects[e.id]=e,t.updateDom()},n.prototype.orderObjects=function(t,e){var n=this.getPage(e),i=(n.reset_zindex(),this.pageInVisibleRange(n));t.reverse().map(function(t){return n.findObjectById(t)}).forEach(function(t){t.zindex=n.zindex_autoincrement(),i&&t.updateDom()})},n.prototype.cloneObject=function(t,e){void 0===e&&(e={});var n=null;switch(t.type){case"text":case"rect":case"ellipse":case"line":case"freehand":case"img":case"symbol":n=t.clone(t);break;default:throw"[Editpdf][CanvasObject] Not supported cloning type "+t.type}var i=t.pdfPage;return e.pdfPage&&(i=e.pdfPage),this.appendToPage(i,n),0<Object.keys(e).length&&n.setAttributes(e),n.createdByParent=t,n},n.prototype.createObject=function(t,e,n){void 0===n&&(n={});var i=null;switch(e){case"text":(i=new r.Text(t,{id:n.id})).text=r.Text.getInitialTextValue()+(" "+ ++this.canvasObjectsCreationCount);break;case"ellipse":i=new a.Ellipse(t,{id:n.id});break;case"rect":i=new l.Rect(t,{id:n.id});break;case"img":i=new c.Img(t,{id:n.id});break;case"line":i=new u.Line(t,{id:n.id});break;case"freehand":i=new d.Freehand(t,{id:n.id});break;case"symbol":(i=new p.Symbol(t,{id:n.id})).setSvgElement(n.svg),delete n.svg;break;case"form_textbox":(i=new h.FormTextbox(t,{id:n.id})).initFormCapabilities(n.form);break;case"form_checkbox":(i=new f.FormCheckbox(t,{id:n.id})).initFormCapabilities(n.form);break;case"form_radiobutton":(i=new v.FormRadiobutton(t,{id:n.id})).initFormCapabilities(n.form);break;case"form_combobox":(i=new g.FormCombobox(t,{id:n.id})).initFormCapabilities(n.form);break;case"form_listbox":(i=new m.FormListbox(t,{id:n.id})).initFormCapabilities(n.form);break;case"form_combtext":(i=new y.FormCombtext(t,{id:n.id})).initFormCapabilities(n.form);break;default:throw"Not handled "+e+" class"}return i.applyZoomAndTranslate(this.zoom),!0===n.append&&this.appendToPage(t,i),i.setAttributes(n),i.postInit(),i},n.prototype.createObjectInPage=function(t,e,n){return(n=void 0===n?{}:n).append=!0,this.createObject(t,e,n)},n.prototype.removeObject=function(t){return t.remove(),!0},Object.defineProperty(n.prototype,"zoom",{get:function(){return this._zoom},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"numPages",{get:function(){return this.pages.length},enumerable:!1,configurable:!0}),n.prototype.triggerCustomEvent=function(t,e){t=new CustomEvent(t,{detail:e});window.dispatchEvent(t)},i.PageStack=n}.call(this,_(1))},function(t,e,r){"use strict";!function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.PdfPage=void 0;var i=r(472),t=r(310);function n(t){this._zoomLevel=1,this.zindex_counter=0,this.canvasObjects=[],this.staticTexts=[],this.aroundSpacing=24,this.pixelMagnification=1,this.pageRenderedAtLeastOnce=!1,this._pageCanvas=null,this.currentDpi=-1,this.zoomChanged=!1,this.canvasObjectsChanged=!1,this.zindex_offset=10,this._dimensions={w:0,h:0},Object.assign(this,t);this.domId;var t=this.originalDimensions_inPoints,e=this.pixelMagnification;this.originalDimensions={w:t.w*e,h:t.h*e},this.disablePageDragAndDrop()}n.prototype.disablePageDragAndDrop=function(){this.img[0].setAttribute("draggable","false"),this.img[0].setAttribute("ondragstart","return false"),this.img[0].setAttribute("ondrop","return false"),this.container[0].setAttribute("draggable","false"),this.container[0].setAttribute("ondragstart","return false"),this.container[0].setAttribute("ondrop","return false")},n.prototype.updateDomPageDimensions=function(){this.img.width(this.dimensions.w),this.img.height(this.dimensions.h)},n.prototype.updateDomPageContainer=function(){this.container.css("padding",this.aroundSpacing+"px"),this.pageCanvas.style.width=String(this.dimensions.w)+"px",this.pageCanvas.style.height=String(this.dimensions.h)+"px"},n.prototype.renderPage=function(t){void 0===t&&(t=150),this.pageRenderedAtLeastOnce||(this.pageRenderedAtLeastOnce=!0,this.triggerCustomEvent("pdfPage:firstRender",{pdfPage:this})),this.currentDpi=t,this.pdfRenderer.renderPage(this.pageNumber,t)},Object.defineProperty(n.prototype,"assetsManager",{get:function(){return t.AssetsManager.getInstance()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pageCanvas",{get:function(){return this._pageCanvas||(this._pageCanvas=this.container.find(".page-canvas")[0]),this._pageCanvas},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){var t=o("#workArea")[0],e=t.getBoundingClientRect(),n=this.img[0].getBoundingClientRect(),i=t.scrollLeft,t=t.scrollTop;return{x:Math.round(n.left-e.left+i),y:Math.round(n.top-e.top+t)}},enumerable:!1,configurable:!0}),n.prototype.isOffLimits=function(t,e){var n={x:0,y:0,inside:!0},i=this.dimensions,o=t.x,r=t.x+e.w,a=t.y,t=t.y+e.h;return o>i.w?n.x=1:o<0||r<0?n.x=-1:r>i.w&&(n.x=1),a>i.h?n.y=1:a<0||t<0?n.y=-1:t>i.h&&(n.y=1),0===n.x&&0===n.y||(n.inside=!1),n},n.prototype.removeObject=function(e){var t=this.canvasObjects.findIndex(function(t){return t.id===e.id});e.dom.detach(),this.canvasObjects.splice(t,1),this.triggerCustomEvent("pdf_page:canvas_object:detached",{pdfPage:this,canvasObject:e})},n.prototype.getSafePageRect=function(t){var e=(t=void 0===t?!1:t)?this.originalDimensions:this.dimensions,n=.1,t=(!1===t&&(n/=2*this.zoomLevel),e.w*n),n=e.h*n,i=e.w-2*t,e=e.h-2*n;return{x0:t,x1:i+t,y0:n,y1:e+n,w:i,h:e}},Object.defineProperty(n.prototype,"img",{get:function(){if(!this._img&&(this._img=o("#"+this.domId),this._img.length<=0))throw"[EditPdf] Page#"+this.pageNumber+" not found";return this._img},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"container",{get:function(){if(!this._container&&(this._container=this.img.closest(".editor__page"),this._container.length<=0))throw"[EditPdf] Page#"+this.pageNumber+" container not found";return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvas",{get:function(){if(!this._canvas&&(this._canvas=this.img.closest(".page-canvas"),this._canvas.length<=0))throw"[EditPdf] Page#"+this.pageNumber+" canvas not found";return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"editorPage",{get:function(){return this.img.closest(".editor__page")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"margin",{get:function(){var t=this.img.closest(".editor__page");return{w:parseInt(t.css("margin-left").replace("px","")),h:parseInt(t.css("margin-top").replace("px",""))}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dimensions",{get:function(){return this._dimensions.w||(this._dimensions.w=this.originalDimensions.w),this._dimensions.h||(this._dimensions.h=this.originalDimensions.h),this._dimensions},enumerable:!1,configurable:!0}),n.prototype.addObject=function(t){this.canvasObjects.push(t),t.zindex=this.zindex_autoincrement(),this.canvas.append(t.dom),t.notifyDomAttachment(),this.canvasObjectsChanged=!0},n.prototype.zindex_autoincrement=function(){return this.zindex_counter+=3,this.zindex_offset+(this.zindex_counter-1)},n.prototype.reset_zindex=function(){this.zindex_counter=0},n.prototype.scale=function(t){var e=this.pageDimensionsAt(t);this.updatePageDimensions({w:e.w,h:e.h}),this.aroundSpacing=n.aroundSpacingAt(t),this.zoomLevel=t},n.aroundSpacingAt=function(t){return n.aroundSpacing_x1*t},n.prototype.pageDimensionsAt=function(t){var e=this.originalDimensions;return{w:e.w*t,h:e.h*t}},n.prototype.calcObjectPercentageCoords=function(t){t=t.getCoords();return[t.x/this.dimensions.w,t.y/this.dimensions.h]},n.prototype.updatePageDimensions=function(t){this.dimensions.w=t.w,this.dimensions.h=t.h},n.prototype.addStaticText=function(t){var e=new i.StaticText(this),n={x:t.x,y:this.originalDimensions.h-t.y-12};e._updateInternalCoords(n.x,n.y),e.fontSize=t.fontSize,e.text=t.text,this.staticTexts.push(e),this.canvas.append(e.dom),this.canvasObjectsChanged=!0},n.prototype.calcDpiForCurrentZoomLevel=function(){return 3<this.zoomLevel?400:150},n.prototype.updateDom=function(){var t,e=this;this.canvasObjectsChanged&&(this.canvasObjects.forEach(function(t){return t.updateDom()}),this.staticTexts.forEach(function(t){return t.updateDom()}),this.canvasObjectsChanged=!1),this.zoomChanged&&((t=this.calcDpiForCurrentZoomLevel())>this.currentDpi&&this.renderPage(t),this.updateDomPageDimensions(),this.canvasObjects.forEach(function(t){t.applyZoomAndTranslate(e.zoomLevel),t.updateDom()}),this.staticTexts.forEach(function(t){t.applyZoomAndTranslate(e.zoomLevel),t.updateDom()}),this.zoomChanged=!1)},Object.defineProperty(n.prototype,"zoomLevel",{get:function(){return this._zoomLevel},set:function(t){this._zoomLevel=t,this.zoomChanged=!0},enumerable:!1,configurable:!0}),n.prototype.findObjectById=function(t){for(var e=this.canvasObjects.length,n=0;n<e;n++){var i=this.canvasObjects[n];if(i.id===t)return i}return null},n.prototype.triggerCustomEvent=function(t,e){void 0===e&&(e={});t=new CustomEvent(t,{detail:e});window.dispatchEvent(t)},n.aroundSpacing_x1=24,e.PdfPage=n}.call(this,r(1))},function(t,a,s){"use strict";!function(t){var i,e,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(a,"__esModule",{value:!0}),a.StaticText=void 0,s(252)),o=(e=o.CanvasObject,n(r,e),Object.defineProperty(r.prototype,"type",{get:function(){return"statictext"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasControls",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.getSize=function(){return{w:this.dom.width(),h:this.dom.height()}},r.prototype.setSize=function(t,e){return this},r.prototype.initDom=function(){e.prototype.initDom.call(this),this.textElem=t("<div spellcheck='false'>"),this.dom.append(this.textElem)},r.prototype._updateDom=function(){var t=this.textElem;t.addClass("text-content"),t.css("fontSize",this.fontSize*this.zoomLevel*1.1),t.css("fontFamily",this.fontFamily),t.html(this.text)},r);function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.fontSize=12,t.fontFamily="Times New Roman",t}a.StaticText=o}.call(this,s(1))},function(t,r,a){"use strict";!function(o){var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},e=(Object.defineProperty(r,"__esModule",{value:!0}),r.BasicControls=void 0,a(221)),n=t(a(211)),c=a(290),u=a(288);function i(t){this.enabled=!0,this.isDragging=!1,this.isDraggingEnabled=!1,this.avoidTriggeringClickEvent=!1,this.inFrame=!1,this._padding=10,this.eventHandlers={},this.canvasObj=t,this.inputManager=e.InputManager.getInstance(),this.initControls(),this.init()}i.prototype.init=function(){},i.prototype.fetchControlsDom=function(){return this.canvasObj.dom},Object.defineProperty(i.prototype,"container",{get:function(){return this.canvasObj.dom},enumerable:!1,configurable:!0}),i.prototype.initControls=function(){var e=this,t=(this.controlsDom=this.fetchControlsDom(),this.controlsDom),n=this,i=(this.container.append(t),this.enable(),o(this.getSelectableElem()).click(this.notifyBrowserOfSelection.bind(this)),!1);o(this.getSelectableElem()).mousedown(function(t){i=!0}),o(this.getSelectableElem()).mouseup(function(t){e.avoidTriggeringClickEvent||(i&&n.triggerEvent("fullClick",t),n.triggerEvent("click",t)),i=!1,e.avoidTriggeringClickEvent=!1}),this.initDragging()},i.prototype.canSurfaceRectBeEnabled=function(){return!0},i.prototype.enable=function(){return this.enabled=!0,this.controlsDom.addClass("enabled"),this.enableDragging(),this.canSurfaceRectBeEnabled()&&this.controlsDom.find(".surface-rect").addClass("enabled"),this},i.prototype.disable=function(){return this.enabled=!1,this.canSurfaceRectBeEnabled()&&this.controlsDom.removeClass("enabled"),this.disableDragging(),this.controlsDom.find(".surface-rect").removeClass("enabled"),this},i.prototype.enableDragging=function(){this.isDraggingEnabled=!0,this.changeCursorTo("draggable")},i.prototype.disableDragging=function(){this.isDraggingEnabled=!1,this.changeCursorTo(null)},i.prototype.changeCursorTo=function(e){var n=this;["draggable","dragging"].forEach(function(t){t===e?n.controlsDom.addClass(t):n.controlsDom.removeClass(t)})},i.prototype.notifyBrowserOfSelection=function(){var t;this.canvasObj.isActiveElement||(t=new CustomEvent("canvas_object:selected",{detail:{canvasObject:this.canvasObj}}),window.dispatchEvent(t))},Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding*this.canvasObj.zoomLevel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"domId",{get:function(){return"controls-"+this.canvasObj.id},enumerable:!1,configurable:!0}),i.prototype.getSelectableElem=function(){return this.controlsDom},i.prototype.getDraggableElem=function(){return"#"+this.domId+" .surface-rect"},i.prototype.initDragging=function(){var r=this,a=this,t=".editor__page[data-file='"+this.canvasObj.pdfPage.domId.replace(/^page_/,"").replace(/\_\d+$/,"")+"'][data-page='"+this.canvasObj.pdfPage.pageNumber+"'] .page-canvas",s=null,l=null,e=null;n.default(this.getDraggableElem()).draggable({inertia:!1,modifiers:[n.default.modifiers.restrictRect({restriction:t})],autoScroll:!0,onstart:function(t){r.inFrame=!1,s=new c.Viewport(u.Editor.viewport,t).getPageCoords(!0),(l=r.canvasObj.getCoords()).x/=r.canvasObj.pdfPage.dimensions.w,l.y/=r.canvasObj.pdfPage.dimensions.h,a.notifyBrowserOfSelection(),a.changeCursorTo("dragging"),a.isDragging=!0,a.avoidTriggeringClickEvent=!0,r.triggerEvent("drag:begin")},onmove:function(t){var e,n,i,o;r.inFrame||(r.inFrame=!0,null!==(e=(t=new c.Viewport(u.Editor.viewport,t)).getPageCoords())&&(o=s.x*t.pdfPage.dimensions.w,t=s.y*t.pdfPage.dimensions.h,i=l.x*r.canvasObj.pdfPage.dimensions.w,n=l.y*r.canvasObj.pdfPage.dimensions.h,i=i+(e.x-o),o=n+(e.y-t),a.canvasObj.moveTo(i,o),a.canvasObj.updateDom()),r.inFrame=!1)},onend:function(t){r.inFrame=!1,e&&(window.cancelAnimationFrame(e),e=null),l=s=null,a.changeCursorTo("draggable"),a.isDragging=!1,r.triggerEvent("drag:end")},cursorChecker:function(t,e,n,i){}})},i.prototype.on=function(t,e){t in this.eventHandlers||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e)},i.prototype.triggerEvent=function(t,e){void 0===e&&(e={}),t in this.eventHandlers&&this.eventHandlers[t].forEach(function(t){return t(e)})},r.BasicControls=i}.call(this,a(1))},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.Ellipse=void 0,n(339)),n=(o=n.Shape,r(a,o),Object.defineProperty(a.prototype,"type",{get:function(){return"ellipse"},enumerable:!1,configurable:!0}),a.prototype.setSize=function(t,e){this.setRadius(t/2,e/2)},a.prototype.getRadius=function(){var t=this.size.w,e=this.size.h;return{rx:t/2/this.zoomLevel,ry:e/2/this.zoomLevel}},a.prototype.setRadius=function(t,e){return this._updateInternalDims(2*(t=t<0?0:t),2*(e=e<0?0:e)),this},a.prototype._updateDom=function(){o.prototype._updateDom.call(this);var t,e=this.zoomedStrokeWidth,n=("transparent"===this.stroke()&&(e=0),{w:Math.floor(this.size.w),h:Math.floor(this.size.h)}),i=(t=n.w<2*e||n.h<2*e?.5*(n.w-(e=(n.w<n.h?n.w:n.h)/2)):.5*(n.w-e),.5*(n.h-e));t<=0&&(t=1),i<=0&&(i=1),this.shape.attr({fill:this.fill(),"fill-opacity":this.fillOpacity(),stroke:this.stroke(),"stroke-width":e});this.shape.radius(t,i),this.resizeDrawingSurface(n.w,n.h),this.shape.move(.5*e,.5*e)},a.prototype.clone=function(t){var e=new a(t.pdfPage),t=(e.cloned=!0,e.cloning=!0,e.zoomLevel=t.zoomLevel,t.getAttributes());return e.setAttributes(t),e.cloning=!1,e},a.prototype.setAttributes=function(t){o.prototype.setAttributes.call(this,t=void 0===t?{}:t),"fillColor"in t&&(a.currentDefaultFillColor=t.fillColor),"strokeColor"in t&&(a.currentDefaultStrokeColor=t.strokeColor),"strokeWidth"in t&&(a.currentDefaultStrokeWidth=t.strokeWidth)},a.prototype.getDefaultAttributes=function(){return Object.assign({},o.prototype.getDefaultAttributes.call(this),{size_x1:{w:80,h:80},fillColor:a.currentDefaultFillColor,strokeColor:a.currentDefaultStrokeColor,strokeWidth:a.currentDefaultStrokeWidth})},a.currentDefaultFillColor="#2196F3",a.currentDefaultStrokeColor="transparent",a.currentDefaultStrokeWidth=6,a);function a(){return null!==o&&o.apply(this,arguments)||this}e.Ellipse=n},function(F,t,e){"use strict";e.r(t),e.d(t,"A",function(){return Qe}),e.d(t,"Animator",function(){return L}),e.d(t,"Array",function(){return x}),e.d(t,"Box",function(){return g}),e.d(t,"Circle",function(){return Xe}),e.d(t,"ClipPath",function(){return Ze}),e.d(t,"Color",function(){return f}),e.d(t,"Container",function(){return C}),e.d(t,"Controller",function(){return me}),e.d(t,"Defs",function(){return Zt}),e.d(t,"Dom",function(){return S}),e.d(t,"Ease",function(){return ge}),e.d(t,"Element",function(){return O}),e.d(t,"Ellipse",function(){return oe}),e.d(t,"EventTarget",function(){return Ht}),e.d(t,"ForeignObject",function(){return Ke}),e.d(t,"Fragment",function(){return re}),e.d(t,"G",function(){return Je}),e.d(t,"Gradient",function(){return le}),e.d(t,"Image",function(){return ue}),e.d(t,"Line",function(){return de}),e.d(t,"List",function(){return b}),e.d(t,"Marker",function(){return pe}),e.d(t,"Mask",function(){return $e}),e.d(t,"Matrix",function(){return y}),e.d(t,"Morphable",function(){return A}),e.d(t,"NonMorphable",function(){return Pe}),e.d(t,"Number",function(){return E}),e.d(t,"ObjectBag",function(){return Ae}),e.d(t,"PID",function(){return we}),e.d(t,"Path",function(){return M}),e.d(t,"PathArray",function(){return j}),e.d(t,"Pattern",function(){return ce}),e.d(t,"Point",function(){return m}),e.d(t,"PointArray",function(){return P}),e.d(t,"Polygon",function(){return De}),e.d(t,"Polyline",function(){return Fe}),e.d(t,"Queue",function(){return ze}),e.d(t,"Rect",function(){return Re}),e.d(t,"Runner",function(){return I}),e.d(t,"SVG",function(){return rn}),e.d(t,"Shape",function(){return k}),e.d(t,"Spring",function(){return be}),e.d(t,"Stop",function(){return tn}),e.d(t,"Style",function(){return en}),e.d(t,"Svg",function(){return qe}),e.d(t,"Symbol",function(){return Ge}),e.d(t,"Text",function(){return D}),e.d(t,"TextPath",function(){return nn}),e.d(t,"Timeline",function(){return Ne}),e.d(t,"TransformBag",function(){return Te}),e.d(t,"Tspan",function(){return Ye}),e.d(t,"Use",function(){return on}),e.d(t,"adopt",function(){return l}),e.d(t,"assignNewId",function(){return ft}),e.d(t,"clearEvents",function(){return Bt}),e.d(t,"create",function(){return lt}),e.d(t,"defaults",function(){return Gt}),e.d(t,"dispatch",function(){return Ut}),e.d(t,"easing",function(){return fe}),e.d(t,"eid",function(){return ht}),e.d(t,"extend",function(){return d}),e.d(t,"find",function(){return w}),e.d(t,"getClass",function(){return dt}),e.d(t,"getEventTarget",function(){return zt}),e.d(t,"getEvents",function(){return Rt}),e.d(t,"getWindow",function(){return rt}),e.d(t,"makeInstance",function(){return u}),e.d(t,"makeMorphable",function(){return Ie}),e.d(t,"mockAdopt",function(){return ut}),e.d(t,"namespaces",function(){return $}),e.d(t,"nodeOrNew",function(){return r}),e.d(t,"off",function(){return _}),e.d(t,"on",function(){return Nt}),e.d(t,"parser",function(){return v}),e.d(t,"regex",function(){return kt}),e.d(t,"register",function(){return c}),e.d(t,"registerMorphableType",function(){return Le}),e.d(t,"registerWindow",function(){return tt}),e.d(t,"restoreWindow",function(){return it}),e.d(t,"root",function(){return st}),e.d(t,"saveWindow",function(){return nt}),e.d(t,"utils",function(){return Y}),e.d(t,"windowEvents",function(){return Ft}),e.d(t,"withWindow",function(){return ot}),e.d(t,"wrapWithAttrCheck",function(){return p});const R={},z=[];function o(t,e){if(Array.isArray(t))for(const n of t)o(n,e);else if("object"==typeof t)for(const i in t)o(i,t[i]);else B(Object.getOwnPropertyNames(e)),R[t]=Object.assign(R[t]||{},e)}function n(t){return R[t]||{}}function B(t){z.push(...t)}function N(t,e){let n;var i=t.length,o=[];for(n=0;n<i;n++)o.push(e(t[n]));return o}function U(t,e){let n;var i=t.length,o=[];for(n=0;n<i;n++)e(t[n])&&o.push(t[n]);return o}function H(t){return t%360*Math.PI/180}function V(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function W(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})}function q(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t,e,n,i){return null!=e&&null!=n||(i=i||t.bbox(),null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)),{width:e,height:n}}function G(t,e){var n=t.origin;let i=null!=t.ox?t.ox:null!=t.originX?t.originX:"center",o=null!=t.oy?t.oy:null!=t.originY?t.originY:"center";null!=n&&([i,o]=Array.isArray(n)?n:"object"==typeof n?[n.x,n.y]:[n,n]);var r,a,s,t="string"==typeof i,n="string"==typeof o;return(t||n)&&({height:e,width:r,x:a,y:s}=e.bbox(),t&&(i=i.includes("left")?a:i.includes("right")?a+r:a+r/2),n)&&(o=o.includes("top")?s:o.includes("bottom")?s+e:s+e/2),[i,o]}var Y={__proto__:null,map:N,filter:U,radians:H,degrees:function(t){return 180*t/Math.PI%360},camelCase:V,unCamelCase:W,capitalize:q,proportionalSize:a,getOrigin:G};const X="http://www.w3.org/2000/svg",Z="http://www.w3.org/1999/xhtml",K="http://www.w3.org/2000/xmlns/",J="http://www.w3.org/1999/xlink",Q="http://svgjs.dev/svgjs";var $={__proto__:null,svg:X,html:Z,xmlns:K,xlink:J,svgjs:Q};const s={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};function tt(t=null,e=null){s.window=t,s.document=e}const et={};function nt(){et.window=s.window,et.document=s.document}function it(){s.window=et.window,s.document=et.document}function ot(t,e){nt(),tt(t,t.document),e(t,t.document),it()}function rt(){return s.window}class at{}const i={},st="___SYMBOL___ROOT___";function lt(t,e=X){return s.document.createElementNS(e,t)}function u(t,e=!1){if(!(t instanceof at)){if("object"==typeof t)return ct(t);if(null==t)return new i[st];if("string"==typeof t&&"<"!==t.charAt(0))return ct(s.document.querySelector(t));e=e?s.document.createElement("div"):lt("svg");e.innerHTML=t,t=ct(e.firstChild),e.removeChild(e.firstChild)}return t}function r(t,e){return e instanceof s.window.Node?e:lt(t)}function l(t){if(!t)return null;if(t.instance instanceof at)return t.instance;if("#document-fragment"===t.nodeName)return new i.Fragment(t);let e=q(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":i[e]||(e="Dom"),new i[e](t)}let ct=l;function ut(t=l){ct=t}function c(t,e=t.name,n=!1){return i[e]=t,n&&(i[st]=t),B(Object.getOwnPropertyNames(t.prototype)),t}function dt(t){return i[t]}let pt=1e3;function ht(t){return"Svgjs"+q(t)+pt++}function ft(e){for(let t=e.children.length-1;0<=t;t--)ft(e.children[t]);return e.id&&(e.id=ht(e.nodeName)),e}function d(t,e){let n,i;for(t=Array.isArray(t)?t:[t],i=t.length-1;0<=i;i--)for(n in e)t[i].prototype[n]=e[n]}function p(n){return function(...t){var e=t[t.length-1];return!e||e.constructor!==Object||e instanceof Array?n.apply(this,t):n.apply(this,t.slice(0,-1)).attr(e)}}o("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position();return this.parent().add(this.remove(),t+1),this},backward:function(){var t=this.position();return this.parent().add(this.remove(),t?t-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(t){(t=u(t)).remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){(t=u(t)).remove();var e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=u(t)).before(this),this},insertAfter:function(t){return(t=u(t)).after(this),this}});const vt=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,gt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,mt=/rgb\((\d+),(\d+),(\d+)\)/,yt=/(#[a-z_][a-z0-9\-_]*)/i,bt=/\)\s*,?\s*/,wt=/\s/g,_t=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,xt=/^rgb\(/,Et=/^(\s+)?$/,St=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ot=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,h=/[\s,]+/,Ct=/[MLHVCSQTAZ]/i;var kt={__proto__:null,numberAndUnit:vt,hex:gt,rgb:mt,reference:yt,transforms:bt,whitespace:wt,isHex:_t,isRgb:xt,isBlank:Et,isNumber:St,isImage:Ot,delimiter:h,isPathLetter:Ct};function Pt(t){t=Math.round(t),t=Math.max(0,Math.min(255,t)).toString(16);return 1===t.length?"0"+t:t}function Tt(e,n){for(let t=n.length;t--;)if(null==e[n[t]])return;return 1}function jt(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}o("Dom",{classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(h)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){var e;return this.hasClass(t)||((e=this.classes()).push(t),this.attr("class",e.join(" "))),this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter(function(t){return t!==e}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}}),o("Dom",{css:function(t,e){const n={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter(function(t){return!!t.length}).forEach(function(t){t=t.split(/\s*:\s*/);n[t[0]]=t[1]}),n;if(arguments.length<2){if(Array.isArray(t)){for(const o of t){var i=V(o);n[i]=this.node.style[i]}return n}if("string"==typeof t)return this.node.style[V(t)];if("object"==typeof t)for(const r in t)this.node.style[V(r)]=null==t[r]||Et.test(t[r])?"":t[r]}return 2===arguments.length&&(this.node.style[V(t)]=null==e||Et.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),o("Dom",{data:function(e,t,n){if(null==e)return this.data(N(U(this.node.attributes,t=>0===t.nodeName.indexOf("data-")),t=>t.nodeName.slice(5)));if(e instanceof Array){var i={};for(const o of e)i[o]=this.data(o);return i}if("object"==typeof e)for(t in e)this.data(t,e[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+e))}catch(t){return this.attr("data-"+e)}else this.attr("data-"+e,null===t?null:!0===n||"string"==typeof t||"number"==typeof t?t:JSON.stringify(t));return this}}),o("Dom",{remember:function(t,e){if("object"==typeof t)for(const n in t)this.remember(n,t[n]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(let t=arguments.length-1;0<=t;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});class f{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof f||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}static random(t="vibrant",e,n){var i,o,r,{random:a,round:s,sin:l,PI:c}=Math;if("vibrant"===t)return o=24*a()+57,r=38*a()+45,i=360*a(),new f(o,r,i,"lch");if("sine"===t)return o=s(80*l(2*c*(e=null==e?a():e)/.5+.01)+150),r=s(50*l(2*c*e/.5+4.6)+200),i=s(100*l(2*c*e/.5+2.3)+150),new f(o,r,i);if("pastel"===t)return s=8*a()+86,l=17*a()+9,c=360*a(),new f(s,l,c,"lch");if("dark"===t)return e=10+10*a(),o=50*a()+86,r=360*a(),new f(e,o,r,"lch");if("rgb"===t)return i=255*a(),s=255*a(),l=255*a(),new f(i,s,l);if("lab"===t)return c=100*a(),e=256*a()-128,o=256*a()-128,new f(c,e,o,"lab");if("grey"===t)return r=255*a(),new f(r,r,r);throw new Error("Unsupported random color mode")}static test(t){return"string"==typeof t&&(_t.test(t)||xt.test(t))}cmyk(){var{_a:t,_b:e,_c:n}=this.rgb(),[t,e,n]=[t,e,n].map(t=>t/255),i=Math.min(1-t,1-e,1-n);return 1===i?new f(0,0,0,1,"cmyk"):(t=(1-t-i)/(1-i),e=(1-e-i)/(1-i),n=(1-n-i)/(1-i),new f(t,e,n,i,"cmyk"))}hsl(){var{_a:t,_b:e,_c:n}=this.rgb(),[t,e,n]=[t,e,n].map(t=>t/255),i=Math.max(t,e,n),o=Math.min(t,e,n),r=(i+o)/2,a=i===o,s=i-o,o=a?0:.5<r?s/(2-i-o):s/(i+o),a=a?0:i===t?((e-n)/s+(e<n?6:0))/6:i===e?((n-t)/s+2)/6:i===n?((t-e)/s+4)/6:0;return new f(360*a,100*o,100*r,"hsl")}init(t=0,e=0,n=0,i=0,o="rgb"){if(t=t||0,this.space)for(const c in this.space)delete this[this.space[c]];if("number"==typeof t)o="string"==typeof i?i:o,i="string"==typeof i?0:i,Object.assign(this,{_a:t,_b:e,_c:n,_d:i,space:o});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){n=e,(i=Tt(i=t,"rgb")?{_a:i.r,_b:i.g,_c:i.b,_d:0,space:"rgb"}:Tt(i,"xyz")?{_a:i.x,_b:i.y,_c:i.z,_d:0,space:"xyz"}:Tt(i,"hsl")?{_a:i.h,_b:i.s,_c:i.l,_d:0,space:"hsl"}:Tt(i,"lab")?{_a:i.l,_b:i.a,_c:i.b,_d:0,space:"lab"}:Tt(i,"lch")?{_a:i.l,_b:i.c,_c:i.h,_d:0,space:"lch"}:Tt(i,"cmyk")?{_a:i.c,_b:i.m,_c:i.y,_d:i.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"}).space=n||i.space;o=i;Object.assign(this,o)}else if("string"==typeof t)if(xt.test(t)){e=t.replace(wt,"");const[r,a,s]=mt.exec(e).slice(1,4).map(t=>parseInt(t));Object.assign(this,{_a:r,_b:a,_c:s,_d:0,space:"rgb"})}else{if(!_t.test(t))throw Error("Unsupported string format, can't construct Color");{const[,r,a,s]=gt.exec(4===(n=t).length?["#",n.substring(1,2),n.substring(1,2),n.substring(2,3),n.substring(2,3),n.substring(3,4),n.substring(3,4)].join(""):n).map(t=>parseInt(t,16));Object.assign(this,{_a:r,_b:a,_c:s,_d:0,space:"rgb"})}}const{_a:r,_b:a,_c:s,_d:l}=this;i="rgb"===this.space?{r:r,g:a,b:s}:"xyz"===this.space?{x:r,y:a,z:s}:"hsl"===this.space?{h:r,s:a,l:s}:"lab"===this.space?{l:r,a:a,b:s}:"lch"===this.space?{l:r,c:a,h:s}:"cmyk"===this.space?{c:r,m:a,y:s,k:l}:{};Object.assign(this,i)}lab(){var{x:t,y:e,z:n}=this.xyz(),i=116*e-16,t=500*(t-e),e=200*(e-n);return new f(i,t,e,"lab")}lch(){var{l:t,a:e,b:n}=this.lab(),i=Math.sqrt(e**2+n**2);let o=180*Math.atan2(n,e)/Math.PI;return o<0&&(o=360-(o*=-1)),new f(t,i,o,"lch")}rgb(){if("rgb"===this.space)return this;if("lab"===(a=this.space)||"xyz"===a||"lch"===a){let{x:i,y:o,z:r}=this;if("lab"===this.space||"lch"===this.space){let{l:t,a:e,b:n}=this;"lch"===this.space&&({c:a,h:l}=this,s=Math.PI/180,e=a*Math.cos(s*l),n=a*Math.sin(s*l));var a=(t+16)/116,s=e/500+a,l=a-n/200;i=.95047*(.008856<s**3?s**3:(s-16/116)/7.787),o=.008856<a**3?a**3:(a-16/116)/7.787,r=1.08883*(.008856<l**3?l**3:(l-16/116)/7.787)}var s=3.2406*i+-1.5372*o+-.4986*r,a=-.9689*i+1.8758*o+.0415*r,l=.0557*i+-.204*o+1.057*r,c=Math.pow,u=.0031308,s=u<s?1.055*c(s,1/2.4)-.055:12.92*s,a=u<a?1.055*c(a,1/2.4)-.055:12.92*a,u=u<l?1.055*c(l,1/2.4)-.055:12.92*l;return new f(255*s,255*a,255*u)}var a;if("hsl"!==this.space)return"cmyk"===this.space?({c,m:l,y:s,k:a}=this,u=255*(1-Math.min(1,c*(1-a)+a)),c=255*(1-Math.min(1,l*(1-a)+a)),l=255*(1-Math.min(1,s*(1-a)+a)),new f(u,c,l)):this;{let{h:t,s:e,l:n}=this;return t/=360,e/=100,n/=100,0==e?(n*=255,new f(n,n,n)):(s=n<.5?n*(1+e):n+e-n*e,u=255*jt(a=2*n-s,s,t+1/3),c=255*jt(a,s,t),l=255*jt(a,s,t-1/3),new f(u,c,l))}}toArray(){var{_a:t,_b:e,_c:n,_d:i,space:o}=this;return[t,e,n,i,o]}toHex(){var[t,e,n]=this._clamped().map(Pt);return"#"+t+e+n}toRgb(){var[t,e,n]=this._clamped();return`rgb(${t},${e},${n})`}toString(){return this.toHex()}xyz(){var{_a:t,_b:e,_c:n}=this.rgb(),[t,e,n]=[t,e,n].map(t=>t/255),t=.04045<t?Math.pow((t+.055)/1.055,2.4):t/12.92,e=.04045<e?Math.pow((e+.055)/1.055,2.4):e/12.92,n=.04045<n?Math.pow((n+.055)/1.055,2.4):n/12.92,i=(.4124*t+.3576*e+.1805*n)/.95047,o=.2126*t+.7152*e+.0722*n,t=(.0193*t+.1192*e+.9505*n)/1.08883,e=.008856<i?Math.pow(i,1/3):7.787*i+16/116,n=.008856<o?Math.pow(o,1/3):7.787*o+16/116,i=.008856<t?Math.pow(t,1/3):7.787*t+16/116;return new f(e,n,i,"xyz")}_clamped(){var{_a:t,_b:e,_c:n}=this.rgb();const{max:i,min:o,round:r}=Math;return[t,e,n].map(t=>i(0,o(r(t),255)))}}class m{constructor(...t){this.init(...t)}clone(){return new m(this)}init(t,e){const n=0,i=0;t=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==t.x?n:t.x,this.y=null==t.y?i:t.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){y.isMatrixLike(t)||(t=new y(t));var{x:e,y:n}=this;return this.x=t.a*e+t.c*n+t.e,this.y=t.b*e+t.d*n+t.f,this}}function At(t,e,n){return Math.abs(e-t)<(n||1e-6)}class y{constructor(...t){this.init(...t)}static formatTransforms(t){var e="both"===t.flip||!0===t.flip,n=t.flip&&(e||"x"===t.flip)?-1:1,e=t.flip&&(e||"y"===t.flip)?-1:1,i=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,n=t.scale&&t.scale.length?t.scale[0]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleX)?t.scaleX*n:n,e=t.scale&&t.scale.length?t.scale[1]*e:isFinite(t.scale)?t.scale*e:isFinite(t.scaleY)?t.scaleY*e:e,r=t.shear||0,a=t.rotate||t.theta||0,s=new m(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),l=s.x,s=s.y,c=new m(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),u=c.x,c=c.y,d=new m(t.translate||t.tx||t.translateX,t.ty||t.translateY),p=d.x,d=d.y,t=new m(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:n,scaleY:e,skewX:i,skewY:o,shear:r,theta:a,rx:t.x,ry:t.y,tx:p,ty:d,ox:l,oy:s,px:u,py:c}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}static matrixMultiply(t,e,n){var i=t.a*e.a+t.c*e.b,o=t.b*e.a+t.d*e.b,r=t.a*e.c+t.c*e.d,a=t.b*e.c+t.d*e.d,s=t.e+t.a*e.e+t.c*e.f,t=t.f+t.b*e.e+t.d*e.f;return n.a=i,n.b=o,n.c=r,n.d=a,n.e=s,n.f=t,n}around(t,e,n){return this.clone().aroundO(t,e,n)}aroundO(t,e,n){t=t||0,e=e||0;return this.translateO(-t,-e).lmultiplyO(n).translateO(t,e)}clone(){return new y(this)}decompose(t=0,e=0){var n=this.a,i=this.b,o=this.c,r=this.d,a=this.e,s=this.f,l=n*r-i*o,c=0<l?1:-1,u=c*Math.sqrt(n*n+i*i),c=Math.atan2(c*i,c*n),d=180/Math.PI*c,p=Math.cos(c),c=Math.sin(c),l=(n*o+i*r)/l,o=o*u/(l*n-i)||r*u/(l*i+n);return{scaleX:u,scaleY:o,shear:l,rotate:d,translateX:a-t+t*p*u+e*(l*p*u-c*o),translateY:s-e+t*c*u+e*(l*c*u+p*o),originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){return t===this||(t=new y(t),At(this.a,t.a)&&At(this.b,t.b)&&At(this.c,t.c)&&At(this.d,t.d)&&At(this.e,t.e)&&At(this.f,t.f))}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}init(t){var e=y.fromArray([1,0,0,1,0,0]);return t=t instanceof O?t.matrixify():"string"==typeof t?y.fromArray(t.split(h).map(parseFloat)):Array.isArray(t)?y.fromArray(t):"object"==typeof t&&y.isMatrixLike(t)?t:"object"==typeof t?(new y).transform(t):6===arguments.length?y.fromArray([].slice.call(arguments)):e,this.a=(null!=t.a?t:e).a,this.b=(null!=t.b?t:e).b,this.c=(null!=t.c?t:e).c,this.d=(null!=t.d?t:e).d,this.e=(null!=t.e?t:e).e,this.f=(null!=t.f?t:e).f,this}inverse(){return this.clone().inverseO()}inverseO(){var t,e=this.a,n=this.b,i=this.c,o=this.d,r=this.e,a=this.f,s=e*o-n*i;if(s)return t=-((o=o/s)*r+(i=-i/s)*a),e=-((n=-n/s)*r+(r=e/s)*a),this.a=o,this.b=n,this.c=i,this.d=r,this.e=t,this.f=e,this;throw new Error("Cannot invert "+this)}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){t=t instanceof y?t:new y(t);return y.matrixMultiply(t,this,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){t=t instanceof y?t:new y(t);return y.matrixMultiply(this,t,this)}rotate(t,e,n){return this.clone().rotateO(t,e,n)}rotateO(t,e=0,n=0){t=H(t);var i=Math.cos(t),t=Math.sin(t),{a:o,b:r,c:a,d:s,e:l,f:c}=this;return this.a=o*i-r*t,this.b=r*i+o*t,this.c=a*i-s*t,this.d=s*i+a*t,this.e=l*i-c*t+n*t-e*i+e,this.f=c*i+l*t-e*t-n*i+n,this}scale(t,e,n,i){return this.clone().scaleO(...arguments)}scaleO(t,e=t,n=0,i=0){3===arguments.length&&(i=n,n=e,e=t);var{a:o,b:r,c:a,d:s,e:l,f:c}=this;return this.a=o*t,this.b=r*e,this.c=a*t,this.d=s*e,this.e=l*t-n*t+n,this.f=c*e-i*e+i,this}shear(t,e,n){return this.clone().shearO(t,e,n)}shearO(t,e=0,n=0){var{a:i,b:o,c:r,d:a,e:s,f:l}=this;return this.a=i+o*t,this.c=r+a*t,this.e=s+l*t-n*t,this}skew(t,e,n,i){return this.clone().skewO(...arguments)}skewO(t,e=t,n=0,i=0){3===arguments.length&&(i=n,n=e,e=t),t=H(t),e=H(e);var o=Math.tan(t),e=Math.tan(e),{a:r,b:a,c:s,d:l,e:c,f:u}=this;return this.a=r+a*o,this.b=a+r*e,this.c=s+l*o,this.d=l+s*e,this.e=c+u*o-i*o,this.f=u+c*e-n*e,this}skewX(t,e,n){return this.skew(t,0,e,n)}skewY(t,e,n){return this.skew(0,t,e,n)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){var e,n,i;return y.isMatrixLike(t)?new y(t).multiplyO(this):(t=y.formatTransforms(t),{x:i,y:n}=new m(t.ox,t.oy).transform(this),e=(new y).translateO(t.rx,t.ry).lmultiplyO(this).translateO(-i,-n).scaleO(t.scaleX,t.scaleY).skewO(t.skewX,t.skewY).shearO(t.shear).rotateO(t.theta).translateO(i,n),(isFinite(t.px)||isFinite(t.py))&&(i=new m(i,n).transform(e),n=isFinite(t.px)?t.px-i.x:0,i=isFinite(t.py)?t.py-i.y:0,e.translateO(n,i)),e.translateO(t.tx,t.ty),e)}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function v(){var t,e;return v.nodes||((e=u().size(2,0)).node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),e.attr("focusable","false"),e.attr("aria-hidden","true"),t=e.path().node,v.nodes={svg:e,path:t}),v.nodes.svg.node.parentNode||(e=s.document.body||s.document.documentElement,v.nodes.svg.addTo(e)),v.nodes}function Mt(t){return!(t.width||t.height||t.x||t.y)}c(y,"Matrix");class g{constructor(...t){this.init(...t)}addOffset(){return this.x+=s.window.pageXOffset,this.y+=s.window.pageYOffset,new g(this)}init(t){return t="string"==typeof t?t.split(h).map(parseFloat):Array.isArray(t)?t:"object"==typeof t?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return Mt(this)}merge(t){var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width)-e,t=Math.max(this.y+this.height,t.y+t.height)-n;return new g(e,n,i,t)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof y||(e=new y(e));let n=1/0,i=-1/0,o=1/0,r=-1/0;return[new m(this.x,this.y),new m(this.x2,this.y),new m(this.x,this.y2),new m(this.x2,this.y2)].forEach(function(t){t=t.transform(e),n=Math.min(n,t.x),i=Math.max(i,t.x),o=Math.min(o,t.y),r=Math.max(r,t.y)}),new g(n,o,i-n,r-o)}}function Lt(e,t,n){let i;try{if(Mt(i=t(e.node))&&(o=e.node)!==s.document&&!(s.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===s.document}).call(s.document.documentElement,o))throw new Error("Element not in the dom")}catch(t){i=n(e)}var o;return i}o({viewbox:{viewbox(t,e,n,i){return null==t?new g(this.attr("viewBox")):this.attr("viewBox",new g(t,e,n,i))},zoom(t,e){let{width:n,height:i}=this.attr(["width","height"]);if((n||i)&&"string"!=typeof n&&"string"!=typeof i||(n=this.node.clientWidth,i=this.node.clientHeight),!n||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");var o=this.viewbox(),r=n/o.width,a=i/o.height,s=Math.min(r,a);if(null==t)return s;let l=s/t;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),e=e||new m(n/2/r+o.x,i/2/a+o.y);s=new g(o).transform(new y({scale:l,origin:e}));return this.viewbox(s)}}}),c(g,"Box");class b extends Array{constructor(t=[],...e){if(super(t,...e),"number"==typeof t)return this;this.length=0,this.push(...t)}}d([b],{each(i,...e){return"function"==typeof i?this.map((t,e,n)=>i.call(t,t,e,n)):this.map(t=>t[i](...e))},toArray(){return Array.prototype.concat.apply([],this)}});const It=["toArray","constructor","each"];function w(t,e){return new b(N((e||s.document).querySelectorAll(t),l))}b.extend=function(t){t=t.reduce((t,e)=>(It.includes(e)||"_"!==e[0]&&(t[e]=function(...t){return this.each(e,...t)}),t),{}),d([b],t)};let Dt=0;const Ft={};function Rt(t){let e=t.getEventHolder();return(e=e===s.window?Ft:e).events||(e.events={}),e.events}function zt(t){return t.getEventTarget()}function Bt(t){let e=t.getEventHolder();(e=e===s.window?Ft:e).events&&(e.events={})}function Nt(t,e,n,i,o){const r=n.bind(i||t);i=u(t);const a=Rt(i),s=zt(i);e=Array.isArray(e)?e:e.split(h),n._svgjsListenerId||(n._svgjsListenerId=++Dt),e.forEach(function(t){var e=t.split(".")[0],t=t.split(".")[1]||"*";a[e]=a[e]||{},a[e][t]=a[e][t]||{},a[e][t][n._svgjsListenerId]=r,s.addEventListener(e,r,o||!1)})}function _(t,e,r,a){const s=u(t),l=Rt(s),c=zt(s);"function"==typeof r&&!(r=r._svgjsListenerId)||(e=Array.isArray(e)?e:(e||"").split(h)).forEach(function(t){var e=t&&t.split(".")[0],n=t&&t.split(".")[1];let i,o;if(r)l[e]&&l[e][n||"*"]&&(c.removeEventListener(e,l[e][n||"*"][r],a||!1),delete l[e][n||"*"][r]);else if(e&&n){if(l[e]&&l[e][n]){for(o in l[e][n])_(c,[e,n].join("."),o);delete l[e][n]}}else if(n)for(t in l)for(i in l[t])n===i&&_(c,[t,n].join("."));else if(e){if(l[e]){for(i in l[e])_(c,[e,i].join("."));delete l[e]}}else{for(t in l)_(c,t);Bt(s)}})}function Ut(t,e,n,i){t=zt(t);return e instanceof s.window.Event||(e=new s.window.CustomEvent(e,{detail:n,cancelable:!0,...i})),t.dispatchEvent(e),e}class Ht extends at{addEventListener(){}dispatch(t,e,n){return Ut(this,t,e,n)}dispatchEvent(t){var e=this.getEventHolder().events;if(!e)return!0;var n=e[t.type];for(const i in n)for(const o in n[i])n[i][o](t);return!t.defaultPrevented}fire(t,e,n){return this.dispatch(t,e,n),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e){return _(this,t,e),this}on(t,e,n,i){return Nt(this,t,e,n,i),this}removeEventListener(){}}function Vt(){}c(Ht,"EventTarget");const Wt={duration:400,ease:">",delay:0},qt={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};var Gt={__proto__:null,noop:Vt,timeline:Wt,attrs:qt};class x extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return"number"!=typeof t&&(this.length=0,this.push(...this.parse(t))),this}parse(t=[]){return t instanceof Array?t:t.trim().split(h).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){var t=[];return t.push(...this),t}}class E{constructor(...t){this.init(...t)}convert(t){return new E(this.value,t)}divide(t){return t=new E(t),new E(this/t,this.unit||t.unit)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(vt))&&(this.value=parseFloat(e[1]),"%"===e[5]?this.value/=100:"s"===e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof E&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new E(t),new E(this-t,this.unit||t.unit)}plus(t){return t=new E(t),new E(this+t,this.unit||t.unit)}times(t){return t=new E(t),new E(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const Yt=[];class S extends Ht{constructor(t,e){super(),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return(t=u(t)).removeNamespace&&this.node instanceof s.window.SVGElement&&t.removeNamespace(),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t,e){return u(t).put(this,e)}children(){return new b(N(this.node.children,l))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0){return this.writeDataToDom(),new this.constructor(ft(this.node.cloneNode(t)))}each(t,e){var n=this.children();let i,o;for(i=0,o=n.length;i<o;i++)t.apply(n[i],[i,n]),e&&n[i].each(t,e);return this}element(t,e){return this.put(new S(lt(t),e))}first(){return l(this.node.firstChild)}get(t){return l(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return 0<=this.index(t)}html(t,e){return this.xml(t,e,Z)}id(t){return void 0!==t||this.node.id||(this.node.id=ht(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return l(this.node.lastChild)}matches(t){var e=this.node,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return n&&n.call(e,t)}parent(t){let e=this;if(!e.node.parentNode)return null;if(e=l(e.node.parentNode),t)do{if("string"==typeof t?e.matches(t):e instanceof t)return e}while(e=l(e.node.parentNode));return e}put(t,e){return t=u(t),this.add(t,e),t}putIn(t,e){return u(t).add(this,e)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=u(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e=null){var n=10**t,i=this.attr(e);for(const o in i)"number"==typeof i[o]&&(i[o]=Math.round(i[o]*n)/n);return this.attr(i),this}svg(t,e){return this.xml(t,e,X)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){var e,n=this.parent();return n?(e=n.index(this),n.put(t,e).put(this)):this.addTo(t)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(n,e,t){if("boolean"==typeof n&&(t=e,e=n,n=null),null==n||"function"==typeof n){e=null==e||e,this.writeDataToDom();let t=this;if(null!=n){if(t=l(t.node.cloneNode(!0)),e){var i=n(t);if(t=i||t,!1===i)return""}t.each(function(){var t=n(this),e=t||this;!1===t?this.remove():t&&this!==e&&this.replace(e)},!0)}return e?t.node.outerHTML:t.node.innerHTML}e=null!=e&&e;var o=lt("wrapper",t),r=s.document.createDocumentFragment();o.innerHTML=n;for(let t=o.children.length;t--;)r.appendChild(o.firstElementChild);i=this.parent();return e?this.replace(r)&&i:this.add(r)}}d(S,{attr:function(n,t,e){if(null==n){n={};for(const i of t=this.node.attributes)n[i.nodeName]=St.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return n}if(n instanceof Array)return n.reduce((t,e)=>(t[e]=this.attr(e),t),{});if("object"==typeof n&&n.constructor===Object)for(t in n)this.attr(t,n[t]);else if(null===t)this.node.removeAttribute(n);else{if(null==t)return null==(t=this.node.getAttribute(n))?qt[n]:St.test(t)?parseFloat(t):t;"number"==typeof(t=Yt.reduce((t,e)=>e(n,t,this),t))?t=new E(t):f.isColor(t)?t=new f(t):t.constructor===Array&&(t=new x(t)),"leading"===n?this.leading&&this.leading(t):"string"==typeof e?this.node.setAttributeNS(e,n,t.toString()):this.node.setAttribute(n,t.toString()),!this.rebuild||"font-size"!==n&&"x"!==n||this.rebuild()}return this},find:function(t){return w(t,this.node)},findOne:function(t){return l(this.node.querySelector(t))}}),c(S,"Dom");class O extends S{constructor(t,e){super(t,e),this.dom={},this.node.instance=this,t.hasAttribute("svgjs:data")&&this.setData(JSON.parse(t.getAttribute("svgjs:data"))||{})}center(t,e){return this.cx(t).cy(e)}cx(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){var t=this.root();return t&&t.defs()}dmove(t,e){return this.dx(t).dy(e)}dx(t=0){return this.x(new E(t).plus(this.x()))}dy(t=0){return this.y(new E(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,e){return this.x(t).y(e)}parents(t=this.root()){t=u(t);var e=new b;let n=this;for(;(n=n.parent())&&n.node!==s.document&&"#document-fragment"!==n.nodeName&&(e.push(n),n.node!==t.node););return e}reference(t){return(t=(t=this.attr(t))&&(t+"").match(yt))?u(t[1]):null}root(){var t=this.parent(dt(st));return t&&t.root()}setData(t){return this.dom=t,this}size(t,e){t=a(this,t,e);return this.width(new E(t.width)).height(new E(t.height))}width(t){return this.attr("width",t)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}d(O,{bbox:function(){var t=Lt(this,t=>t.getBBox(),e=>{try{var t=e.clone().addTo(v().svg).show(),n=t.node.getBBox();return t.remove(),n}catch(t){throw new Error(`Getting bbox of element "${e.node.nodeName}" is not possible: `+t.toString())}});return new g(t)},rbox:function(t){var e=Lt(this,t=>t.getBoundingClientRect(),t=>{throw new Error(`Getting rbox of element "${t.node.nodeName}" is not possible`)}),e=new g(e);return t?e.transform(t.screenCTM().inverseO()):e.addOffset()},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},point:function(t,e){return new m(t,e).transform(this.screenCTM().inverse())},ctm:function(){return new y(this.node.getCTM())},screenCTM:function(){var t,e;return"function"!=typeof this.isRoot||this.isRoot()?new y(this.node.getScreenCTM()):(e=(t=this.rect(1,1)).node.getScreenCTM(),t.remove(),new y(e))}}),c(O,"Element");const Xt={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};["fill","stroke"].forEach(function(e){var t={};let n;t[e]=function(t){if(void 0===t)return this.attr(e);if("string"==typeof t||t instanceof f||f.isRgb(t)||t instanceof O)this.attr(e,t);else for(n=Xt[e].length-1;0<=n;n--)null!=t[Xt[e][n]]&&this.attr(Xt.prefix(e,Xt[e][n]),t[Xt[e][n]]);return this},o(["Element","Runner"],t)}),o(["Element","Runner"],{matrix:function(t,e,n,i,o,r){return null==t?new y(this):this.attr("transform",new y(t,e,n,i,o,r))},rotate:function(t,e,n){return this.transform({rotate:t,ox:e,oy:n},!0)},skew:function(t,e,n,i){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:n},!0):this.transform({skew:[t,e],ox:n,oy:i},!0)},shear:function(t,e,n){return this.transform({shear:t,ox:e,oy:n},!0)},scale:function(t,e,n,i){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:n},!0):this.transform({scale:[t,e],ox:n,oy:i},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t="both",e="center"){return-1==="xybothtrue".indexOf(t)&&(e=t,t="both"),this.transform({flip:t,origin:e},!0)},opacity:function(t){return this.attr("opacity",t)}}),o("radius",{radius:function(t,e=t){return"radialGradient"===(this._element||this).type?this.attr("r",new E(t)):this.rx(t).ry(e)}}),o("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new m(this.node.getPointAtLength(t))}}),o(["Element","Runner"],{font:function(t,e){if("object"!=typeof t)return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e);for(e in t)this.font(e,t[e]);return this}}),o("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce(function(t,e){return t[e]=function(t){return null===t?this.off(e):this.on(e,t),this},t},{})),o("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(bt).slice(0,-1).map(function(t){t=t.trim().split("(");return[t[0],t[1].split(h).map(function(t){return parseFloat(t)})]}).reverse().reduce(function(t,e){return"matrix"===e[0]?t.lmultiply(y.fromArray(e[1])):t[e[0]].apply(t,e[1])},new y)},toParent:function(t,e){var n,i;return this!==t&&(n=this.screenCTM(),i=t.screenCTM().inverse(),this.addTo(t,e).untransform().transform(i.multiply(n))),this},toRoot:function(t){return this.toParent(this.root(),t)},transform:function(t,e){if(null==t||"string"==typeof t)return n=new y(this).decompose(),null==t?n:n[t];y.isMatrixLike(t)||(t={...t,origin:G(t,this)});var n=!0===e?this:e||!1,e=new y(n).transform(t);return this.attr("transform",e)}});class C extends O{flatten(t=0,e){return this.each(function(){if(this instanceof C)return this.flatten().ungroup()}),this}ungroup(n=this.parent(),i=n.index(this)){return i=-1===i?n.children().length:i,this.each(function(t,e){return e[e.length-t-1].toParent(n,i)}),this.remove()}}c(C,"Container");class Zt extends C{constructor(t,e=t){super(r("defs",t),e)}flatten(){return this}ungroup(){return this}}c(Zt,"Defs");class k extends O{}function Kt(t){return this.attr("rx",t)}function Jt(t){return this.attr("ry",t)}function Qt(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function $t(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function te(t){return this.attr("cx",t)}function ee(t){return this.attr("cy",t)}function ne(t){return null==t?2*this.rx():this.rx(new E(t).divide(2))}function ie(t){return null==t?2*this.ry():this.ry(new E(t).divide(2))}c(k,"Shape");class oe extends k{constructor(t,e=t){super(r("ellipse",t),e)}size(t,e){t=a(this,t,e);return this.rx(new E(t.width).divide(2)).ry(new E(t.height).divide(2))}}d(oe,{__proto__:null,rx:Kt,ry:Jt,x:Qt,y:$t,cx:te,cy:ee,width:ne,height:ie}),o("Container",{ellipse:p(function(t=0,e=t){return this.put(new oe).size(t,e).move(0,0)})}),c(oe,"Ellipse");class re extends S{constructor(t=s.document.createDocumentFragment()){super(t)}xml(t,e,n){return"boolean"==typeof t&&(n=e,e=t,t=null),null==t||"function"==typeof t?((e=new S(lt("wrapper",n))).add(this.node.cloneNode(!0)),e.xml(!1,n)):super.xml(t,!1,n)}}function ae(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new E(t),fy:new E(e)}):this.attr({x1:new E(t),y1:new E(e)})}function se(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new E(t),cy:new E(e)}):this.attr({x2:new E(t),y2:new E(e)})}c(re,"Fragment");class le extends C{constructor(t,e){super(r(t+"Gradient","string"==typeof t?null:t),e)}attr(t,e,n){return super.attr(t="transform"===t?"gradientTransform":t,e,n)}bbox(){return new g}targets(){return w('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}d(le,{__proto__:null,from:ae,to:se}),o({Container:{gradient(...t){return this.defs().gradient(...t)}},Defs:{gradient:p(function(t,e){return this.put(new le(t)).update(e)})}}),c(le,"Gradient");class ce extends C{constructor(t,e=t){super(r("pattern",t),e)}attr(t,e,n){return super.attr(t="transform"===t?"patternTransform":t,e,n)}bbox(){return new g}targets(){return w('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}o({Container:{pattern(...t){return this.defs().pattern(...t)}},Defs:{pattern:p(function(t,e,n){return this.put(new ce).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})})}}),c(ce,"Pattern");class ue extends k{constructor(t,e=t){super(r("image",t),e)}load(t,n){if(!t)return this;const i=new s.window.Image;return Nt(i,"load",function(t){var e=this.parent(ce);0===this.width()&&0===this.height()&&this.size(i.width,i.height),e instanceof ce&&0===e.width()&&0===e.height()&&e.size(this.width(),this.height()),"function"==typeof n&&n.call(this,t)},this),Nt(i,"load error",function(){_(i)}),this.attr("href",i.src=t,J)}}Yt.push(function(t,e,n){return"fill"!==t&&"stroke"!==t||Ot.test(e)&&(e=n.root().defs().image(e)),e=e instanceof ue?n.root().defs().pattern(0,0,t=>{t.add(e)}):e}),o({Container:{image:p(function(t,e){return this.put(new ue).size(0,0).load(t,e)})}}),c(ue,"Image");class P extends x{bbox(){let e=-1/0,n=-1/0,i=1/0,o=1/0;return this.forEach(function(t){e=Math.max(t[0],e),n=Math.max(t[1],n),i=Math.min(t[0],i),o=Math.min(t[1],o)}),new g(i,o,e-i,n-o)}move(e,n){var t=this.bbox();if(e-=t.x,n-=t.y,!isNaN(e)&&!isNaN(n))for(let t=this.length-1;0<=t;t--)this[t]=[this[t][0]+e,this[t][1]+n];return this}parse(n=[0,0]){var i=[];(n=n instanceof Array?Array.prototype.concat.apply([],n):n.trim().split(h).map(parseFloat)).length%2!=0&&n.pop();for(let t=0,e=n.length;t<e;t+=2)i.push([n[t],n[t+1]]);return i}size(t,e){let n;var i=this.bbox();for(n=this.length-1;0<=n;n--)i.width&&(this[n][0]=(this[n][0]-i.x)*t/i.width+i.x),i.height&&(this[n][1]=(this[n][1]-i.y)*e/i.height+i.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){var n=[];for(let t=0,e=this.length;t<e;t++)n.push(this[t].join(","));return n.join(" ")}transform(t){return this.clone().transformO(t)}transformO(e){y.isMatrixLike(e)||(e=new y(e));for(let t=this.length;t--;){var[n,i]=this[t];this[t][0]=e.a*n+e.c*i+e.e,this[t][1]=e.b*n+e.d*i+e.f}return this}}e={__proto__:null,MorphArray:P,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}};class de extends k{constructor(t,e=t){super(r("line",t),e)}array(){return new P([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,e){return this.attr(this.array().move(t,e).toLine())}plot(t,e,n,i){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:i}:new P(t).toLine(),this.attr(t))}size(t,e){t=a(this,t,e);return this.attr(this.array().size(t.width,t.height).toLine())}}d(de,e),o({Container:{line:p(function(...t){return de.prototype.plot.apply(this.put(new de),null!=t[0]?t:[0,0,0,0])})}}),c(de,"Line");class pe extends C{constructor(t,e=t){super(r("marker",t),e)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,e){return this.attr("refX",t).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}function he(e,n){return function(t){return null==t?this[e]:(this[e]=t,n&&n.call(this),this)}}o({Container:{marker(...t){return this.defs().marker(...t)}},Defs:{marker:p(function(t,e,n){return this.put(new pe).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)})},marker:{marker(t,e,n,i){let o=["marker"];return"all"!==t&&o.push(t),o=o.join("-"),t=e instanceof pe?e:this.defs().marker(e,n,i),this.attr(o,t)}}}),c(pe,"Marker");const fe={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(e,n,i,o){return function(t){return t<0?0<e?n/e*t:0<i?o/i*t:0:1<t?i<1?(1-o)/(1-i)*t+(o-i)/(1-i):e<1?(1-n)/(1-e)*t+(n-e)/(1-e):1:3*t*(1-t)**2*n+3*t**2*(1-t)*o+t**3}},steps:function(o,r="end"){r=r.split("-").reverse()[0];let a=o;return"none"===r?--a:"both"===r&&++a,(t,e=!1)=>{let n=Math.floor(t*o);var i=t*n%1==0;return"start"!==r&&"both"!==r||++n,e&&i&&--n,0<=t&&n<0&&(n=0),(n=t<=1&&n>a?a:n)/a}}};class ve{done(){return!1}}class ge extends ve{constructor(t=Wt.ease){super(),this.ease=fe[t]||t}step(t,e,n){return"number"!=typeof t?n<1?t:e:t+(e-t)*this.ease(n)}}class me extends ve{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,e,n,i){return this.stepper(t,e,n,i)}}function ye(){var t=(this._duration||500)/1e3,e=this._overshoot||0,n=Math.PI,e=Math.log(e/100+1e-10),n=-e/Math.sqrt(n*n+e*e),e=3.9/(n*t);this.d=2*n*e,this.k=e*e}class be extends me{constructor(t=500,e=0){super(),this.duration(t).overshoot(e)}step(t,e,n,i){if("string"==typeof t)return t;if(i.done=n===1/0,n===1/0)return e;if(0===n)return t;100<n&&(n=16);var o=i.velocity||0,r=-this.d*o-this.k*(t-e),t=t+o*(n/=1e3)+r*n*n/2;return i.velocity=o+r*n,i.done=Math.abs(e-t)+Math.abs(o)<.002,i.done?e:t}}d(be,{duration:he("_duration",ye),overshoot:he("_overshoot",ye)});class we extends me{constructor(t=.1,e=.01,n=0,i=1e3){super(),this.p(t).i(e).d(n).windup(i)}step(t,e,n,i){if("string"==typeof t)return t;if(i.done=n===1/0,n===1/0)return e;if(0===n)return t;var o=e-t;let r=(i.integral||0)+o*n;var n=(o-(i.error||0))/n,a=this._windup;return!1!==a&&(r=Math.max(-a,Math.min(r,a))),i.error=o,i.integral=r,i.done=Math.abs(o)<.001,i.done?e:t+(this.P*o+this.I*r+this.D*n)}}d(we,{windup:he("_windup"),p:he("P"),i:he("I"),d:he("D")});const _e={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},xe={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}};var Ee="mlhvqtcsaz".split("");for(let t=0,e=Ee.length;t<e;++t)xe[Ee[t]]=function(e){return function(n,i,t){if("H"===e)n[0]=n[0]+i.x;else if("V"===e)n[0]=n[0]+i.y;else if("A"===e)n[5]=n[5]+i.x,n[6]=n[6]+i.y;else for(let t=0,e=n.length;t<e;++t)n[t]=n[t]+(t%2?i.y:i.x);return xe[e](n,i,t)}}(Ee[t].toUpperCase());function Se(t){return t.segment.length&&t.segment.length-1===_e[t.segment[0].toUpperCase()]}function T(t,e){if(!t.inNumber)throw new Error("Parser Error");t.number&&t.segment.push(parseFloat(t.number)),t.inNumber=e,t.number="",t.pointSeen=!1,t.hasExponent=!1,Se(t)&&Oe(t)}function Oe(t){var e,n;t.inSegment=!1,t.absolute&&(t.segment=(n=(e=t).segment[0],xe[n](e.segment.slice(1),e.p,e.p0))),t.segments.push(t.segment)}function Ce(t,e=!0){let n=0,i="";for(var o,r,a,s,l={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:e,p0:new m,p:new m};l.lastToken=i,i=t.charAt(n++);)if(l.inSegment||(o=l,r=i,s=a=void 0,o.inNumber&&T(o,!1),(s=Ct.test(r))?o.segment=[r]:(a=(r=o.lastCommand).toLowerCase(),o.segment=["m"===a?r===a?"l":"L":r]),o.inSegment=!0,o.lastCommand=o.segment[0],!s))if("."===i)l.pointSeen||l.hasExponent?(T(l,!1),--n):(l.inNumber=!0,l.pointSeen=!0,l.number+=i);else if(isNaN(parseInt(i))){if(" "===i||","===i)l.inNumber&&T(l,!1);else if("-"===i)l.inNumber&&"E"!==l.lastToken.toUpperCase()?(T(l,!1),--n):(l.number+=i,l.inNumber=!0);else if("E"===i.toUpperCase())l.number+=i,l.hasExponent=!0;else if(Ct.test(i)){if(l.inNumber)T(l,!1);else{if(!Se(l))throw new Error("parser Error");Oe(l)}--n}}else"0"===l.number||function(t){var e;if(t.segment.length)return e="A"===t.segment[0].toUpperCase(),t=t.segment.length,e&&(4===t||5===t)}(l)?(l.inNumber=!0,l.number=i,T(l,!0)):(l.inNumber=!0,l.number+=i);return l.inNumber&&T(l,!1),l.inSegment&&Se(l)&&Oe(l),l.segments}class j extends x{bbox(){return v().path.setAttribute("d",this.toString()),new g(v.nodes.path.getBBox())}move(n,i){var t=this.bbox();if(n-=t.x,i-=t.y,!isNaN(n)&&!isNaN(i))for(let t,e=this.length-1;0<=e;e--)"M"===(t=this[e][0])||"L"===t||"T"===t?(this[e][1]+=n,this[e][2]+=i):"H"===t?this[e][1]+=n:"V"===t?this[e][1]+=i:"C"===t||"S"===t||"Q"===t?(this[e][1]+=n,this[e][2]+=i,this[e][3]+=n,this[e][4]+=i,"C"===t&&(this[e][5]+=n,this[e][6]+=i)):"A"===t&&(this[e][6]+=n,this[e][7]+=i);return this}parse(t="M0 0"){return Ce(t=Array.isArray(t)?Array.prototype.concat.apply([],t).toString():t)}size(t,e){var n=this.bbox();let i,o;for(n.width=0===n.width?1:n.width,n.height=0===n.height?1:n.height,i=this.length-1;0<=i;i--)"M"===(o=this[i][0])||"L"===o||"T"===o?(this[i][1]=(this[i][1]-n.x)*t/n.width+n.x,this[i][2]=(this[i][2]-n.y)*e/n.height+n.y):"H"===o?this[i][1]=(this[i][1]-n.x)*t/n.width+n.x:"V"===o?this[i][1]=(this[i][1]-n.y)*e/n.height+n.y:"C"===o||"S"===o||"Q"===o?(this[i][1]=(this[i][1]-n.x)*t/n.width+n.x,this[i][2]=(this[i][2]-n.y)*e/n.height+n.y,this[i][3]=(this[i][3]-n.x)*t/n.width+n.x,this[i][4]=(this[i][4]-n.y)*e/n.height+n.y,"C"===o&&(this[i][5]=(this[i][5]-n.x)*t/n.width+n.x,this[i][6]=(this[i][6]-n.y)*e/n.height+n.y)):"A"===o&&(this[i][1]=this[i][1]*t/n.width,this[i][2]=this[i][2]*e/n.height,this[i][6]=(this[i][6]-n.x)*t/n.width+n.x,this[i][7]=(this[i][7]-n.y)*e/n.height+n.y);return this}toString(){{var i=this;let n="";for(let t=0,e=i.length;t<e;t++)n+=i[t][0],null!=i[t][1]&&(n+=i[t][1],null!=i[t][2])&&(n=(n+=" ")+i[t][2],null!=i[t][3])&&(n=(n=(n+=" ")+i[t][3]+" ")+i[t][4],null!=i[t][5])&&(n=(n=(n+=" ")+i[t][5]+" ")+i[t][6],null!=i[t][7])&&(n=(n+=" ")+i[t][7]);return n+" "}}}const ke=t=>{var e=typeof t;return"number"==e?E:"string"==e?f.isColor(t)?f:h.test(t)?Ct.test(t)?j:x:vt.test(t)?E:Pe:-1<Me.indexOf(t.constructor)?t.constructor:Array.isArray(t)?x:"object"==e?Ae:Pe};class A{constructor(t){this._stepper=t||new ge("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(n){const i=this;return this._morphObj.fromArray(this._from.map(function(t,e){return i._stepper.step(t,i._to[e],n,i._context[e],i._context)}))}done(){return this._context.map(this._stepper.done).reduce(function(t,e){return t&&e},!0)}from(t){return null==t?this._from:(this._from=this._set(t),this)}stepper(t){return null==t?this._stepper:(this._stepper=t,this)}to(t){return null==t?this._to:(this._to=this._set(t),this)}type(t){return null==t?this._type:(this._type=t,this)}_set(t){this._type||this.type(ke(t));let e=new this._type(t);return this._type===f&&(e=this._to?e[this._to[4]]():this._from?e[this._from[4]]():e),e=(e=this._type===Ae?this._to?e.align(this._to):this._from?e.align(this._from):e:e).toArray(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(e.length)).map(Object).map(function(t){return t.done=!0,t}),e}}class Pe{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class Te{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,Te.defaults,t),this}toArray(){return[this.scaleX,this.scaleY,this.shear,this.rotate,this.translateX,this.translateY,this.originX,this.originY]}}Te.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const je=(t,e)=>t[0]<e[0]?-1:t[0]>e[0]?1:0;class Ae{constructor(...t){this.init(...t)}align(n){for(let t=0,e=this.values.length;t<e;++t){var i;this.values[t]===f&&(i=n[t+6],i=new f(this.values.splice(t+2,5))[i]().toArray(),this.values.splice(t+2,0,...i))}return this}init(t){if(this.values=[],!Array.isArray(t)){var e=[];for(const o in t=t||{}){var n=ke(t[o]),i=new n(t[o]).toArray();e.push([o,n,i.length,...i])}return e.sort(je),this.values=e.reduce((t,e)=>t.concat(e),[]),this}this.values=t.slice()}toArray(){return this.values}valueOf(){for(var t={},e=this.values;e.length;){var n=e.shift(),i=e.shift(),o=e.shift(),o=e.splice(0,o);t[n]=new i(o).valueOf()}return t}}const Me=[Pe,Te,Ae];function Le(t=[]){Me.push(...[].concat(t))}function Ie(){d(Me,{to(t){return(new A).type(this.constructor).from(this.valueOf()).to(t)},fromArray(t){return this.init(t),this}})}class M extends k{constructor(t,e=t){super(r("path",t),e)}array(){return this._array||(this._array=new j(this.attr("d")))}clear(){return delete this._array,this}height(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}move(t,e){return this.attr("d",this.array().move(t,e))}plot(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new j(t))}size(t,e){t=a(this,t,e);return this.attr("d",this.array().size(t.width,t.height))}width(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}x(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}y(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}}M.prototype.MorphArray=j,o({Container:{path:p(function(t){return this.put(new M).plot(t||new j)})}}),c(M,"Path");t={__proto__:null,array:function(){return this._array||(this._array=new P(this.attr("points")))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new P(t))},size:function(t,e){return t=a(this,t,e),this.attr("points",this.array().size(t.width,t.height))}};class De extends k{constructor(t,e=t){super(r("polygon",t),e)}}o({Container:{polygon:p(function(t){return this.put(new De).plot(t||new P)})}}),d(De,e),d(De,t),c(De,"Polygon");class Fe extends k{constructor(t,e=t){super(r("polyline",t),e)}}o({Container:{polyline:p(function(t){return this.put(new Fe).plot(t||new P)})}}),d(Fe,e),d(Fe,t),c(Fe,"Polyline");class Re extends k{constructor(t,e=t){super(r("rect",t),e)}}d(Re,{rx:Kt,ry:Jt}),o({Container:{rect:p(function(t,e){return this.put(new Re).size(t,e)})}}),c(Re,"Rect");class ze{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){t=void 0!==t.next?t:{value:t,next:null,prev:null};return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._last=t,this._first=t),t}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){var t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}function Be(t){var e=t.start,n=t.runner.duration();return{start:e,duration:n,end:e+n,runner:t.runner}}const L={nextDraw:null,frames:new ze,timeouts:new ze,immediates:new ze,timer:()=>s.window.performance||s.window.Date,transforms:[],frame(t){t=L.frames.push({run:t});return null===L.nextDraw&&(L.nextDraw=s.window.requestAnimationFrame(L._draw)),t},timeout(t,e){e=e||0;e=L.timer().now()+e,t=L.timeouts.push({run:t,time:e});return null===L.nextDraw&&(L.nextDraw=s.window.requestAnimationFrame(L._draw)),t},immediate(t){t=L.immediates.push(t);return null===L.nextDraw&&(L.nextDraw=s.window.requestAnimationFrame(L._draw)),t},cancelFrame(t){null!=t&&L.frames.remove(t)},clearTimeout(t){null!=t&&L.timeouts.remove(t)},cancelImmediate(t){null!=t&&L.immediates.remove(t)},_draw(t){for(var e=null,n=L.timeouts.last();(e=L.timeouts.shift())&&(t>=e.time?e.run():L.timeouts.push(e),e!==n););let i=null;for(var o=L.frames.last();i!==o&&(i=L.frames.shift());)i.run(t);for(var r=null;r=L.immediates.shift();)r();L.nextDraw=L.timeouts.first()||L.frames.first()?s.window.requestAnimationFrame(L._draw):null}};class Ne extends Ht{constructor(t=function(){var t=s.window;return(t.performance||t.Date).now()}){super(),this._timeSource=t,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){var t=this.getLastRunnerInfo(),e=t?t.runner.duration():0;return(t?t.start:this._time)+e}getEndTimeOfTimeline(){var t=this._runners.map(t=>t.start+t.runner.duration());return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return null==t?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){var e=this.speed();return null==t?this.speed(-e):(e=Math.abs(e),this.speed(t?-e:e))}schedule(t,e,n){if(null==t)return this._runners.map(Be);let i=0;var o=this.getEndTime();if(e=e||0,null==n||"last"===n||"after"===n)i=o;else if("absolute"===n||"start"===n)i=e,e=0;else if("now"===n)i=this._time;else if("relative"===n){const r=this.getRunnerInfoById(t.id);r&&(i=r.start+e,e=0)}else{if("with-last"!==n)throw new Error('Invalid value for the "when" parameter');o=this.getLastRunnerInfo(),n=o?o.start:this._time;i=n}t.unschedule(),t.timeline(this);o=t.persist();const r={persist:null===o?this._persist:o,start:i+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(r),this._runners.sort((t,e)=>t.start-e.start),this._runnerIds=this._runners.map(t=>t.runner.id),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return null==t?this._timeSource:(this._timeSource=t,this)}speed(t){return null==t?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return null==t?this._time:(this._time=t,this._continue(!0))}unschedule(t){var e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return L.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=L.frame(this._step)),this)}_stepFn(t=!1){var e=this._timeSource();let n=e-this._lastSourceTime;t&&(n=0);var i=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=i,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let t=this._runners.length;t--;){var o=this._runners[t],r=o.runner;this._time-o.start<=0&&r.reset()}let a=!1;for(let e=0,n=this._runners.length;e<n;e++){var s=this._runners[e],l=s.runner;let t=i;var c=this._time-s.start;c<=0?a=!0:(c<t&&(t=c),l.active()&&(l.step(t).done?!0!==s.persist&&l.duration()-l.time()+this._time+s.persist<this._time&&(l.unschedule(),--e,--n):a=!0))}return a&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&0<this._time?this._continue():(this.pause(),this.fire("finished")),this}}o({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new Ne,this._timeline):(this._timeline=t,this)}}});class I extends Ht{constructor(t){super(),this.id=I.id++,t="function"==typeof(t=null==t?Wt.duration:t)?new me(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof t&&t,this._isDeclarative=t instanceof me,this._stepper=this._isDeclarative?t:new ge,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new y,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(t,e,n){let i=1,o=!1,r=0;return t=t||Wt.duration,e=e||Wt.delay,n=n||"last","object"!=typeof t||t instanceof ve||(e=t.delay||e,n=t.when||n,o=t.swing||o,i=t.times||i,r=t.wait||r,t=t.duration||Wt.duration),{duration:t,delay:e,swing:o,times:i,wait:r,when:n}}active(t){return null==t?this.enabled:(this.enabled=t,this)}addTransform(t,e){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,e,n){t=I.sanitise(t,e,n),e=new I(t.duration);return this._timeline&&e.timeline(this._timeline),this._element&&e.element(this._element),e.loop(t).schedule(t.delay,t.when)}clearTransform(){return this.transforms=new y,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(t=>!t.isTransform))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new ge(t),this}element(t){return null==t?this._element:((this._element=t)._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,e,n){return"object"==typeof t&&(e=t.swing,n=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=n||0,!0===this._times&&(this._times=1/0),this}loops(t){var e,n,i=this._duration+this._wait;return null==t?(n=Math.floor(this._time/i),e=(this._time-n*i)/this._duration,Math.min(n+e,this._times)):(n=i*Math.floor(t)+this._duration*(t%1),this.time(n))}persist(t){return null==t?this._persist:(this._persist=t,this)}position(t){var e=this._time;const n=this._duration,i=this._wait;var o,r=this._times;const a=this._swing,s=this._reverse;let l;return null==t?(o=function(t){var e=a*Math.floor(t%(2*(i+n))/(i+n)),e=e&&!s||!e&&s,t=Math.pow(-1,e)*(t%(i+n))/n+e;return Math.max(Math.min(t,1),0)},r=r*(i+n)-i,l=e<=0?Math.round(o(1e-5)):e<r?o(e):Math.round(o(r-1e-5))):(e=Math.floor(this.loops()),r=(o=a&&e%2==0)&&!s||s&&o,l=e+(r?t:1-t),this.loops(l))}progress(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,e,n,i){return this._queue.push({initialiser:t||Vt,runner:e||Vt,retarget:n,isTransform:i,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(t){return this._reverse=null==t?!this._reverse:t,this}schedule(t,e,n){if(t instanceof Ne||(n=e,e=t,t=this.timeline()),t)return t.schedule(this,e,n),this;throw Error("Runner cannot be scheduled without timeline")}step(e){if(this.enabled){this._time+=e=null==e?16:e;var n=this.position(),i=this._lastPosition!==n&&0<=this._time,o=(this._lastPosition=n,this.duration()),r=this._lastTime<=0&&0<this._time,a=this._lastTime<o&&this._time>=o,r=(this._lastTime=this._time,r&&this.fire("start",this),this._isDeclarative);this.done=!r&&!a&&this._time>=o;let t=this._reseted=!1;(i||r)&&(this._initialise(i),this.transforms=new y,t=this._run(r?e:n),this.fire("step",this)),this.done=this.done||t&&r,a&&this.fire("finished",this)}return this}time(t){return null==t?this._time:(t=t-this._time,this.step(t),this)}timeline(t){return void 0===t?this._timeline:(this._timeline=t,this)}unschedule(){var t=this.timeline();return t&&t.unschedule(this),this}_initialise(n){if(n||this._isDeclarative)for(let t=0,e=this._queue.length;t<e;++t){var i=this._queue[t],o=this._isDeclarative||!i.initialised&&n;n=!i.finished,o&&n&&(i.initialiser.call(this),i.initialised=!0)}}_rememberMorpher(t,e){this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative&&(t=this.timeline())&&t.play()}_run(n){let i=!0;for(let t=0,e=this._queue.length;t<e;++t){var o=this._queue[t],r=o.runner.call(this,n);o.finished=o.finished||!0===r,i=i&&o.finished}return i}_tryRetarget(t,e,n){if(this._history[t]){if(!this._history[t].caller.initialised)return i=this._queue.indexOf(this._history[t].caller),this._queue.splice(i,1),!1;this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,e,n):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;var i=this.timeline();return i&&i.play(),!0}return!1}}I.id=0;class Ue{constructor(t=new y,e=-1,n=!0){this.transforms=t,this.id=e,this.done=n}clearTransformsFromQueue(){}}d([I,Ue],{mergeWith(t){return new Ue(t.transforms.lmultiply(this.transforms),t.id)}});const He=(t,e)=>t.lmultiplyO(e),Ve=t=>t.transforms;class We{constructor(){this.runners=[],this.ids=[]}add(t){var e;if(!this.runners.includes(t))return e=t.id+1,this.runners.push(t),this.ids.push(e),this}clearBefore(t){t=this.ids.indexOf(t+1)||1;return this.ids.splice(0,t,0),this.runners.splice(0,t,new Ue).forEach(t=>t.clearTransformsFromQueue()),this}edit(t,e){var n=this.ids.indexOf(t+1);return this.ids.splice(n,1,t+1),this.runners.splice(n,1,e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let e=null;for(let t=0;t<this.runners.length;++t){var n,i=this.runners[t];e&&i.done&&e.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))?(this.remove(i.id),n=i.mergeWith(e),this.edit(e.id,n),e=n,--t):e=i}return this}remove(t){t=this.ids.indexOf(t+1);return this.ids.splice(t,1),this.runners.splice(t,1),this}}o({Element:{animate(t,e,n){t=I.sanitise(t,e,n),e=this.timeline();return new I(t.duration).loop(t).element(this).timeline(e.play()).schedule(t.delay,t.when)},delay(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore(t){this._transformationRunners.clearBefore(t.id)},_currentTransform(e){return this._transformationRunners.runners.filter(t=>t.id<=e.id).map(Ve).reduce(He,new y)},_addRunner(t){this._transformationRunners.add(t),L.cancelImmediate(this._frameId),this._frameId=L.immediate(function(){var t=this._transformationRunners.runners.map(Ve).reduce(He,new y);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=(new We).add(new Ue(new y(this))))}}});d(I,{attr(t,e){return this.styleAttr("attr",t,e)},css(t,e){return this.styleAttr("css",t,e)},styleAttr(s,t,e){if("string"==typeof t)return this.styleAttr(s,{[t]:e});let l=t;if(!this._tryRetarget(s,l)){let r=new A(this._stepper).to(l),a=Object.keys(l);this.queue(function(){r=r.from(this.element()[s](a))},function(t){return this.element()[s](r.at(t).valueOf()),r.done()},function(t){var e,n,i=Object.keys(t),o=(o=i,e=a,o.filter(t=>!e.includes(t))),o=(o.length&&(o=this.element()[s](o),n=new Ae(r.from()).valueOf(),Object.assign(n,o),r.from(n)),new Ae(r.to()).valueOf());Object.assign(o,t),r.to(o),a=i,l=t}),this._rememberMorpher(s,r)}return this},zoom(t,i){if(!this._tryRetarget("zoom",t,i)){let n=new A(this._stepper).to(new E(t));this.queue(function(){n=n.from(this.element().zoom())},function(t){return this.element().zoom(n.at(t),i),n.done()},function(t,e){i=e,n.to(t)}),this._rememberMorpher("zoom",n)}return this},transform(p,h,f){if(h=p.relative||h,!this._isDeclarative||h||!this._tryRetarget("transform",p)){const v=y.isMatrixLike(p),g=(f=null!=p.affine?p.affine:null!=f?f:!v,new A(this._stepper).type(f?Te:y));let s,l,c,u,d;this.queue(function(){l=l||this.element(),s=s||G(p,l),d=new y(h?void 0:l),l._addRunner(this),h||l._clearTransformRunnersBefore(this)},function(t){h||this.clearTransform();var{x:e,y:n}=new m(s).transform(l._currentTransform(this));let i=new y({...p,origin:[e,n]}),o=this._isDeclarative&&c?c:d;if(f){i=i.decompose(e,n),o=o.decompose(e,n);e=i.rotate;const a=o.rotate;var n=[e-360,e,e+360],e=n.map(t=>Math.abs(t-a)),r=Math.min(...e),e=e.indexOf(r);i.rotate=n[e]}return h&&(v||(i.rotate=p.rotate||0),this._isDeclarative)&&u&&(o.rotate=u),g.from(o),g.to(i),r=g.at(t),u=r.rotate,c=new y(r),this.addTransform(c),l._addRunner(this),g.done()},function(t){(t.origin||"center").toString()!==(p.origin||"center").toString()&&(s=G(t,l)),p={...t,origin:s}},!0),this._isDeclarative&&this._rememberMorpher("transform",g)}return this},x(t,e){return this._queueNumber("x",t)},y(t){return this._queueNumber("y",t)},dx(t=0){return this._queueNumberDelta("x",t)},dy(t=0){return this._queueNumberDelta("y",t)},dmove(t,e){return this.dx(t).dy(e)},_queueNumberDelta(n,t){if(t=new E(t),!this._tryRetarget(n,t)){const i=new A(this._stepper).to(t);let e=null;this.queue(function(){e=this.element()[n](),i.from(e),i.to(e+t)},function(t){return this.element()[n](i.at(t)),i.done()},function(t){i.to(e+new E(t))}),this._rememberMorpher(n,i)}return this},_queueObject(e,t){if(!this._tryRetarget(e,t)){const n=new A(this._stepper).to(t);this.queue(function(){n.from(this.element()[e]())},function(t){return this.element()[e](n.at(t)),n.done()}),this._rememberMorpher(e,n)}return this},_queueNumber(t,e){return this._queueObject(t,new E(e))},cx(t){return this._queueNumber("cx",t)},cy(t){return this._queueNumber("cy",t)},move(t,e){return this.x(t).y(e)},center(t,e){return this.cx(t).cy(e)},size(t,e){let n;return t&&e||(n=this._element.bbox()),t=t||n.width/n.height*e,e=e||n.height/n.width*t,this.width(t).height(e)},width(t){return this._queueNumber("width",t)},height(t){return this._queueNumber("height",t)},plot(t,e,n,i){if(4===arguments.length)return this.plot([t,e,n,i]);if(!this._tryRetarget("plot",t)){const o=new A(this._stepper).type(this._element.MorphArray).to(t);this.queue(function(){o.from(this._element.array())},function(t){return this._element.plot(o.at(t)),o.done()}),this._rememberMorpher("plot",o)}return this},leading(t){return this._queueNumber("leading",t)},viewbox(t,e,n,i){return this._queueObject("viewbox",new g(t,e,n,i))},update(t){return"object"!=typeof t?this.update({offset:t,color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),d(I,{rx:Kt,ry:Jt,from:ae,to:se}),c(I,"Runner");class qe extends C{constructor(t,e=t){super(r("svg",t),e),this.namespace()}defs(){return this.isRoot()?l(this.node.querySelector("defs"))||this.put(new Zt):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof s.window.SVGElement)&&"#document-fragment"!==this.node.parentNode.nodeName}namespace(){return this.isRoot()?this.attr({xmlns:X,version:"1.1"}).attr("xmlns:xlink",J,K).attr("xmlns:svgjs",Q,K):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,K).attr("xmlns:svgjs",null,K)}root(){return this.isRoot()?this:super.root()}}o({Container:{nested:p(function(){return this.put(new qe)})}}),c(qe,"Svg",!0);class Ge extends C{constructor(t,e=t){super(r("symbol",t),e)}}o({Container:{symbol:p(function(){return this.put(new Ge)})}}),c(Ge,"Symbol");e={__proto__:null,plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(s.document.createTextNode(t)),this},length:function(){return this.node.getComputedTextLength()},x:function(t,e=this.bbox()){return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)},y:function(t,e=this.bbox()){return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)},move:function(t,e,n=this.bbox()){return this.x(t,n).y(e,n)},cx:function(t,e=this.bbox()){return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)},cy:function(t,e=this.bbox()){return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)},center:function(t,e,n=this.bbox()){return this.cx(t,n).cy(e,n)},ax:function(t){return this.attr("x",t)},ay:function(t){return this.attr("y",t)},amove:function(t,e){return this.ax(t).ay(e)},build:function(t){return this._build=!!t,this}};class D extends k{constructor(t,e=t){super(r("text",t),e),this.dom.leading=new E(1.3),this._rebuild=!0,this._build=!1}leading(t){return null==t?this.dom.leading:(this.dom.leading=new E(t),this.rebuild())}rebuild(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){const i=this;let n=0;const o=this.dom.leading;this.each(function(t){var e=s.window.getComputedStyle(this.node).getPropertyValue("font-size"),e=o*new E(e);this.dom.newLined&&(this.attr("x",i.attr("x")),"\n"===this.text()?n+=e:(this.attr("dy",t?e+n:0),n=0))}),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new E(t.leading||1.3),this}text(i){if(void 0===i){var o=this.node.childNodes;let n=0;i="";for(let t=0,e=o.length;t<e;++t)"textPath"===o[t].nodeName?0===t&&(n=1):(t!==n&&3!==o[t].nodeType&&!0===l(o[t]).dom.newLined&&(i+="\n"),i+=o[t].textContent);return i}if(this.clear().build(!0),"function"==typeof i)i.call(this,this);else for(let t=0,e=(i=(i+"").split("\n")).length;t<e;t++)this.newLine(i[t]);return this.build(!1).rebuild()}}d(D,e),o({Container:{text:p(function(t=""){return this.put(new D).text(t)}),plain:p(function(t=""){return this.put(new D).plain(t)})}}),c(D,"Text");class Ye extends k{constructor(t,e=t){super(r("tspan",t),e),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;var t,e,n=this.parent();return n instanceof D?(t=n.index(this),e=s.window.getComputedStyle(this.node).getPropertyValue("font-size"),e=n.dom.leading*new E(e),this.dy(t?e:0).attr("x",n.x())):this}text(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}d(Ye,e),o({Tspan:{tspan:p(function(t=""){var e=new Ye;return this._build||this.clear(),this.put(e).text(t)})},Text:{newLine:function(t=""){return this.tspan(t).newLine()}}}),c(Ye,"Tspan");class Xe extends k{constructor(t,e=t){super(r("circle",t),e)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new E(t).divide(2))}}d(Xe,{x:Qt,y:$t,cx:te,cy:ee,width:ne,height:ie}),o({Container:{circle:p(function(t=0){return this.put(new Xe).size(t).move(0,0)})}}),c(Xe,"Circle");class Ze extends C{constructor(t,e=t){super(r("clipPath",t),e)}remove(){return this.targets().forEach(function(t){t.unclip()}),super.remove()}targets(){return w('svg [clip-path*="'+this.id()+'"]')}}o({Container:{clip:p(function(){return this.defs().put(new Ze)})},Element:{clipper(){return this.reference("clip-path")},clipWith(t){t=t instanceof Ze?t:this.parent().clip().add(t);return this.attr("clip-path",'url("#'+t.id()+'")')},unclip(){return this.attr("clip-path",null)}}}),c(Ze,"ClipPath");class Ke extends O{constructor(t,e=t){super(r("foreignObject",t),e)}}o({Container:{foreignObject:p(function(t,e){return this.put(new Ke).size(t,e)})}}),c(Ke,"ForeignObject");t={__proto__:null,dmove:function(o,r){return this.children().forEach((t,e)=>{let n;try{n=t.bbox()}catch(t){return}var i=new y(t),i=i.translate(o,r).transform(i.inverse()),i=new m(n.x,n.y).transform(i);t.move(i.x,i.y)}),this},dx:function(t){return this.dmove(t,0)},dy:function(t){return this.dmove(0,t)},height:function(t,e=this.bbox()){return null==t?e.height:this.size(e.width,t,e)},move:function(t=0,e=0,n=this.bbox()){return t-=n.x,e-=n.y,this.dmove(t,e)},size:function(t,e,i=this.bbox()){const o=(t=a(this,t,e,i)).width/i.width,r=t.height/i.height;return this.children().forEach((t,e)=>{var n=new m(i).transform(new y(t).inverse());t.scale(o,r,n.x,n.y)}),this},width:function(t,e=this.bbox()){return null==t?e.width:this.size(t,e.height,e)},x:function(t,e=this.bbox()){return null==t?e.x:this.move(t,e.y,e)},y:function(t,e=this.bbox()){return null==t?e.y:this.move(e.x,t,e)}};class Je extends C{constructor(t,e=t){super(r("g",t),e)}}d(Je,t),o({Container:{group:p(function(){return this.put(new Je)})}}),c(Je,"G");class Qe extends C{constructor(t,e=t){super(r("a",t),e)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,J)}}d(Qe,t),o({Container:{link:p(function(t){return this.put(new Qe).to(t)})},Element:{unlink(){var t=this.linker();if(t){var e=t.parent();if(!e)return this.remove();var n=e.index(t);e.add(this,n),t.remove()}return this},linkTo(t){let e=this.linker();return e||(e=new Qe,this.wrap(e)),"function"==typeof t?t.call(e,e):e.to(t),this},linker(){var t=this.parent();return t&&"a"===t.node.nodeName.toLowerCase()?t:null}}}),c(Qe,"A");class $e extends C{constructor(t,e=t){super(r("mask",t),e)}remove(){return this.targets().forEach(function(t){t.unmask()}),super.remove()}targets(){return w('svg [mask*="'+this.id()+'"]')}}o({Container:{mask:p(function(){return this.defs().put(new $e)})},Element:{masker(){return this.reference("mask")},maskWith(t){t=t instanceof $e?t:this.parent().mask().add(t);return this.attr("mask",'url("#'+t.id()+'")')},unmask(){return this.attr("mask",null)}}}),c($e,"Mask");class tn extends O{constructor(t,e=t){super(r("stop",t),e)}update(t){return null!=(t="number"==typeof t||t instanceof E?{offset:arguments[0],color:arguments[1],opacity:arguments[2]}:t).opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new E(t.offset)),this}}o({Gradient:{stop:function(t,e,n){return this.put(new tn).update(t,e,n)}}}),c(tn,"Stop");class en extends O{constructor(t,e=t){super(r("style",t),e)}addText(t=""){return this.node.textContent+=t,this}font(t,e,n={}){return this.rule("@font-face",{fontFamily:t,src:e,...n})}rule(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;let n=t+"{";for(const i in e)n+=W(i)+":"+e[i]+";";return n+="}"}(t,e))}}o("Dom",{style(t,e){return this.put(new en).rule(t,e)},fontface(t,e,n){return this.put(new en).font(t,e,n)}}),c(en,"Style");class nn extends D{constructor(t,e=t){super(r("textPath",t),e)}array(){var t=this.track();return t?t.array():null}plot(t){var e=this.track();let n=null;return e&&(n=e.plot(t)),null==t?n:this}track(){return this.reference("href")}}o({Container:{textPath:p(function(t,e){return(t=t instanceof D?t:this.text(t)).path(e)})},Text:{path:p(function(t,e=!0){var n,i=new nn;if(t instanceof M||(t=this.defs().path(t)),i.attr("href","#"+t,J),e)for(;n=this.node.firstChild;)i.node.appendChild(n);return this.put(i)}),textPath(){return this.findOne("textPath")}},Path:{text:p(function(t){return(t=t instanceof D?t:(new D).addTo(this.parent()).text(t)).path(this)}),targets(){return w("svg textPath").filter(t=>(t.attr("href")||"").includes(this.id()))}}}),nn.prototype.MorphArray=j,c(nn,"TextPath");class on extends k{constructor(t,e=t){super(r("use",t),e)}use(t,e){return this.attr("href",(e||"")+"#"+t,J)}}o({Container:{use:p(function(t,e){return this.put(new on).use(t,e)})}}),c(on,"Use");const rn=u;d([qe,Ge,ue,ce,pe],n("viewbox")),d([de,Fe,De,M],n("marker")),d(D,n("Text")),d(M,n("Path")),d(Zt,n("Defs")),d([D,Ye],n("Tspan")),d([Re,oe,le,I],n("radius")),d(Ht,n("EventTarget")),d(S,n("Dom")),d(O,n("Element")),d(k,n("Shape")),d([C,re],n("Container")),d(le,n("Gradient")),d(I,n("Runner")),b.extend([...new Set(z)]),Le([E,f,g,y,x,P,j]),Ie()},function(t,e,n){"use strict";var i,r,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0,n(339)),n=(r=n.Shape,o(a,r),Object.defineProperty(a.prototype,"type",{get:function(){return"rect"},enumerable:!1,configurable:!0}),a.prototype.setSize=function(t,e){return this._updateInternalDims(t,e),this},a.prototype._updateDom=function(){r.prototype._updateDom.call(this);var t=this.zoomedStrokeWidth,e=("transparent"===this.stroke()&&(t=0),this.size.w),n=this.size.h;e<=2*t&&n<=2*t&&(t=n<e?e/2:n/2,t+=.5);var i=(e=Math.round(e))-t,o=(n=Math.round(n))-t;i<0&&(i=1),o<0&&(o=1),this.shape.attr({fill:this.fill(),"fill-opacity":this.fillOpacity(),stroke:this.stroke(),"stroke-width":t}),this.shape.size(i,o),this.resizeDrawingSurface(e,n),this.shape.move(.5*t,.5*t)},a.prototype.getDefaultAttributes=function(){return Object.assign({},r.prototype.getDefaultAttributes.call(this),{size_x1:{w:75,h:75},fillColor:a.currentDefaultFillColor,strokeColor:a.currentDefaultStrokeColor,strokeWidth:a.currentDefaultStrokeWidth})},a.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t=void 0===t?{}:t),"fillColor"in t&&(a.currentDefaultFillColor=t.fillColor),"strokeColor"in t&&(a.currentDefaultStrokeColor=t.strokeColor),"strokeWidth"in t&&(a.currentDefaultStrokeWidth=t.strokeWidth)},a.prototype.clone=function(t){var e=new a(t.pdfPage),t=(e.cloned=!0,e.cloning=!0,e.zoomLevel=t.zoomLevel,t.getAttributes());return e.setAttributes(t),e.cloning=!1,e},a.currentDefaultFillColor="#4CAF50",a.currentDefaultStrokeColor="transparent",a.currentDefaultStrokeWidth=6,a);function a(){return null!==r&&r.apply(this,arguments)||this}e.Rect=n},function(t,d,p){"use strict";!function(l,i){var o,e,t=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},s=(Object.defineProperty(d,"__esModule",{value:!0}),d.Img=void 0,p(252)),c=n(p(15)),n=(e=s.CanvasObject,t(u,e),Object.defineProperty(u.prototype,"type",{get:function(){return"img"},enumerable:!1,configurable:!0}),u.prototype._updateDom=function(){this.imgElem&&(this.imgElem.width(this.size.w),this.imgElem.height(this.size.h))},u.prototype.setSize=function(t,e){return this._updateInternalDims(t,e),this},u.prototype.setAttributes=function(t){t.imgDom&&this.assignImgDom(t.imgDom),e.prototype.setAttributes.call(this,t)},u.prototype.assignImgDom=function(t){var e,n,i=t.width(),o=t.height(),r=(0===i&&0===o&&c.captureMessage("[Editpdf][Img] Uploaded Image has no size!"),i),a=o,t=(this.dom.find("img").detach(),l.contains(window.document.body,t[0])&&(t=t.detach()).removeClass("ohidden"),this.imgElem=t,this.dom.append(t),this.pdfPage.getSafePageRect(!0)),s=t.w,t=t.h;(s<i||t<o)&&(n=e=null,o<i?n=(e=s)*(o/i):e=(n=t)*(i/o),i=e,o=n),this.setSize_x1(i,o),this._updateInternalDims(),this.originalDims.w=r,this.originalDims.h=a},Object.defineProperty(u.prototype,"controlAnchors",{get:function(){return["top_left","top_right","bottom_left","bottom_right"]},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"keepAlwaysAspectRatio",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"aspectRatio",{get:function(){return{w:this.originalDims.w/this.originalDims.h,h:this.originalDims.h/this.originalDims.w}},enumerable:!1,configurable:!0}),u.prototype.clone=function(t){var e=new u(t.pdfPage),n=(e.cloneRef=this,e.cloned=!0,e.cloning=!0,e.zoomLevel=t.zoomLevel,e.imgElem=i(this.imgElem[0].outerHTML),e.dom.append(e.imgElem),e.bag.uploader=this.bag.uploader,t.getAttributes());return e.setAttributes(n),e.originalDims.w=t.originalDims.w,e.originalDims.h=t.originalDims.h,e.cloning=!1,e},u);function u(){var t=null!==e&&e.apply(this,arguments)||this;return t.originalDims={w:0,h:0},t}d.Img=n}.call(this,p(1),p(1))},function(t,l,c){"use strict";!function(n){var i,t,e=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(l,"__esModule",{value:!0}),l.LineControls=void 0,c(337)),a=c(338),s=c(221),o=(t=o.StandardControls,e(r,t),Object.defineProperty(r.prototype,"lineNode",{get:function(){return this.canvasObj.draw.node.querySelector("line")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shadowLineNode",{get:function(){return this.canvasObj.draw.node.querySelector(".shadow-line")},enumerable:!1,configurable:!0}),r.prototype.getDraggableElem=function(){return this.shadowLineNode},r.prototype.getSelectableElem=function(){return this.shadowLineNode},r.prototype.getGizmoTemplate=function(){return'\n      <svg id="'+this.domId+'" class=\'controls line-controls\' focusable="false">\n        <rect class="surface-rect" x="1" y="1"></rect>\n        <rect class="anchor anchor_starting_point"          width="9" height="9" stroke-width="1" rx="2" ry="2"></rect>\n        <rect class="anchor anchor_terminal_point"          width="9" height="9" stroke-width="1" rx="2" ry="2"></rect>\n      </svg>\n    '},r.prototype.hasResizingCapabilities=function(){return!1},r.prototype.initControls=function(){t.prototype.initControls.call(this),this.initAnchorManipulation()},r.prototype.canSurfaceRectBeEnabled=function(){return!1},r.prototype.refreshGizmo=function(){var t,e,n=this.canvasObj;n.readyToRefreshGizmo&&(t=n.cachedEffectivePointCoords,n=n.getFullSize(),(e=this.controlsDom.find(".surface-rect")).attr("width",n.w-2+"px"),e.attr("height",n.h-2+"px"),this.controlsDom.find(".anchor_starting_point").attr("x",t.startingPoint.x-5),this.controlsDom.find(".anchor_starting_point").attr("y",t.startingPoint.y-5),this.controlsDom.find(".anchor_terminal_point").attr("x",t.terminalPoint.x-5),this.controlsDom.find(".anchor_terminal_point").attr("y",t.terminalPoint.y-5))},r.prototype.initAnchorManipulation=function(){var e=this,t=this.controlsDom.find(".anchor"),r=e.canvasObj;t.each(function(){var t=n(this),o=e.getAnchorName(t);new a.Draggable(t,{mouseButton:s.MOUSE.LeftClick,onDragEndFn:function(t){}},function(t){var e=r.startingPoint,n=r.terminalPoint,i="starting_point"===o?e:n;i.x+=t.x,i.y+=t.y,r.updateLine(e,n),r.updateDom()})})},r);function r(){return null!==t&&t.apply(this,arguments)||this}l.LineControls=o}.call(this,c(1))},function(t,c,u){"use strict";!function(o){var i,n,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),e=(Object.defineProperty(c,"__esModule",{value:!0}),c.Freehand=void 0,u(369)),r=u(337),a=u(480),s=u(221),e=(n=e.SvgObject,t(l,n),Object.defineProperty(l.prototype,"type",{get:function(){return"freehand"},enumerable:!1,configurable:!0}),l.prototype._makeInactiveElement=function(){},l.prototype.updateEachPathComponent=function(o){this.allPaths.forEach(function(t){var n=1,e=t.getAttribute("d").split(/[A-Z]/),i=(e.shift(),[]);e.forEach(function(t){var t=t.trim().split(" "),e=t[0],t=t[1],e=[parseFloat(e),parseFloat(t)],t=1===n?"M":"L";o(e),i.push(t+e[0]+" "+e[1]),n++}),t.setAttribute("d",i.join(" "))})},l.prototype.trim=function(){var t,e,n,i,o,r,a;this.isObjectFinished&&(t=this.zoomLevel,this.applyZoomAndTranslate(1),n=this.svg,e=this._strokeWidth_x1,i=(n=n.getBBox()).width+e,o=n.height+e,r=n.x-e/2,a=n.y-e/2,this.updateEachPathComponent(function(t){t[0]-=r,t[1]-=a}),this._updateInternalDims(i,o),this._updateInternalCoords(r,a),this.hasBeenTrimmedOnce=!0,this.applyZoomAndTranslate(t),this.setViewBox(0,0,this.size.w,this.size.h))},l.prototype.initControls=function(){},l.prototype.stroke=function(t){return t?(this._stroke=t,this):this._stroke},l.prototype.initFreehandControls=function(){this.controls=new r.StandardControls(this),this.initEventsHandlersControls()},l.prototype.init=function(){n.prototype.init.call(this);var t=this.pdfPage.dimensions,e=(this._updateInternalDims(t.w,t.h),this.dom);this.svg=o('<svg preserveAspectRatio="none" class="freehand-canvas" width="'+t.w+'" height="'+t.h+'">')[0],e.append(this.svg),this.bufferSize=4,this.strPath,this.currPath=null,this.buffer=[]},l.prototype.notifyDomAttachment=function(){},l.prototype.finalizeObject=function(){if(this.isObjectFinished)throw"[Editpdf] Object was already finalized";this.isObjectFinished=!0,this.markedForDestruction||(this.hasBeenTrimmedOnce||this.trim(),this.controls)||this.initFreehandControls(),this.triggerCustomEvent("canvas_object:interactive_object_finished",{canvasObject:this})},l.prototype._updateDom=function(){var e=this,t=this.svg;t.setAttribute("width",this.size.w),t.setAttribute("height",this.size.h),this.viewBox&&t.setAttribute("viewBox",this.viewBox),this.allPaths.forEach(function(t){t.setAttribute("stroke-width",e.zoomedStrokeWidth),t.setAttribute("stroke",e._stroke),t.setAttribute("stroke-linecap",e.lineCap),t.setAttribute("stroke-linejoin",e.lineCap)})},l.prototype.scalePath=function(t,i){var t=t.split(/[A-Z]/),o=[],r=(t.shift(),1);return t.forEach(function(t){var t=t.trim().split(" "),e=t[0],t=t[1],e=parseFloat(e)*i,t=parseFloat(t)*i,n=1===r?"M":"L";o.push(n+e+" "+t),r++}),o.join(" ")},l.prototype.applyZoomAndTranslate=function(t){var e=this.zoomLevel,n=t/e;this.zoomLevel=t,this.isInteractiveModeEnabled()?this.interactiveMode_applyZoomAndTranslate(e,t):this.isObjectFinished&&this.scaleSvg(n)},l.prototype.scaleSvg=function(i){var e,o=this,t=(this.completedPaths.each(function(t,e){var n=o.scalePath(e.getAttribute("d"),i);e.setAttribute("d",n)}),this.svg.getAttribute("viewBox"));t&&0<t.length&&(e=[],t.split(" ").forEach(function(t){e.push(Math.round(parseFloat(t)*i))}),this.setViewBox(e[0],e[1],e[2],e[3])),n.prototype.scaleSvg.call(this,i)},Object.defineProperty(l.prototype,"isObjectFinished",{get:function(){return this._isObjectFinished},set:function(t){this._isObjectFinished=t},enumerable:!1,configurable:!0}),l.prototype.interactiveMode_applyZoomAndTranslate=function(t,e){var i=this,o=e/t,t={w:(t=this.pdfPage.originalDimensions).w*e,h:t.h*e};this._updateInternalDims(t.w,t.h),this.hasUnfinishedPath()&&(this.buffer.forEach(function(t){t.x*=o,t.y*=o}),this.strPath=this.scalePath(this.strPath,o),this.updateUnfinishedSvgPath()),this.completedPaths.each(function(t,e){var n=i.scalePath(e.getAttribute("d"),o);e.setAttribute("d",n)})},l.prototype.initNewPath=function(t,e){void 0===e&&(e={}),this.currPath=document.createElementNS("http://www.w3.org/2000/svg","path"),o(this.currPath).addClass("unfinished"),this.currPath.setAttribute("fill","none"),this.currPath.setAttribute("stroke",this._stroke),this.currPath.setAttribute("stroke-width",this.zoomedStrokeWidth),this.buffer=[];e=e.pageCoords;this.appendToBuffer(e),this.strPath="M"+e.x+" "+e.y,this.currPath.setAttribute("d",this.strPath),this.svg.appendChild(this.currPath)},l.prototype.interactiveMode_mousedown=function(t,e){var n;void 0===e&&(e={}),!this.interactiveMode.enabled||t.which!==s.MOUSE.LeftClick&&0!==t.type.indexOf("touch")||(0<this.allPaths.length&&this.hasElapsedMoreThanSinceLastDrawnPath(this.split_elapsedSeconds)&&(n=Array.from(this.allPaths),this.createNewObjectExtractingPaths(n)),this.interactiveMode.lastPathTimestamp=null,this.initNewPath(t,e),this.updateDom())},l.prototype.interactiveMode_mousemove=function(t,e){void 0===e&&(e={}),this.interactiveMode.enabled&&this.currPath&&(this.appendToBuffer(e.pageCoords),this.updateUnfinishedSvgPath(),this.updateDom())},l.prototype.interactiveMode_mouseup=function(t,e){if(void 0===e&&(e={}),this.interactiveMode.enabled){if(t.which===s.MOUSE.RightClick)return!this.interactiveMode_isObjectEmpty()||void 0;this.currPath&&(this.updateUnfinishedSvgPath(!0),1<this.allPaths.length&&this.isLastPathFarFromPreviousOne()&&((e=Array.from(this.allPaths)).pop(),this.createNewObjectExtractingPaths(e)),this.interactiveMode.lastPathTimestamp=Date.now())}},l.prototype.interactiveMode_isObjectEmpty=function(){return 0===this.allPaths.length},l.prototype.createNewObjectExtractingPaths=function(t){t.forEach(function(t){return o(t).detach()});var e=this.clone(this);e.allPaths.forEach(function(t){return o(t).detach()}),t.forEach(function(t){e.svg.appendChild(t)}),(e.createdByParent=this).triggerCustomEvent("editor:add_canvas_object",{canvasObject:e,onAdded:function(){e.finalizeObject(),e.updateDom()}})},l.prototype.hasElapsedMoreThanSinceLastDrawnPath=function(t){var e;return!!this.interactiveMode.lastPathTimestamp&&(e=this.interactiveMode.lastPathTimestamp/1e3,t<=Date.now()/1e3-e)},l.prototype.isLastPathFarFromPreviousOne=function(){var t=this.lastTwoDrawnPaths;if(!this.isInteractiveModeEnabled())throw"[Editpdf] This method only works well in interactive mode";if(t.length<=1)throw"[Editpdf] There should be at least 2 paths to be able to compute";var e=this.split_allowedMaxPointsDistance*this.zoomLevel,n=this.split_distSamplingThreshold*this.zoomLevel,i=t[0],t=t[1],i=a.SvgHelper.getPointsInCurve(i,n),t=a.SvgHelper.getPointsInCurve(t,n),n=a.SvgHelper.findClosestPoints(i,t);return e<a.SvgHelper.computePointsDistance(n[0],n[1])},l.prototype.getInteractiveModeCopyAttrs=function(){return{strokeWidth:this.userStrokeWidth,strokeColor:this._stroke}},Object.defineProperty(l.prototype,"lastTwoDrawnPaths",{get:function(){var t,e=this.allPaths;return 1<e.length?[e[(t=e.length-1)-1],e[t]]:e},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"lastPath",{get:function(){var t=this.allPaths;return t[t.length-1]},enumerable:!1,configurable:!0}),l.prototype.strokeWidth_x1=function(t){var e;return t?(e=this.zoomedStrokeWidth,this._strokeWidth_x1=t,this.isObjectFinished&&this.adjustSvgSizeForNewStrokeWidth(e,this.zoomedStrokeWidth),this):this._strokeWidth_x1},l.prototype.adjustSvgSizeForNewStrokeWidth=function(t,e){var n=this.svg,i=e-t,e=(n.getAttribute("viewBox").split(" "),this.size.w),t=this.size.h,n=e+i,e=t+i,t=(this.updateEachPathComponent(function(t){t[0]+=i/2,t[1]+=i/2}),this._updateInternalDims(n,e),parseFloat(this.viewBox.split(" ")[2])),n=parseFloat(this.viewBox.split(" ")[3]);this.setViewBox(0,0,t+i,n+i),this._updateInternalCoords(this.coords.x-i/2,this.coords.y-i/2)},l.prototype.strokeWidth=function(t){return this.strokeWidth_x1(t/this.zoomLevel)},Object.defineProperty(l.prototype,"rect",{get:function(){return this.svg.getBoundingClientRect()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"strokeColor",{get:function(){return this.stroke()},enumerable:!1,configurable:!0}),l.prototype.getAveragePoint=function(t){var e=this.buffer.length;if(e%2==1||e>=this.bufferSize){for(var n,i=0,o=0,r=0,a=t;a<e;a++)r++,i+=(n=this.buffer[a]).x,o+=n.y;return{x:i/r,y:o/r}}return null},l.prototype.updateUnfinishedSvgPath=function(t){if(void 0===t&&(t=!1),this.hasUnfinishedPath()){var e=this.getAveragePoint(0);if(e){this.strPath+=" L"+e.x+" "+e.y;for(var n="",i=2;i<this.buffer.length;i+=2)n+=" L"+(e=this.getAveragePoint(i)).x+" "+e.y;this.currPath.setAttribute("d",this.strPath+n)}this.currPath&&t&&(o(this.currPath).removeClass("unfinished"),this.currPath=null)}},l.prototype.appendToBuffer=function(t){for(this.buffer.push(t);this.buffer.length>this.bufferSize;)this.buffer.shift()},l.prototype.getDefaultAttributes=function(){return Object.assign({},n.prototype.getDefaultAttributes.call(this),{size_x1:{w:0,h:0},strokeWidth:l.currentDefaultStrokeWidth,strokeColor:l.currentDefaultStrokeColor})},l.prototype.setAttributes=function(t){n.prototype.setAttributes.call(this,t=void 0===t?{}:t),"strokeWidth"in t&&(this.userStrokeWidth=t.strokeWidth,l.currentDefaultStrokeWidth=t.strokeWidth),"strokeColor"in t&&(this._stroke=t.strokeColor,l.currentDefaultStrokeColor=t.strokeColor)},Object.defineProperty(l.prototype,"allPaths",{get:function(){return this.svg.querySelectorAll("path")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"completedPaths",{get:function(){return o(this.svg).find("path:not(.unfinished)")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"unfinishedPath",{get:function(){return o(this.svg).find("path.unfinished")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"zoomedStrokeWidth",{get:function(){return this.strokeWidth()*this.zoomLevel},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"userStrokeWidth",{get:function(){return this._strokeWidth_x1},set:function(t){this.strokeWidth_x1(t)},enumerable:!1,configurable:!0}),l.prototype.hasUnfinishedPath=function(){return this.isInteractiveModeEnabled()&&this.currPath},l.prototype.setInteractiveModeOn=function(){this.interactiveMode.enabled=!0},l.prototype.setInteractiveModeOff=function(){this.interactiveMode.enabled=!1,this.isObjectFinished||(this.finalizeObject(),this.updateDom())},l.prototype.getAttributes=function(){return Object.assign({},n.prototype.getAttributes.call(this),{strokeWidth:this._strokeWidth_x1,strokeColor:this._stroke})},l.prototype.clone=function(t){var n=new l(t.pdfPage);n.cloned=!0,n.cloning=!0,n.zoomLevel=t.zoomLevel,n.isObjectFinished=t.isObjectFinished,n.viewBox=t.viewBox,n.hasBeenTrimmedOnce=t.hasBeenTrimmedOnce,this.allPaths.forEach(function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("fill",t.getAttribute("fill")),e.setAttribute("stroke",t.getAttribute("stroke")),e.setAttribute("stroke-width",t.getAttribute("stroke-width")),e.setAttribute("d",t.getAttribute("d")),o(n.svg).append(e)});t.viewBox&&n.svg.setAttribute("viewBox",t.viewBox);t=t.getAttributes();return n.setAttributes(t),n.initFreehandControls(),n.cloning=!1,n},l.currentDefaultStrokeColor="#000000",l.currentDefaultStrokeWidth=4,l);function l(){var t=null!==n&&n.apply(this,arguments)||this;return t.lineCap="round",t.buffer=[],t.hasBeenTrimmedOnce=!1,t._isObjectFinished=!1,t.split_elapsedSeconds=3,t.split_allowedMaxPointsDistance=300,t.split_distSamplingThreshold=5,t}c.Freehand=e}.call(this,u(1))},function(t,e,n){"use strict";function i(){}Object.defineProperty(e,"__esModule",{value:!0}),e.SvgHelper=void 0,i.getPointsInCurve=function(t,i){var t=t.getAttribute("d").split(/[a-zA-Z]/g).map(function(t){return t.trim()}),o=(t.shift(),[]),r=t.shift().split(" "),r={x:Number(r[0]),y:Number(r[1])};return o.push(r),t.forEach(function(t){var t=t.split(" "),e=t[0],t=t[1],e=Number(e),t=Number(t),n=Math.abs(e-r.x)+Math.abs(t-r.y);i<n&&(r={x:e,y:t},o.push(r))}),o},i.findClosestPoints=function(t,e){var o=1e8,r=[];return t.forEach(function(i){e.forEach(function(t){n=i,e=t;var e,n=Math.abs(n.x-e.x)+Math.abs(n.y-e.y);n<o&&(o=n,r=[i,t])})}),r},i.computePointsDistance=function(t,e){var n=Math.abs(t.x-e.x),t=Math.abs(t.y-e.y);return Math.sqrt(n*n+t*t)},e.SvgHelper=i},function(t,a,s){"use strict";!function(n){var i,t,e=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(a,"__esModule",{value:!0}),a.Symbol=void 0,s(369)),o=(t=o.SvgObject,e(r,t),Object.defineProperty(r.prototype,"type",{get:function(){return"symbol"},enumerable:!1,configurable:!0}),r.prototype.setSize=function(t,e){return this._updateInternalDims(t,e),this},r.prototype.getDefaultAttributes=function(){return Object.assign({},t.prototype.getDefaultAttributes.call(this),{size_x1:{w:60,h:60}})},r.prototype.notifyDomAttachment=function(){t.prototype.notifyDomAttachment.call(this),this.dom.append(this.svg)},Object.defineProperty(r.prototype,"keepAlwaysAspectRatio",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"controlAnchors",{get:function(){return["top_left","top_right","bottom_left","bottom_right"]},enumerable:!1,configurable:!0}),r.prototype.clone=function(t){var e=new r(t.pdfPage),t=(e.cloned=!0,e.cloning=!0,e.zoomLevel=t.zoomLevel,e.svg=n(t.svg.outerHTML)[0],t.getAttributes());return e.setAttributes(t),e.cloning=!1,e},r);function r(){return null!==t&&t.apply(this,arguments)||this}a.Symbol=o}.call(this,s(1))},function(t,s,l){"use strict";!function(t){var i,n,e=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(s,"__esModule",{value:!0}),s.FormCheckbox=void 0,l(292)),r=l(254),e=(n=o.FormBase,e(a,n),Object.defineProperty(a.prototype,"type",{get:function(){return"formcheckbox"},enumerable:!1,configurable:!0}),a.prototype.initDom=function(){var e=this;n.prototype.initDom.call(this),this.setCoords_x1(this.calculatedWidgetSizeAndCoords_x1.coords_x1.x,this.calculatedWidgetSizeAndCoords_x1.coords_x1.y),this.setSize_x1(this.calculatedWidgetSizeAndCoords_x1.size_x1.w,this.calculatedWidgetSizeAndCoords_x1.size_x1.h),this.checkboxContainer=this.createCheckbox(),this.inputCheckbox=this.checkboxContainer.find("input"),this.inputCheckbox.attr("tabindex",this.tabindex),this.dom.append(this.checkboxContainer),this.inputCheckbox.change(function(){e._cachedValue=e.inputCheckbox.prop("checked"),e.siblings.forEach(function(t){t.inputCheckbox.prop("checked",e._cachedValue),t._cachedValue=e._cachedValue}),e.notifyListenersOfChange()}),this.pdfFormField.readOnlyFlag&&this.inputCheckbox.click(function(t){return t.preventDefault()})},a.prototype._updateDom=function(){var t=this.size_x1.w/this.checkboxContainer.width(),e=this.size_x1.h/this.checkboxContainer.height();t*=this.zoomLevel,e*=this.zoomLevel,this.transformCssScaleX=t,this.transformCssScaleY=e},Object.defineProperty(a.prototype,"inputs",{get:function(){return this.inputCheckbox},enumerable:!1,configurable:!0}),a.prototype.initInputValue=function(){this.pdfFormField.checkedFlag&&(this._cachedValue=!0,this.inputCheckbox.prop("checked",!0))},a.prototype.getInputValue=function(){return this.inputCheckbox.prop("checked")},a.prototype.validate=function(){var t={};return this.isRequired&&!this.cachedValue&&(t[o.VALIDATION_ERROR.Required]=!0),0<Object.keys(t).length?this.setFlagWithValidationError():this.clearFlagWithValidationError(),t},Object.defineProperty(a.prototype,"cachedValue",{get:function(){return this._cachedValue},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"initialExportValue",{get:function(){return this.pdfFormField.checkedFlag},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"exportValue",{get:function(){return this.cachedValue},enumerable:!1,configurable:!0}),a.prototype.createCheckbox=function(){return t('\n    <label class="editpdf-checkbox">\n      <input data-widget-index=\''+this.widgetIndex+'\' type="checkbox">\n      <span class="editpdf-checkbox--checkmark">\n        '+r.IconRepository.formCheckboxCheckmark()+"\n      </span>\n    </label>\n    ")},a);function a(){var t=null!==n&&n.apply(this,arguments)||this;return t._cachedValue=!1,t}s.FormCheckbox=e}.call(this,l(1))},function(t,s,l){"use strict";!function(t){var i,e,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),o=0,e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i},r=(Object.defineProperty(s,"__esModule",{value:!0}),s.FormRadiobutton=void 0,l(292)),n=(e=r.FormBase,n(a,e),Object.defineProperty(a.prototype,"type",{get:function(){return"formradiobutton"},enumerable:!1,configurable:!0}),a.prototype.createRadioButton=function(){return t('<label class="editpdf-radiobutton">\n        <input data-widget-index=\''+this.widgetIndex+'\' type="radio" name="radio_'+this.id+'">\n        <span class="editpdf-radiobutton--checkmark"></span>\n      </label>')},a.prototype.initDom=function(){var t=this;e.prototype.initDom.call(this),this.setCoords_x1(this.calculatedWidgetSizeAndCoords_x1.coords_x1.x,this.calculatedWidgetSizeAndCoords_x1.coords_x1.y),this.setSize_x1(this.calculatedWidgetSizeAndCoords_x1.size_x1.w,this.calculatedWidgetSizeAndCoords_x1.size_x1.h),this.radioButtonContainer=this.createRadioButton(),this.inputRadioButton=this.radioButtonContainer.find("input"),this.inputRadioButton.attr("tabindex",this.tabindex),this.dom.append(this.radioButtonContainer),this.pdfFormField.readOnlyFlag&&this.inputRadioButton.click(function(t){return t.preventDefault()}),this.inputRadioButton.change(function(){t._cachedValue=!0,t.notifyListenersOfChange(),t.hasGroupElements()&&t.deselectAllGroupElements()})},a.prototype.deselectAllGroupElements=function(){this.siblings.forEach(function(t){t.inputRadioButton.prop("checked",!1),t._cachedValue=!1})},a.prototype._updateDom=function(){var t=this.size_x1.w/this.radioButtonContainer.width(),e=this.size_x1.h/this.radioButtonContainer.height();t*=this.zoomLevel,e*=this.zoomLevel,this.transformCssScaleX=t,this.transformCssScaleY=e},Object.defineProperty(a.prototype,"inputs",{get:function(){return this.inputRadioButton},enumerable:!1,configurable:!0}),a.prototype.initInputValue=function(){this.pdfFormField.optionTextArray.indexOf(this.pdfFormField.selectedValue)===this.widgetIndex&&(this._cachedValue=!0,this.inputRadioButton.prop("checked",!0))},a.prototype.getInputValue=function(){return this.inputRadioButton.prop("checked")},Object.defineProperty(a.prototype,"exportValue",{get:function(){for(var t=null,e=0;e<this.groupElements.length;e++){var n=this.groupElements[e];if(n.cachedValue){t=n.pdfFormField.optionTextArray[n.widgetIndex];break}}return t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"initialExportValue",{get:function(){return this.pdfFormField.selectedValue},enumerable:!1,configurable:!0}),a.prototype.validate=function(){var e={};return this.isRequired&&!this.exportValue&&(e[r.VALIDATION_ERROR.Required]=!0),o([this],this.siblings).forEach(function(t){0<Object.keys(e).length?t.setFlagWithValidationError():t.clearFlagWithValidationError()}),e},Object.defineProperty(a.prototype,"cachedValue",{get:function(){return this._cachedValue},enumerable:!1,configurable:!0}),a);function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._cachedValue=!1,t}s.FormRadiobutton=n}.call(this,l(1))},function(t,a,s){"use strict";!function(n){var i,e,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(a,"__esModule",{value:!0}),a.FormCombobox=void 0,s(292)),t=(e=o.FormBase,t(r,e),Object.defineProperty(r.prototype,"type",{get:function(){return"formcombobox"},enumerable:!1,configurable:!0}),r.prototype.initDom=function(){var t=this;e.prototype.initDom.call(this),this.setCoords_x1(this.calculatedWidgetSizeAndCoords_x1.coords_x1.x,this.calculatedWidgetSizeAndCoords_x1.coords_x1.y),this.setSize_x1(this.calculatedWidgetSizeAndCoords_x1.size_x1.w,this.calculatedWidgetSizeAndCoords_x1.size_x1.h),this.inputSelect=n("<select></select>"),this.dom.append(this.inputSelect),this.inputSelect.attr("tabindex",this.tabindex),this.fillComboBox(),this.pdfFormField.readOnlyFlag&&this.inputSelect.prop("disabled",!0),this.inputSelect.change(function(){t._cachedValue=t.inputSelect.val(),t.notifyListenersOfChange()})},r.prototype._updateDom=function(){var t=this.inputSelect,e=this.padding;t.css("width",this.size.w),t.css("height",this.size.h),t.css("fontSize",this.fontSize*this.zoomLevel),t.css("fontFamily",this.fontFamily),t.css("padding",e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px"),t.html(this.text)},r.prototype.fillComboBox=function(){var e=this;this.pdfFormField.optionTextArray.forEach(function(t){t=n("<option>"+t+"</option>");e.inputSelect.append(t)})},Object.defineProperty(r.prototype,"inputs",{get:function(){return this.inputSelect},enumerable:!1,configurable:!0}),r.prototype.initInputValue=function(){this._cachedValue=this.pdfFormField.selectedValue,this.inputSelect.val(this.pdfFormField.selectedValue)},r.prototype.getInputValue=function(){return this.inputSelect.val()},r.prototype.validate=function(){var t={};return!this.isRequired||this.cachedValue&&0<this.cachedValue.length||(t[o.VALIDATION_ERROR.Required]=!0),0<Object.keys(t).length?this.setFlagWithValidationError():this.clearFlagWithValidationError(),t},Object.defineProperty(r.prototype,"cachedValue",{get:function(){return this._cachedValue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"exportValue",{get:function(){return this.cachedValue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"initialExportValue",{get:function(){return this.pdfFormField.selectedValue},enumerable:!1,configurable:!0}),r);function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.fontSize=16,t.fontFamily="Verdana",t}a.FormCombobox=t}.call(this,s(1))},function(t,a,s){"use strict";!function(n){var i,o,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),e=(Object.defineProperty(a,"__esModule",{value:!0}),a.FormListbox=void 0,s(292)),t=(o=e.FormBase,t(r,o),Object.defineProperty(r.prototype,"type",{get:function(){return"formlistbox"},enumerable:!1,configurable:!0}),r.prototype.initDom=function(){var e=this;o.prototype.initDom.call(this),this.setCoords_x1(this.calculatedWidgetSizeAndCoords_x1.coords_x1.x,this.calculatedWidgetSizeAndCoords_x1.coords_x1.y),this.setSize_x1(this.calculatedWidgetSizeAndCoords_x1.size_x1.w,this.calculatedWidgetSizeAndCoords_x1.size_x1.h),this.inputSelect=n("<select></select>"),this.pdfFormField.multiSelect&&this.inputSelect.prop("multiple",!0),this.dom.append(this.inputSelect),this.inputSelect.attr("tabindex",this.tabindex),this.fillListBox(),this.inputSelect.css("background","white"),this.inputSelect.css("padding","4px"),this.inputSelect.attr("size",this.pdfFormField.optionTextArray.length),this.pdfFormField.readOnlyFlag&&this.inputSelect.prop("disabled",!0),this.inputSelect.change(function(){var t=e.inputSelect.val();e._cachedValue=Array.isArray(t)?t:[t],e.notifyListenersOfChange()})},r.prototype._updateDom=function(){var t=this.inputSelect;t.css("width",this.size.w),t.css("height",this.size.h),t.css("fontSize",this.fontSize*this.zoomLevel),t.css("fontFamily",this.fontFamily),t.html(this.text)},r.prototype.fillListBox=function(){var e=this;this.pdfFormField.optionTextArray.forEach(function(t){t=n("<option>"+t+"</option>");e.inputSelect.append(t)})},Object.defineProperty(r.prototype,"inputs",{get:function(){return this.inputSelect},enumerable:!1,configurable:!0}),r.prototype.initInputValue=function(){var t=this.pdfFormField.selectedItemTextArray;t?(t=Array.isArray(t)?t:[t],this._cachedValue=t,this.inputSelect.val(t)):this.inputSelect.val("")},r.prototype.getInputValue=function(){return this.inputSelect.val()},Object.defineProperty(r.prototype,"cachedValue",{get:function(){return this._cachedValue},enumerable:!1,configurable:!0}),r.prototype.validate=function(){var t={};return!this.isRequired||this.cachedValue&&0<this.cachedValue.length||(t[e.VALIDATION_ERROR.Required]=!0),0<Object.keys(t).length?this.setFlagWithValidationError():this.clearFlagWithValidationError(),t},Object.defineProperty(r.prototype,"exportValue",{get:function(){return this.cachedValue},enumerable:!1,configurable:!0}),r.prototype.didFormValueChanged=function(){if(this.initialExportValue.length!==this.exportValue.length)return!0;for(var t=this.initialExportValue.sort(),e=this.exportValue.sort(),n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1},Object.defineProperty(r.prototype,"initialExportValue",{get:function(){return this.pdfFormField.selectedItemTextArray},enumerable:!1,configurable:!0}),r);function r(){var t=null!==o&&o.apply(this,arguments)||this;return t.fontSize=16,t.fontFamily="Verdana",t._cachedValue=[],t}a.FormListbox=t}.call(this,s(1))},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.FormCombtext=void 0,n(370)),n=(o=n.FormTextbox,r(a,o),Object.defineProperty(a.prototype,"type",{get:function(){return"formcombtext"},enumerable:!1,configurable:!0}),a.prototype._updateDom=function(){o.prototype._updateDom.call(this);var t=this.size_x1.w*this.zoomLevel/(2*this.pdfFormField.maxTextLen-1);this.inputText.css("letter-spacing",t+"px")},a);function a(){return null!==o&&o.apply(this,arguments)||this}e.FormCombtext=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormManager=void 0;var i=n(488),o=n(253),d=["textbox","checkbox","combobox","listbox","radiobutton","combtext"];function r(t){this.fields=[],this.ignoredFields=[],this.widgetHiddenFields=[],this.canvasObjects=[],this.errors={},this.changeListeners=[],this.fields=r.sortFieldsByPosition(r.discardForms(t)).map(function(t){return new i.PdfFormField(t)})}r.prototype.render=function(a){for(var s=null,l=null,c=this.fields,u=this,t=0;t<c.length;t++)!function(t){var e=c[t];if(!0===e.widgetHiddenFlag)return u.widgetHiddenFields.push(e);if(!d.includes(e.typeOfField))return u.ignoredFields.push(e);for(var n=[],i=e.widgetsInformation,o=0;o<i.length;o++){l=s;var r=e.page;s=a.pageStack.createObjectInPage(a.pageStack.getPage(r),"form_"+e.typeOfField,{form:{field:e,widgetIndex:o}}),u.canvasObjects.push(s),n.push(s),(s.prevFormObject=l)&&(l.nextFormObject=s),1<n.length&&n.forEach(function(t){t.groupElements=n}),s.initInputValue(),s.onCustomEvent("form:input:change",u.formObjectChangeHandler.bind(u))}}(t);window.addEventListener("form_manager:input:focus_change_request",o.HRS("form_manager:input:focus_change_request",function(t){t.detail.newFocus.inputs.focus()}));var e=new CustomEvent("editpdf:form:init",{detail:{formManager:this}});window.dispatchEvent(e)},r.prototype.formObjectChangeHandler=function(t){var e=this,n=t.canvasObject,t=n.validate();0<Object.keys(t).length?this.errors[n.formId]={canvasObject:n,errors:t}:delete this.errors[n.formId],this.changeListeners.forEach(function(t){t(e.errors[n.formId])})},r.prototype.onFieldChange=function(t){this.changeListeners.push(t)},r.prototype.validate=function(t){var i=this;return(t=void 0!==t&&t)?(this.errors={},this.canvasObjects.forEach(function(t){var e=t.validate(),n=Object.keys(e).length;0<n&&(i.errors[t.formId]={canvasObject:t,errors:e,errorsCount:n})}),this.errors):Object.values(this.errors)},r.prototype.focusOnNextFormObject=function(t){t.nextFormObject&&t.nextFormObject.inputs.eq(0).focus()},r.prototype.focusOnPrevFormObject=function(t){t.prevFormObject&&t.prevFormObject.inputs.eq(0).focus()},r.prototype.getFoundTypes=function(){return Array.from(new Set(this.fields.map(function(t){return t.typeOfField})))},r.discardForms=function(t){return t.filter(function(t){return!["form","subform"].includes(t.typeOfField)})},r.sortFieldsByPosition=function(t){return t.sort(function(t,e){return t.page===e.page?Math.round(e.widgetsInformation[0].top/10)-Math.round(t.widgetsInformation[0].top/10)||Math.round(t.widgetsInformation[0].left)-Math.round(e.widgetsInformation[0].left):t.page-e.page})},e.FormManager=r},function(t,e,n){"use strict";function o(t){this.errors=[],this.props=t,Object.assign(this,t),this.makeValidation()}Object.defineProperty(e,"__esModule",{value:!0}),e.PdfFormField=void 0,o.prototype.hasErrors=function(){return 0<this.errors.length},o.prototype.makeValidation=function(){function e(t){return void 0===n[t]}var n=this,i=[],t=(o.FIELD_TYPES.includes(this.typeOfField)||i.push("Unknown field type '"+this.typeOfField+"'"),o.MANDATORY_FIELDS.forEach(function(t){e(t)&&i.push("Mandatory field '"+t+"' is empty!")}),[]);switch(this.typeOfField){case"text":t=["textValue","textAlignment","maxTextLen","fontSize"];break;case"textbox":t=["textValue","textAlignment","maxTextLen","fontSize","multilineFlag","passwordFlag","spellCheckFlag","scrollFlag"];break;case"checkbox":t=["checkedFlag"];break;case"choice":case"combobox":t=["numOfOptions","optionTextArray","selectedValue"];break;case"listbox":t=["multiSelect","numOfOptions","optionTextArray","numOfSelectedItems","selectedItemTextArray"];break;case"radiobutton":t=["numOfOptions","optionTextArray","selectedValue"];break;case"combtext":t=["textValue","textAlignment","maxTextLen","fontSize","passwordFlag"]}t.forEach(function(t){e(t)&&i.push("Field '"+t+"' should be filled for type "+n.typeOfField)}),this.errors=i},o.FIELD_TYPES=["subform","form","text","textbox","pushbutton","checkbox","radiobutton","choice","listbox","combobox","combtext"],o.MANDATORY_FIELDS=["typeOfField","fieldId","readOnlyFlag","mandatoryFlag","page","numOfWidgets","widgetHiddenFlag","widgetsInformation"],e.PdfFormField=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditpdfClipboard=void 0,e.EditpdfClipboard=function(t){this.clipboardCanvasObject=null,this.editor=t}},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.SubmenuImg=void 0,n(222)),n=(o=n.SubmenuBase,r(a,o),a.prototype.compose=function(){var e=this,t=this.block.bind(this);return t("opacity",function(t){e.selectElement("opacity","getOpacityCollection","canvasObject.opacity",{leftsideIcon:"opacityCheckerboard",tooltip:e.opacityTooltip()})}),t("rotation",function(t){e.actionButton("rotateLeft",function(){e.canvasObject.rotateLeft()},{innerIcon:"rotateLeft",tooltip:e.rotateLeftTooltip()}),e.actionButton("rotateRight",function(){e.canvasObject.rotateRight()},{innerIcon:"rotateRight",tooltip:e.rotateRightTooltip()})}),this.blocks},a);function a(){return null!==o&&o.apply(this,arguments)||this}e.SubmenuImg=n},function(t,e,n){"use strict";function i(){}Object.defineProperty(e,"__esModule",{value:!0}),e.SymbolRepository=void 0,i.getAllAsObject=function(){return{smiley:this.smiley(),sad:this.sad(),neutral:this.neutral(),heart:this.heart(),exclamation:this.exclamation(),question:this.question(),check:this.check(),cross:this.cross()}},i.exclamation=function(){return'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-293.000000, -645.000000)"> <rect fill-opacity="0" fill="#D8D8D8" x="293" y="645" width="16" height="16"></rect> <path d="M301.391304,658.217391 C302.159701,658.217391 302.782609,658.840299 302.782609,659.608696 C302.782609,660.377092 302.159701,661 301.391304,661 C300.622908,661 300,660.377092 300,659.608696 C300,658.840299 300.622908,658.217391 301.391304,658.217391 Z M302.230534,645 C302.60309,645 302.907244,645.292864 302.925335,645.660932 L302.92609,645.707229 L302.92609,645.707229 L302.560984,656.675324 C302.548499,657.050303 302.240904,657.347826 301.865717,657.347826 L300.966321,657.347826 C300.58857,657.347826 300.279851,657.046366 300.270865,656.668722 L300.01016,645.7122 C300.001297,645.33975 300.286843,645.028716 300.654377,645.001874 L300.69734,645 L302.230534,645 Z" fill="#424242"></path> </g> </g> </svg>'},i.question=function(){return'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-296.000000, -609.000000)" fill="#424242"> <path d="M302.956522,622.217391 C303.724918,622.217391 304.347826,622.840299 304.347826,623.608696 C304.347826,624.377092 303.724918,625 302.956522,625 C302.188126,625 301.565217,624.377092 301.565217,623.608696 C301.565217,622.840299 302.188126,622.217391 302.956522,622.217391 Z M304.44546,609 C305.020593,609 305.569072,609.085185 306.090896,609.255554 C306.612812,609.426015 307.093601,609.676256 307.533996,610.00646 C307.974208,610.336574 308.325663,610.78567 308.588361,611.353659 C308.850876,611.921831 308.982409,612.571524 308.982409,613.302646 C308.982409,614.168964 308.790698,614.878835 308.407275,615.432627 C308.037163,615.967322 307.329452,616.624437 306.597295,617.090985 L306.518771,617.140229 C306.394228,617.218861 306.219657,617.321687 305.995419,617.448708 L305.759579,617.582215 C305.591146,617.6781 305.453666,617.757909 305.347254,617.821797 L305.320286,617.839164 C305.123717,617.972017 304.386967,618.571849 304.211344,619.107167 C304.026228,619.671421 304.086112,619.978264 304.073564,620.840735 C304.069808,621.095007 303.847409,621.347826 303.593137,621.347826 L302.321759,621.347826 C301.894732,621.347826 301.823561,621.040586 301.807087,620.900751 L301.795451,620.777111 C301.763171,620.405596 301.622022,618.528921 301.883655,617.821797 C302.106909,617.21885 302.699257,616.79814 303.355792,616.410772 L303.532517,616.308948 L303.532517,616.308948 L304.207342,615.935202 C304.338137,615.862361 304.453658,615.79717 304.553846,615.739629 C304.72046,615.64382 304.921148,615.507158 305.155543,615.329644 C305.389754,615.152314 305.57771,614.978189 305.719959,614.80782 C305.861934,614.637359 305.98623,614.431542 306.092665,614.190094 C306.199191,613.948921 306.252409,613.696665 306.252409,613.433967 C306.252409,612.858833 306.048332,612.402684 305.640087,612.065426 C305.231659,611.728351 304.743726,611.559539 304.175737,611.559539 C303.290092,611.559539 302.518118,612.01514 301.860365,612.926523 C301.712895,613.130966 301.430503,613.182718 301.223038,613.039461 L300.193596,612.031653 C300.016875,611.868472 299.940804,611.652651 300.052186,611.445185 C300.429654,610.741909 300.986874,610.177837 301.69244,609.750815 C302.519372,609.250241 303.437259,609 304.44546,609 Z"></path> </g> </g> </svg>'},i.heart=function(){return'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-196.000000, -637.000000)" fill="#F44336"> <path d="M207.939394,637 C210.182005,637 212,639.0166 212,641.504202 C212,642.253648 211.834989,642.960344 211.54307,643.582025 L211.538574,643.596465 C210.819336,645.512451 208.528438,648.72332 204,653 C199.477783,648.50651 196.929956,645.306943 196.356517,643.401298 C196.343133,643.356819 196.329854,643.315048 196.324374,643.273345 C196.115897,642.730352 196,642.13229 196,641.504202 C196,639.0166 197.817995,637 200.060606,637 C201.962205,637 203.558505,638.449939 204,640.407512 C204.441495,638.449939 206.037795,637 207.939394,637 Z"></path> </g> </g> </svg>'},i.smiley=function(){return'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-112.000000, -944.000000)"> <g transform="translate(112.000000, 944.000000)"> <g> <circle fill="#FFEC3A" cx="8" cy="8" r="8"></circle> <circle fill="#424242" cx="5.11340206" cy="6.43298969" r="1"></circle> <circle fill="#424242" cx="11.0515464" cy="6.43298969" r="1"></circle> <path d="M11.0515464,8.94587629 C10.7996021,8.94587629 10.5953608,9.15011752 10.5953608,9.40206186 C10.5953608,10.5980551 9.47778001,11.5850515 8.08247423,11.5850515 C6.68716844,11.5850515 5.56958763,10.5980551 5.56958763,9.40206186 C5.56958763,9.15011752 5.36534639,8.94587629 5.11340206,8.94587629 C4.86145773,8.94587629 4.65721649,9.15011752 4.65721649,9.40206186 C4.65721649,11.1204192 6.19771717,12.4974227 8.08247423,12.4974227 C9.96723129,12.4974227 11.507732,11.1204192 11.507732,9.40206186 C11.507732,9.15011752 11.3034907,8.94587629 11.0515464,8.94587629 Z" fill="#424242" fill-rule="nonzero"></path> </g> </g> </g> </g> </svg>'},i.sad=function(){return'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-136.000000, -944.000000)"> <g transform="translate(136.000000, 944.000000)"> <circle fill="#FFEC3A" cx="8" cy="8" r="8"></circle> <circle fill="#424242" cx="5.11340206" cy="6.43298969" r="1"></circle> <circle fill="#424242" cx="11.0515464" cy="6.43298969" r="1"></circle> <path d="M8.08247423,8.61597938 C6.19771717,8.61597938 4.65721649,9.99298282 4.65721649,11.7113402 C4.65721649,11.9632845 4.86145773,12.1675258 5.11340206,12.1675258 C5.36534639,12.1675258 5.56958763,11.9632845 5.56958763,11.7113402 C5.56958763,10.515347 6.68716844,9.52835052 8.08247423,9.52835052 C9.47778001,9.52835052 10.5953608,10.515347 10.5953608,11.7113402 C10.5953608,11.9632845 10.7996021,12.1675258 11.0515464,12.1675258 C11.3034907,12.1675258 11.507732,11.9632845 11.507732,11.7113402 C11.507732,9.99298282 9.96723129,8.61597938 8.08247423,8.61597938 Z" fill="#424242" fill-rule="nonzero"></path> </g> </g> </g> </svg>'},i.neutral=function(){return'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-160.000000, -944.000000)"> <g transform="translate(160.000000, 944.000000)"> <circle fill="#FFEC3A" cx="8" cy="8" r="8"></circle> <circle fill="#424242" cx="5.11340206" cy="6.43298969" r="1"></circle> <circle fill="#424242" cx="11.0515464" cy="6.43298969" r="1"></circle> <path d="M10.7694887,9.45921174 L10.6946715,9.47998946 C10.5766955,9.50782183 10.3411552,9.55373362 10.0952603,9.58996375 L10.0035035,9.6030329 C9.40679085,9.68513728 8.72416127,9.72997202 8.02526255,9.72997202 C7.34212006,9.72997202 6.64679495,9.67985304 6.00695935,9.58798728 L5.68089728,9.5362872 C5.63013621,9.52739969 5.58146919,9.51843471 5.53535033,9.50947917 L5.29369316,9.45656796 L5.25451012,9.44559397 C5.07906921,9.36730296 4.88795195,9.39535144 4.75297781,9.51542728 C4.56474072,9.68288696 4.54789731,9.97123616 4.71535699,10.1594733 C4.92963193,10.4003342 6.35036635,10.6062835 7.68513918,10.6381284 L8.02400779,10.64234 L8.47831107,10.6357798 C9.69375968,10.601365 10.9040827,10.4361867 11.2234116,10.2507591 C11.4412871,10.1242435 11.5153489,9.84505925 11.3888332,9.62718376 C11.2763748,9.43351666 11.0432894,9.35348017 10.8398601,9.42694124 L10.7694887,9.45921174 Z" fill="#424242" fill-rule="nonzero" transform="translate(8.025298, 10.021170) scale(1, -1) translate(-8.025298, -10.021170) "></path> </g> </g> </g> </svg>'},i.check=function(){return'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-83.000000, -711.000000)" fill="#4CAF50"> <path d="M97.2554576,714.157395 L98.8426055,715.744542 C99.0524648,715.954402 99.0524648,716.294651 98.8426055,716.50451 L89.1444394,726.202676 C88.9345801,726.412536 88.5943308,726.412536 88.3844714,726.202676 L86.7973236,724.615529 C86.7545044,724.572709 86.720422,724.524462 86.6950762,724.473001 L83.1573945,720.935085 C82.9475352,720.725226 82.9475352,720.384976 83.1573945,720.175117 L84.7447776,718.587734 C84.954637,718.377875 85.2948862,718.377875 85.5047456,718.587734 L88.7847819,721.867723 L96.4954897,714.157395 C96.705349,713.947535 97.0455983,713.947535 97.2554576,714.157395 Z"></path> </g> </g> </svg>'},i.cross=function(){return'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-148.000000, -661.000000)" fill="#FF5722"> <path d="M161.727553,676.796254 L163.779986,674.741706 C164.051367,674.470045 164.051367,674.029595 163.779986,673.757934 L159.035079,669.008236 L163.796464,664.242066 C164.067845,663.970405 164.067845,663.529955 163.796464,663.258294 L161.744031,661.203746 C161.47265,660.932085 161.032654,660.932085 160.761273,661.203746 L156.000037,665.969891 L151.238727,661.203746 C150.967346,660.932085 150.52735,660.932085 150.255969,661.203746 L148.203536,663.258294 C147.932155,663.529955 147.932155,663.970405 148.203536,664.242066 L152.964822,669.008236 L148.220014,673.757934 C147.948633,674.029595 147.948633,674.470045 148.220014,674.741706 L150.272447,676.796254 C150.543828,677.067915 150.983824,677.067915 151.255205,676.796254 L155.999864,672.046581 L160.744795,676.796254 C161.016176,677.067915 161.456172,677.067915 161.727553,676.796254 Z"></path> </g> </g> </svg>'},e.SymbolRepository=i},function(t,l,c){"use strict";!function(n){var i,e,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(l,"__esModule",{value:!0}),l.SubmenuRect=void 0,c(222)),r=c(7),a=c(17),o=(e=o.SubmenuBase,t(s,e),s.prototype.compose=function(){var n=this,t=this.block.bind(this),i=this.canvasObject;return t("fillAndStrokeColor",function(t){n.colorPalette("fillColor","getDefaultAvailableColors","canvasObject.fillColor",{tooltip:n.fillColorTooltip(),tooltip_mount_reposition_callback:n.tooltip_mount_reposition_callback.bind(n)}),n.colorPalette("strokeColor","getDefaultAvailableColors","canvasObject.strokeColor",{tooltip:n.strokeColorTooltip(),tooltip_mount_reposition_callback:n.tooltip_mount_reposition_callback2.bind(n)})}),t("rotation",function(t){n.actionButton("rotateLeft",function(){n.canvasObject.rotateLeft()},{innerIcon:"rotateLeft",tooltip:n.rotateLeftTooltip()}),n.actionButton("rotateRight",function(){n.canvasObject.rotateRight()},{innerIcon:"rotateRight",tooltip:n.rotateRightTooltip()})}),t("opacity",function(t){n.selectElement("opacity","getOpacityCollection","canvasObject.opacity",{leftsideIcon:"opacityCheckerboard",tooltip:n.opacityTooltip()})}),t("strokeWidth",function(t){var e="transparent"===i.strokeColor;n.inputNumberElement("strokeWidth",{from:1,to:50,unit:"pt"},"canvasObject._strokeWidth_x1",{leftIcon:"strokeWidth",disabled:e,tooltip:n.strokeTooltip()}),n.tippy_noBorderColorApplied=n.addTooltip(n.currBlock,{text:r.Lang.t("tooltip_noBorderColorApplied"),allowOnWrapper:!0}),n.afterRenderCallbacks.push(function(){var t=n.canvasObject.strokeColor;n.updateAvailabilityOfStrokeWidthInput(t)})}),this.onInternalEvent("color_palette:change",function(t){"strokeColor"===t.eventOriginator&&n.updateAvailabilityOfStrokeWidthInput(t.newValue)}),this.blocks},s.prototype.tooltip_mount_reposition_callback=function(t){var e="0px";this.isPreviewSidebarOpened()&&(e=this.mustAlignSubmenuToCenter()?"0px":"-63px"),n(t.popper).find(".tippy-box").css(a.Tools.textDirection,e)},s.prototype.tooltip_mount_reposition_callback2=function(t){var e="0px";this.isPreviewSidebarOpened()&&(e=this.mustAlignSubmenuToCenter()?"0px":"-108px"),n(t.popper).find(".tippy-box").css(a.Tools.textDirection,e)},Object.defineProperty(s.prototype,"strokeWidthInputDom",{get:function(){return this.submenu.find('[data-name="strokeWidth"] .editpdf__submenu__input-number')},enumerable:!1,configurable:!0}),s.prototype.updateAvailabilityOfStrokeWidthInput=function(t){t.match("transparent")?(this.strokeWidthInputDom.addClass("disabled"),this.tippy_noBorderColorApplied.enable()):(this.strokeWidthInputDom.removeClass("disabled"),this.tippy_noBorderColorApplied.disable())},s);function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.tippy_noBorderColorApplied=null,t}l.SubmenuRect=o}.call(this,c(1))},function(t,l,c){"use strict";!function(n){var i,e,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(l,"__esModule",{value:!0}),l.SubmenuEllipse=void 0,c(222)),r=c(7),a=c(17),o=(e=o.SubmenuBase,t(s,e),s.prototype.compose=function(){var n=this,t=this.block.bind(this),i=this.canvasObject;return t("fillAndStrokeColor",function(t){n.colorPalette("fillColor","getDefaultAvailableColors","canvasObject.fillColor",{tooltip:n.fillColorTooltip(),tooltip_mount_reposition_callback:n.tooltip_mount_reposition_callback.bind(n)}),n.colorPalette("strokeColor","getDefaultAvailableColors","canvasObject.strokeColor",{tooltip:n.strokeColorTooltip(),tooltip_mount_reposition_callback:n.tooltip_mount_reposition_callback2.bind(n)})}),t("opacity",function(t){n.selectElement("opacity","getOpacityCollection","canvasObject.opacity",{leftsideIcon:"opacityCheckerboard",tooltip:n.opacityTooltip()})}),t("strokeWidth",function(t){var e="transparent"===i.strokeColor;n.inputNumberElement("strokeWidth",{from:1,to:50,unit:"pt"},"canvasObject._strokeWidth_x1",{leftIcon:"strokeWidth",disabled:e,tooltip:n.strokeTooltip()}),n.tippy_noBorderColorApplied=n.addTooltip(n.currBlock,{text:r.Lang.t("tooltip_noBorderColorApplied"),allowOnWrapper:!0}),n.afterRenderCallbacks.push(function(){var t=n.canvasObject.strokeColor;n.updateAvailabilityOfStrokeWidthInput(t)})}),this.onInternalEvent("color_palette:change",function(t){"strokeColor"===t.eventOriginator&&n.updateAvailabilityOfStrokeWidthInput(t.newValue)}),this.blocks},s.prototype.tooltip_mount_reposition_callback=function(t){var e="0px";this.isPreviewSidebarOpened()&&(e=this.mustAlignSubmenuToCenter()?"0px":"-63px"),n(t.popper).find(".tippy-box").css(a.Tools.textDirection,e)},s.prototype.tooltip_mount_reposition_callback2=function(t){var e="0px";this.isPreviewSidebarOpened()&&(e=this.mustAlignSubmenuToCenter()?"0px":"-108px"),n(t.popper).find(".tippy-box").css(a.Tools.textDirection,e)},Object.defineProperty(s.prototype,"strokeWidthInputDom",{get:function(){return this.submenu.find('[data-name="strokeWidth"] .editpdf__submenu__input-number')},enumerable:!1,configurable:!0}),s.prototype.updateAvailabilityOfStrokeWidthInput=function(t){t.match("transparent")?(this.strokeWidthInputDom.addClass("disabled"),this.tippy_noBorderColorApplied.enable()):(this.strokeWidthInputDom.removeClass("disabled"),this.tippy_noBorderColorApplied.disable())},s);function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.tippy_noBorderColorApplied=null,t}l.SubmenuEllipse=o}.call(this,c(1))},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.SubmenuText=void 0,n(222)),s=n(254),n=(o=a.SubmenuBase,r(l,o),l.prototype.compose=function(){var e=this,t=this.block.bind(this);return t("fontFamilyAndSize",function(t){e.selectElement("fontFamily","getAvailableFonts","canvasObject.fontFamily",{leftsideIcon:"fontFamily"}),e.selectElement("fontSize","getAvailableFontSizes","canvasObject.fontSize",{leftsideIcon:"fontSize"})}),t("fontTransformationsAndColor",function(t){e.switchButton("isBold","canvasObject.isBold",{innerIcon:"textBold",tooltip:e.textBoldTooltip()}),e.switchButton("isItalics","canvasObject.isItalics",{innerIcon:"textItalics",tooltip:e.textItalicTooltip()}),e.switchButton("isUnderline","canvasObject.isUnderline",{innerIcon:"textUnderline",tooltip:e.textUnderlineTooltip()}),e.colorPalette("textFillColor","getDefaultAvailableColors","canvasObject.textFillColor",{innerIcon:"textFillColor",tooltip:e.textColorTooltip()}),e.colorPalette("textBackgroundColor","getDefaultAvailableColors","canvasObject.textBackgroundColor",{innerIcon:"textBackgroundColor",tooltip:e.textBgColorTooltip()})}),t("alignment",function(t){e.contextualMenu("textAlignment","getAlignmentCollection","canvasObject.textAlignment",{tooltip:e.textAlignTooltip()})}),t("opacity",function(t){e.selectElement("opacity","getOpacityCollection","canvasObject.opacity",{leftsideIcon:"opacityCheckerboard",tooltip:e.opacityTooltip()})}),this.blocks},l.prototype.getAlignmentCollection=function(){return{left:s.IconRepository.textLeftAlignment(),center:s.IconRepository.textCenterAlignment(),right:s.IconRepository.textRightAlignment()}},l.prototype.updateFontFamily=function(){var t,e=this.canvasObject,n=this.getAvailableFonts(),i=this.submenu.find("#fontFamily_select");if(i.length<=0)throw"[Editpdf][Submenu] FontFamily select DOM not found";for(t in n)i.find("option[value='"+t+"']").prop("disabled",!1===n[t].enabled);i.val(e.fontFamily)},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.SubmenuText=n},function(t,s,l){"use strict";!function(n){var i,t,e=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(s,"__esModule",{value:!0}),s.SubmenuLine=void 0,l(222)),r=l(17),o=(t=o.SubmenuBase,e(a,t),a.prototype.compose=function(){var e=this,t=this.block.bind(this);return t("strokeColor",function(t){e.colorPalette("strokeColor","getDefaultAvailableColors","canvasObject.strokeColor",{displayColorSampleAsFillColor:!0,tooltip:e.colorTooltip(),tooltip_mount_reposition_callback:e.tooltip_mount_reposition_callback.bind(e)})}),t("strokeWidth",function(t){e.inputNumberElement("strokeWidth",{from:1,to:50,unit:"pt"},"canvasObject._strokeWidth_x1",{leftIcon:"strokeWidth",tooltip:e.strokeTooltip()})}),this.blocks},a.prototype.tooltip_mount_reposition_callback=function(t){var e="0px";this.isPreviewSidebarOpened()&&(e=this.mustAlignSubmenuToCenter()?"0px":"-63px"),n(t.popper).find(".tippy-box").css(r.Tools.textDirection,e)},a);function a(){return null!==t&&t.apply(this,arguments)||this}s.SubmenuLine=o}.call(this,l(1))},function(t,s,l){"use strict";!function(n){var i,t,e=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(s,"__esModule",{value:!0}),s.SubmenuFreehand=void 0,l(222)),r=l(17),o=(t=o.SubmenuBase,e(a,t),a.prototype.compose=function(){var e=this,t=this.block.bind(this);return t("fillAndStrokeColor",function(t){e.colorPalette("strokeColor","getDefaultAvailableColors","canvasObject.strokeColor",{displayColorSampleAsFillColor:!0,tooltip:e.colorTooltip(),tooltip_mount_reposition_callback:e.tooltip_mount_reposition_callback.bind(e)})}),t("strokeWidth",function(t){e.inputNumberElement("strokeWidth",{from:1,to:50,unit:"pt"},"canvasObject.userStrokeWidth",{leftIcon:"strokeWidth",tooltip:e.strokeTooltip()})}),t("rotation",function(t){e.canvasObject.isObjectFinished&&(e.actionButton("rotateLeft",function(){e.canvasObject.rotateLeft()},{innerIcon:"rotateLeft",tooltip:e.rotateLeftTooltip()}),e.actionButton("rotateRight",function(){e.canvasObject.rotateRight()},{innerIcon:"rotateRight",tooltip:e.rotateRightTooltip()}))}),t("confirmDrawing",function(t){e.canvasObject.isObjectFinished||(e.actionButton("confirmDrawing",e.action_finalizeDrawing.bind(e),{innerIcon:"freehandCheck",tooltip:e.applyDrawTooltip()}),e.afterRenderCallbacks.push(function(){!0!==e.canvasObject.interactiveMode.noLongerEmpty&&e.confirmDrawingElem.closest(".editpdf__menu__block").hide()}))}),this.onInternalEvent("interactive:no_longer_empty",function(t){e.confirmDrawingElem.closest(".editpdf__menu__block").show()}),this.blocks},a.prototype.action_finalizeDrawing=function(){this.triggerEvent("editor:finalize_interactive_mode")},Object.defineProperty(a.prototype,"confirmDrawingElem",{get:function(){return this.submenu.find(".confirmDrawing")},enumerable:!1,configurable:!0}),a.prototype.tooltip_mount_reposition_callback=function(t){var e="0px";this.isPreviewSidebarOpened()&&(e=this.mustAlignSubmenuToCenter()?"0px":"-62px"),n(t.popper).find(".tippy-box").css(r.Tools.textDirection,e)},a);function a(){return null!==t&&t.apply(this,arguments)||this}s.SubmenuFreehand=o}.call(this,l(1))},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.SubmenuShapeSelector=void 0,n(222)),n=(o=n.SubmenuBase,r(a,o),a.prototype.compose=function(){var e=this;return this.showRecycleBin=!1,this.alwaysBlockAlign=!0,this.block.bind(this)("allShapes",function(t){e.actionButton("selectLine",function(){e.selectLine()},{innerIcon:"shapeLine",tooltip:e.getTooltip("addLine")}),e.actionButton("selectRect",function(){e.selectRect()},{innerIcon:"shapeRect",tooltip:e.getTooltip("addRect")}),e.actionButton("selectEllipse",function(){e.selectEllipse()},{innerIcon:"shapeEllipse",tooltip:e.getTooltip("addEllipse")}),e.symbolsMenu("selectSymbols",{innerIcon:"symbols",tooltip:e.getTooltip("addSymbol")})}),this.blocks},a.prototype.selectLine=function(){this.menu.onMenuItemClick("line")},a.prototype.selectEllipse=function(){this.menu.onMenuItemClick("ellipse")},a.prototype.selectRect=function(){this.menu.onMenuItemClick("rect")},a);function a(){return null!==o&&o.apply(this,arguments)||this}e.SubmenuShapeSelector=n},function(t,e,n){"use strict";var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.SubmenuSymbol=void 0,n(222)),n=(o=n.SubmenuBase,r(a,o),a.prototype.compose=function(){var e=this,t=this.block.bind(this);return t("opacity",function(t){e.selectElement("opacity","getOpacityCollection","canvasObject.opacity",{leftsideIcon:"opacityCheckerboard",tooltip:e.opacityTooltip()})}),t("rotation",function(t){e.actionButton("rotateLeft",function(){e.canvasObject.rotateLeft()},{innerIcon:"rotateLeft",tooltip:e.rotateLeftTooltip()}),e.actionButton("rotateRight",function(){e.canvasObject.rotateRight()},{innerIcon:"rotateRight",tooltip:e.rotateRightTooltip()})}),this.blocks},a);function a(){return null!==o&&o.apply(this,arguments)||this}e.SubmenuSymbol=n},function(t,e,r){"use strict";!function(i){Object.defineProperty(e,"__esModule",{value:!0}),e.LayersPanel=void 0;var s=r(17),n=r(254),l=r(7),o=r(253);function t(t){var n=this;if(this.layerCreationCounter={},this.currNumOfElemsOnScreen=0,this.highestNumOfElemsOnScreen=0,this.createdPageSections={},this.numLayers=0,this.deleteAllCanvasObjects=function(){n.container.find(".layer");var t=new CustomEvent("canvas_object:remove_request:all",{detail:{}});window.dispatchEvent(t)},this.handleStoreLastMouseDownTarget=function(t){n.lastMouseDownTarget=t.target},this.handleDisableInputOnMouseUp=function(t){var e,t=i(t.target);t.is(".layer")||0<t.closest(".layer").length||(e=(t=i(n.lastMouseDownTarget)).is(".editpdf-selectable-text")||0<t.closest(".editpdf-selectable-text").length,t=t.closest("[data-canvas-object-id]").attr("data-canvas-object-id"),!n.activeLayer)||e&&t&&n.activeLayer.attr("data-canvas-object-id")===t||n.disableInputForLayer(n.activeLayer)},this.container=t,0==this.container.length)throw"[Editpdf][Layers panel] Layers container not found";this.initEventListeners(),this.initResetAllButton()}t.prototype.initResetAllButton=function(){var t=this.removeAllLayersBtn,e=this.deleteAllCanvasObjects;o.HandlerRegistry.cleanupRoutine(function(){return t.on("click",e),function(){return t.off("click",e)}})},t.prototype.addLayer=function(t){this.log("New layer created");var e=t.pdfPage.pageNumber,n=(n=this.fetchPageSection(e))||this.createPageSection(e),i=this.getTemplate("layer"),t=(i.attr("data-canvas-object-id",t.id),i.attr("data-canvas-object-type",t.type),this.initLayer(i,t),n.find(".unfinished-canvas-object"));0<t.length?(i.insertAfter(t),n=i.closest(".page-section").find(".layer").map(function(t,e){return e.getAttribute("data-canvas-object-id")}).toArray(),this.triggerCustomEvent("editor:canvas_object:rearrange_zindex",{pageNum:e,order:n})):i.insertAfter(".page-section[data-page='"+e+"'] .marker"),this.container.addClass("has-layers"),this.numLayers++},Object.defineProperty(t.prototype,"removeAllLayersBtn",{get:function(){return i("#reset-all-layers-btn")},enumerable:!1,configurable:!0}),t.prototype.getNewLayerNameFor=function(t){var e=t.type,e=(e in this.layerCreationCounter||(this.layerCreationCounter[e]=0),t.isObjectFinished?++this.layerCreationCounter[e]:"");return(l.Lang.t("layer_new_"+t.type)+" "+e).trim()},t.prototype.initLayer=function(e,t){var n=this,i=e.find(".layer__icon"),o=e.find(".layer__input"),r=e.find(".layer__edit"),a=e.find(".layer__trash");t.isObjectFinished||e.addClass("unfinished-canvas-object"),t.isCreatedViaUserInteraction()&&!t.isObjectFinished&&e.addClass("interactive-mode"),i.append(this.getToolIconFor(t)),o.val(this.getNewLayerNameFor(t)),this.disableInputForLayer(e),this.addTooltip(e.find(".layer__icon--drag"),{text:l.Lang.t("tooltip_layerReorder")}),this.addTooltip(r,{text:l.Lang.t("tooltip_layerRename"),constructorParams:{onHidden:function(t){o.prop("disabled")?t.setContent(l.Lang.t("tooltip_layerRename")):t.setContent(l.Lang.t("tooltip_layerConfirmRename"))}}}),this.addTooltip(a,{text:l.Lang.t("tooltip_removeLayer")}),e.find(".layer__edit").click(this.handleEditClick.bind(this)),e.find(".layer__trash").click(this.handleTrashClick.bind(this)),e.click(this.handleSetActiveElement.bind(this)),e.find(".input").keyup(this.handleEnterKeyOnInput.bind(this)),e.dblclick(this.handleScrollToViewObject.bind(this)),e.find(".layer__input").on("input",function(t){e.attr("data-pristine","false")}),o.closest(".form__group").dblclick(function(){n.enableInputForLayer(e),s.Tools.setInputCursorAtTheEnd(o)})},t.prototype.handleTrashClick=function(t){t=i(t.currentTarget).closest(".layer"),t=new CustomEvent("canvas_object:remove_request",{detail:{canvasObject:t.attr("data-canvas-object-id")}});window.dispatchEvent(t)},t.prototype.removeLayer=function(t){this.log("Removing layer created");var e=t.pdfPage.pageNumber,n=this.fetchPageSection(e),t=this.getLayerForCanvasObject(t);t&&(t.detach(),n.children().not(".marker").length<=0&&this.removePageSection(e),this.numLayers--,0===this.numLayers)&&this.container.removeClass("has-layers")},t.prototype.clearPanel=function(){var t=this.container[0].querySelector(".layers");t&&(t.innerHTML="",this.container.removeClass("has-layers"))},t.prototype.togglePanelContent=function(t){var e=this.container[0].querySelector(".tool__sidebar__editpdf-sidebar-wrapper");e&&(t?e.classList.remove("hidden"):e.classList.add("hidden"))},t.prototype.toggleEditor=function(t,e){var n=this.container,t="TrueEdit"===t?"trueedit":"editpdf";e?n.find('[data-editor-type="'+t+'"]').removeClass("hidden"):n.find('[data-editor-type="'+t+'"]').addClass("hidden")},t.prototype.addTooltip=function(t,e){var n=t;return e.on&&(n=t.find(e.on)),e.constructorParams||(e.constructorParams={}),window.tippy(n[0],Object.assign({content:e.text,arrow:!0,animation:"fade"},e.constructorParams)),n[0]._tippy},t.prototype.initSortableLayers=function(t){var n=this;new window.Sortable(t[0],{animation:200,handle:".layer__icon--drag",draggable:".layer",onUpdate:function(t){},onStart:function(t){},onEnd:function(t){var t=i(t.item),e=t.closest(".page-section[data-page]").attr("data-page"),t=t.closest(".page-section").find(".layer").map(function(t,e){return e.getAttribute("data-canvas-object-id")}).toArray();n.triggerCustomEvent("editor:canvas_object:rearrange_zindex",{pageNum:e,order:t})}})},t.prototype.handleScrollToViewObject=function(t){var e=i(t.target);(e.is(".layer")||e.is(".layer-content")||e.is(".layer__icon")||0<e.closest(".layer__icon").length)&&(t=(e=i(t.currentTarget)).closest(".page-section[data-page]").attr("data-page"),this.triggerCustomEvent("editor:canvas_object:scroll_to_view",{canvasObject:e.attr("data-canvas-object-id"),pageNum:t}))},t.prototype.handleEnterKeyOnInput=function(t){13===t.keyCode&&this.disableInputForLayer(i(t.currentTarget).closest(".layer"))},t.prototype.handleSetActiveElement=function(t){var e=i(t.currentTarget);i(t.target).hasClass("layer__icon--drag")||(t=e.attr("data-canvas-object-id"))!==(this.activeLayer?this.activeLayer.attr("data-canvas-object-id"):null)&&(e=e.closest(".page-section[data-page]").attr("data-page"),this.triggerCustomEvent("canvas_object:selected",{canvasObject:t,pageNum:e}))},t.prototype.handleEditClick=function(t){var t=i(t.currentTarget).closest(".layer"),e=t.find(".input");e.attr("disabled")?this.enableInputForLayer(t):this.disableInputForLayer(t),e.focus()},t.prototype.getLayerForCanvasObject=function(t){t=this.container.find("[data-canvas-object-id='"+t.id+"']");return 0===t.length?null:t},t.prototype.getToolIconFor=function(t){var t=t.type,e=null;switch(t){case"rect":case"ellipse":case"line":case"freehand":case"symbol":e=n.IconRepository.layerThumbnailShape();break;case"text":e=n.IconRepository.layerThumbnailText();break;case"img":e=n.IconRepository.layerThumbnailImage()}if(e)return e;throw"[Editpdf][Layers panel] Unknown tool icon for "+t},t.prototype.pageSectionExists=function(t){return null!==this.fetchPageSection(t)},t.prototype.createPageSection=function(e){var t=this.getTemplate("page-section"),n=this.container.find(".wrapper .layers"),i=(t.attr("data-page",e),t.html("<div class='marker'>"+l.Lang.t("layer_pageSection")+" "+e+"</div>"),Object.keys(this.createdPageSections).map(function(t){return Number(t)}).filter(function(t){return t<e}).sort(function(t,e){return t-e}));return 0===i.length?n.prepend(t):(n=i.pop(),t.insertAfter(".layers .page-section[data-page='"+n+"']")),this.log("Creating page section "+e),this.initSortableLayers(t),this.createdPageSections[e]=!0,t},t.prototype.removePageSection=function(t){var e=this.fetchPageSection(t);e&&(e.detach(),delete this.createdPageSections[t],this.log("Removing page section "+t))},t.prototype.fetchPageSection=function(t){var e=this.container.find(".layers .page-section[data-page='"+t+"']");return 0!==t&&0<e.length?e.eq(0):null},t.prototype.getTemplate=function(t){if("layer"==t)return i("\n      <div data-canvas-object-id='' class='layer' data-pristine=\"true\">\n        <span class=\"layer__icon--drag\">"+n.IconRepository.layersIcoDragSm()+'</span>\n        <div class=\'layer__content\'>\n          <div class="layer__icon"></div>\n          <div class="form__group form__group--input editpdf-selectable-text"><input class="layer__input input" type=\'text\'></div>\n          <div class="layer__edit">\n            <div class=\'enable-input unhide\'>'+n.IconRepository.layersPanelPencil()+"</div>\n            <div class='disable-input'><div class=\"btn-icon btn-icon--sm btn-icon--white\">"+n.IconRepository.layersPanelRightArrow()+'</div></div>\n          </div>\n          <div class="layer__trash">\n            '+n.IconRepository.layersPanelTrash()+"\n          </div>\n        </div>\n      </div>\n    ");if("page-section"==t)return i("<section class='page-section'>");throw"[Editpdf][Layers panel] Unknown template "+t},t.prototype.triggerCustomEvent=function(t,e){void 0===e&&(e={});t=new CustomEvent(t,{detail:e});window.dispatchEvent(t)},t.prototype.setActiveLayerForCanvasObject=function(t){this.activeLayer&&(this.disableInputForLayer(this.activeLayer),this.activeLayer.removeClass("active")),t&&this.container.find("[data-canvas-object-id='"+t.id+"']").addClass("active")},Object.defineProperty(t.prototype,"activeLayer",{get:function(){var t=this.container.find(".layer.active");return 0<t.length?t:null},enumerable:!1,configurable:!0}),t.prototype.checkInfoMessages=function(){4<=this.highestNumOfElemsOnScreen?i(".info.info--upToFourElements").hide():1<=this.highestNumOfElemsOnScreen&&(i(".info.info--noElements").hide(),i(".info.info--upToFourElements").show())},Object.defineProperty(t.prototype,"layersContainer",{get:function(){return this._layersContainer||(this._layersContainer=this.container.find(".wrapper .layers")),this._layersContainer},enumerable:!1,configurable:!0}),t.prototype.doesLayerExist=function(t){return 0<this.layersContainer.find(".layer[data-canvas-object-id="+t+"]").length},t.prototype.handleAddLayer=function(t){this.doesLayerExist(t.id)||(this.addLayer(t),this.currNumOfElemsOnScreen++,this.currNumOfElemsOnScreen>this.highestNumOfElemsOnScreen&&(this.highestNumOfElemsOnScreen=this.currNumOfElemsOnScreen),this.checkInfoMessages())},t.prototype.initEventListeners=function(){var n=this;window.addEventListener("canvas_object:created",o.HRS("canvas_object:created",function(t){var e=t.detail.canvasObject;!0!==t.detail.interactiveMode&&n.handleAddLayer(e)})),window.addEventListener("canvas_object:removed",o.HRS("canvas_object:removed",function(t){n.removeLayer(t.detail.canvasObject),n.currNumOfElemsOnScreen--,n.checkInfoMessages()})),window.addEventListener("editor:interactive:no_longer_empty",o.HRS("editor:interactive:no_longer_empty",function(t){t=t.detail.canvasObject;n.handleAddLayer(t)})),window.addEventListener("editor:active_canvas_object:change",o.HRS("editor:active_canvas_object:change",function(t){n.setActiveLayerForCanvasObject(t.detail.canvasObject)})),window.addEventListener("canvas_object:text:input",o.HRS("canvas_object:text:input",function(t){var e=t.detail.canvasObject,t=t.detail.text.trim(),e=i(".tool__sidebar .layers [data-canvas-object-id='"+e.id+"']");"true"===e.attr("data-pristine")&&e.find(".layer__input").val(t.substring(0,50))})),o.HandlerRegistry.cleanupRoutine(function(){return i(window).on("mousedown",n.handleStoreLastMouseDownTarget),i(window).on("mouseup",n.handleDisableInputOnMouseUp),function(){i(window).off("mousedown",n.handleStoreLastMouseDownTarget),i(window).off("mouseup",n.handleDisableInputOnMouseUp)}}),window.addEventListener("canvas_object:interactive_object_finished",o.HRS("canvas_object:interactive_object_finished",function(t){t=t.detail.canvasObject,t=n.getLayerForCanvasObject(t);t&&t.removeClass("interactive-mode")})),window.addEventListener("canvas_object:interactive_object_finished",o.HRS("canvas_object:interactive_object_finished",function(t){t=t.detail.canvasObject;if(!t.markedForDestruction){if(!t.isObjectFinished)throw"[Editpdf] Canvas Object should be finished";var e=n.getLayerForCanvasObject(t);e&&(e.removeClass("unfinished-canvas-object"),t=++n.layerCreationCounter[t.type],n.appendToLayerName(e," "+t))}}))},t.prototype.appendToLayerName=function(t,e){var t=t.find(".layer__input"),n=t.val();t.val(n+=e)},t.prototype.enableInputForLayer=function(t){var e=t.find(".layer__edit"),n=t.find(".form__group--input"),t=t.find(".input");e.find(".enable-input,.disable-input").removeClass("unhide"),e.find(".disable-input").addClass("unhide"),e.addClass("layer__edit--enabled"),n.removeAttr("disabled"),t.removeAttr("disabled")},t.prototype.disableInputForLayer=function(t){var e=t.find(".layer__edit"),n=t.find(".form__group--input"),t=t.find(".input");e.find(".enable-input,.disable-input").removeClass("unhide"),e.find(".enable-input").addClass("unhide"),e.removeClass("layer__edit--enabled"),n.attr("disabled","disabled"),t.attr("disabled","disabled")},t.prototype.log=function(t){},e.LayersPanel=t}.call(this,r(1))},function(t,o,r){"use strict";!function(c){Object.defineProperty(o,"__esModule",{value:!0}),o.ImageUploader=void 0;var e=r(77),n=r(115),i=r(101),u=r(116),d=r(63);function t(t){this.uploadedObjects={},this.promises_pendingObjectsToBeUploaded={},this.menu=t,this.init(),this.limits=t.editor.optionsInstance.limits}t.prototype.init=function(){var t=window;this.files=new e.FileStack,this.imageUploader=new n.PluploadUpload({id:"uploadImageBtn",container:"imgUploaderContainer",optionsManager:this,config:new i.Config({tool:"editpdf",subtool:"editpdf",config:{editpdf:{mimeTypes:[{title:"Image files",extensions:"png,jpg,jpeg,jfif,gif"}],multiSelection:!1}}}),files:this.files,workerServer:t.ilovepdf.processManager.workerServer,tool:"editpdf",servers:[],token:t.ilovepdf.processManager.token,taskId:t.ilovepdf.processManager.taskId,ignoreFiles:!0})},t.prototype.changeServer=function(t){},t.prototype.timeout=function(){},t.prototype.checkLimits=function(t,e){return t},t.prototype.fileUploaded=function(e,t){var n=this;this.files.updateFile(e,t),this.files.getFile(e).reUploaded&&(this.promises_pendingObjectsToBeUploaded[e]=Promise.resolve()),this.promises_pendingObjectsToBeUploaded[e].then(function(){var t=n.uploadedObjects[e];t.bag.uploader.server_filename=n.files.getFile(e).server_filename,t.bag.uploader.uploaded=!0,delete n.promises_pendingObjectsToBeUploaded[e]})},t.prototype.allFilesHaveBeenAddedToUploader=function(){return!0},t.prototype.fileAdded=function(a,t,e){var s=this,l="editpdf_img_"+a.id,n=c('<img id="'+l+"\" class='editpdf_uploaded_img'>"),i=(c(document.body).append(n),a.getSource().getSource()),n=new Promise(function(o,r){(new u.ImageView).renderImage(i,l,!0).then(function(n){a.width=n.width,a.height=n.height;function e(t){var e=s.editor.createCanvasObjectInActivePage("img",{imgDom:c(i)});e.bag.uploader||(e.bag.uploader={}),(s.uploadedObjects[a.id]=e).bag.uploader.uploaderName="ImageUploader",e.bag.uploader.uploaded=!1,o(n)}var i=document.getElementById(l);i.classList.add("ohidden");d.isIE11()?e():(i.onload=function(t){e()},i.onerror=function(t){r(t)})},function(t){r(t)})});return this.promises_pendingObjectsToBeUploaded[a.id]=n},t.prototype.setMenu=function(t){this.menu=t},Object.defineProperty(t.prototype,"editor",{get:function(){return this.menu.editor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uploader",{get:function(){return this.imageUploader},enumerable:!1,configurable:!0}),t.prototype.triggerEvent=function(t,e){void 0===e&&(e={});t=new CustomEvent(t,{detail:e});window.dispatchEvent(t)},t.prototype.fileChanged=function(t){},o.ImageUploader=t}.call(this,r(1))},function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasObjectExporter=void 0,n(7)),s=n(291),l=n(17),c=r(n(15)),r=(u.prototype.export=function(){var t=this.canvasObj;return t.isFormObject?this.exportFormObject():(t={canvas_obj_id:this.canvasObj.id,cloned_element:this.canvasObj.cloned?1:0,type:this.type,gravity:"Center",coordinates:this.coords,dimensions:this.dimensions,opacity:100*t.opacity,rotation:this.rotation,zindex:this.zindex,pages:this.pageNumber},"text"===this.type&&this.addTextProps(t),t)},u.prototype.exportFormObject=function(){var t=this.canvasObj,e=null;switch(t.pdfFormField.typeOfField){case"textbox":case"radiobutton":case"combobox":case"combtext":e=t.exportValue||"";break;case"checkbox":e=t.exportValue?"on":"off";break;case"choice":throw"[Editpdf][CanvasObjectExporter] To be implemented export value for type '"+t.pdfFormField.typeOfField+"'";case"listbox":e=t.exportValue;break;default:throw"[Editpdf][CanvasObjectExporter] Do not know how to export value for type '"+t.pdfFormField.typeOfField+"'"}return{fieldName:t.pdfFormField.fieldId,fieldValue:e}},u.prototype.addTextProps=function(t){window.peditor;var e=this.canvasObj;if(t.text=this.overridden_text,!e.fontFamily){if(e.setWritingSystems(t.text,!1),!e.fontFamily)try{e.reassignFontFamilyIfNecessary()}catch(t){c.captureMessage("Editpdf: Reassigning fontFamily threw an error")}e.fontFamily||(c.captureMessage("Editpdf: Font family was null and despite tryint to find an eligible font it was not possible to find one. Falling back to default font"),e.fontFamily=a.Lang.FALLBACK_FONT_FAMILY)}l.Tools.isTextRTL(t.text)&&(t.text=t.text.split("").reverse().join("")),t.text_align=e.textAlignment,t.font_size=e.fontSize/this.pxMag,t.font_color=e.textFillColor,t.font_family=e.fontFamily,t.background_color=e.textBackgroundColor,t.letter_spacing=e.letterSpacing/this.pxMag,t.line_height=e.lineHeight*e.fontSize/this.pxMag,t.underline_text=e.isUnderline?1:0,t.text_rectangle={w:this.dimensions.w,h:this.dimensions.h,x:this.coords.x,y:this.coords.y,units:this.sendCoordsAsPercentage?"percentage":"pixels",coord_frame:this.usePdfCoordFrame?"pdf":"screen"};var n="Regular";e.isBold&&e.isItalics?n="Bold Italic":e.isBold?n="Bold":e.isItalics&&(n="Italic"),t.font_style=n},Object.defineProperty(u.prototype,"zindex",{get:function(){return this.canvasObj.zindex},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"server_filename",{get:function(){if("text"===this.type)return null;var t=this.canvasObj.bag.uploader.server_filename;if(!t||t.length<=0)throw"[Editpdf] Server filename not present in canvas object with ID '"+this.canvasObj.id+"'";return t},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"size_x1",{get:function(){var t=this.overridden_size_x1?{w:this.overridden_size_x1.w,h:this.overridden_size_x1.h}:this.canvasObj.getSize_x1();return t.w/=this.pxMag,t.h/=this.pxMag,t},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"coords_x1",{get:function(){var t;return this.overridden_coords_x1?{x:this.overridden_coords_x1.x,y:this.overridden_coords_x1.y}:{x:(t=this.canvasObj.getCoords_x1()).x,y:t.y}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"dimensions",{get:function(){this.canvasObj;var t=this.size_x1;return{w:t.w,h:t.h}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"pdfPage_dimensions_x1",{get:function(){return this.pdfPage.originalDimensions_inPoints},enumerable:!1,configurable:!0}),u.prototype.toPositiveDegrees=function(t){return 0<=t?t:360-Math.abs(t)},u.prototype.reflect=function(t){return 0<t?360-t:0},Object.defineProperty(u.prototype,"rotation",{get:function(){var t=this.canvasObj.rotation,t=this.toPositiveDegrees(t);return this.reflect(t)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"pxMag",{get:function(){return this.pdfPage.pixelMagnification},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"coords",{get:function(){var t=this.coords_x1,e=this.pdfPage_dimensions_x1,n=s.CoordUtils.rotatePoint,i=this.canvasObj.rotation,o=this.canvasObj.centerPoint_x1;return(t=0<i?n(-1*i,t,o):t).x/=this.pxMag,t.y/=this.pxMag,this.usePdfCoordFrame&&(t.y=e.h-t.y,t.y-=this.size_x1.h),this.sendCoordsAsPercentage&&(t.x/=e.w,t.y/=e.h),{units:this.sendCoordsAsPercentage?"percentage":"pixels",coord_frame:this.usePdfCoordFrame?"pdf":"screen",x:t.x,y:t.y}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"type",{get:function(){if(this.isSvg)return"svg";switch(this.canvasObj.type){case"img":return"image";case"text":return"text";case"svg_object":return"svg";default:throw"[Editpdf][CanvasObjectExporter] Not identifiable type '"+this.canvasObj.type+"'"}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"pdfPage",{get:function(){return this.canvasObj.pdfPage},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"pageNumber",{get:function(){return this.pdfPage.pageNumber},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isSvg",{get:function(){return null!==this.canvasObj.extractSvg()},enumerable:!1,configurable:!0}),u);function u(t){this.usePdfCoordFrame=!0,this.sendCoordsAsPercentage=!1,this.overridden_coords_x1=null,this.overridden_size_x1=null,this.overridden_text=null,this.canvasObj=t}e.CanvasObjectExporter=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorConfig=void 0;var i=n(41);e.EditorConfig=function(t){this.formsEnabled="production"!==i.Settings.mode(),this.emptyFormInputs="production"!==i.Settings.mode(),this.filesKeepAliveInterval_ms=3e5,this.firstRender_pages_rendered_num=15,this.x1_pageDpi=150,this.previewPageDpi=50,this.defaultPageLayoutMode="single",this.viewportMinZoom=.05,this.viewportMaxZoom=20,this.aroundWorkAreaMargin=48,Object.assign(this,t)}},function(t,i,o){"use strict";!function(a){var t=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((l=l.apply(t,a||[])).next())})},s=this&&this.__generator||function(i,o){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))l.label=e[1];else if(6===e[0]&&l.label<s[1])l.label=s[1],s=e;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(e)}}e=o.call(i,l)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},l=(Object.defineProperty(i,"__esModule",{value:!0}),i.PdfRenderer=void 0,o(17)),n=o(189);function e(t,e){var s=this;this.renderPreviewPages=function(t,e){s.file;for(var n=s.fileNumPages,i=s.isPreviewPageRendered,o=l.Tools.keepInNumericBounds,r=(t=o(1,n,t),e=o(1,n,e),[]),a=t;a<=e;a++)i(a)||r.push(a);r.forEach(function(t){s._renderPreview(t)})},this.isPreviewPageRendered=function(t){var e=document.querySelector(".preview__page[data-page='"+t+"'] img");if(e)return!!e.getAttribute("src");throw new Error("Page "+t+" not found")},this.file=t,this.taskId=e.taskId,this.config=e.config,this.lowLevelRenderer=new n.PdfrenderView({workerServer:e.renderServer,files:void 0})}e.prototype.renderPage=function(o,r){return void 0===r&&(r=this.config.x1_pageDpi),t(this,void 0,void 0,function(){var e,n,i;return s(this,function(t){return e=this.taskId,n=this.file.server_filename.replace(".pdf",""),i=document.getElementById("page_"+this.file.id+"_"+o),a(".file_"+this.file.id+'[data-page="'+o+'"]').show(),this.lowLevelRenderer.renderPage(e,n,o,i,r,null,{resetForms:this.config.emptyFormInputs}),[2]})})},Object.defineProperty(e.prototype,"renderServer",{get:function(){return this.lowLevelRenderer.workerServer},set:function(t){this.lowLevelRenderer.workerServer=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fileNumPages",{get:function(){return parseInt(this.file.pages)},enumerable:!1,configurable:!0}),e.prototype._renderPreview=function(o,r){return void 0===r&&(r=this.config.previewPageDpi),t(this,void 0,void 0,function(){var e,n,i;return s(this,function(t){return e=this.taskId,n=this.file.server_filename.replace(".pdf",""),i=document.getElementById("preview_"+this.file.id+"_"+o),this.lowLevelRenderer.renderPage(e,n,o,i,r),[2]})})},i.PdfRenderer=e}.call(this,o(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorStateSaver=void 0;n(368);function i(){}i.save=function(t){},i.hasSavedState=function(){return!!this.lastState},i.load=function(t,e){void 0===e&&(e=null)},i.clear=function(){this.lastState=null},i.lastState=null,e.EditorStateSaver=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditpdfBreakpoints=void 0;function o(){}o.init=function(){if(!o._inited){o._inited=!0;for(var i=o.determineBreakpoint,t=1;t<10;t++){var e=window.getComputedStyle(document.documentElement).getPropertyValue("--editpdf-breakpoint-"+t);if(0===e.length)break;e=Number(e.replace("px",""));if(isNaN(e))throw new Error("Breakpoint isNaN");o.breakpoints.push(e)}o.currentBreakpoint=i(window.innerWidth),window.addEventListener("resize",function(t){var e,n=i(window.innerWidth);n!==o.currentBreakpoint&&(e=o.currentBreakpoint,o.currentBreakpoint=n=n,o._listener)&&o._listener(e,n)},!0)}},o._inited=!1,o.breakpoints=[],o.currentBreakpoint=null,o._listener=null,o.determineBreakpoint=function(t){var e=o.breakpoints;if(0===e.length)throw new Error("No breakpoints");for(var n=0;n<e.length;n++)if(t<=e[n])return n+1;return e.length+1},o.onBreakpointChange=function(t,e){o._listener=t,e.callNow&&t(null,o.currentBreakpoint)},e.EditpdfBreakpoints=o},function(t,e,n){"use strict";function i(t,e){for(var n=c(t),i=null===n,o=e.use,r=0,a=0;a<o;a++)void 0!==l.default.get(i?"fp"+a:"fps"+a+"_"+n)&&r++;return r}var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},l=(Object.defineProperty(e,"__esModule",{value:!0}),e.ToolPremiumUsageCounter=void 0,o(n(65))),c=function(t){return"editpdf"===t?1:null};function r(){}r.increment=function(t,e){var n=r.config[t];return!(!0===(null==e?void 0:e.once)&&t in r.changesRegistry&&!0===r.changesRegistry[t])&&(e=function(t,e){for(var n=c(t),i=null===n,o=e.timeout,r=e.use,a=0;a<r;a++){var s=i?"fp"+a:"fps"+a+"_"+n;if(!(void 0!==l.default.get(s)))return l.default.set(s,"1",{expires:o}),!0}return!1}("editpdf",n),r.changesRegistry[t]=!0,e)},r.limitReached=function(t){t=r.config[t];return i("editpdf",t)>=t.use},r.getCount=function(t){var e=r.config[t];return i(t,e)},r.config={},r.changesRegistry={},r.configTool=function(t,e){c(t);if(null===t)r.config._std=e;else{if(t in r.config)throw new Error("UsageCounter already configured for tool "+t);r.config[t]=e}},e.ToolPremiumUsageCounter=r},function(t,l,c){"use strict";!function(r){var i,o,t=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(l,"__esModule",{value:!0}),l.EditpdfProcess=void 0,c(17)),e=c(7),n=c(108),n=(o=n.Process,t(s,o),s.prototype.goDownload=function(t){var e=this.getUrls(),n=e.downloadPageUrl,e=e.fileUrl;this.onFileReadyToDownload({downloadPageUrl:n,fileUrl:e})},s.prototype.fatalError=function(t,e,n){this.callbacks.fatalError(t=void 0===t?null:t,e=void 0===e?null:e,n=void 0===n?null:n)&&o.prototype.fatalError.call(this,t,e,n)},s.prototype.showProcess=function(){},s.prototype.showUpload=function(){if(1!=this.processStarted){if("error"==this.status)return this.stop(),!0;var t=this;e.Lang.t("Uploading...");!0!==this.uploadShowStarted&&(this.uploadShowStarted=!0),t.uploadInterval=setInterval(function(){var n=0,i=0,o=!0;"error"==t.status&&t.stop(),t.checkFatalError(),r.each(t.files.files,function(t,e){!(e.percent<100)&&"server_filename"in e||!0!==e.error&&(o=!1,e.service,e.service),100==e.percent&&n++,i++,"drive"==e.service?100==e.percent&&0:"dropbox"==e.service?100==e.percent&&0:(100==e.percent?0:0<e.percent&&e.percent<100&&"html5"==e.runtime?(e.name,a.Tools.bytesToSize(e.size),r("#upload_"+e.id).addClass("uploading__files__item--active")):r("#upload_"+e.id).removeClass("uploading__files__item--active"),e.loaded,e.size,e.percent)}),n==i&&o&&"error"!=t.status&&(clearInterval(t.uploadInterval),window.setTimeout(function(){t.process()},200))},100)}},s.prototype.checkFatalError=function(){var t=o.prototype.checkFatalError.call(this);return t},s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.getUrls=function(){return{downloadPageUrl:window.location.origin+"/"+e.taskId+"/"+e.getWorkerNumber(),fileUrl:e.workerServer+"/v1/download/"+e.taskId}},e.goProblem=function(t){e.callbacks.goProblem(t=void 0===t?null:t)&&o.prototype.goProblem.call(e,t)},e}l.EditpdfProcess=n}.call(this,c(1))}]);